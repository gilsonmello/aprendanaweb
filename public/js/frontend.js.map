{"version":3,"sources":["modernizr.js","bootstrap.min.js","inputmask.js","jquery.inputmask.js","inputmask.extensions.js","jquery.maskMoney.js","shared.js","plugins.js","notification.js","jquery.dlmenu.js","owl.carousel.min.js","jquery.easing.min.js","autocomplete.js","jquery.magnific-popup.min.js","jquery.sticky-kit.min.js","jquery-easy-ticker.min.js","main.js","switcher.js","scroll.js","print.js","carousel.js","moment.min.js","locale-all.js","fullcalendar.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC71CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3lDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtMA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3eA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"frontend.js","sourcesContent":["/* Modernizr 2.6.2 (Custom Build) | MIT & BSD\r\n * Build: http://modernizr.com/download/#-cssanimations-csstransitions-touch-shiv-cssclasses-prefixed-teststyles-testprop-testallprops-prefixes-domprefixes-load\r\n */\r\n;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+\";\")+(b||\"\"))}function B(a,b){return typeof a===b}function C(a,b){return!!~(\"\"+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,\"-\")&&j[e]!==c)return b==\"pfx\"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,\"function\")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+\" \"+o.join(d+\" \")+d).split(\" \");return B(b,\"string\")||B(b,\"undefined\")?D(e,b):(e=(a+\" \"+p.join(d+\" \")+d).split(\" \"),E(e,b,c))}var d=\"2.6.2\",e={},f=!0,g=b.documentElement,h=\"modernizr\",i=b.createElement(h),j=i.style,k,l={}.toString,m=\" -webkit- -moz- -o- -ms- \".split(\" \"),n=\"Webkit Moz O ms\",o=n.split(\" \"),p=n.toLowerCase().split(\" \"),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement(\"div\"),m=b.body,n=m||b.createElement(\"body\");if(parseInt(d,10))while(d--)j=b.createElement(\"div\"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=[\"&#173;\",'<style id=\"s',h,'\">',a,\"</style>\"].join(\"\"),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background=\"\",n.style.overflow=\"hidden\",k=g.style.overflow,g.style.overflow=\"hidden\",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty,y;!B(x,\"undefined\")&&!B(x.call,\"undefined\")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],\"undefined\")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!=\"function\")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.touch=function(){var c;return\"ontouchstart\"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:w([\"@media (\",m.join(\"touch-enabled),(\"),h,\")\",\"{#modernizr{top:9px;position:absolute}}\"].join(\"\"),function(a){c=a.offsetTop===9}),c},q.cssanimations=function(){return F(\"animationName\")},q.csstransitions=function(){return F(\"transition\")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?\"\":\"no-\")+v));return e.addTest=function(a,b){if(typeof a==\"object\")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b==\"function\"?b():b,typeof f!=\"undefined\"&&f&&(g.className+=\" \"+(b?\"\":\"no-\")+a),e[a]=b}return e},z(\"\"),i=k=null,function(a,b){function k(a,b){var c=a.createElement(\"p\"),d=a.getElementsByTagName(\"head\")[0]||a.documentElement;return c.innerHTML=\"x<style>\"+b+\"</style>\",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a==\"string\"?a.split(\" \"):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function(\"h,f\",\"return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(\"+l().join().replace(/\\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c(\"'+a+'\")'})+\");return n}\")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,\"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}\")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g=\"_html5shiv\",h=0,i={},j;(function(){try{var a=b.createElement(\"a\");a.innerHTML=\"<xyz></xyz>\",f=\"hidden\"in a,j=a.childNodes.length==1||function(){b.createElement(\"a\");var a=b.createDocumentFragment();return typeof a.cloneNode==\"undefined\"||typeof a.createDocumentFragment==\"undefined\"||typeof a.createElement==\"undefined\"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||\"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video\",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:\"default\",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,\"pfx\")},g.className=g.className.replace(/(^|\\s)no-js(\\s|$)/,\"$1$2\")+(f?\" js \"+t.join(\" \"):\"\"),e}(this,this.document),function(a,b,c){function d(a){return\"[object Function]\"==o.call(a)}function e(a){return\"string\"==typeof a}function f(){}function g(a){return!a||\"loaded\"==a||\"complete\"==a||\"uninitialized\"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){(\"c\"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){\"img\"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),\"object\"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height=\"0\",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),\"img\"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||\"j\",e(a)?i(\"c\"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName(\"script\")[0],o={}.toString,p=[],q=0,r=\"MozAppearance\"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&\"[object Opera]\"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?\"object\":l?\"script\":\"img\",v=l?\"script\":u,w=Array.isArray||function(a){return\"[object Array]\"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split(\"!\"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split(\"=\"),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(\".\").pop().split(\"?\").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split(\"/\").pop().split(\"?\")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&\"css\"==i.url.split(\".\").pop().split(\"?\").shift()?\"c\":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState=\"loading\",b.addEventListener(\"DOMContentLoaded\",A=function(){b.removeEventListener(\"DOMContentLoaded\",A,0),b.readyState=\"complete\"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement(\"script\"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement(\"link\"),j,c=i?h:c||f;e.href=a,e.rel=\"stylesheet\",e.type=\"text/css\";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};","/*!\n * Bootstrap v3.3.7 (http://getbootstrap.com)\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under the MIT license\n */\nif(\"undefined\"==typeof jQuery)throw new Error(\"Bootstrap's JavaScript requires jQuery\");+function(a){\"use strict\";var b=a.fn.jquery.split(\" \")[0].split(\".\");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error(\"Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4\")}(jQuery),+function(a){\"use strict\";function b(){var a=document.createElement(\"bootstrap\"),b={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(\"bsTransitionEnd\",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var c=a(this),e=c.data(\"bs.alert\");e||c.data(\"bs.alert\",e=new d(this)),\"string\"==typeof b&&e[b].call(c)})}var c='[data-dismiss=\"alert\"]',d=function(b){a(b).on(\"click\",c,this.close)};d.VERSION=\"3.3.7\",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger(\"closed.bs.alert\").remove()}var e=a(this),f=e.attr(\"data-target\");f||(f=e.attr(\"href\"),f=f&&f.replace(/.*(?=#[^\\s]*$)/,\"\"));var g=a(\"#\"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(\".alert\")),g.trigger(b=a.Event(\"close.bs.alert\")),b.isDefaultPrevented()||(g.removeClass(\"in\"),a.support.transition&&g.hasClass(\"fade\")?g.one(\"bsTransitionEnd\",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on(\"click.bs.alert.data-api\",c,d.prototype.close)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.button\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.button\",e=new c(this,f)),\"toggle\"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION=\"3.3.7\",c.DEFAULTS={loadingText:\"loading...\"},c.prototype.setState=function(b){var c=\"disabled\",d=this.$element,e=d.is(\"input\")?\"val\":\"html\",f=d.data();b+=\"Text\",null==f.resetText&&d.data(\"resetText\",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),\"loadingText\"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle=\"buttons\"]');if(b.length){var c=this.$element.find(\"input\");\"radio\"==c.prop(\"type\")?(c.prop(\"checked\")&&(a=!1),b.find(\".active\").removeClass(\"active\"),this.$element.addClass(\"active\")):\"checkbox\"==c.prop(\"type\")&&(c.prop(\"checked\")!==this.$element.hasClass(\"active\")&&(a=!1),this.$element.toggleClass(\"active\")),c.prop(\"checked\",this.$element.hasClass(\"active\")),a&&c.trigger(\"change\")}else this.$element.attr(\"aria-pressed\",!this.$element.hasClass(\"active\")),this.$element.toggleClass(\"active\")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on(\"click.bs.button.data-api\",'[data-toggle^=\"button\"]',function(c){var d=a(c.target).closest(\".btn\");b.call(d,\"toggle\"),a(c.target).is('input[type=\"radio\"], input[type=\"checkbox\"]')||(c.preventDefault(),d.is(\"input,button\")?d.trigger(\"focus\"):d.find(\"input:visible,button:visible\").first().trigger(\"focus\"))}).on(\"focus.bs.button.data-api blur.bs.button.data-api\",'[data-toggle^=\"button\"]',function(b){a(b.target).closest(\".btn\").toggleClass(\"focus\",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.carousel\"),f=a.extend({},c.DEFAULTS,d.data(),\"object\"==typeof b&&b),g=\"string\"==typeof b?b:f.slide;e||d.data(\"bs.carousel\",e=new c(this,f)),\"number\"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(\".carousel-indicators\"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on(\"keydown.bs.carousel\",a.proxy(this.keydown,this)),\"hover\"==this.options.pause&&!(\"ontouchstart\"in document.documentElement)&&this.$element.on(\"mouseenter.bs.carousel\",a.proxy(this.pause,this)).on(\"mouseleave.bs.carousel\",a.proxy(this.cycle,this))};c.VERSION=\"3.3.7\",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:\"hover\",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(\".item\"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d=\"prev\"==a&&0===c||\"next\"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e=\"prev\"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(\".item.active\"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one(\"slid.bs.carousel\",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?\"next\":\"prev\",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(\".next, .prev\").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide(\"next\")},c.prototype.prev=function(){if(!this.sliding)return this.slide(\"prev\")},c.prototype.slide=function(b,d){var e=this.$element.find(\".item.active\"),f=d||this.getItemForDirection(b,e),g=this.interval,h=\"next\"==b?\"left\":\"right\",i=this;if(f.hasClass(\"active\"))return this.sliding=!1;var j=f[0],k=a.Event(\"slide.bs.carousel\",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(\".active\").removeClass(\"active\");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass(\"active\")}var m=a.Event(\"slid.bs.carousel\",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass(\"slide\")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one(\"bsTransitionEnd\",function(){f.removeClass([b,h].join(\" \")).addClass(\"active\"),e.removeClass([\"active\",h].join(\" \")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass(\"active\"),f.addClass(\"active\"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr(\"data-target\")||(d=e.attr(\"href\"))&&d.replace(/.*(?=#[^\\s]+$)/,\"\"));if(f.hasClass(\"carousel\")){var g=a.extend({},f.data(),e.data()),h=e.attr(\"data-slide-to\");h&&(g.interval=!1),b.call(f,g),h&&f.data(\"bs.carousel\").to(h),c.preventDefault()}};a(document).on(\"click.bs.carousel.data-api\",\"[data-slide]\",e).on(\"click.bs.carousel.data-api\",\"[data-slide-to]\",e),a(window).on(\"load\",function(){a('[data-ride=\"carousel\"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){\"use strict\";function b(b){var c,d=b.attr(\"data-target\")||(c=b.attr(\"href\"))&&c.replace(/.*(?=#[^\\s]+$)/,\"\");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data(\"bs.collapse\"),f=a.extend({},d.DEFAULTS,c.data(),\"object\"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data(\"bs.collapse\",e=new d(this,f)),\"string\"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle=\"collapse\"][href=\"#'+b.id+'\"],[data-toggle=\"collapse\"][data-target=\"#'+b.id+'\"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION=\"3.3.7\",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass(\"width\");return a?\"width\":\"height\"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass(\"in\")){var b,e=this.$parent&&this.$parent.children(\".panel\").children(\".in, .collapsing\");if(!(e&&e.length&&(b=e.data(\"bs.collapse\"),b&&b.transitioning))){var f=a.Event(\"show.bs.collapse\");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,\"hide\"),b||e.data(\"bs.collapse\",null));var g=this.dimension();this.$element.removeClass(\"collapse\").addClass(\"collapsing\")[g](0).attr(\"aria-expanded\",!0),this.$trigger.removeClass(\"collapsed\").attr(\"aria-expanded\",!0),this.transitioning=1;var h=function(){this.$element.removeClass(\"collapsing\").addClass(\"collapse in\")[g](\"\"),this.transitioning=0,this.$element.trigger(\"shown.bs.collapse\")};if(!a.support.transition)return h.call(this);var i=a.camelCase([\"scroll\",g].join(\"-\"));this.$element.one(\"bsTransitionEnd\",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass(\"in\")){var b=a.Event(\"hide.bs.collapse\");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass(\"collapsing\").removeClass(\"collapse in\").attr(\"aria-expanded\",!1),this.$trigger.addClass(\"collapsed\").attr(\"aria-expanded\",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass(\"collapsing\").addClass(\"collapse\").trigger(\"hidden.bs.collapse\")};return a.support.transition?void this.$element[c](0).one(\"bsTransitionEnd\",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass(\"in\")?\"hide\":\"show\"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle=\"collapse\"][data-parent=\"'+this.options.parent+'\"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass(\"in\");a.attr(\"aria-expanded\",c),b.toggleClass(\"collapsed\",!c).attr(\"aria-expanded\",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on(\"click.bs.collapse.data-api\",'[data-toggle=\"collapse\"]',function(d){var e=a(this);e.attr(\"data-target\")||d.preventDefault();var f=b(e),g=f.data(\"bs.collapse\"),h=g?\"toggle\":e.data();c.call(f,h)})}(jQuery),+function(a){\"use strict\";function b(b){var c=b.attr(\"data-target\");c||(c=b.attr(\"href\"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\\s]*$)/,\"\"));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass(\"open\")&&(c&&\"click\"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event(\"hide.bs.dropdown\",f)),c.isDefaultPrevented()||(d.attr(\"aria-expanded\",\"false\"),e.removeClass(\"open\").trigger(a.Event(\"hidden.bs.dropdown\",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data(\"bs.dropdown\");d||c.data(\"bs.dropdown\",d=new g(this)),\"string\"==typeof b&&d[b].call(c)})}var e=\".dropdown-backdrop\",f='[data-toggle=\"dropdown\"]',g=function(b){a(b).on(\"click.bs.dropdown\",this.toggle)};g.VERSION=\"3.3.7\",g.prototype.toggle=function(d){var e=a(this);if(!e.is(\".disabled, :disabled\")){var f=b(e),g=f.hasClass(\"open\");if(c(),!g){\"ontouchstart\"in document.documentElement&&!f.closest(\".navbar-nav\").length&&a(document.createElement(\"div\")).addClass(\"dropdown-backdrop\").insertAfter(a(this)).on(\"click\",c);var h={relatedTarget:this};if(f.trigger(d=a.Event(\"show.bs.dropdown\",h)),d.isDefaultPrevented())return;e.trigger(\"focus\").attr(\"aria-expanded\",\"true\"),f.toggleClass(\"open\").trigger(a.Event(\"shown.bs.dropdown\",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(\".disabled, :disabled\")){var e=b(d),g=e.hasClass(\"open\");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger(\"focus\"),d.trigger(\"click\");var h=\" li:not(.disabled):visible a\",i=e.find(\".dropdown-menu\"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger(\"focus\")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on(\"click.bs.dropdown.data-api\",c).on(\"click.bs.dropdown.data-api\",\".dropdown form\",function(a){a.stopPropagation()}).on(\"click.bs.dropdown.data-api\",f,g.prototype.toggle).on(\"keydown.bs.dropdown.data-api\",f,g.prototype.keydown).on(\"keydown.bs.dropdown.data-api\",\".dropdown-menu\",g.prototype.keydown)}(jQuery),+function(a){\"use strict\";function b(b,d){return this.each(function(){var e=a(this),f=e.data(\"bs.modal\"),g=a.extend({},c.DEFAULTS,e.data(),\"object\"==typeof b&&b);f||e.data(\"bs.modal\",f=new c(this,g)),\"string\"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(\".modal-dialog\"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(\".modal-content\").load(this.options.remote,a.proxy(function(){this.$element.trigger(\"loaded.bs.modal\")},this))};c.VERSION=\"3.3.7\",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event(\"show.bs.modal\",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass(\"modal-open\"),this.escape(),this.resize(),this.$element.on(\"click.dismiss.bs.modal\",'[data-dismiss=\"modal\"]',a.proxy(this.hide,this)),this.$dialog.on(\"mousedown.dismiss.bs.modal\",function(){d.$element.one(\"mouseup.dismiss.bs.modal\",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass(\"fade\");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass(\"in\"),d.enforceFocus();var f=a.Event(\"shown.bs.modal\",{relatedTarget:b});e?d.$dialog.one(\"bsTransitionEnd\",function(){d.$element.trigger(\"focus\").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger(\"focus\").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event(\"hide.bs.modal\"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off(\"focusin.bs.modal\"),this.$element.removeClass(\"in\").off(\"click.dismiss.bs.modal\").off(\"mouseup.dismiss.bs.modal\"),this.$dialog.off(\"mousedown.dismiss.bs.modal\"),a.support.transition&&this.$element.hasClass(\"fade\")?this.$element.one(\"bsTransitionEnd\",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off(\"focusin.bs.modal\").on(\"focusin.bs.modal\",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger(\"focus\")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on(\"keydown.dismiss.bs.modal\",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off(\"keydown.dismiss.bs.modal\")},c.prototype.resize=function(){this.isShown?a(window).on(\"resize.bs.modal\",a.proxy(this.handleUpdate,this)):a(window).off(\"resize.bs.modal\")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass(\"modal-open\"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger(\"hidden.bs.modal\")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass(\"fade\")?\"fade\":\"\";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement(\"div\")).addClass(\"modal-backdrop \"+e).appendTo(this.$body),this.$element.on(\"click.dismiss.bs.modal\",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&(\"static\"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass(\"in\"),!b)return;f?this.$backdrop.one(\"bsTransitionEnd\",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass(\"in\");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass(\"fade\")?this.$backdrop.one(\"bsTransitionEnd\",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:\"\",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:\"\"})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:\"\",paddingRight:\"\"})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css(\"padding-right\")||0,10);this.originalBodyPad=document.body.style.paddingRight||\"\",this.bodyIsOverflowing&&this.$body.css(\"padding-right\",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css(\"padding-right\",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement(\"div\");a.className=\"modal-scrollbar-measure\",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on(\"click.bs.modal.data-api\",'[data-toggle=\"modal\"]',function(c){var d=a(this),e=d.attr(\"href\"),f=a(d.attr(\"data-target\")||e&&e.replace(/.*(?=#[^\\s]+$)/,\"\")),g=f.data(\"bs.modal\")?\"toggle\":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is(\"a\")&&c.preventDefault(),f.one(\"show.bs.modal\",function(a){a.isDefaultPrevented()||f.one(\"hidden.bs.modal\",function(){d.is(\":visible\")&&d.trigger(\"focus\")})}),b.call(f,g,this)})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tooltip\"),f=\"object\"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data(\"bs.tooltip\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init(\"tooltip\",a,b)};c.VERSION=\"3.3.7\",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:\"top\",selector:!1,template:'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',trigger:\"hover focus\",title:\"\",delay:0,html:!1,container:!1,viewport:{selector:\"body\",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error(\"`selector` option must be specified when initializing \"+this.type+\" on the window.document object!\");for(var e=this.options.trigger.split(\" \"),f=e.length;f--;){var g=e[f];if(\"click\"==g)this.$element.on(\"click.\"+this.type,this.options.selector,a.proxy(this.toggle,this));else if(\"manual\"!=g){var h=\"hover\"==g?\"mouseenter\":\"focusin\",i=\"hover\"==g?\"mouseleave\":\"focusout\";this.$element.on(h+\".\"+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+\".\"+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:\"manual\",selector:\"\"}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&\"number\"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusin\"==b.type?\"focus\":\"hover\"]=!0),c.tip().hasClass(\"in\")||\"in\"==c.hoverState?void(c.hoverState=\"in\"):(clearTimeout(c.timeout),c.hoverState=\"in\",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){\"in\"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusout\"==b.type?\"focus\":\"hover\"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState=\"out\",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){\"out\"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event(\"show.bs.\"+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr(\"id\",g),this.$element.attr(\"aria-describedby\",g),this.options.animation&&f.addClass(\"fade\");var h=\"function\"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\\s?auto?\\s?/i,j=i.test(h);j&&(h=h.replace(i,\"\")||\"top\"),f.detach().css({top:0,left:0,display:\"block\"}).addClass(h).data(\"bs.\"+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger(\"inserted.bs.\"+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h=\"bottom\"==h&&k.bottom+m>o.bottom?\"top\":\"top\"==h&&k.top-m<o.top?\"bottom\":\"right\"==h&&k.right+l>o.width?\"left\":\"left\"==h&&k.left-l<o.left?\"right\":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger(\"shown.bs.\"+e.type),e.hoverState=null,\"out\"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css(\"margin-top\"),10),h=parseInt(d.css(\"margin-left\"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass(\"in\");var i=d[0].offsetWidth,j=d[0].offsetHeight;\"top\"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?\"offsetWidth\":\"offsetHeight\";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?\"left\":\"top\",50*(1-a/b)+\"%\").css(c?\"top\":\"left\",\"\")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(\".tooltip-inner\")[this.options.html?\"html\":\"text\"](b),a.removeClass(\"fade in top bottom left right\")},c.prototype.hide=function(b){function d(){\"in\"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr(\"aria-describedby\").trigger(\"hidden.bs.\"+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event(\"hide.bs.\"+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass(\"in\"),a.support.transition&&f.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr(\"title\")||\"string\"!=typeof a.attr(\"data-original-title\"))&&a.attr(\"data-original-title\",a.attr(\"title\")||\"\").attr(\"title\",\"\")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d=\"BODY\"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return\"bottom\"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:\"top\"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:\"left\"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr(\"data-original-title\")||(\"function\"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+\" `template` option must consist of exactly 1 top-level element!\");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".tooltip-arrow\")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data(\"bs.\"+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass(\"in\")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off(\".\"+a.type).removeData(\"bs.\"+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.popover\"),f=\"object\"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data(\"bs.popover\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.init(\"popover\",a,b)};if(!a.fn.tooltip)throw new Error(\"Popover requires tooltip.js\");c.VERSION=\"3.3.7\",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:\"right\",trigger:\"click\",content:\"\",template:'<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(\".popover-title\")[this.options.html?\"html\":\"text\"](b),a.find(\".popover-content\").children().detach().end()[this.options.html?\"string\"==typeof c?\"html\":\"append\":\"text\"](c),a.removeClass(\"fade top bottom left right in\"),a.find(\".popover-title\").html()||a.find(\".popover-title\").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr(\"data-content\")||(\"function\"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".arrow\")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){\"use strict\";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||\"\")+\" .nav li > a\",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on(\"scroll.bs.scrollspy\",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data(\"bs.scrollspy\"),f=\"object\"==typeof c&&c;e||d.data(\"bs.scrollspy\",e=new b(this,f)),\"string\"==typeof c&&e[c]()})}b.VERSION=\"3.3.7\",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c=\"offset\",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c=\"position\",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data(\"target\")||b.attr(\"href\"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(\":visible\")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){\nthis.activeTarget=b,this.clear();var c=this.selector+'[data-target=\"'+b+'\"],'+this.selector+'[href=\"'+b+'\"]',d=a(c).parents(\"li\").addClass(\"active\");d.parent(\".dropdown-menu\").length&&(d=d.closest(\"li.dropdown\").addClass(\"active\")),d.trigger(\"activate.bs.scrollspy\")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,\".active\").removeClass(\"active\")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on(\"load.bs.scrollspy.data-api\",function(){a('[data-spy=\"scroll\"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tab\");e||d.data(\"bs.tab\",e=new c(this)),\"string\"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION=\"3.3.7\",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest(\"ul:not(.dropdown-menu)\"),d=b.data(\"target\");if(d||(d=b.attr(\"href\"),d=d&&d.replace(/.*(?=#[^\\s]*$)/,\"\")),!b.parent(\"li\").hasClass(\"active\")){var e=c.find(\".active:last a\"),f=a.Event(\"hide.bs.tab\",{relatedTarget:b[0]}),g=a.Event(\"show.bs.tab\",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest(\"li\"),c),this.activate(h,h.parent(),function(){e.trigger({type:\"hidden.bs.tab\",relatedTarget:b[0]}),b.trigger({type:\"shown.bs.tab\",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass(\"active\").find(\"> .dropdown-menu > .active\").removeClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!1),b.addClass(\"active\").find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),h?(b[0].offsetWidth,b.addClass(\"in\")):b.removeClass(\"fade\"),b.parent(\".dropdown-menu\").length&&b.closest(\"li.dropdown\").addClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),e&&e()}var g=d.find(\"> .active\"),h=e&&a.support.transition&&(g.length&&g.hasClass(\"fade\")||!!d.find(\"> .fade\").length);g.length&&h?g.one(\"bsTransitionEnd\",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass(\"in\")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),\"show\")};a(document).on(\"click.bs.tab.data-api\",'[data-toggle=\"tab\"]',e).on(\"click.bs.tab.data-api\",'[data-toggle=\"pill\"]',e)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.affix\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.affix\",e=new c(this,f)),\"string\"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on(\"scroll.bs.affix.data-api\",a.proxy(this.checkPosition,this)).on(\"click.bs.affix.data-api\",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION=\"3.3.7\",c.RESET=\"affix affix-top affix-bottom\",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&\"top\"==this.affixed)return e<c&&\"top\";if(\"bottom\"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&\"bottom\":!(e+g<=a-d)&&\"bottom\";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?\"top\":null!=d&&i+j>=a-d&&\"bottom\"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass(\"affix\");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(\":visible\")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());\"object\"!=typeof d&&(f=e=d),\"function\"==typeof e&&(e=d.top(this.$element)),\"function\"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css(\"top\",\"\");var i=\"affix\"+(h?\"-\"+h:\"\"),j=a.Event(i+\".bs.affix\");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin=\"bottom\"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace(\"affix\",\"affixed\")+\".bs.affix\")}\"bottom\"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on(\"load\",function(){a('[data-spy=\"affix\"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);","/*!\r\n* inputmask.js\r\n* http://github.com/RobinHerbots/jquery.inputmask\r\n* Copyright (c) 2010 - 2015 Robin Herbots\r\n* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)\r\n* Version: 3.2.1-113\r\n*/\r\n!function(factory) {\r\n    \"function\" == typeof define && define.amd ? define([ \"inputmask.dependencyLib\" ], factory) : \"object\" == typeof exports ? module.exports = factory(require(\"./inputmask.dependencyLib\")) : factory(window.dependencyLib || jQuery);\r\n}(function($) {\r\n    function Inputmask(alias, options) {\r\n        return this instanceof Inputmask ? (\"object\" == typeof alias ? options = alias : (options = options || {}, \r\n        options.alias = alias), this.el = void 0, this.opts = $.extend(!0, {}, this.defaults, options), \r\n        this.noMasksCache = options && void 0 !== options.definitions, this.userOptions = options || {}, \r\n        void resolveAlias(this.opts.alias, options, this.opts)) : new Inputmask(alias, options);\r\n    }\r\n    function isInputEventSupported(eventName) {\r\n        var el = document.createElement(\"input\"), evName = \"on\" + eventName, isSupported = evName in el;\r\n        return isSupported || (el.setAttribute(evName, \"return;\"), isSupported = \"function\" == typeof el[evName]), \r\n        el = null, isSupported;\r\n    }\r\n    function isInputTypeSupported(inputType) {\r\n        var isSupported = \"text\" === inputType || \"tel\" === inputType || \"password\" === inputType;\r\n        if (!isSupported) {\r\n            var el = document.createElement(\"input\");\r\n            el.setAttribute(\"type\", inputType), isSupported = \"text\" === el.type, el = null;\r\n        }\r\n        return isSupported;\r\n    }\r\n    function resolveAlias(aliasStr, options, opts) {\r\n        var aliasDefinition = opts.aliases[aliasStr];\r\n        return aliasDefinition ? (aliasDefinition.alias && resolveAlias(aliasDefinition.alias, void 0, opts), \r\n        $.extend(!0, opts, aliasDefinition), $.extend(!0, opts, options), !0) : (null === opts.mask && (opts.mask = aliasStr), \r\n        !1);\r\n    }\r\n    function importAttributeOptions(npt, opts, userOptions) {\r\n        function importOption(option) {\r\n            var optionData = npt.getAttribute(\"data-inputmask-\" + option.toLowerCase());\r\n            null !== optionData && (optionData = \"boolean\" == typeof optionData ? optionData : optionData.toString(), \r\n            \"string\" == typeof optionData && 0 === option.indexOf(\"on\") && (optionData = eval(\"(\" + optionData + \")\")), \r\n            \"mask\" === option && 0 === optionData.indexOf(\"[\") ? (userOptions[option] = optionData.replace(/[\\s[\\]]/g, \"\").split(\",\"), \r\n            userOptions[option][0] = userOptions[option][0].replace(\"'\", \"\"), userOptions[option][userOptions[option].length - 1] = userOptions[option][userOptions[option].length - 1].replace(\"'\", \"\")) : userOptions[option] = optionData);\r\n        }\r\n        var attrOptions = npt.getAttribute(\"data-inputmask\");\r\n        if (attrOptions && \"\" !== attrOptions) try {\r\n            attrOptions = attrOptions.replace(new RegExp(\"'\", \"g\"), '\"');\r\n            var dataoptions = $.parseJSON(\"{\" + attrOptions + \"}\");\r\n            $.extend(!0, userOptions, dataoptions);\r\n        } catch (ex) {}\r\n        for (var option in opts) importOption(option);\r\n        if (userOptions.alias) {\r\n            resolveAlias(userOptions.alias, userOptions, opts);\r\n            for (option in opts) importOption(option);\r\n        }\r\n        return $.extend(!0, opts, userOptions), opts;\r\n    }\r\n    function generateMaskSet(opts, nocache) {\r\n        function analyseMask(mask) {\r\n            function MaskToken(isGroup, isOptional, isQuantifier, isAlternator) {\r\n                this.matches = [], this.isGroup = isGroup || !1, this.isOptional = isOptional || !1, \r\n                this.isQuantifier = isQuantifier || !1, this.isAlternator = isAlternator || !1, \r\n                this.quantifier = {\r\n                    min: 1,\r\n                    max: 1\r\n                };\r\n            }\r\n            function insertTestDefinition(mtoken, element, position) {\r\n                var maskdef = opts.definitions[element];\r\n                position = void 0 !== position ? position : mtoken.matches.length;\r\n                var prevMatch = mtoken.matches[position - 1];\r\n                if (maskdef && !escaped) {\r\n                    maskdef.placeholder = $.isFunction(maskdef.placeholder) ? maskdef.placeholder.call(this, opts) : maskdef.placeholder;\r\n                    for (var prevalidators = maskdef.prevalidator, prevalidatorsL = prevalidators ? prevalidators.length : 0, i = 1; i < maskdef.cardinality; i++) {\r\n                        var prevalidator = prevalidatorsL >= i ? prevalidators[i - 1] : [], validator = prevalidator.validator, cardinality = prevalidator.cardinality;\r\n                        mtoken.matches.splice(position++, 0, {\r\n                            fn: validator ? \"string\" == typeof validator ? new RegExp(validator) : new function() {\r\n                                this.test = validator;\r\n                            }() : new RegExp(\".\"),\r\n                            cardinality: cardinality ? cardinality : 1,\r\n                            optionality: mtoken.isOptional,\r\n                            newBlockMarker: void 0 === prevMatch || prevMatch.def !== (maskdef.definitionSymbol || element),\r\n                            casing: maskdef.casing,\r\n                            def: maskdef.definitionSymbol || element,\r\n                            placeholder: maskdef.placeholder,\r\n                            mask: element\r\n                        }), prevMatch = mtoken.matches[position - 1];\r\n                    }\r\n                    mtoken.matches.splice(position++, 0, {\r\n                        fn: maskdef.validator ? \"string\" == typeof maskdef.validator ? new RegExp(maskdef.validator) : new function() {\r\n                            this.test = maskdef.validator;\r\n                        }() : new RegExp(\".\"),\r\n                        cardinality: maskdef.cardinality,\r\n                        optionality: mtoken.isOptional,\r\n                        newBlockMarker: void 0 === prevMatch || prevMatch.def !== (maskdef.definitionSymbol || element),\r\n                        casing: maskdef.casing,\r\n                        def: maskdef.definitionSymbol || element,\r\n                        placeholder: maskdef.placeholder,\r\n                        mask: element\r\n                    });\r\n                } else mtoken.matches.splice(position++, 0, {\r\n                    fn: null,\r\n                    cardinality: 0,\r\n                    optionality: mtoken.isOptional,\r\n                    newBlockMarker: void 0 === prevMatch || prevMatch.def !== element,\r\n                    casing: null,\r\n                    def: element,\r\n                    placeholder: void 0,\r\n                    mask: element\r\n                }), escaped = !1;\r\n            }\r\n            function verifyGroupMarker(lastMatch, isOpenGroup) {\r\n                lastMatch.isGroup && (lastMatch.isGroup = !1, insertTestDefinition(lastMatch, opts.groupmarker.start, 0), \r\n                isOpenGroup !== !0 && insertTestDefinition(lastMatch, opts.groupmarker.end));\r\n            }\r\n            function maskCurrentToken(m, currentToken, lastMatch, extraCondition) {\r\n                currentToken.matches.length > 0 && (void 0 === extraCondition || extraCondition) && (lastMatch = currentToken.matches[currentToken.matches.length - 1], \r\n                verifyGroupMarker(lastMatch)), insertTestDefinition(currentToken, m);\r\n            }\r\n            function defaultCase() {\r\n                if (openenings.length > 0) {\r\n                    if (currentOpeningToken = openenings[openenings.length - 1], maskCurrentToken(m, currentOpeningToken, lastMatch, !currentOpeningToken.isAlternator), \r\n                    currentOpeningToken.isAlternator) {\r\n                        alternator = openenings.pop();\r\n                        for (var mndx = 0; mndx < alternator.matches.length; mndx++) alternator.matches[mndx].isGroup = !1;\r\n                        openenings.length > 0 ? (currentOpeningToken = openenings[openenings.length - 1], \r\n                        currentOpeningToken.matches.push(alternator)) : currentToken.matches.push(alternator);\r\n                    }\r\n                } else maskCurrentToken(m, currentToken, lastMatch);\r\n            }\r\n            function reverseTokens(maskToken) {\r\n                function reverseStatic(st) {\r\n                    return st === opts.optionalmarker.start ? st = opts.optionalmarker.end : st === opts.optionalmarker.end ? st = opts.optionalmarker.start : st === opts.groupmarker.start ? st = opts.groupmarker.end : st === opts.groupmarker.end && (st = opts.groupmarker.start), \r\n                    st;\r\n                }\r\n                maskToken.matches = maskToken.matches.reverse();\r\n                for (var match in maskToken.matches) {\r\n                    var intMatch = parseInt(match);\r\n                    if (maskToken.matches[match].isQuantifier && maskToken.matches[intMatch + 1] && maskToken.matches[intMatch + 1].isGroup) {\r\n                        var qt = maskToken.matches[match];\r\n                        maskToken.matches.splice(match, 1), maskToken.matches.splice(intMatch + 1, 0, qt);\r\n                    }\r\n                    void 0 !== maskToken.matches[match].matches ? maskToken.matches[match] = reverseTokens(maskToken.matches[match]) : maskToken.matches[match] = reverseStatic(maskToken.matches[match]);\r\n                }\r\n                return maskToken;\r\n            }\r\n            for (var match, m, openingToken, currentOpeningToken, alternator, lastMatch, groupToken, tokenizer = /(?:[?*+]|\\{[0-9\\+\\*]+(?:,[0-9\\+\\*]*)?\\})|[^.?*+^${[]()|\\\\]+|./g, escaped = !1, currentToken = new MaskToken(), openenings = [], maskTokens = []; match = tokenizer.exec(mask); ) if (m = match[0], \r\n            escaped) defaultCase(); else switch (m.charAt(0)) {\r\n              case opts.escapeChar:\r\n                escaped = !0;\r\n                break;\r\n\r\n              case opts.optionalmarker.end:\r\n              case opts.groupmarker.end:\r\n                if (openingToken = openenings.pop(), void 0 !== openingToken) if (openenings.length > 0) {\r\n                    if (currentOpeningToken = openenings[openenings.length - 1], currentOpeningToken.matches.push(openingToken), \r\n                    currentOpeningToken.isAlternator) {\r\n                        alternator = openenings.pop();\r\n                        for (var mndx = 0; mndx < alternator.matches.length; mndx++) alternator.matches[mndx].isGroup = !1;\r\n                        openenings.length > 0 ? (currentOpeningToken = openenings[openenings.length - 1], \r\n                        currentOpeningToken.matches.push(alternator)) : currentToken.matches.push(alternator);\r\n                    }\r\n                } else currentToken.matches.push(openingToken); else defaultCase();\r\n                break;\r\n\r\n              case opts.optionalmarker.start:\r\n                openenings.push(new MaskToken(!1, !0));\r\n                break;\r\n\r\n              case opts.groupmarker.start:\r\n                openenings.push(new MaskToken(!0));\r\n                break;\r\n\r\n              case opts.quantifiermarker.start:\r\n                var quantifier = new MaskToken(!1, !1, !0);\r\n                m = m.replace(/[{}]/g, \"\");\r\n                var mq = m.split(\",\"), mq0 = isNaN(mq[0]) ? mq[0] : parseInt(mq[0]), mq1 = 1 === mq.length ? mq0 : isNaN(mq[1]) ? mq[1] : parseInt(mq[1]);\r\n                if ((\"*\" === mq1 || \"+\" === mq1) && (mq0 = \"*\" === mq1 ? 0 : 1), quantifier.quantifier = {\r\n                    min: mq0,\r\n                    max: mq1\r\n                }, openenings.length > 0) {\r\n                    var matches = openenings[openenings.length - 1].matches;\r\n                    match = matches.pop(), match.isGroup || (groupToken = new MaskToken(!0), groupToken.matches.push(match), \r\n                    match = groupToken), matches.push(match), matches.push(quantifier);\r\n                } else match = currentToken.matches.pop(), match.isGroup || (groupToken = new MaskToken(!0), \r\n                groupToken.matches.push(match), match = groupToken), currentToken.matches.push(match), \r\n                currentToken.matches.push(quantifier);\r\n                break;\r\n\r\n              case opts.alternatormarker:\r\n                openenings.length > 0 ? (currentOpeningToken = openenings[openenings.length - 1], \r\n                lastMatch = currentOpeningToken.matches.pop()) : lastMatch = currentToken.matches.pop(), \r\n                lastMatch.isAlternator ? openenings.push(lastMatch) : (alternator = new MaskToken(!1, !1, !1, !0), \r\n                alternator.matches.push(lastMatch), openenings.push(alternator));\r\n                break;\r\n\r\n              default:\r\n                defaultCase();\r\n            }\r\n            for (;openenings.length > 0; ) openingToken = openenings.pop(), verifyGroupMarker(openingToken, !0), \r\n            currentToken.matches.push(openingToken);\r\n            return currentToken.matches.length > 0 && (lastMatch = currentToken.matches[currentToken.matches.length - 1], \r\n            verifyGroupMarker(lastMatch), maskTokens.push(currentToken)), opts.numericInput && reverseTokens(maskTokens[0]), \r\n            maskTokens;\r\n        }\r\n        function generateMask(mask, metadata) {\r\n            if (null === mask || \"\" === mask) return void 0;\r\n            if (1 === mask.length && opts.greedy === !1 && 0 !== opts.repeat && (opts.placeholder = \"\"), \r\n            opts.repeat > 0 || \"*\" === opts.repeat || \"+\" === opts.repeat) {\r\n                var repeatStart = \"*\" === opts.repeat ? 0 : \"+\" === opts.repeat ? 1 : opts.repeat;\r\n                mask = opts.groupmarker.start + mask + opts.groupmarker.end + opts.quantifiermarker.start + repeatStart + \",\" + opts.repeat + opts.quantifiermarker.end;\r\n            }\r\n            var masksetDefinition;\r\n            return void 0 === Inputmask.prototype.masksCache[mask] || nocache === !0 ? (masksetDefinition = {\r\n                mask: mask,\r\n                maskToken: analyseMask(mask),\r\n                validPositions: {},\r\n                _buffer: void 0,\r\n                buffer: void 0,\r\n                tests: {},\r\n                metadata: metadata\r\n            }, nocache !== !0 && (Inputmask.prototype.masksCache[opts.numericInput ? mask.split(\"\").reverse().join(\"\") : mask] = masksetDefinition)) : masksetDefinition = $.extend(!0, {}, Inputmask.prototype.masksCache[mask]), \r\n            masksetDefinition;\r\n        }\r\n        function preProcessMask(mask) {\r\n            return mask = mask.toString();\r\n        }\r\n        var ms;\r\n        if ($.isFunction(opts.mask) && (opts.mask = opts.mask.call(this, opts)), $.isArray(opts.mask)) {\r\n            if (opts.mask.length > 1) {\r\n                opts.keepStatic = null === opts.keepStatic ? !0 : opts.keepStatic;\r\n                var altMask = \"(\";\r\n                return $.each(opts.numericInput ? opts.mask.reverse() : opts.mask, function(ndx, msk) {\r\n                    altMask.length > 1 && (altMask += \")|(\"), altMask += preProcessMask(void 0 === msk.mask || $.isFunction(msk.mask) ? msk : msk.mask);\r\n                }), altMask += \")\", generateMask(altMask, opts.mask);\r\n            }\r\n            opts.mask = opts.mask.pop();\r\n        }\r\n        return opts.mask && (ms = void 0 === opts.mask.mask || $.isFunction(opts.mask.mask) ? generateMask(preProcessMask(opts.mask), opts.mask) : generateMask(preProcessMask(opts.mask.mask), opts.mask)), \r\n        ms;\r\n    }\r\n    function maskScope(actionObj, maskset, opts) {\r\n        function getMaskTemplate(baseOnInput, minimalPos, includeInput) {\r\n            minimalPos = minimalPos || 0;\r\n            var ndxIntlzr, test, testPos, maskTemplate = [], pos = 0;\r\n            do {\r\n                if (baseOnInput === !0 && getMaskSet().validPositions[pos]) {\r\n                    var validPos = getMaskSet().validPositions[pos];\r\n                    test = validPos.match, ndxIntlzr = validPos.locator.slice(), maskTemplate.push(includeInput === !0 ? validPos.input : getPlaceholder(pos, test));\r\n                } else testPos = getTestTemplate(pos, ndxIntlzr, pos - 1), test = testPos.match, \r\n                ndxIntlzr = testPos.locator.slice(), maskTemplate.push(getPlaceholder(pos, test));\r\n                pos++;\r\n            } while ((void 0 === maxLength || maxLength > pos - 1) && null !== test.fn || null === test.fn && \"\" !== test.def || minimalPos >= pos);\r\n            return maskTemplate.pop(), maskTemplate;\r\n        }\r\n        function getMaskSet() {\r\n            return maskset;\r\n        }\r\n        function resetMaskSet(soft) {\r\n            var maskset = getMaskSet();\r\n            maskset.buffer = void 0, maskset.tests = {}, soft !== !0 && (maskset._buffer = void 0, \r\n            maskset.validPositions = {}, maskset.p = 0);\r\n        }\r\n        function getLastValidPosition(closestTo, strict) {\r\n            var maskset = getMaskSet(), lastValidPosition = -1, valids = maskset.validPositions;\r\n            void 0 === closestTo && (closestTo = -1);\r\n            var before = lastValidPosition, after = lastValidPosition;\r\n            for (var posNdx in valids) {\r\n                var psNdx = parseInt(posNdx);\r\n                valids[psNdx] && (strict || null !== valids[psNdx].match.fn) && (closestTo >= psNdx && (before = psNdx), \r\n                psNdx >= closestTo && (after = psNdx));\r\n            }\r\n            return lastValidPosition = -1 !== before && closestTo - before > 1 || closestTo > after ? before : after;\r\n        }\r\n        function setValidPosition(pos, validTest, fromSetValid) {\r\n            if (opts.insertMode && void 0 !== getMaskSet().validPositions[pos] && void 0 === fromSetValid) {\r\n                var i, positionsClone = $.extend(!0, {}, getMaskSet().validPositions), lvp = getLastValidPosition();\r\n                for (i = pos; lvp >= i; i++) delete getMaskSet().validPositions[i];\r\n                getMaskSet().validPositions[pos] = validTest;\r\n                var j, valid = !0, vps = getMaskSet().validPositions;\r\n                for (i = j = pos; lvp >= i; i++) {\r\n                    var t = positionsClone[i];\r\n                    if (void 0 !== t) for (var posMatch = j, prevPosMatch = -1; posMatch < getMaskLength() && (null == t.match.fn && vps[i] && (vps[i].match.optionalQuantifier === !0 || vps[i].match.optionality === !0) || null != t.match.fn); ) {\r\n                        if (null === t.match.fn || !opts.keepStatic && vps[i] && (void 0 !== vps[i + 1] && getTests(i + 1, vps[i].locator.slice(), i).length > 1 || void 0 !== vps[i].alternation) ? posMatch++ : posMatch = seekNext(j), \r\n                        positionCanMatchDefinition(posMatch, t.match.def)) {\r\n                            valid = isValid(posMatch, t.input, !0, !0) !== !1, j = posMatch;\r\n                            break;\r\n                        }\r\n                        if (valid = null == t.match.fn, prevPosMatch === posMatch) break;\r\n                        prevPosMatch = posMatch;\r\n                    }\r\n                    if (!valid) break;\r\n                }\r\n                if (!valid) return getMaskSet().validPositions = $.extend(!0, {}, positionsClone), \r\n                !1;\r\n            } else getMaskSet().validPositions[pos] = validTest;\r\n            return !0;\r\n        }\r\n        function stripValidPositions(start, end, nocheck, strict) {\r\n            var i, startPos = start;\r\n            for (getMaskSet().p = start, i = startPos; end > i; i++) void 0 !== getMaskSet().validPositions[i] && (nocheck === !0 || opts.canClearPosition(getMaskSet(), i, getLastValidPosition(), strict, opts) !== !1) && delete getMaskSet().validPositions[i];\r\n            for (resetMaskSet(!0), i = startPos + 1; i <= getLastValidPosition(); ) {\r\n                for (;void 0 !== getMaskSet().validPositions[startPos]; ) startPos++;\r\n                var s = getMaskSet().validPositions[startPos];\r\n                startPos > i && (i = startPos + 1);\r\n                var t = getMaskSet().validPositions[i];\r\n                void 0 !== t && isMask(i) && void 0 === s ? (positionCanMatchDefinition(startPos, t.match.def) && isValid(startPos, t.input, !0) !== !1 && (delete getMaskSet().validPositions[i], \r\n                i++), startPos++) : i++;\r\n            }\r\n            var lvp = getLastValidPosition(), ml = getMaskLength();\r\n            for (strict !== !0 && nocheck !== !0 && void 0 !== getMaskSet().validPositions[lvp] && getMaskSet().validPositions[lvp].input === opts.radixPoint && delete getMaskSet().validPositions[lvp], \r\n            i = lvp + 1; ml >= i; i++) getMaskSet().validPositions[i] && delete getMaskSet().validPositions[i];\r\n            resetMaskSet(!0);\r\n        }\r\n        function getTestTemplate(pos, ndxIntlzr, tstPs) {\r\n            var testPos = getMaskSet().validPositions[pos];\r\n            if (void 0 === testPos) for (var testPositions = getTests(pos, ndxIntlzr, tstPs), lvp = getLastValidPosition(), lvTest = getMaskSet().validPositions[lvp] || getTests(0)[0], lvTestAltArr = void 0 !== lvTest.alternation ? lvTest.locator[lvTest.alternation].toString().split(\",\") : [], ndx = 0; ndx < testPositions.length && (testPos = testPositions[ndx], \r\n            !(testPos.match && (opts.greedy && testPos.match.optionalQuantifier !== !0 || (testPos.match.optionality === !1 || testPos.match.newBlockMarker === !1) && testPos.match.optionalQuantifier !== !0) && (void 0 === lvTest.alternation || lvTest.alternation !== testPos.alternation || void 0 !== testPos.locator[lvTest.alternation] && checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAltArr)))); ndx++) ;\r\n            return testPos;\r\n        }\r\n        function getTest(pos) {\r\n            return getMaskSet().validPositions[pos] ? getMaskSet().validPositions[pos].match : getTests(pos)[0].match;\r\n        }\r\n        function positionCanMatchDefinition(pos, def) {\r\n            for (var valid = !1, tests = getTests(pos), tndx = 0; tndx < tests.length; tndx++) if (tests[tndx].match && tests[tndx].match.def === def) {\r\n                valid = !0;\r\n                break;\r\n            }\r\n            return valid;\r\n        }\r\n        function getTests(pos, ndxIntlzr, tstPs, cacheable) {\r\n            function resolveTestFromToken(maskToken, ndxInitializer, loopNdx, quantifierRecurse) {\r\n                function handleMatch(match, loopNdx, quantifierRecurse) {\r\n                    if (testPos > 1e4) throw \"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. \" + getMaskSet().mask;\r\n                    if (testPos === pos && void 0 === match.matches) return matches.push({\r\n                        match: match,\r\n                        locator: loopNdx.reverse()\r\n                    }), !0;\r\n                    if (void 0 !== match.matches) {\r\n                        if (match.isGroup && quantifierRecurse !== match) {\r\n                            if (match = handleMatch(maskToken.matches[$.inArray(match, maskToken.matches) + 1], loopNdx)) return !0;\r\n                        } else if (match.isOptional) {\r\n                            var optionalToken = match;\r\n                            if (match = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse)) {\r\n                                if (latestMatch = matches[matches.length - 1].match, isFirstMatch = 0 === $.inArray(latestMatch, optionalToken.matches), \r\n                                !isFirstMatch) return !0;\r\n                                insertStop = !0, testPos = pos;\r\n                            }\r\n                        } else if (match.isAlternator) {\r\n                            var maltMatches, alternateToken = match, malternateMatches = [], currentMatches = matches.slice(), loopNdxCnt = loopNdx.length, altIndex = ndxInitializer.length > 0 ? ndxInitializer.shift() : -1;\r\n                            if (-1 === altIndex || \"string\" == typeof altIndex) {\r\n                                var currentPos = testPos, ndxInitializerClone = ndxInitializer.slice(), altIndexArr = [];\r\n                                \"string\" == typeof altIndex && (altIndexArr = altIndex.split(\",\"));\r\n                                for (var amndx = 0; amndx < alternateToken.matches.length; amndx++) {\r\n                                    if (matches = [], match = handleMatch(alternateToken.matches[amndx], [ amndx ].concat(loopNdx), quantifierRecurse) || match, \r\n                                    match !== !0 && void 0 !== match && altIndexArr[altIndexArr.length - 1] < alternateToken.matches.length) {\r\n                                        var ntndx = maskToken.matches.indexOf(match) + 1;\r\n                                        maskToken.matches.length > ntndx && (match = handleMatch(maskToken.matches[ntndx], [ ntndx ].concat(loopNdx.slice(1, loopNdx.length)), quantifierRecurse), \r\n                                        match && (altIndexArr.push(ntndx.toString()), $.each(matches, function(ndx, lmnt) {\r\n                                            lmnt.alternation = loopNdx.length - 1;\r\n                                        })));\r\n                                    }\r\n                                    maltMatches = matches.slice(), testPos = currentPos, matches = [];\r\n                                    for (var i = 0; i < ndxInitializerClone.length; i++) ndxInitializer[i] = ndxInitializerClone[i];\r\n                                    for (var ndx1 = 0; ndx1 < maltMatches.length; ndx1++) {\r\n                                        var altMatch = maltMatches[ndx1];\r\n                                        altMatch.alternation = altMatch.alternation || loopNdxCnt;\r\n                                        for (var ndx2 = 0; ndx2 < malternateMatches.length; ndx2++) {\r\n                                            var altMatch2 = malternateMatches[ndx2];\r\n                                            if (altMatch.match.mask === altMatch2.match.mask && (\"string\" != typeof altIndex || -1 !== $.inArray(altMatch.locator[altMatch.alternation].toString(), altIndexArr))) {\r\n                                                maltMatches.splice(ndx1, 1), ndx1--, altMatch2.locator[altMatch.alternation] = altMatch2.locator[altMatch.alternation] + \",\" + altMatch.locator[altMatch.alternation], \r\n                                                altMatch2.alternation = altMatch.alternation;\r\n                                                break;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    malternateMatches = malternateMatches.concat(maltMatches);\r\n                                }\r\n                                \"string\" == typeof altIndex && (malternateMatches = $.map(malternateMatches, function(lmnt, ndx) {\r\n                                    if (isFinite(ndx)) {\r\n                                        var mamatch, alternation = lmnt.alternation, altLocArr = lmnt.locator[alternation].toString().split(\",\");\r\n                                        lmnt.locator[alternation] = void 0, lmnt.alternation = void 0;\r\n                                        for (var alndx = 0; alndx < altLocArr.length; alndx++) mamatch = -1 !== $.inArray(altLocArr[alndx], altIndexArr), \r\n                                        mamatch && (void 0 !== lmnt.locator[alternation] ? (lmnt.locator[alternation] += \",\", \r\n                                        lmnt.locator[alternation] += altLocArr[alndx]) : lmnt.locator[alternation] = parseInt(altLocArr[alndx]), \r\n                                        lmnt.alternation = alternation);\r\n                                        if (void 0 !== lmnt.locator[alternation]) return lmnt;\r\n                                    }\r\n                                })), matches = currentMatches.concat(malternateMatches), testPos = pos, insertStop = matches.length > 0;\r\n                            } else match = alternateToken.matches[altIndex] ? handleMatch(alternateToken.matches[altIndex], [ altIndex ].concat(loopNdx), quantifierRecurse) : !1;\r\n                            if (match) return !0;\r\n                        } else if (match.isQuantifier && quantifierRecurse !== maskToken.matches[$.inArray(match, maskToken.matches) - 1]) for (var qt = match, qndx = ndxInitializer.length > 0 ? ndxInitializer.shift() : 0; qndx < (isNaN(qt.quantifier.max) ? qndx + 1 : qt.quantifier.max) && pos >= testPos; qndx++) {\r\n                            var tokenGroup = maskToken.matches[$.inArray(qt, maskToken.matches) - 1];\r\n                            if (match = handleMatch(tokenGroup, [ qndx ].concat(loopNdx), tokenGroup)) {\r\n                                if (latestMatch = matches[matches.length - 1].match, latestMatch.optionalQuantifier = qndx > qt.quantifier.min - 1, \r\n                                isFirstMatch = 0 === $.inArray(latestMatch, tokenGroup.matches)) {\r\n                                    if (qndx > qt.quantifier.min - 1) {\r\n                                        insertStop = !0, testPos = pos;\r\n                                        break;\r\n                                    }\r\n                                    return !0;\r\n                                }\r\n                                return !0;\r\n                            }\r\n                        } else if (match = resolveTestFromToken(match, ndxInitializer, loopNdx, quantifierRecurse)) return !0;\r\n                    } else testPos++;\r\n                }\r\n                for (var tndx = ndxInitializer.length > 0 ? ndxInitializer.shift() : 0; tndx < maskToken.matches.length; tndx++) if (maskToken.matches[tndx].isQuantifier !== !0) {\r\n                    var match = handleMatch(maskToken.matches[tndx], [ tndx ].concat(loopNdx), quantifierRecurse);\r\n                    if (match && testPos === pos) return match;\r\n                    if (testPos > pos) break;\r\n                }\r\n            }\r\n            var latestMatch, isFirstMatch, maskTokens = getMaskSet().maskToken, testPos = ndxIntlzr ? tstPs : 0, ndxInitializer = ndxIntlzr || [ 0 ], matches = [], insertStop = !1;\r\n            if (cacheable === !0 && getMaskSet().tests[pos]) return getMaskSet().tests[pos];\r\n            if (void 0 === ndxIntlzr) {\r\n                for (var test, previousPos = pos - 1; void 0 === (test = getMaskSet().validPositions[previousPos]) && previousPos > -1 && (!getMaskSet().tests[previousPos] || void 0 === (test = getMaskSet().tests[previousPos][0])); ) previousPos--;\r\n                void 0 !== test && previousPos > -1 && (testPos = previousPos, ndxInitializer = test.locator.slice());\r\n            }\r\n            for (var mtndx = ndxInitializer.shift(); mtndx < maskTokens.length; mtndx++) {\r\n                var match = resolveTestFromToken(maskTokens[mtndx], ndxInitializer, [ mtndx ]);\r\n                if (match && testPos === pos || testPos > pos) break;\r\n            }\r\n            return (0 === matches.length || insertStop) && matches.push({\r\n                match: {\r\n                    fn: null,\r\n                    cardinality: 0,\r\n                    optionality: !0,\r\n                    casing: null,\r\n                    def: \"\"\r\n                },\r\n                locator: []\r\n            }), getMaskSet().tests[pos] = $.extend(!0, [], matches), getMaskSet().tests[pos];\r\n        }\r\n        function getBufferTemplate() {\r\n            return void 0 === getMaskSet()._buffer && (getMaskSet()._buffer = getMaskTemplate(!1, 1)), \r\n            getMaskSet()._buffer;\r\n        }\r\n        function getBuffer() {\r\n            return void 0 === getMaskSet().buffer && (getMaskSet().buffer = getMaskTemplate(!0, getLastValidPosition(), !0)), \r\n            getMaskSet().buffer;\r\n        }\r\n        function refreshFromBuffer(start, end, buffer) {\r\n            var i;\r\n            if (buffer = buffer || getBuffer().slice(), start === !0) resetMaskSet(), start = 0, \r\n            end = buffer.length; else for (i = start; end > i; i++) delete getMaskSet().validPositions[i], \r\n            delete getMaskSet().tests[i];\r\n            for (i = start; end > i; i++) resetMaskSet(!0), buffer[i] !== opts.skipOptionalPartCharacter && isValid(i, buffer[i], !0, !0);\r\n        }\r\n        function casing(elem, test) {\r\n            switch (test.casing) {\r\n              case \"upper\":\r\n                elem = elem.toUpperCase();\r\n                break;\r\n\r\n              case \"lower\":\r\n                elem = elem.toLowerCase();\r\n            }\r\n            return elem;\r\n        }\r\n        function checkAlternationMatch(altArr1, altArr2) {\r\n            for (var altArrC = opts.greedy ? altArr2 : altArr2.slice(0, 1), isMatch = !1, alndx = 0; alndx < altArr1.length; alndx++) if (-1 !== $.inArray(altArr1[alndx], altArrC)) {\r\n                isMatch = !0;\r\n                break;\r\n            }\r\n            return isMatch;\r\n        }\r\n        function isValid(pos, c, strict, fromSetValid) {\r\n            function _isValid(position, c, strict, fromSetValid) {\r\n                var rslt = !1;\r\n                return $.each(getTests(position), function(ndx, tst) {\r\n                    for (var test = tst.match, loopend = c ? 1 : 0, chrs = \"\", i = test.cardinality; i > loopend; i--) chrs += getBufferElement(position - (i - 1));\r\n                    if (c && (chrs += c), rslt = null != test.fn ? test.fn.test(chrs, getMaskSet(), position, strict, opts) : c !== test.def && c !== opts.skipOptionalPartCharacter || \"\" === test.def ? !1 : {\r\n                        c: test.def,\r\n                        pos: position\r\n                    }, rslt !== !1) {\r\n                        var elem = void 0 !== rslt.c ? rslt.c : c;\r\n                        elem = elem === opts.skipOptionalPartCharacter && null === test.fn ? test.def : elem;\r\n                        var validatedPos = position, possibleModifiedBuffer = getBuffer();\r\n                        if (void 0 !== rslt.remove && ($.isArray(rslt.remove) || (rslt.remove = [ rslt.remove ]), \r\n                        $.each(rslt.remove.sort(function(a, b) {\r\n                            return b - a;\r\n                        }), function(ndx, lmnt) {\r\n                            stripValidPositions(lmnt, lmnt + 1, !0);\r\n                        })), void 0 !== rslt.insert && ($.isArray(rslt.insert) || (rslt.insert = [ rslt.insert ]), \r\n                        $.each(rslt.insert.sort(function(a, b) {\r\n                            return a - b;\r\n                        }), function(ndx, lmnt) {\r\n                            isValid(lmnt.pos, lmnt.c, !0);\r\n                        })), rslt.refreshFromBuffer) {\r\n                            var refresh = rslt.refreshFromBuffer;\r\n                            if (strict = !0, refreshFromBuffer(refresh === !0 ? refresh : refresh.start, refresh.end, possibleModifiedBuffer), \r\n                            void 0 === rslt.pos && void 0 === rslt.c) return rslt.pos = getLastValidPosition(), \r\n                            !1;\r\n                            if (validatedPos = void 0 !== rslt.pos ? rslt.pos : position, validatedPos !== position) return rslt = $.extend(rslt, isValid(validatedPos, elem, !0)), \r\n                            !1;\r\n                        } else if (rslt !== !0 && void 0 !== rslt.pos && rslt.pos !== position && (validatedPos = rslt.pos, \r\n                        refreshFromBuffer(position, validatedPos), validatedPos !== position)) return rslt = $.extend(rslt, isValid(validatedPos, elem, !0)), \r\n                        !1;\r\n                        return rslt !== !0 && void 0 === rslt.pos && void 0 === rslt.c ? !1 : (ndx > 0 && resetMaskSet(!0), \r\n                        setValidPosition(validatedPos, $.extend({}, tst, {\r\n                            input: casing(elem, test)\r\n                        }), fromSetValid) || (rslt = !1), !1);\r\n                    }\r\n                }), rslt;\r\n            }\r\n            function alternate(pos, c, strict, fromSetValid) {\r\n                for (var lastAlt, alternation, isValidRslt, altPos, i, validPos, validPsClone = $.extend(!0, {}, getMaskSet().validPositions), lAlt = getLastValidPosition(); lAlt >= 0 && (altPos = getMaskSet().validPositions[lAlt], \r\n                !altPos || void 0 === altPos.alternation || (lastAlt = lAlt, alternation = getMaskSet().validPositions[lastAlt].alternation, \r\n                getTestTemplate(lastAlt).locator[altPos.alternation] === altPos.locator[altPos.alternation])); lAlt--) ;\r\n                if (void 0 !== alternation) {\r\n                    lastAlt = parseInt(lastAlt);\r\n                    for (var decisionPos in getMaskSet().validPositions) if (decisionPos = parseInt(decisionPos), \r\n                    altPos = getMaskSet().validPositions[decisionPos], decisionPos >= lastAlt && void 0 !== altPos.alternation) {\r\n                        var altNdxs = getMaskSet().validPositions[lastAlt].locator[alternation].toString().split(\",\"), decisionTaker = altPos.locator[alternation] || altNdxs[0];\r\n                        decisionTaker.length > 0 && (decisionTaker = decisionTaker.split(\",\")[0]);\r\n                        for (var mndx = 0; mndx < altNdxs.length; mndx++) if (decisionTaker < altNdxs[mndx]) {\r\n                            for (var possibilityPos, possibilities, dp = decisionPos; dp >= 0; dp--) if (possibilityPos = getMaskSet().validPositions[dp], \r\n                            void 0 !== possibilityPos) {\r\n                                possibilities = possibilityPos.locator[alternation], possibilityPos.locator[alternation] = parseInt(altNdxs[mndx]);\r\n                                break;\r\n                            }\r\n                            if (decisionTaker !== possibilityPos.locator[alternation]) {\r\n                                var validInputs = [], staticInputsBeforePos = 0;\r\n                                for (i = decisionPos + 1; i < getLastValidPosition() + 1; i++) validPos = getMaskSet().validPositions[i], \r\n                                validPos && (null != validPos.match.fn ? validInputs.push(validPos.input) : pos > i && staticInputsBeforePos++), \r\n                                delete getMaskSet().validPositions[i], delete getMaskSet().tests[i];\r\n                                for (resetMaskSet(!0), opts.keepStatic = !opts.keepStatic, isValidRslt = !0; validInputs.length > 0; ) {\r\n                                    var input = validInputs.shift();\r\n                                    if (input !== opts.skipOptionalPartCharacter && !(isValidRslt = isValid(getLastValidPosition() + 1, input, !1, !0))) break;\r\n                                }\r\n                                if (possibilityPos.alternation = alternation, possibilityPos.locator[alternation] = possibilities, \r\n                                isValidRslt) {\r\n                                    var targetLvp = getLastValidPosition(pos) + 1, staticInputsBeforePosAlternate = 0;\r\n                                    for (i = decisionPos + 1; i < getLastValidPosition() + 1; i++) validPos = getMaskSet().validPositions[i], \r\n                                    validPos && null == validPos.match.fn && pos > i && staticInputsBeforePosAlternate++;\r\n                                    pos += staticInputsBeforePosAlternate - staticInputsBeforePos, isValidRslt = isValid(pos > targetLvp ? targetLvp : pos, c, strict, fromSetValid);\r\n                                }\r\n                                if (opts.keepStatic = !opts.keepStatic, isValidRslt) return isValidRslt;\r\n                                resetMaskSet(), getMaskSet().validPositions = $.extend(!0, {}, validPsClone);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                return !1;\r\n            }\r\n            function trackbackAlternations(originalPos, newPos) {\r\n                for (var vp = getMaskSet().validPositions[newPos], targetLocator = vp.locator, tll = targetLocator.length, ps = originalPos; newPos > ps; ps++) if (!isMask(ps)) {\r\n                    var tests = getTests(ps), bestMatch = tests[0], equality = -1;\r\n                    $.each(tests, function(ndx, tst) {\r\n                        for (var i = 0; tll > i; i++) tst.locator[i] && checkAlternationMatch(tst.locator[i].toString().split(\",\"), targetLocator[i].toString().split(\",\")) && i > equality && (equality = i, \r\n                        bestMatch = tst);\r\n                    }), setValidPosition(ps, $.extend({}, bestMatch, {\r\n                        input: bestMatch.match.def\r\n                    }), !0);\r\n                }\r\n            }\r\n            strict = strict === !0;\r\n            for (var buffer = getBuffer(), pndx = pos - 1; pndx > -1 && !getMaskSet().validPositions[pndx]; pndx--) ;\r\n            for (pndx++; pos > pndx; pndx++) void 0 === getMaskSet().validPositions[pndx] && ((!isMask(pndx) || buffer[pndx] !== getPlaceholder(pndx)) && getTests(pndx).length > 1 || buffer[pndx] === opts.radixPoint || \"0\" === buffer[pndx] && $.inArray(opts.radixPoint, buffer) < pndx) && _isValid(pndx, buffer[pndx], !0);\r\n            var maskPos = pos, result = !1, positionsClone = $.extend(!0, {}, getMaskSet().validPositions);\r\n            if (maskPos < getMaskLength() && (getBuffer(), result = _isValid(maskPos, c, strict, fromSetValid), \r\n            (!strict || fromSetValid) && result === !1)) {\r\n                var currentPosValid = getMaskSet().validPositions[maskPos];\r\n                if (!currentPosValid || null !== currentPosValid.match.fn || currentPosValid.match.def !== c && c !== opts.skipOptionalPartCharacter) {\r\n                    if ((opts.insertMode || void 0 === getMaskSet().validPositions[seekNext(maskPos)]) && !isMask(maskPos)) for (var nPos = maskPos + 1, snPos = seekNext(maskPos); snPos >= nPos; nPos++) if (result = _isValid(nPos, c, strict, fromSetValid), \r\n                    result !== !1) {\r\n                        trackbackAlternations(maskPos, nPos), maskPos = nPos;\r\n                        break;\r\n                    }\r\n                } else result = {\r\n                    caret: seekNext(maskPos)\r\n                };\r\n            }\r\n            if (result === !1 && opts.keepStatic && isComplete(buffer) && (result = alternate(pos, c, strict, fromSetValid)), \r\n            result === !0 && (result = {\r\n                pos: maskPos\r\n            }), $.isFunction(opts.postValidation) && result !== !1 && !strict) {\r\n                resetMaskSet(!0);\r\n                var postValidResult = opts.postValidation(getBuffer(), opts);\r\n                if (postValidResult) {\r\n                    if (postValidResult.refreshFromBuffer) {\r\n                        var refresh = postValidResult.refreshFromBuffer;\r\n                        refreshFromBuffer(refresh === !0 ? refresh : refresh.start, refresh.end, postValidResult.buffer), \r\n                        resetMaskSet(!0), result = postValidResult;\r\n                    }\r\n                } else resetMaskSet(!0), getMaskSet().validPositions = $.extend(!0, {}, positionsClone), \r\n                result = !1;\r\n            }\r\n            return result;\r\n        }\r\n        function isMask(pos) {\r\n            var test = getTest(pos);\r\n            if (null != test.fn) return test.fn;\r\n            if (!opts.keepStatic && void 0 === getMaskSet().validPositions[pos]) {\r\n                for (var tests = getTests(pos), staticAlternations = !0, i = 0; i < tests.length; i++) if (\"\" !== tests[i].match.def && (void 0 === tests[i].alternation || tests[i].locator[tests[i].alternation].length > 1)) {\r\n                    staticAlternations = !1;\r\n                    break;\r\n                }\r\n                return staticAlternations;\r\n            }\r\n            return !1;\r\n        }\r\n        function getMaskLength() {\r\n            var maskLength;\r\n            maxLength = void 0 !== el ? el.maxLength : void 0, -1 === maxLength && (maxLength = void 0);\r\n            var pos, lvp = getLastValidPosition(), testPos = getMaskSet().validPositions[lvp], ndxIntlzr = void 0 !== testPos ? testPos.locator.slice() : void 0;\r\n            for (pos = lvp + 1; void 0 === testPos || null !== testPos.match.fn || null === testPos.match.fn && \"\" !== testPos.match.def; pos++) testPos = getTestTemplate(pos, ndxIntlzr, pos - 1), \r\n            ndxIntlzr = testPos.locator.slice();\r\n            var lastTest = getTest(pos - 1);\r\n            return maskLength = \"\" !== lastTest.def ? pos : pos - 1, void 0 === maxLength || maxLength > maskLength ? maskLength : maxLength;\r\n        }\r\n        function seekNext(pos, newBlock) {\r\n            var maskL = getMaskLength();\r\n            if (pos >= maskL) return maskL;\r\n            for (var position = pos; ++position < maskL && (newBlock === !0 && (getTest(position).newBlockMarker !== !0 || !isMask(position)) || newBlock !== !0 && !isMask(position) && (opts.nojumps !== !0 || opts.nojumpsThreshold > position)); ) ;\r\n            return position;\r\n        }\r\n        function seekPrevious(pos, newBlock) {\r\n            var position = pos;\r\n            if (0 >= position) return 0;\r\n            for (;--position > 0 && (newBlock === !0 && getTest(position).newBlockMarker !== !0 || newBlock !== !0 && !isMask(position)); ) ;\r\n            return position;\r\n        }\r\n        function getBufferElement(position) {\r\n            return void 0 === getMaskSet().validPositions[position] ? getPlaceholder(position) : getMaskSet().validPositions[position].input;\r\n        }\r\n        function writeBuffer(input, buffer, caretPos, event, triggerInputEvent) {\r\n            if (event && $.isFunction(opts.onBeforeWrite)) {\r\n                var result = opts.onBeforeWrite.call(input, event, buffer, caretPos, opts);\r\n                if (result) {\r\n                    if (result.refreshFromBuffer) {\r\n                        var refresh = result.refreshFromBuffer;\r\n                        refreshFromBuffer(refresh === !0 ? refresh : refresh.start, refresh.end, result.buffer || buffer), \r\n                        resetMaskSet(!0), buffer = getBuffer();\r\n                    }\r\n                    caretPos = void 0 !== result.caret ? result.caret : caretPos;\r\n                }\r\n            }\r\n            input.inputmask._valueSet(buffer.join(\"\")), void 0 === caretPos || void 0 !== event && \"blur\" === event.type || caret(input, caretPos), \r\n            triggerInputEvent === !0 && (skipInputEvent = !0, $(input).trigger(\"input\"));\r\n        }\r\n        function getPlaceholder(pos, test) {\r\n            if (test = test || getTest(pos), void 0 !== test.placeholder) return test.placeholder;\r\n            if (null === test.fn) {\r\n                if (!opts.keepStatic && void 0 === getMaskSet().validPositions[pos]) {\r\n                    for (var prevTest, tests = getTests(pos), hasAlternations = !1, i = 0; i < tests.length; i++) {\r\n                        if (prevTest && \"\" !== tests[i].match.def && tests[i].match.def !== prevTest.match.def && (void 0 === tests[i].alternation || tests[i].alternation === prevTest.alternation)) {\r\n                            hasAlternations = !0;\r\n                            break;\r\n                        }\r\n                        tests[i].match.optionality !== !0 && tests[i].match.optionalQuantifier !== !0 && (prevTest = tests[i]);\r\n                    }\r\n                    if (hasAlternations) return opts.placeholder.charAt(pos % opts.placeholder.length);\r\n                }\r\n                return test.def;\r\n            }\r\n            return opts.placeholder.charAt(pos % opts.placeholder.length);\r\n        }\r\n        function checkVal(input, writeOut, strict, nptvl) {\r\n            function isTemplateMatch() {\r\n                var isMatch = !1, charCodeNdx = getBufferTemplate().slice(initialNdx, seekNext(initialNdx)).join(\"\").indexOf(charCodes);\r\n                if (-1 !== charCodeNdx && !isMask(initialNdx)) {\r\n                    isMatch = !0;\r\n                    for (var bufferTemplateArr = getBufferTemplate().slice(initialNdx, initialNdx + charCodeNdx), i = 0; i < bufferTemplateArr.length; i++) if (\" \" !== bufferTemplateArr[i]) {\r\n                        isMatch = !1;\r\n                        break;\r\n                    }\r\n                }\r\n                return isMatch;\r\n            }\r\n            var inputValue = void 0 !== nptvl ? nptvl.slice() : input.inputmask._valueGet().split(\"\"), charCodes = \"\", initialNdx = 0;\r\n            if (resetMaskSet(), getMaskSet().p = seekNext(-1), writeOut && input.inputmask._valueSet(\"\"), \r\n            !strict) if (opts.autoUnmask !== !0) {\r\n                var staticInput = getBufferTemplate().slice(0, seekNext(-1)).join(\"\"), matches = inputValue.join(\"\").match(new RegExp(\"^\" + Inputmask.escapeRegex(staticInput), \"g\"));\r\n                matches && matches.length > 0 && (inputValue.splice(0, matches.length * staticInput.length), \r\n                initialNdx = seekNext(initialNdx));\r\n            } else initialNdx = seekNext(initialNdx);\r\n            $.each(inputValue, function(ndx, charCode) {\r\n                var keypress = $.Event(\"keypress\");\r\n                keypress.which = charCode.charCodeAt(0), charCodes += charCode;\r\n                var lvp = getLastValidPosition(void 0, !0), lvTest = getMaskSet().validPositions[lvp], nextTest = getTestTemplate(lvp + 1, lvTest ? lvTest.locator.slice() : void 0, lvp);\r\n                if (!isTemplateMatch() || strict || opts.autoUnmask) {\r\n                    var pos = strict ? ndx : null == nextTest.match.fn && nextTest.match.optionality && lvp + 1 < getMaskSet().p ? lvp + 1 : getMaskSet().p;\r\n                    keypressEvent.call(input, keypress, !0, !1, strict, pos), initialNdx = pos + 1, \r\n                    charCodes = \"\";\r\n                } else keypressEvent.call(input, keypress, !0, !1, !0, lvp + 1);\r\n            }), writeOut && writeBuffer(input, getBuffer(), document.activeElement === input ? seekNext(getLastValidPosition(0)) : void 0, $.Event(\"checkval\"));\r\n        }\r\n        function unmaskedvalue(input) {\r\n            if (input.inputmask) {\r\n                if (void 0 === input.className || -1 === input.className.indexOf(\"hasDatepicker\")) {\r\n                    var umValue = [], vps = getMaskSet().validPositions;\r\n                    for (var pndx in vps) vps[pndx].match && null != vps[pndx].match.fn && umValue.push(vps[pndx].input);\r\n                    var unmaskedValue = 0 === umValue.length ? null : (isRTL ? umValue.reverse() : umValue).join(\"\");\r\n                    if (null !== unmaskedValue) {\r\n                        var bufferValue = (isRTL ? getBuffer().slice().reverse() : getBuffer()).join(\"\");\r\n                        $.isFunction(opts.onUnMask) && (unmaskedValue = opts.onUnMask.call(input, bufferValue, unmaskedValue, opts) || unmaskedValue);\r\n                    }\r\n                    return unmaskedValue;\r\n                }\r\n                return input.inputmask._valueGet();\r\n            }\r\n            return input.value;\r\n        }\r\n        function caret(input, begin, end) {\r\n            function translatePosition(pos) {\r\n                if (isRTL && \"number\" == typeof pos && (!opts.greedy || \"\" !== opts.placeholder)) {\r\n                    var bffrLght = getBuffer().join(\"\").length;\r\n                    pos = bffrLght - pos;\r\n                }\r\n                return pos;\r\n            }\r\n            var range;\r\n            if (\"number\" != typeof begin) return input.setSelectionRange ? (begin = input.selectionStart, \r\n            end = input.selectionEnd) : window.getSelection ? (range = window.getSelection().getRangeAt(0), \r\n            (range.commonAncestorContainer.parentNode === input || range.commonAncestorContainer === input) && (begin = range.startOffset, \r\n            end = range.endOffset)) : document.selection && document.selection.createRange && (range = document.selection.createRange(), \r\n            begin = 0 - range.duplicate().moveStart(\"character\", -1e5), end = begin + range.text.length), \r\n            {\r\n                begin: translatePosition(begin),\r\n                end: translatePosition(end)\r\n            };\r\n            begin = translatePosition(begin), end = translatePosition(end), end = \"number\" == typeof end ? end : begin;\r\n            var scrollCalc = input.style.fontSize.replace(\"px\", \"\") * end;\r\n            if (input.scrollLeft = scrollCalc > input.scrollWidth ? scrollCalc : 0, androidchrome || opts.insertMode !== !1 || begin !== end || end++, \r\n            input.setSelectionRange) input.selectionStart = begin, input.selectionEnd = end; else if (window.getSelection) {\r\n                if (range = document.createRange(), void 0 === input.firstChild) {\r\n                    var textNode = document.createTextNode(\"\");\r\n                    input.appendChild(textNode);\r\n                }\r\n                range.setStart(input.firstChild, begin < input.inputmask._valueGet().length ? begin : input.inputmask._valueGet().length), \r\n                range.setEnd(input.firstChild, end < input.inputmask._valueGet().length ? end : input.inputmask._valueGet().length), \r\n                range.collapse(!0);\r\n                var sel = window.getSelection();\r\n                sel.removeAllRanges(), sel.addRange(range);\r\n            } else input.createTextRange && (range = input.createTextRange(), range.collapse(!0), \r\n            range.moveEnd(\"character\", end), range.moveStart(\"character\", begin), range.select());\r\n        }\r\n        function determineLastRequiredPosition(returnDefinition) {\r\n            var pos, testPos, buffer = getBuffer(), bl = buffer.length, lvp = getLastValidPosition(), positions = {}, lvTest = getMaskSet().validPositions[lvp], ndxIntlzr = void 0 !== lvTest ? lvTest.locator.slice() : void 0;\r\n            for (pos = lvp + 1; pos < buffer.length; pos++) testPos = getTestTemplate(pos, ndxIntlzr, pos - 1), \r\n            ndxIntlzr = testPos.locator.slice(), positions[pos] = $.extend(!0, {}, testPos);\r\n            var lvTestAlt = lvTest && void 0 !== lvTest.alternation ? lvTest.locator[lvTest.alternation] : void 0;\r\n            for (pos = bl - 1; pos > lvp && (testPos = positions[pos], (testPos.match.optionality || testPos.match.optionalQuantifier || lvTestAlt && (lvTestAlt !== positions[pos].locator[lvTest.alternation] && null != testPos.match.fn || null === testPos.match.fn && testPos.locator[lvTest.alternation] && checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(\",\"), lvTestAlt.toString().split(\",\")) && \"\" !== getTests(pos)[0].def)) && buffer[pos] === getPlaceholder(pos, testPos.match)); pos--) bl--;\r\n            return returnDefinition ? {\r\n                l: bl,\r\n                def: positions[bl] ? positions[bl].match : void 0\r\n            } : bl;\r\n        }\r\n        function clearOptionalTail(buffer) {\r\n            for (var rl = determineLastRequiredPosition(), lmib = buffer.length - 1; lmib > rl && !isMask(lmib); lmib--) ;\r\n            return buffer.splice(rl, lmib + 1 - rl), buffer;\r\n        }\r\n        function isComplete(buffer) {\r\n            if ($.isFunction(opts.isComplete)) return opts.isComplete.call(el, buffer, opts);\r\n            if (\"*\" === opts.repeat) return void 0;\r\n            var complete = !1, lrp = determineLastRequiredPosition(!0), aml = seekPrevious(lrp.l);\r\n            if (void 0 === lrp.def || lrp.def.newBlockMarker || lrp.def.optionality || lrp.def.optionalQuantifier) {\r\n                complete = !0;\r\n                for (var i = 0; aml >= i; i++) {\r\n                    var test = getTestTemplate(i).match;\r\n                    if (null !== test.fn && void 0 === getMaskSet().validPositions[i] && test.optionality !== !0 && test.optionalQuantifier !== !0 || null === test.fn && buffer[i] !== getPlaceholder(i, test)) {\r\n                        complete = !1;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return complete;\r\n        }\r\n        function isSelection(begin, end) {\r\n            return isRTL ? begin - end > 1 || begin - end === 1 && opts.insertMode : end - begin > 1 || end - begin === 1 && opts.insertMode;\r\n        }\r\n        function wrapEvent(eventHandler) {\r\n            return function(e) {\r\n                var inComposition = !1;\r\n                if (void 0 === this.inputmask) {\r\n                    var imOpts = $.data(this, \"_inputmask_opts\");\r\n                    imOpts ? new Inputmask(imOpts).mask(this) : $(this).off(\".inputmask\");\r\n                } else {\r\n                    if (\"setvalue\" === e.type || !(this.disabled || this.readOnly && !(\"keydown\" === e.type && e.ctrlKey && 67 === e.keyCode || opts.tabThrough === !1 && e.keyCode === Inputmask.keyCode.TAB))) {\r\n                        switch (e.type) {\r\n                          case \"input\":\r\n                            if (skipInputEvent === !0 || inComposition === !0) return skipInputEvent = !1, e.preventDefault();\r\n                            break;\r\n\r\n                          case \"keydown\":\r\n                            skipKeyPressEvent = !1, inComposition = !1;\r\n                            break;\r\n\r\n                          case \"keypress\":\r\n                            if (skipKeyPressEvent === !0) return e.preventDefault();\r\n                            skipKeyPressEvent = !0;\r\n                            break;\r\n\r\n                          case \"compositionstart\":\r\n                            inComposition = !0;\r\n                            break;\r\n\r\n                          case \"compositionupdate\":\r\n                            skipInputEvent = !0;\r\n                            break;\r\n\r\n                          case \"compositionend\":\r\n                            inComposition = !1;\r\n                        }\r\n                        return eventHandler.apply(this, arguments);\r\n                    }\r\n                    e.preventDefault();\r\n                }\r\n            };\r\n        }\r\n        function patchValueProperty(npt) {\r\n            function patchValhook(type) {\r\n                if ($.valHooks && void 0 === $.valHooks[type] || $.valHooks[type].inputmaskpatch !== !0) {\r\n                    var valhookGet = $.valHooks[type] && $.valHooks[type].get ? $.valHooks[type].get : function(elem) {\r\n                        return elem.value;\r\n                    }, valhookSet = $.valHooks[type] && $.valHooks[type].set ? $.valHooks[type].set : function(elem, value) {\r\n                        return elem.value = value, elem;\r\n                    };\r\n                    $.valHooks[type] = {\r\n                        get: function(elem) {\r\n                            if (elem.inputmask) {\r\n                                if (elem.inputmask.opts.autoUnmask) return elem.inputmask.unmaskedvalue();\r\n                                var result = valhookGet(elem), maskset = elem.inputmask.maskset, bufferTemplate = maskset._buffer;\r\n                                return bufferTemplate = bufferTemplate ? bufferTemplate.join(\"\") : \"\", result !== bufferTemplate ? result : \"\";\r\n                            }\r\n                            return valhookGet(elem);\r\n                        },\r\n                        set: function(elem, value) {\r\n                            var result, $elem = $(elem);\r\n                            return result = valhookSet(elem, value), elem.inputmask && $elem.trigger(\"setvalue.inputmask\"), \r\n                            result;\r\n                        },\r\n                        inputmaskpatch: !0\r\n                    };\r\n                }\r\n            }\r\n            function getter() {\r\n                return this.inputmask ? this.inputmask.opts.autoUnmask ? this.inputmask.unmaskedvalue() : valueGet.call(this) !== getBufferTemplate().join(\"\") ? valueGet.call(this) : \"\" : valueGet.call(this);\r\n            }\r\n            function setter(value) {\r\n                valueSet.call(this, value), this.inputmask && $(this).trigger(\"setvalue.inputmask\");\r\n            }\r\n            function installNativeValueSetFallback(npt) {\r\n                $(npt).on(\"mouseenter.inputmask\", wrapEvent(function(event) {\r\n                    var $input = $(this), input = this, value = input.inputmask._valueGet();\r\n                    \"\" !== value && value !== getBuffer().join(\"\") && $input.trigger(\"setvalue.inputmask\");\r\n                }));\r\n            }\r\n            var valueGet, valueSet;\r\n            npt.inputmask.__valueGet || (Object.getOwnPropertyDescriptor && void 0 === npt.value ? (valueGet = function() {\r\n                return this.textContent;\r\n            }, valueSet = function(value) {\r\n                this.textContent = value;\r\n            }, Object.defineProperty(npt, \"value\", {\r\n                get: getter,\r\n                set: setter\r\n            })) : document.__lookupGetter__ && npt.__lookupGetter__(\"value\") ? (valueGet = npt.__lookupGetter__(\"value\"), \r\n            valueSet = npt.__lookupSetter__(\"value\"), npt.__defineGetter__(\"value\", getter), \r\n            npt.__defineSetter__(\"value\", setter)) : (valueGet = function() {\r\n                return npt.value;\r\n            }, valueSet = function(value) {\r\n                npt.value = value;\r\n            }, patchValhook(npt.type), installNativeValueSetFallback(npt)), npt.inputmask.__valueGet = valueGet, \r\n            npt.inputmask._valueGet = function(overruleRTL) {\r\n                return isRTL && overruleRTL !== !0 ? valueGet.call(this.el).split(\"\").reverse().join(\"\") : valueGet.call(this.el);\r\n            }, npt.inputmask.__valueSet = valueSet, npt.inputmask._valueSet = function(value, overruleRTL) {\r\n                valueSet.call(this.el, overruleRTL !== !0 && isRTL && null !== value && void 0 !== value ? value.split(\"\").reverse().join(\"\") : value);\r\n            });\r\n        }\r\n        function handleRemove(input, k, pos, strict) {\r\n            function generalize() {\r\n                if (opts.keepStatic) {\r\n                    resetMaskSet(!0);\r\n                    var lastAlt, validInputs = [], positionsClone = $.extend(!0, {}, getMaskSet().validPositions);\r\n                    for (lastAlt = getLastValidPosition(); lastAlt >= 0; lastAlt--) {\r\n                        var validPos = getMaskSet().validPositions[lastAlt];\r\n                        if (validPos && (null != validPos.match.fn && validInputs.push(validPos.input), \r\n                        delete getMaskSet().validPositions[lastAlt], void 0 !== validPos.alternation && validPos.locator[validPos.alternation] === getTestTemplate(lastAlt).locator[validPos.alternation])) break;\r\n                    }\r\n                    if (lastAlt > -1) for (;validInputs.length > 0; ) {\r\n                        getMaskSet().p = seekNext(getLastValidPosition());\r\n                        var keypress = $.Event(\"keypress\");\r\n                        keypress.which = validInputs.pop().charCodeAt(0), keypressEvent.call(input, keypress, !0, !1, !1, getMaskSet().p);\r\n                    } else getMaskSet().validPositions = $.extend(!0, {}, positionsClone);\r\n                }\r\n            }\r\n            if ((opts.numericInput || isRTL) && (k === Inputmask.keyCode.BACKSPACE ? k = Inputmask.keyCode.DELETE : k === Inputmask.keyCode.DELETE && (k = Inputmask.keyCode.BACKSPACE), \r\n            isRTL)) {\r\n                var pend = pos.end;\r\n                pos.end = pos.begin, pos.begin = pend;\r\n            }\r\n            k === Inputmask.keyCode.BACKSPACE && (pos.end - pos.begin < 1 || opts.insertMode === !1) ? (pos.begin = seekPrevious(pos.begin), \r\n            void 0 === getMaskSet().validPositions[pos.begin] || getMaskSet().validPositions[pos.begin].input !== opts.groupSeparator && getMaskSet().validPositions[pos.begin].input !== opts.radixPoint || pos.begin--) : k === Inputmask.keyCode.DELETE && pos.begin === pos.end && (pos.end = isMask(pos.end) ? pos.end + 1 : seekNext(pos.end) + 1, \r\n            void 0 === getMaskSet().validPositions[pos.begin] || getMaskSet().validPositions[pos.begin].input !== opts.groupSeparator && getMaskSet().validPositions[pos.begin].input !== opts.radixPoint || pos.end++), \r\n            stripValidPositions(pos.begin, pos.end, !1, strict), strict !== !0 && generalize();\r\n            var lvp = getLastValidPosition(pos.begin);\r\n            lvp < pos.begin ? (-1 === lvp && resetMaskSet(), getMaskSet().p = seekNext(lvp)) : strict !== !0 && (getMaskSet().p = pos.begin);\r\n        }\r\n        function keydownEvent(e) {\r\n            var input = this, $input = $(input), k = e.keyCode, pos = caret(input);\r\n            k === Inputmask.keyCode.BACKSPACE || k === Inputmask.keyCode.DELETE || iphone && 127 === k || e.ctrlKey && 88 === k && !isInputEventSupported(\"cut\") ? (e.preventDefault(), \r\n            88 === k && (undoValue = getBuffer().join(\"\")), handleRemove(input, k, pos), writeBuffer(input, getBuffer(), getMaskSet().p, e, undoValue !== getBuffer().join(\"\")), \r\n            input.inputmask._valueGet() === getBufferTemplate().join(\"\") ? $input.trigger(\"cleared\") : isComplete(getBuffer()) === !0 && $input.trigger(\"complete\"), \r\n            opts.showTooltip && $input.prop(\"title\", getMaskSet().mask)) : k === Inputmask.keyCode.END || k === Inputmask.keyCode.PAGE_DOWN ? setTimeout(function() {\r\n                var caretPos = seekNext(getLastValidPosition());\r\n                opts.insertMode || caretPos !== getMaskLength() || e.shiftKey || caretPos--, caret(input, e.shiftKey ? pos.begin : caretPos, caretPos);\r\n            }, 0) : k === Inputmask.keyCode.HOME && !e.shiftKey || k === Inputmask.keyCode.PAGE_UP ? caret(input, 0, e.shiftKey ? pos.begin : 0) : (opts.undoOnEscape && k === Inputmask.keyCode.ESCAPE || 90 === k && e.ctrlKey) && e.altKey !== !0 ? (checkVal(input, !0, !1, undoValue.split(\"\")), \r\n            $input.trigger(\"click\")) : k !== Inputmask.keyCode.INSERT || e.shiftKey || e.ctrlKey ? opts.tabThrough === !0 && k === Inputmask.keyCode.TAB ? (e.shiftKey === !0 ? (null === getTest(pos.begin).fn && (pos.begin = seekNext(pos.begin)), \r\n            pos.end = seekPrevious(pos.begin, !0), pos.begin = seekPrevious(pos.end, !0)) : (pos.begin = seekNext(pos.begin, !0), \r\n            pos.end = seekNext(pos.begin, !0), pos.end < getMaskLength() && pos.end--), pos.begin < getMaskLength() && (e.preventDefault(), \r\n            caret(input, pos.begin, pos.end))) : opts.insertMode !== !1 || e.shiftKey || (k === Inputmask.keyCode.RIGHT ? setTimeout(function() {\r\n                var caretPos = caret(input);\r\n                caret(input, caretPos.begin);\r\n            }, 0) : k === Inputmask.keyCode.LEFT && setTimeout(function() {\r\n                var caretPos = caret(input);\r\n                caret(input, isRTL ? caretPos.begin + 1 : caretPos.begin - 1);\r\n            }, 0)) : (opts.insertMode = !opts.insertMode, caret(input, opts.insertMode || pos.begin !== getMaskLength() ? pos.begin : pos.begin - 1)), \r\n            opts.onKeyDown.call(this, e, getBuffer(), caret(input).begin, opts), ignorable = -1 !== $.inArray(k, opts.ignorables);\r\n        }\r\n        function keypressEvent(e, checkval, writeOut, strict, ndx) {\r\n            var input = this, $input = $(input), k = e.which || e.charCode || e.keyCode;\r\n            if (!(checkval === !0 || e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || ignorable)) return k === Inputmask.keyCode.ENTER && undoValue !== getBuffer().join(\"\") && setTimeout(function() {\r\n                $input.trigger(\"change\"), undoValue = getBuffer().join(\"\");\r\n            }, 0), !0;\r\n            if (k) {\r\n                46 === k && e.shiftKey === !1 && \",\" === opts.radixPoint && (k = 44);\r\n                var forwardPosition, pos = checkval ? {\r\n                    begin: ndx,\r\n                    end: ndx\r\n                } : caret(input), c = String.fromCharCode(k), isSlctn = isSelection(pos.begin, pos.end);\r\n                isSlctn && (getMaskSet().undoPositions = $.extend(!0, {}, getMaskSet().validPositions), \r\n                handleRemove(input, Inputmask.keyCode.DELETE, pos, !0), pos.begin = getMaskSet().p, \r\n                opts.insertMode || (opts.insertMode = !opts.insertMode, setValidPosition(pos.begin, strict), \r\n                opts.insertMode = !opts.insertMode), isSlctn = !opts.multi), getMaskSet().writeOutBuffer = !0;\r\n                var p = isRTL && !isSlctn ? pos.end : pos.begin, valResult = isValid(p, c, strict);\r\n                if (valResult !== !1) {\r\n                    if (valResult !== !0 && (p = void 0 !== valResult.pos ? valResult.pos : p, c = void 0 !== valResult.c ? valResult.c : c), \r\n                    resetMaskSet(!0), void 0 !== valResult.caret) forwardPosition = valResult.caret; else {\r\n                        var vps = getMaskSet().validPositions;\r\n                        forwardPosition = !opts.keepStatic && (void 0 !== vps[p + 1] && getTests(p + 1, vps[p].locator.slice(), p).length > 1 || void 0 !== vps[p].alternation) ? p + 1 : seekNext(p);\r\n                    }\r\n                    getMaskSet().p = forwardPosition;\r\n                }\r\n                if (writeOut !== !1) {\r\n                    var self = this;\r\n                    if (setTimeout(function() {\r\n                        opts.onKeyValidation.call(self, valResult, opts);\r\n                    }, 0), getMaskSet().writeOutBuffer && valResult !== !1) {\r\n                        var buffer = getBuffer();\r\n                        writeBuffer(input, buffer, checkval ? void 0 : opts.numericInput ? seekPrevious(forwardPosition) : forwardPosition, e, checkval !== !0), \r\n                        checkval !== !0 && setTimeout(function() {\r\n                            isComplete(buffer) === !0 && $input.trigger(\"complete\");\r\n                        }, 0);\r\n                    } else isSlctn && (getMaskSet().buffer = void 0, getMaskSet().validPositions = getMaskSet().undoPositions);\r\n                } else isSlctn && (getMaskSet().buffer = void 0, getMaskSet().validPositions = getMaskSet().undoPositions);\r\n                if (opts.showTooltip && $input.prop(\"title\", getMaskSet().mask), checkval && $.isFunction(opts.onBeforeWrite)) {\r\n                    var result = opts.onBeforeWrite.call(this, e, getBuffer(), forwardPosition, opts);\r\n                    if (result && result.refreshFromBuffer) {\r\n                        var refresh = result.refreshFromBuffer;\r\n                        refreshFromBuffer(refresh === !0 ? refresh : refresh.start, refresh.end, result.buffer), \r\n                        resetMaskSet(!0), result.caret && (getMaskSet().p = result.caret);\r\n                    }\r\n                }\r\n                if (e.preventDefault(), checkval) return valResult;\r\n            }\r\n        }\r\n        function pasteEvent(e) {\r\n            var input = this, $input = $(input), inputValue = input.inputmask._valueGet(!0), caretPos = caret(input);\r\n            if (\"propertychange\" === e.type && input.inputmask._valueGet().length <= getMaskLength()) return !0;\r\n            if (\"paste\" === e.type) {\r\n                var valueBeforeCaret = inputValue.substr(0, caretPos.begin), valueAfterCaret = inputValue.substr(caretPos.end, inputValue.length);\r\n                valueBeforeCaret === getBufferTemplate().slice(0, caretPos.begin).join(\"\") && (valueBeforeCaret = \"\"), \r\n                valueAfterCaret === getBufferTemplate().slice(caretPos.end).join(\"\") && (valueAfterCaret = \"\"), \r\n                window.clipboardData && window.clipboardData.getData ? inputValue = valueBeforeCaret + window.clipboardData.getData(\"Text\") + valueAfterCaret : e.originalEvent && e.originalEvent.clipboardData && e.originalEvent.clipboardData.getData && (inputValue = valueBeforeCaret + e.originalEvent.clipboardData.getData(\"text/plain\") + valueAfterCaret);\r\n            }\r\n            var pasteValue = inputValue;\r\n            if ($.isFunction(opts.onBeforePaste)) {\r\n                if (pasteValue = opts.onBeforePaste.call(input, inputValue, opts), pasteValue === !1) return e.preventDefault(), \r\n                !1;\r\n                pasteValue || (pasteValue = inputValue);\r\n            }\r\n            return checkVal(input, !1, !1, isRTL ? pasteValue.split(\"\").reverse() : pasteValue.toString().split(\"\")), \r\n            writeBuffer(input, getBuffer(), void 0, e, !0), $input.trigger(\"click\"), isComplete(getBuffer()) === !0 && $input.trigger(\"complete\"), \r\n            !1;\r\n        }\r\n        function inputFallBackEvent(e) {\r\n            var input = this;\r\n            checkVal(input, !0, !1), isComplete(getBuffer()) === !0 && $(input).trigger(\"complete\"), \r\n            e.preventDefault();\r\n        }\r\n        function compositionStartEvent(e) {\r\n            var input = this;\r\n            undoValue = getBuffer().join(\"\"), (\"\" === compositionData || 0 !== e.originalEvent.data.indexOf(compositionData)) && (compositionCaretPos = caret(input));\r\n        }\r\n        function compositionUpdateEvent(e) {\r\n            var input = this, caretPos = caret(input);\r\n            0 === e.originalEvent.data.indexOf(compositionData) && (resetMaskSet(), caretPos = compositionCaretPos);\r\n            var newData = e.originalEvent.data;\r\n            caret(input, caretPos.begin, caretPos.end);\r\n            for (var i = 0; i < newData.length; i++) {\r\n                var keypress = $.Event(\"keypress\");\r\n                keypress.which = newData.charCodeAt(i), skipKeyPressEvent = !1, ignorable = !1, \r\n                keypressEvent.call(input, keypress);\r\n            }\r\n            setTimeout(function() {\r\n                var forwardPosition = getMaskSet().p;\r\n                writeBuffer(input, getBuffer(), opts.numericInput ? seekPrevious(forwardPosition) : forwardPosition);\r\n            }, 0), compositionData = e.originalEvent.data;\r\n        }\r\n        function compositionEndEvent(e) {}\r\n        function setValueEvent(e) {\r\n            var input = this, value = input.inputmask._valueGet();\r\n            input.inputmask._valueSet($.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call(input, value, opts) || value : value), \r\n            checkVal(input, !0, !1), undoValue = getBuffer().join(\"\"), (opts.clearMaskOnLostFocus || opts.clearIncomplete) && input.inputmask._valueGet() === getBufferTemplate().join(\"\") && input.inputmask._valueSet(\"\");\r\n        }\r\n        function focusEvent(e) {\r\n            var input = this, nptValue = input.inputmask._valueGet();\r\n            opts.showMaskOnFocus && (!opts.showMaskOnHover || opts.showMaskOnHover && \"\" === nptValue) ? input.inputmask._valueGet() !== getBuffer().join(\"\") && writeBuffer(input, getBuffer(), seekNext(getLastValidPosition())) : mouseEnter === !1 && caret(input, seekNext(getLastValidPosition())), \r\n            opts.positionCaretOnTab === !0 && setTimeout(function() {\r\n                caret(input, seekNext(getLastValidPosition()));\r\n            }, 0), undoValue = getBuffer().join(\"\");\r\n        }\r\n        function mouseleaveEvent(e) {\r\n            var input = this;\r\n            if (mouseEnter = !1, opts.clearMaskOnLostFocus) {\r\n                var buffer = getBuffer().slice(), nptValue = input.inputmask._valueGet();\r\n                document.activeElement !== input && nptValue !== input.getAttribute(\"placeholder\") && \"\" !== nptValue && (-1 === getLastValidPosition() && nptValue === getBufferTemplate().join(\"\") ? buffer = [] : clearOptionalTail(buffer), \r\n                writeBuffer(input, buffer));\r\n            }\r\n        }\r\n        function clickEvent(e) {\r\n            function doRadixFocus(clickPos) {\r\n                if (opts.radixFocus && \"\" !== opts.radixPoint) {\r\n                    var vps = getMaskSet().validPositions;\r\n                    if (void 0 === vps[clickPos] || vps[clickPos].input === getPlaceholder(clickPos)) {\r\n                        if (clickPos < seekNext(-1)) return !0;\r\n                        var radixPos = $.inArray(opts.radixPoint, getBuffer());\r\n                        if (-1 !== radixPos) {\r\n                            for (var vp in vps) if (vp > radixPos && vps[vp].input !== getPlaceholder(vp)) return !1;\r\n                            return !0;\r\n                        }\r\n                    }\r\n                }\r\n                return !1;\r\n            }\r\n            var input = this;\r\n            if (document.activeElement === input) {\r\n                var selectedCaret = caret(input);\r\n                if (selectedCaret.begin === selectedCaret.end) if (doRadixFocus(selectedCaret.begin)) caret(input, $.inArray(opts.radixPoint, getBuffer())); else {\r\n                    var clickPosition = selectedCaret.begin, lastPosition = seekNext(getLastValidPosition(clickPosition));\r\n                    lastPosition > clickPosition ? caret(input, isMask(clickPosition) || isMask(clickPosition - 1) ? clickPosition : seekNext(clickPosition)) : caret(input, opts.numericInput ? 0 : lastPosition);\r\n                }\r\n            }\r\n        }\r\n        function dblclickEvent(e) {\r\n            var input = this;\r\n            setTimeout(function() {\r\n                caret(input, 0, seekNext(getLastValidPosition()));\r\n            }, 0);\r\n        }\r\n        function cutEvent(e) {\r\n            skipInputEvent = !0;\r\n            var input = this, $input = $(input), pos = caret(input);\r\n            if (isRTL) {\r\n                var clipboardData = window.clipboardData || e.originalEvent.clipboardData, clipData = clipboardData.getData(\"text\").split(\"\").reverse().join(\"\");\r\n                clipboardData.setData(\"text\", clipData);\r\n            }\r\n            handleRemove(input, Inputmask.keyCode.DELETE, pos), writeBuffer(input, getBuffer(), getMaskSet().p, e, undoValue !== getBuffer().join(\"\")), \r\n            input.inputmask._valueGet() === getBufferTemplate().join(\"\") && $input.trigger(\"cleared\"), \r\n            opts.showTooltip && (input.title = getMaskSet().mask);\r\n        }\r\n        function blurEvent(e) {\r\n            var $input = $(this), input = this;\r\n            if (input.inputmask) {\r\n                var nptValue = input.inputmask._valueGet(), buffer = getBuffer().slice();\r\n                undoValue !== buffer.join(\"\") && setTimeout(function() {\r\n                    $input.trigger(\"change\"), undoValue = buffer.join(\"\");\r\n                }, 0), \"\" !== nptValue && (opts.clearMaskOnLostFocus && (-1 === getLastValidPosition() && nptValue === getBufferTemplate().join(\"\") ? buffer = [] : clearOptionalTail(buffer)), \r\n                isComplete(buffer) === !1 && (setTimeout(function() {\r\n                    $input.trigger(\"incomplete\");\r\n                }, 0), opts.clearIncomplete && (resetMaskSet(), buffer = opts.clearMaskOnLostFocus ? [] : getBufferTemplate().slice())), \r\n                writeBuffer(input, buffer, void 0, e));\r\n            }\r\n        }\r\n        function mouseenterEvent(e) {\r\n            var input = this;\r\n            mouseEnter = !0, document.activeElement !== input && opts.showMaskOnHover && input.inputmask._valueGet() !== getBuffer().join(\"\") && writeBuffer(input, getBuffer());\r\n        }\r\n        function mask(elem) {\r\n            el = elem, $el = $(el), opts.showTooltip && (el.title = getMaskSet().mask), (\"rtl\" === el.dir || opts.rightAlign) && (el.style.textAlign = \"right\"), \r\n            (\"rtl\" === el.dir || opts.numericInput) && (el.dir = \"ltr\", el.removeAttribute(\"dir\"), \r\n            el.inputmask.isRTL = !0, isRTL = !0), $el.off(\".inputmask\"), patchValueProperty(el), \r\n            (\"INPUT\" === el.tagName && isInputTypeSupported(el.getAttribute(\"type\")) || el.isContentEditable) && ($(el.form).on(\"submit\", function() {\r\n                undoValue !== getBuffer().join(\"\") && $el.trigger(\"change\"), opts.clearMaskOnLostFocus && -1 === getLastValidPosition() && el.inputmask._valueGet && el.inputmask._valueGet() === getBufferTemplate().join(\"\") && el.inputmask._valueSet(\"\"), \r\n                opts.removeMaskOnSubmit && (el.inputmask._valueSet(el.inputmask.unmaskedvalue(), !0), \r\n                setTimeout(function() {\r\n                    writeBuffer(el, getBuffer());\r\n                }, 0));\r\n            }).on(\"reset\", function() {\r\n                setTimeout(function() {\r\n                    $el.trigger(\"setvalue.inputmask\");\r\n                }, 0);\r\n            }), $el.on(\"mouseenter.inputmask\", wrapEvent(mouseenterEvent)).on(\"blur.inputmask\", wrapEvent(blurEvent)).on(\"focus.inputmask\", wrapEvent(focusEvent)).on(\"mouseleave.inputmask\", wrapEvent(mouseleaveEvent)).on(\"click.inputmask\", wrapEvent(clickEvent)).on(\"dblclick.inputmask\", wrapEvent(dblclickEvent)).on(PasteEventType + \".inputmask dragdrop.inputmask drop.inputmask\", wrapEvent(pasteEvent)).on(\"cut.inputmask\", wrapEvent(cutEvent)).on(\"complete.inputmask\", wrapEvent(opts.oncomplete)).on(\"incomplete.inputmask\", wrapEvent(opts.onincomplete)).on(\"cleared.inputmask\", wrapEvent(opts.oncleared)).on(\"keydown.inputmask\", wrapEvent(keydownEvent)).on(\"keypress.inputmask\", wrapEvent(keypressEvent)), \r\n            androidfirefox || $el.on(\"compositionstart.inputmask\", wrapEvent(compositionStartEvent)).on(\"compositionupdate.inputmask\", wrapEvent(compositionUpdateEvent)).on(\"compositionend.inputmask\", wrapEvent(compositionEndEvent)), \r\n            \"paste\" === PasteEventType && $el.on(\"input.inputmask\", wrapEvent(inputFallBackEvent))), \r\n            $el.on(\"setvalue.inputmask\", wrapEvent(setValueEvent));\r\n            var initialValue = $.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call(el, el.inputmask._valueGet(), opts) || el.inputmask._valueGet() : el.inputmask._valueGet();\r\n            checkVal(el, !0, !1, initialValue.split(\"\"));\r\n            var buffer = getBuffer().slice();\r\n            undoValue = buffer.join(\"\");\r\n            var activeElement;\r\n            try {\r\n                activeElement = document.activeElement;\r\n            } catch (e) {}\r\n            isComplete(buffer) === !1 && opts.clearIncomplete && resetMaskSet(), opts.clearMaskOnLostFocus && (buffer.join(\"\") === getBufferTemplate().join(\"\") ? buffer = [] : clearOptionalTail(buffer)), \r\n            writeBuffer(el, buffer), activeElement === el && caret(el, seekNext(getLastValidPosition()));\r\n        }\r\n        var undoValue, compositionCaretPos, compositionData, el, $el, maxLength, valueBuffer, isRTL = !1, skipKeyPressEvent = !1, skipInputEvent = !1, ignorable = !1, mouseEnter = !0;\r\n        if (void 0 !== actionObj) switch (actionObj.action) {\r\n          case \"isComplete\":\r\n            return el = actionObj.el, $el = $(el), maskset = el.inputmask.maskset, opts = el.inputmask.opts, \r\n            isComplete(actionObj.buffer);\r\n\r\n          case \"unmaskedvalue\":\r\n            return el = actionObj.el, void 0 === el ? ($el = $({}), el = $el[0], el.inputmask = new Inputmask(), \r\n            el.inputmask.opts = opts, el.inputmask.el = el, el.inputmask.maskset = maskset, \r\n            el.inputmask.isRTL = opts.numericInput, opts.numericInput && (isRTL = !0), valueBuffer = ($.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call($el, actionObj.value, opts) || actionObj.value : actionObj.value).split(\"\"), \r\n            checkVal(el, !1, !1, isRTL ? valueBuffer.reverse() : valueBuffer), $.isFunction(opts.onBeforeWrite) && opts.onBeforeWrite.call(this, void 0, getBuffer(), 0, opts)) : $el = $(el), \r\n            maskset = el.inputmask.maskset, opts = el.inputmask.opts, isRTL = el.inputmask.isRTL, \r\n            unmaskedvalue(el);\r\n\r\n          case \"mask\":\r\n            undoValue = getBuffer().join(\"\"), mask(actionObj.el);\r\n            break;\r\n\r\n          case \"format\":\r\n            return $el = $({}), $el[0].inputmask = new Inputmask(), $el[0].inputmask.opts = opts, \r\n            $el[0].inputmask.el = $el[0], $el[0].inputmask.maskset = maskset, $el[0].inputmask.isRTL = opts.numericInput, \r\n            opts.numericInput && (isRTL = !0), valueBuffer = ($.isFunction(opts.onBeforeMask) ? opts.onBeforeMask.call($el, actionObj.value, opts) || actionObj.value : actionObj.value).split(\"\"), \r\n            checkVal(el, !1, !1, isRTL ? valueBuffer.reverse() : valueBuffer), $.isFunction(opts.onBeforeWrite) && opts.onBeforeWrite.call(this, void 0, getBuffer(), 0, opts), \r\n            actionObj.metadata ? {\r\n                value: isRTL ? getBuffer().slice().reverse().join(\"\") : getBuffer().join(\"\"),\r\n                metadata: $el.inputmask(\"getmetadata\")\r\n            } : isRTL ? getBuffer().slice().reverse().join(\"\") : getBuffer().join(\"\");\r\n\r\n          case \"isValid\":\r\n            $el = $({}), $el[0].inputmask = new Inputmask(), $el[0].inputmask.opts = opts, $el[0].inputmask.el = $el[0], \r\n            $el[0].inputmask.maskset = maskset, $el[0].inputmask.isRTL = opts.numericInput, \r\n            opts.numericInput && (isRTL = !0), valueBuffer = actionObj.value.split(\"\"), checkVal(el, !1, !0, isRTL ? valueBuffer.reverse() : valueBuffer);\r\n            for (var buffer = getBuffer(), rl = determineLastRequiredPosition(), lmib = buffer.length - 1; lmib > rl && !isMask(lmib); lmib--) ;\r\n            return buffer.splice(rl, lmib + 1 - rl), isComplete(buffer) && actionObj.value === buffer.join(\"\");\r\n\r\n          case \"getemptymask\":\r\n            return el = actionObj.el, $el = $(el), maskset = el.inputmask.maskset, opts = el.inputmask.opts, \r\n            getBufferTemplate();\r\n\r\n          case \"remove\":\r\n            el = actionObj.el, $el = $(el), maskset = el.inputmask.maskset, opts = el.inputmask.opts, \r\n            el.inputmask._valueSet(unmaskedvalue(el)), $el.off(\".inputmask\");\r\n            var valueProperty;\r\n            Object.getOwnPropertyDescriptor && (valueProperty = Object.getOwnPropertyDescriptor(el, \"value\")), \r\n            valueProperty && valueProperty.get ? el.inputmask.__valueGet && Object.defineProperty(el, \"value\", {\r\n                get: el.inputmask.__valueGet,\r\n                set: el.inputmask.__valueSet\r\n            }) : document.__lookupGetter__ && el.__lookupGetter__(\"value\") && el.inputmask.__valueGet && (el.__defineGetter__(\"value\", el.inputmask.__valueGet), \r\n            el.__defineSetter__(\"value\", el.inputmask.__valueSet)), el.inputmask = void 0;\r\n            break;\r\n\r\n          case \"getmetadata\":\r\n            if (el = actionObj.el, $el = $(el), maskset = el.inputmask.maskset, opts = el.inputmask.opts, \r\n            $.isArray(maskset.metadata)) {\r\n                for (var alternation, lvp = getLastValidPosition(), firstAlt = lvp; firstAlt >= 0; firstAlt--) if (getMaskSet().validPositions[firstAlt] && void 0 !== getMaskSet().validPositions[firstAlt].alternation) {\r\n                    alternation = getMaskSet().validPositions[firstAlt].alternation;\r\n                    break;\r\n                }\r\n                return void 0 !== alternation ? maskset.metadata[getMaskSet().validPositions[lvp].locator[alternation]] : maskset.metadata[0];\r\n            }\r\n            return maskset.metadata;\r\n        }\r\n    }\r\n    Inputmask.prototype = {\r\n        defaults: {\r\n            placeholder: \"_\",\r\n            optionalmarker: {\r\n                start: \"[\",\r\n                end: \"]\"\r\n            },\r\n            quantifiermarker: {\r\n                start: \"{\",\r\n                end: \"}\"\r\n            },\r\n            groupmarker: {\r\n                start: \"(\",\r\n                end: \")\"\r\n            },\r\n            alternatormarker: \"|\",\r\n            escapeChar: \"\\\\\",\r\n            mask: null,\r\n            oncomplete: $.noop,\r\n            onincomplete: $.noop,\r\n            oncleared: $.noop,\r\n            repeat: 0,\r\n            greedy: !0,\r\n            autoUnmask: !1,\r\n            removeMaskOnSubmit: !1,\r\n            clearMaskOnLostFocus: !0,\r\n            insertMode: !0,\r\n            clearIncomplete: !1,\r\n            aliases: {},\r\n            alias: null,\r\n            onKeyDown: $.noop,\r\n            onBeforeMask: null,\r\n            onBeforePaste: function(pastedValue, opts) {\r\n                return $.isFunction(opts.onBeforeMask) ? opts.onBeforeMask(pastedValue, opts) : pastedValue;\r\n            },\r\n            onBeforeWrite: null,\r\n            onUnMask: null,\r\n            showMaskOnFocus: !0,\r\n            showMaskOnHover: !0,\r\n            onKeyValidation: $.noop,\r\n            skipOptionalPartCharacter: \" \",\r\n            showTooltip: !1,\r\n            numericInput: !1,\r\n            rightAlign: !1,\r\n            undoOnEscape: !0,\r\n            radixPoint: \"\",\r\n            groupSeparator: \"\",\r\n            radixFocus: !1,\r\n            nojumps: !1,\r\n            nojumpsThreshold: 0,\r\n            keepStatic: null,\r\n            positionCaretOnTab: !1,\r\n            tabThrough: !1,\r\n            supportsInputType: [],\r\n            definitions: {\r\n                \"9\": {\r\n                    validator: \"[0-9]\",\r\n                    cardinality: 1,\r\n                    definitionSymbol: \"*\"\r\n                },\r\n                a: {\r\n                    validator: \"[A-Za-z\\u0410-\\u044f\\u0401\\u0451\\xc0-\\xff\\xb5]\",\r\n                    cardinality: 1,\r\n                    definitionSymbol: \"*\"\r\n                },\r\n                \"*\": {\r\n                    validator: \"[0-9A-Za-z\\u0410-\\u044f\\u0401\\u0451\\xc0-\\xff\\xb5]\",\r\n                    cardinality: 1\r\n                }\r\n            },\r\n            ignorables: [ 8, 9, 13, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123 ],\r\n            isComplete: null,\r\n            canClearPosition: $.noop,\r\n            postValidation: null\r\n        },\r\n        masksCache: {},\r\n        mask: function(el) {\r\n            var scopedOpts = $.extend(!0, {}, this.opts);\r\n            importAttributeOptions(el, scopedOpts, $.extend(!0, {}, this.userOptions));\r\n            var maskset = generateMaskSet(scopedOpts, this.noMasksCache);\r\n            return void 0 !== maskset && (void 0 !== el.inputmask && el.inputmask.remove(), \r\n            el.inputmask = new Inputmask(), el.inputmask.opts = scopedOpts, el.inputmask.noMasksCache = this.noMasksCache, \r\n            el.inputmask.userOptions = $.extend(!0, {}, this.userOptions), el.inputmask.el = el, \r\n            el.inputmask.maskset = maskset, el.inputmask.isRTL = !1, $.data(el, \"_inputmask_opts\", scopedOpts), \r\n            maskScope({\r\n                action: \"mask\",\r\n                el: el\r\n            }, maskset, el.inputmask.opts)), el;\r\n        },\r\n        option: function(options) {\r\n            return \"string\" == typeof options ? this.opts[options] : \"object\" == typeof options ? ($.extend(this.opts, options), \r\n            $.extend(this.userOptions, options), this) : void 0;\r\n        },\r\n        unmaskedvalue: function() {\r\n            return this.el ? maskScope({\r\n                action: \"unmaskedvalue\",\r\n                el: this.el\r\n            }) : void 0;\r\n        },\r\n        remove: function() {\r\n            return this.el ? (maskScope({\r\n                action: \"remove\",\r\n                el: this.el\r\n            }), this.el.inputmask = void 0, this.el) : void 0;\r\n        },\r\n        getemptymask: function() {\r\n            return this.el ? maskScope({\r\n                action: \"getemptymask\",\r\n                el: this.el\r\n            }) : void 0;\r\n        },\r\n        hasMaskedValue: function() {\r\n            return !this.opts.autoUnmask;\r\n        },\r\n        isComplete: function() {\r\n            return this.el ? maskScope({\r\n                action: \"isComplete\",\r\n                buffer: this.el.inputmask._valueGet().split(\"\"),\r\n                el: this.el\r\n            }) : void 0;\r\n        },\r\n        getmetadata: function() {\r\n            return this.el ? maskScope({\r\n                action: \"getmetadata\",\r\n                el: this.el\r\n            }) : void 0;\r\n        }\r\n    }, Inputmask.extendDefaults = function(options) {\r\n        $.extend(Inputmask.prototype.defaults, options);\r\n    }, Inputmask.extendDefinitions = function(definition) {\r\n        $.extend(Inputmask.prototype.defaults.definitions, definition);\r\n    }, Inputmask.extendAliases = function(alias) {\r\n        $.extend(Inputmask.prototype.defaults.aliases, alias);\r\n    }, Inputmask.format = function(value, options, metadata) {\r\n        var opts = $.extend(!0, {}, Inputmask.prototype.defaults, options);\r\n        return resolveAlias(opts.alias, options, opts), maskScope({\r\n            action: \"format\",\r\n            value: value,\r\n            metadata: metadata\r\n        }, generateMaskSet(opts, options && void 0 !== options.definitions), opts);\r\n    }, Inputmask.unmask = function(value, options) {\r\n        var opts = $.extend(!0, {}, Inputmask.prototype.defaults, options);\r\n        return resolveAlias(opts.alias, options, opts), maskScope({\r\n            action: \"unmaskedvalue\",\r\n            value: value\r\n        }, generateMaskSet(opts, options && void 0 !== options.definitions), opts);\r\n    }, Inputmask.isValid = function(value, options) {\r\n        var opts = $.extend(!0, {}, Inputmask.prototype.defaults, options);\r\n        return resolveAlias(opts.alias, options, opts), maskScope({\r\n            action: \"isValid\",\r\n            value: value\r\n        }, generateMaskSet(opts, options && void 0 !== options.definitions), opts);\r\n    }, Inputmask.escapeRegex = function(str) {\r\n        var specials = [ \"/\", \".\", \"*\", \"+\", \"?\", \"|\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", \"\\\\\", \"$\", \"^\" ];\r\n        return str.replace(new RegExp(\"(\\\\\" + specials.join(\"|\\\\\") + \")\", \"gim\"), \"\\\\$1\");\r\n    }, Inputmask.keyCode = {\r\n        ALT: 18,\r\n        BACKSPACE: 8,\r\n        CAPS_LOCK: 20,\r\n        COMMA: 188,\r\n        COMMAND: 91,\r\n        COMMAND_LEFT: 91,\r\n        COMMAND_RIGHT: 93,\r\n        CONTROL: 17,\r\n        DELETE: 46,\r\n        DOWN: 40,\r\n        END: 35,\r\n        ENTER: 13,\r\n        ESCAPE: 27,\r\n        HOME: 36,\r\n        INSERT: 45,\r\n        LEFT: 37,\r\n        MENU: 93,\r\n        NUMPAD_ADD: 107,\r\n        NUMPAD_DECIMAL: 110,\r\n        NUMPAD_DIVIDE: 111,\r\n        NUMPAD_ENTER: 108,\r\n        NUMPAD_MULTIPLY: 106,\r\n        NUMPAD_SUBTRACT: 109,\r\n        PAGE_DOWN: 34,\r\n        PAGE_UP: 33,\r\n        PERIOD: 190,\r\n        RIGHT: 39,\r\n        SHIFT: 16,\r\n        SPACE: 32,\r\n        TAB: 9,\r\n        UP: 38,\r\n        WINDOWS: 91\r\n    };\r\n    var ua = navigator.userAgent, iphone = null !== ua.match(new RegExp(\"iphone\", \"i\")), androidchrome = null !== ua.match(new RegExp(\"android.*chrome.*\", \"i\")), androidfirefox = null !== ua.match(new RegExp(\"android.*firefox.*\", \"i\")), PasteEventType = isInputEventSupported(\"paste\") ? \"paste\" : isInputEventSupported(\"input\") ? \"input\" : \"propertychange\";\r\n    return window.Inputmask = Inputmask, Inputmask;\r\n});","/**\r\n* @license Input Mask plugin for jquery\r\n* http://github.com/RobinHerbots/jquery.inputmask\r\n* Copyright (c) 2010 - 2014 Robin Herbots\r\n* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)\r\n* Version: 0.0.0\r\n*/\r\n\r\n(function ($) {\r\n    if ($.fn.inputmask === undefined) {\r\n        //helper functions    \r\n        function isInputEventSupported(eventName) {\r\n            var el = document.createElement('input'),\r\n            eventName = 'on' + eventName,\r\n            isSupported = (eventName in el);\r\n            if (!isSupported) {\r\n                el.setAttribute(eventName, 'return;');\r\n                isSupported = typeof el[eventName] == 'function';\r\n            }\r\n            el = null;\r\n            return isSupported;\r\n        }\r\n        function resolveAlias(aliasStr, options, opts) {\r\n            var aliasDefinition = opts.aliases[aliasStr];\r\n            if (aliasDefinition) {\r\n                if (aliasDefinition.alias) resolveAlias(aliasDefinition.alias, undefined, opts); //alias is another alias\r\n                $.extend(true, opts, aliasDefinition);  //merge alias definition in the options\r\n                $.extend(true, opts, options);  //reapply extra given options\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        function generateMaskSets(opts) {\r\n            var ms = [];\r\n            var genmasks = []; //used to keep track of the masks that where processed, to avoid duplicates\r\n            function getMaskTemplate(mask) {\r\n                if (opts.numericInput) {\r\n                    mask = mask.split('').reverse().join('');\r\n                }\r\n                var escaped = false, outCount = 0, greedy = opts.greedy, repeat = opts.repeat;\r\n                if (repeat == \"*\") greedy = false;\r\n                //if (greedy == true && opts.placeholder == \"\") opts.placeholder = \" \";\r\n                if (mask.length == 1 && greedy == false && repeat != 0) { opts.placeholder = \"\"; } //hide placeholder with single non-greedy mask\r\n                var singleMask = $.map(mask.split(\"\"), function (element, index) {\r\n                    var outElem = [];\r\n                    if (element == opts.escapeChar) {\r\n                        escaped = true;\r\n                    }\r\n                    else if ((element != opts.optionalmarker.start && element != opts.optionalmarker.end) || escaped) {\r\n                        var maskdef = opts.definitions[element];\r\n                        if (maskdef && !escaped) {\r\n                            for (var i = 0; i < maskdef.cardinality; i++) {\r\n                                outElem.push(opts.placeholder.charAt((outCount + i) % opts.placeholder.length));\r\n                            }\r\n                        } else {\r\n                            outElem.push(element);\r\n                            escaped = false;\r\n                        }\r\n                        outCount += outElem.length;\r\n                        return outElem;\r\n                    }\r\n                });\r\n\r\n                //allocate repetitions\r\n                var repeatedMask = singleMask.slice();\r\n                for (var i = 1; i < repeat && greedy; i++) {\r\n                    repeatedMask = repeatedMask.concat(singleMask.slice());\r\n                }\r\n\r\n                return { \"mask\": repeatedMask, \"repeat\": repeat, \"greedy\": greedy };\r\n            }\r\n            //test definition => {fn: RegExp/function, cardinality: int, optionality: bool, newBlockMarker: bool, offset: int, casing: null/upper/lower, def: definitionSymbol}\r\n            function getTestingChain(mask) {\r\n                if (opts.numericInput) {\r\n                    mask = mask.split('').reverse().join('');\r\n                }\r\n                var isOptional = false, escaped = false;\r\n                var newBlockMarker = false; //indicates wheter the begin/ending of a block should be indicated\r\n\r\n                return $.map(mask.split(\"\"), function (element, index) {\r\n                    var outElem = [];\r\n\r\n                    if (element == opts.escapeChar) {\r\n                        escaped = true;\r\n                    } else if (element == opts.optionalmarker.start && !escaped) {\r\n                        isOptional = true;\r\n                        newBlockMarker = true;\r\n                    }\r\n                    else if (element == opts.optionalmarker.end && !escaped) {\r\n                        isOptional = false;\r\n                        newBlockMarker = true;\r\n                    }\r\n                    else {\r\n                        var maskdef = opts.definitions[element];\r\n                        if (maskdef && !escaped) {\r\n                            var prevalidators = maskdef[\"prevalidator\"], prevalidatorsL = prevalidators ? prevalidators.length : 0;\r\n                            for (var i = 1; i < maskdef.cardinality; i++) {\r\n                                var prevalidator = prevalidatorsL >= i ? prevalidators[i - 1] : [], validator = prevalidator[\"validator\"], cardinality = prevalidator[\"cardinality\"];\r\n                                outElem.push({ fn: validator ? typeof validator == 'string' ? new RegExp(validator) : new function () { this.test = validator; } : new RegExp(\".\"), cardinality: cardinality ? cardinality : 1, optionality: isOptional, newBlockMarker: isOptional == true ? newBlockMarker : false, offset: 0, casing: maskdef[\"casing\"], def: maskdef[\"definitionSymbol\"] || element });\r\n                                if (isOptional == true) //reset newBlockMarker\r\n                                    newBlockMarker = false;\r\n                            }\r\n                            outElem.push({ fn: maskdef.validator ? typeof maskdef.validator == 'string' ? new RegExp(maskdef.validator) : new function () { this.test = maskdef.validator; } : new RegExp(\".\"), cardinality: maskdef.cardinality, optionality: isOptional, newBlockMarker: newBlockMarker, offset: 0, casing: maskdef[\"casing\"], def: maskdef[\"definitionSymbol\"] || element });\r\n                        } else {\r\n                            outElem.push({ fn: null, cardinality: 0, optionality: isOptional, newBlockMarker: newBlockMarker, offset: 0, casing: null, def: element });\r\n                            escaped = false;\r\n                        }\r\n                        //reset newBlockMarker\r\n                        newBlockMarker = false;\r\n                        return outElem;\r\n                    }\r\n                });\r\n            }\r\n            function markOptional(maskPart) { //needed for the clearOptionalTail functionality\r\n                return opts.optionalmarker.start + maskPart + opts.optionalmarker.end;\r\n            }\r\n            function splitFirstOptionalEndPart(maskPart) {\r\n                var optionalStartMarkers = 0, optionalEndMarkers = 0, mpl = maskPart.length;\r\n                for (var i = 0; i < mpl; i++) {\r\n                    if (maskPart.charAt(i) == opts.optionalmarker.start) {\r\n                        optionalStartMarkers++;\r\n                    }\r\n                    if (maskPart.charAt(i) == opts.optionalmarker.end) {\r\n                        optionalEndMarkers++;\r\n                    }\r\n                    if (optionalStartMarkers > 0 && optionalStartMarkers == optionalEndMarkers)\r\n                        break;\r\n                }\r\n                var maskParts = [maskPart.substring(0, i)];\r\n                if (i < mpl) {\r\n                    maskParts.push(maskPart.substring(i + 1, mpl));\r\n                }\r\n                return maskParts;\r\n            }\r\n            function splitFirstOptionalStartPart(maskPart) {\r\n                var mpl = maskPart.length;\r\n                for (var i = 0; i < mpl; i++) {\r\n                    if (maskPart.charAt(i) == opts.optionalmarker.start) {\r\n                        break;\r\n                    }\r\n                }\r\n                var maskParts = [maskPart.substring(0, i)];\r\n                if (i < mpl) {\r\n                    maskParts.push(maskPart.substring(i + 1, mpl));\r\n                }\r\n                return maskParts;\r\n            }\r\n            function generateMask(maskPrefix, maskPart, metadata) {\r\n                var maskParts = splitFirstOptionalEndPart(maskPart);\r\n                var newMask, maskTemplate;\r\n\r\n                var masks = splitFirstOptionalStartPart(maskParts[0]);\r\n                if (masks.length > 1) {\r\n                    newMask = maskPrefix + masks[0] + markOptional(masks[1]) + (maskParts.length > 1 ? maskParts[1] : \"\");\r\n                    if ($.inArray(newMask, genmasks) == -1 && newMask != \"\") {\r\n                        genmasks.push(newMask);\r\n                        maskTemplate = getMaskTemplate(newMask);\r\n                        ms.push({\r\n                            \"mask\": newMask,\r\n                            \"_buffer\": maskTemplate[\"mask\"],\r\n                            \"buffer\": maskTemplate[\"mask\"].slice(),\r\n                            \"tests\": getTestingChain(newMask),\r\n                            \"lastValidPosition\": -1,\r\n                            \"greedy\": maskTemplate[\"greedy\"],\r\n                            \"repeat\": maskTemplate[\"repeat\"],\r\n                            \"metadata\": metadata\r\n                        });\r\n                    }\r\n                    newMask = maskPrefix + masks[0] + (maskParts.length > 1 ? maskParts[1] : \"\");\r\n                    if ($.inArray(newMask, genmasks) == -1 && newMask != \"\") {\r\n                        genmasks.push(newMask);\r\n                        maskTemplate = getMaskTemplate(newMask);\r\n                        ms.push({\r\n                            \"mask\": newMask,\r\n                            \"_buffer\": maskTemplate[\"mask\"],\r\n                            \"buffer\": maskTemplate[\"mask\"].slice(),\r\n                            \"tests\": getTestingChain(newMask),\r\n                            \"lastValidPosition\": -1,\r\n                            \"greedy\": maskTemplate[\"greedy\"],\r\n                            \"repeat\": maskTemplate[\"repeat\"],\r\n                            \"metadata\": metadata\r\n                        });\r\n                    }\r\n                    if (splitFirstOptionalStartPart(masks[1]).length > 1) { //optional contains another optional\r\n                        generateMask(maskPrefix + masks[0], masks[1] + maskParts[1], metadata);\r\n                    }\r\n                    if (maskParts.length > 1 && splitFirstOptionalStartPart(maskParts[1]).length > 1) {\r\n                        generateMask(maskPrefix + masks[0] + markOptional(masks[1]), maskParts[1], metadata);\r\n                        generateMask(maskPrefix + masks[0], maskParts[1], metadata);\r\n                    }\r\n                }\r\n                else {\r\n                    newMask = maskPrefix + maskParts;\r\n                    if ($.inArray(newMask, genmasks) == -1 && newMask != \"\") {\r\n                        genmasks.push(newMask);\r\n                        maskTemplate = getMaskTemplate(newMask);\r\n                        ms.push({\r\n                            \"mask\": newMask,\r\n                            \"_buffer\": maskTemplate[\"mask\"],\r\n                            \"buffer\": maskTemplate[\"mask\"].slice(),\r\n                            \"tests\": getTestingChain(newMask),\r\n                            \"lastValidPosition\": -1,\r\n                            \"greedy\": maskTemplate[\"greedy\"],\r\n                            \"repeat\": maskTemplate[\"repeat\"],\r\n                            \"metadata\": metadata\r\n                        });\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if ($.isFunction(opts.mask)) { //allow mask to be a preprocessing fn - should return a valid mask\r\n                opts.mask = opts.mask.call(this, opts);\r\n            }\r\n            if ($.isArray(opts.mask)) {\r\n                $.each(opts.mask, function (ndx, msk) {\r\n                    if (msk[\"mask\"] != undefined) {\r\n                        generateMask(\"\", msk[\"mask\"].toString(), msk);\r\n                    } else\r\n                        generateMask(\"\", msk.toString());\r\n                });\r\n            } else generateMask(\"\", opts.mask.toString());\r\n\r\n            return opts.greedy ? ms : ms.sort(function (a, b) { return a[\"mask\"].length - b[\"mask\"].length; });\r\n        }\r\n\r\n        var msie10 = navigator.userAgent.match(new RegExp(\"msie 10\", \"i\")) !== null,\r\n            iphone = navigator.userAgent.match(new RegExp(\"iphone\", \"i\")) !== null,\r\n            android = navigator.userAgent.match(new RegExp(\"android.*safari.*\", \"i\")) !== null,\r\n            androidchrome = navigator.userAgent.match(new RegExp(\"android.*chrome.*\", \"i\")) !== null,\r\n            pasteEvent = isInputEventSupported('paste') ? 'paste' : isInputEventSupported('input') ? 'input' : \"propertychange\";\r\n\r\n\r\n        //masking scope\r\n        //actionObj definition see below\r\n        function maskScope(masksets, activeMasksetIndex, opts, actionObj) {\r\n            var isRTL = false,\r\n                valueOnFocus = getActiveBuffer().join(''),\r\n                $el, chromeValueOnInput,\r\n                skipKeyPressEvent = false, //Safari 5.1.x - modal dialog fires keypress twice workaround\r\n                skipInputEvent = false, //skip when triggered from within inputmask\r\n                ignorable = false;\r\n\r\n\r\n            //maskset helperfunctions\r\n\r\n            function getActiveMaskSet() {\r\n                return masksets[activeMasksetIndex];\r\n            }\r\n\r\n            function getActiveTests() {\r\n                return getActiveMaskSet()['tests'];\r\n            }\r\n\r\n            function getActiveBufferTemplate() {\r\n                return getActiveMaskSet()['_buffer'];\r\n            }\r\n\r\n            function getActiveBuffer() {\r\n                return getActiveMaskSet()['buffer'];\r\n            }\r\n\r\n            function isValid(pos, c, strict) { //strict true ~ no correction or autofill\r\n                strict = strict === true; //always set a value to strict to prevent possible strange behavior in the extensions \r\n\r\n                function _isValid(position, activeMaskset, c, strict) {\r\n                    var testPos = determineTestPosition(position), loopend = c ? 1 : 0, chrs = '', buffer = activeMaskset[\"buffer\"];\r\n                    for (var i = activeMaskset['tests'][testPos].cardinality; i > loopend; i--) {\r\n                        chrs += getBufferElement(buffer, testPos - (i - 1));\r\n                    }\r\n\r\n                    if (c) {\r\n                        chrs += c;\r\n                    }\r\n\r\n                    //return is false or a json object => { pos: ??, c: ??} or true\r\n                    return activeMaskset['tests'][testPos].fn != null ?\r\n                        activeMaskset['tests'][testPos].fn.test(chrs, buffer, position, strict, opts)\r\n                        : (c == getBufferElement(activeMaskset['_buffer'], position, true) || c == opts.skipOptionalPartCharacter) ?\r\n                            { \"refresh\": true, c: getBufferElement(activeMaskset['_buffer'], position, true), pos: position }\r\n                            : false;\r\n                }\r\n\r\n                function PostProcessResults(maskForwards, results) {\r\n                    var hasValidActual = false;\r\n                    $.each(results, function (ndx, rslt) {\r\n                        hasValidActual = $.inArray(rslt[\"activeMasksetIndex\"], maskForwards) == -1 && rslt[\"result\"] !== false;\r\n                        if (hasValidActual) return false;\r\n                    });\r\n                    if (hasValidActual) { //strip maskforwards\r\n                        results = $.map(results, function (rslt, ndx) {\r\n                            if ($.inArray(rslt[\"activeMasksetIndex\"], maskForwards) == -1) {\r\n                                return rslt;\r\n                            } else {\r\n                                masksets[rslt[\"activeMasksetIndex\"]][\"lastValidPosition\"] = actualLVP;\r\n                            }\r\n                        });\r\n                    } else { //keep maskforwards with the least forward\r\n                        var lowestPos = -1, lowestIndex = -1, rsltValid;\r\n                        $.each(results, function (ndx, rslt) {\r\n                            if ($.inArray(rslt[\"activeMasksetIndex\"], maskForwards) != -1 && rslt[\"result\"] !== false & (lowestPos == -1 || lowestPos > rslt[\"result\"][\"pos\"])) {\r\n                                lowestPos = rslt[\"result\"][\"pos\"];\r\n                                lowestIndex = rslt[\"activeMasksetIndex\"];\r\n                            }\r\n                        });\r\n                        results = $.map(results, function (rslt, ndx) {\r\n                            if ($.inArray(rslt[\"activeMasksetIndex\"], maskForwards) != -1) {\r\n                                if (rslt[\"result\"][\"pos\"] == lowestPos) {\r\n                                    return rslt;\r\n                                } else if (rslt[\"result\"] !== false) {\r\n                                    for (var i = pos; i < lowestPos; i++) {\r\n                                        rsltValid = _isValid(i, masksets[rslt[\"activeMasksetIndex\"]], masksets[lowestIndex][\"buffer\"][i], true);\r\n                                        if (rsltValid === false) {\r\n                                            masksets[rslt[\"activeMasksetIndex\"]][\"lastValidPosition\"] = lowestPos - 1;\r\n                                            break;\r\n                                        } else {\r\n                                            setBufferElement(masksets[rslt[\"activeMasksetIndex\"]][\"buffer\"], i, masksets[lowestIndex][\"buffer\"][i], true);\r\n                                            masksets[rslt[\"activeMasksetIndex\"]][\"lastValidPosition\"] = i;\r\n                                        }\r\n                                    }\r\n                                    //also check check for the lowestpos with the new input\r\n                                    rsltValid = _isValid(lowestPos, masksets[rslt[\"activeMasksetIndex\"]], c, true);\r\n                                    if (rsltValid !== false) {\r\n                                        setBufferElement(masksets[rslt[\"activeMasksetIndex\"]][\"buffer\"], lowestPos, c, true);\r\n                                        masksets[rslt[\"activeMasksetIndex\"]][\"lastValidPosition\"] = lowestPos;\r\n                                    }\r\n                                    //console.log(\"ndx \" + rslt[\"activeMasksetIndex\"] + \" validate \" + masksets[rslt[\"activeMasksetIndex\"]][\"buffer\"].join('') + \" lv \" + masksets[rslt[\"activeMasksetIndex\"]]['lastValidPosition']);\r\n                                    return rslt;\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    return results;\r\n                }\r\n\r\n                if (strict) {\r\n                    var result = _isValid(pos, getActiveMaskSet(), c, strict); //only check validity in current mask when validating strict\r\n                    if (result === true) {\r\n                        result = { \"pos\": pos }; //always take a possible corrected maskposition into account\r\n                    }\r\n                    return result;\r\n                }\r\n\r\n                var results = [], result = false, currentActiveMasksetIndex = activeMasksetIndex,\r\n                    actualBuffer = getActiveBuffer().slice(), actualLVP = getActiveMaskSet()[\"lastValidPosition\"],\r\n                    actualPrevious = seekPrevious(pos),\r\n                    maskForwards = [];\r\n                $.each(masksets, function (index, value) {\r\n                    if (typeof (value) == \"object\") {\r\n                        activeMasksetIndex = index;\r\n\r\n                        var maskPos = pos;\r\n                        var lvp = getActiveMaskSet()['lastValidPosition'],\r\n                            rsltValid;\r\n                        if (lvp == actualLVP) {\r\n                            if ((maskPos - actualLVP) > 1) {\r\n                                for (var i = lvp == -1 ? 0 : lvp; i < maskPos; i++) {\r\n                                    rsltValid = _isValid(i, getActiveMaskSet(), actualBuffer[i], true);\r\n                                    if (rsltValid === false) {\r\n                                        break;\r\n                                    } else {\r\n                                        setBufferElement(getActiveBuffer(), i, actualBuffer[i], true);\r\n                                        if (rsltValid === true) {\r\n                                            rsltValid = { \"pos\": i }; //always take a possible corrected maskposition into account\r\n                                        }\r\n                                        var newValidPosition = rsltValid.pos || i;\r\n                                        if (getActiveMaskSet()['lastValidPosition'] < newValidPosition)\r\n                                            getActiveMaskSet()['lastValidPosition'] = newValidPosition; //set new position from isValid\r\n                                    }\r\n                                }\r\n                            }\r\n                            //does the input match on a further position?\r\n                            if (!isMask(maskPos) && !_isValid(maskPos, getActiveMaskSet(), c, strict)) {\r\n                                var maxForward = seekNext(maskPos) - maskPos;\r\n                                for (var fw = 0; fw < maxForward; fw++) {\r\n                                    if (_isValid(++maskPos, getActiveMaskSet(), c, strict) !== false)\r\n                                        break;\r\n                                }\r\n                                maskForwards.push(activeMasksetIndex);\r\n                                //console.log('maskforward ' + activeMasksetIndex + \" pos \" + pos + \" maskPos \" + maskPos);\r\n                            }\r\n                        }\r\n\r\n                        if (getActiveMaskSet()['lastValidPosition'] >= actualLVP || activeMasksetIndex == currentActiveMasksetIndex) {\r\n                            if (maskPos >= 0 && maskPos < getMaskLength()) {\r\n                                result = _isValid(maskPos, getActiveMaskSet(), c, strict);\r\n                                if (result !== false) {\r\n                                    if (result === true) {\r\n                                        result = { \"pos\": maskPos }; //always take a possible corrected maskposition into account\r\n                                    }\r\n                                    var newValidPosition = result.pos || maskPos;\r\n                                    if (getActiveMaskSet()['lastValidPosition'] < newValidPosition)\r\n                                        getActiveMaskSet()['lastValidPosition'] = newValidPosition; //set new position from isValid\r\n                                }\r\n                                //console.log(\"pos \" + pos + \" ndx \" + activeMasksetIndex + \" validate \" + getActiveBuffer().join('') + \" lv \" + getActiveMaskSet()['lastValidPosition']);\r\n                                results.push({ \"activeMasksetIndex\": index, \"result\": result });\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                activeMasksetIndex = currentActiveMasksetIndex; //reset activeMasksetIndex\r\n\r\n                return PostProcessResults(maskForwards, results); //return results of the multiple mask validations\r\n            }\r\n\r\n            function determineActiveMasksetIndex() {\r\n                var currentMasksetIndex = activeMasksetIndex,\r\n                    highestValid = { \"activeMasksetIndex\": 0, \"lastValidPosition\": -1, \"next\": -1 };\r\n                $.each(masksets, function (index, value) {\r\n                    if (typeof (value) == \"object\") {\r\n                        activeMasksetIndex = index;\r\n                        if (getActiveMaskSet()['lastValidPosition'] > highestValid['lastValidPosition']) {\r\n                            highestValid[\"activeMasksetIndex\"] = index;\r\n                            highestValid[\"lastValidPosition\"] = getActiveMaskSet()['lastValidPosition'];\r\n                            highestValid[\"next\"] = seekNext(getActiveMaskSet()['lastValidPosition']);\r\n                        } else if (getActiveMaskSet()['lastValidPosition'] == highestValid['lastValidPosition'] &&\r\n                            (highestValid['next'] == -1 || highestValid['next'] > seekNext(getActiveMaskSet()['lastValidPosition']))) {\r\n                            highestValid[\"activeMasksetIndex\"] = index;\r\n                            highestValid[\"lastValidPosition\"] = getActiveMaskSet()['lastValidPosition'];\r\n                            highestValid[\"next\"] = seekNext(getActiveMaskSet()['lastValidPosition']);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                activeMasksetIndex = highestValid[\"lastValidPosition\"] != -1 && masksets[currentMasksetIndex][\"lastValidPosition\"] == highestValid[\"lastValidPosition\"] ? currentMasksetIndex : highestValid[\"activeMasksetIndex\"];\r\n                if (currentMasksetIndex != activeMasksetIndex) {\r\n                    clearBuffer(getActiveBuffer(), seekNext(highestValid[\"lastValidPosition\"]), getMaskLength());\r\n                    getActiveMaskSet()[\"writeOutBuffer\"] = true;\r\n                }\r\n                $el.data('_inputmask')['activeMasksetIndex'] = activeMasksetIndex; //store the activeMasksetIndex\r\n            }\r\n\r\n            function isMask(pos) {\r\n                var testPos = determineTestPosition(pos);\r\n                var test = getActiveTests()[testPos];\r\n\r\n                return test != undefined ? test.fn : false;\r\n            }\r\n\r\n            function determineTestPosition(pos) {\r\n                return pos % getActiveTests().length;\r\n            }\r\n\r\n            function getMaskLength() {\r\n                return opts.getMaskLength(getActiveBufferTemplate(), getActiveMaskSet()['greedy'], getActiveMaskSet()['repeat'], getActiveBuffer(), opts);\r\n            }\r\n\r\n            //pos: from position\r\n\r\n            function seekNext(pos) {\r\n                var maskL = getMaskLength();\r\n                if (pos >= maskL) return maskL;\r\n                var position = pos;\r\n                while (++position < maskL && !isMask(position)) {\r\n                }\r\n                return position;\r\n            }\r\n\r\n            //pos: from position\r\n\r\n            function seekPrevious(pos) {\r\n                var position = pos;\r\n                if (position <= 0) return 0;\r\n\r\n                while (--position > 0 && !isMask(position)) {\r\n                }\r\n                return position;\r\n            }\r\n\r\n            function setBufferElement(buffer, position, element, autoPrepare) {\r\n                if (autoPrepare) position = prepareBuffer(buffer, position);\r\n\r\n                var test = getActiveTests()[determineTestPosition(position)];\r\n                var elem = element;\r\n                if (elem != undefined && test != undefined) {\r\n                    switch (test.casing) {\r\n                        case \"upper\":\r\n                            elem = element.toUpperCase();\r\n                            break;\r\n                        case \"lower\":\r\n                            elem = element.toLowerCase();\r\n                            break;\r\n                    }\r\n                }\r\n\r\n                buffer[position] = elem;\r\n            }\r\n\r\n            function getBufferElement(buffer, position, autoPrepare) {\r\n                if (autoPrepare) position = prepareBuffer(buffer, position);\r\n                return buffer[position];\r\n            }\r\n\r\n            //needed to handle the non-greedy mask repetitions\r\n\r\n            function prepareBuffer(buffer, position) {\r\n                var j;\r\n                while (buffer[position] == undefined && buffer.length < getMaskLength()) {\r\n                    j = 0;\r\n                    while (getActiveBufferTemplate()[j] !== undefined) { //add a new buffer\r\n                        buffer.push(getActiveBufferTemplate()[j++]);\r\n                    }\r\n                }\r\n\r\n                return position;\r\n            }\r\n\r\n            function writeBuffer(input, buffer, caretPos) {\r\n                input._valueSet(buffer.join(''));\r\n                if (caretPos != undefined) {\r\n                    caret(input, caretPos);\r\n                }\r\n            }\r\n\r\n            function clearBuffer(buffer, start, end, stripNomasks) {\r\n                for (var i = start, maskL = getMaskLength() ; i < end && i < maskL; i++) {\r\n                    if (stripNomasks === true) {\r\n                        if (!isMask(i))\r\n                            setBufferElement(buffer, i, \"\");\r\n                    } else\r\n                        setBufferElement(buffer, i, getBufferElement(getActiveBufferTemplate().slice(), i, true));\r\n                }\r\n            }\r\n\r\n            function setReTargetPlaceHolder(buffer, pos) {\r\n                var testPos = determineTestPosition(pos);\r\n                setBufferElement(buffer, pos, getBufferElement(getActiveBufferTemplate(), testPos));\r\n            }\r\n\r\n            function getPlaceHolder(pos) {\r\n                return opts.placeholder.charAt(pos % opts.placeholder.length);\r\n            }\r\n\r\n            function checkVal(input, writeOut, strict, nptvl, intelliCheck) {\r\n                var inputValue = nptvl != undefined ? nptvl.slice() : truncateInput(input._valueGet()).split('');\r\n\r\n                $.each(masksets, function (ndx, ms) {\r\n                    if (typeof (ms) == \"object\") {\r\n                        ms[\"buffer\"] = ms[\"_buffer\"].slice();\r\n                        ms[\"lastValidPosition\"] = -1;\r\n                        ms[\"p\"] = -1;\r\n                    }\r\n                });\r\n                if (strict !== true) activeMasksetIndex = 0;\r\n                if (writeOut) input._valueSet(\"\"); //initial clear\r\n                var ml = getMaskLength();\r\n                $.each(inputValue, function (ndx, charCode) {\r\n                    if (intelliCheck === true) {\r\n                        var p = getActiveMaskSet()[\"p\"], lvp = p == -1 ? p : seekPrevious(p),\r\n                            pos = lvp == -1 ? ndx : seekNext(lvp);\r\n                        if ($.inArray(charCode, getActiveBufferTemplate().slice(lvp + 1, pos)) == -1) {\r\n                            keypressEvent.call(input, undefined, true, charCode.charCodeAt(0), writeOut, strict, ndx);\r\n                        }\r\n                    } else {\r\n                        keypressEvent.call(input, undefined, true, charCode.charCodeAt(0), writeOut, strict, ndx);\r\n                    }\r\n                });\r\n\r\n                if (strict === true && getActiveMaskSet()[\"p\"] != -1) {\r\n                    getActiveMaskSet()[\"lastValidPosition\"] = seekPrevious(getActiveMaskSet()[\"p\"]);\r\n                }\r\n            }\r\n\r\n            function escapeRegex(str) {\r\n                return $.inputmask.escapeRegex.call(this, str);\r\n            }\r\n\r\n            function truncateInput(inputValue) {\r\n                return inputValue.replace(new RegExp(\"(\" + escapeRegex(getActiveBufferTemplate().join('')) + \")*$\"), \"\");\r\n            }\r\n\r\n            function clearOptionalTail(input) {\r\n                var buffer = getActiveBuffer(), tmpBuffer = buffer.slice(), testPos, pos;\r\n                for (var pos = tmpBuffer.length - 1; pos >= 0; pos--) {\r\n                    var testPos = determineTestPosition(pos);\r\n                    if (getActiveTests()[testPos].optionality) {\r\n                        if (!isMask(pos) || !isValid(pos, buffer[pos], true))\r\n                            tmpBuffer.pop();\r\n                        else break;\r\n                    } else break;\r\n                }\r\n                writeBuffer(input, tmpBuffer);\r\n            }\r\n\r\n            function unmaskedvalue($input, skipDatepickerCheck) {\r\n                if (getActiveTests() && (skipDatepickerCheck === true || !$input.hasClass('hasDatepicker'))) {\r\n                    //checkVal(input, false, true);\r\n                    var umValue = $.map(getActiveBuffer(), function (element, index) {\r\n                        return isMask(index) && isValid(index, element, true) ? element : null;\r\n                    });\r\n                    var unmaskedValue = (isRTL ? umValue.reverse() : umValue).join('');\r\n                    return opts.onUnMask != undefined ? opts.onUnMask.call(this, getActiveBuffer().join(''), unmaskedValue) : unmaskedValue;\r\n                } else {\r\n                    return $input[0]._valueGet();\r\n                }\r\n            }\r\n\r\n            function TranslatePosition(pos) {\r\n                if (isRTL && typeof pos == 'number' && (!opts.greedy || opts.placeholder != \"\")) {\r\n                    var bffrLght = getActiveBuffer().length;\r\n                    pos = bffrLght - pos;\r\n                }\r\n                return pos;\r\n            }\r\n\r\n            function caret(input, begin, end) {\r\n                var npt = input.jquery && input.length > 0 ? input[0] : input, range;\r\n                if (typeof begin == 'number') {\r\n                    begin = TranslatePosition(begin);\r\n                    end = TranslatePosition(end);\r\n                    if (!$(input).is(':visible')) {\r\n                        return;\r\n                    }\r\n                    end = (typeof end == 'number') ? end : begin;\r\n                    npt.scrollLeft = npt.scrollWidth;\r\n                    if (opts.insertMode == false && begin == end) end++; //set visualization for insert/overwrite mode\r\n                    if (npt.setSelectionRange) {\r\n                        npt.selectionStart = begin;\r\n                        npt.selectionEnd = android ? begin : end;\r\n\r\n                    } else if (npt.createTextRange) {\r\n                        range = npt.createTextRange();\r\n                        range.collapse(true);\r\n                        range.moveEnd('character', end);\r\n                        range.moveStart('character', begin);\r\n                        range.select();\r\n                    }\r\n                } else {\r\n                    if (!$(input).is(':visible')) {\r\n                        return { \"begin\": 0, \"end\": 0 };\r\n                    }\r\n                    if (npt.setSelectionRange) {\r\n                        begin = npt.selectionStart;\r\n                        end = npt.selectionEnd;\r\n                    } else if (document.selection && document.selection.createRange) {\r\n                        range = document.selection.createRange();\r\n                        begin = 0 - range.duplicate().moveStart('character', -100000);\r\n                        end = begin + range.text.length;\r\n                    }\r\n                    begin = TranslatePosition(begin);\r\n                    end = TranslatePosition(end);\r\n                    return { \"begin\": begin, \"end\": end };\r\n                }\r\n            }\r\n\r\n            function isComplete(buffer) { //return true / false / undefined (repeat *)\r\n                if (opts.repeat == \"*\") return undefined;\r\n                var complete = false, highestValidPosition = 0, currentActiveMasksetIndex = activeMasksetIndex;\r\n                $.each(masksets, function (ndx, ms) {\r\n                    if (typeof (ms) == \"object\") {\r\n                        activeMasksetIndex = ndx;\r\n                        var aml = seekPrevious(getMaskLength());\r\n                        if (ms[\"lastValidPosition\"] >= highestValidPosition && ms[\"lastValidPosition\"] == aml) {\r\n                            var msComplete = true;\r\n                            for (var i = 0; i <= aml; i++) {\r\n                                var mask = isMask(i), testPos = determineTestPosition(i);\r\n                                if ((mask && (buffer[i] == undefined || buffer[i] == getPlaceHolder(i))) || (!mask && buffer[i] != getActiveBufferTemplate()[testPos])) {\r\n                                    msComplete = false;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            complete = complete || msComplete;\r\n                            if (complete) //break loop\r\n                                return false;\r\n                        }\r\n                        highestValidPosition = ms[\"lastValidPosition\"];\r\n                    }\r\n                });\r\n                activeMasksetIndex = currentActiveMasksetIndex; //reset activeMaskset\r\n                return complete;\r\n            }\r\n\r\n            function isSelection(begin, end) {\r\n                return isRTL ? (begin - end) > 1 || ((begin - end) == 1 && opts.insertMode) :\r\n                    (end - begin) > 1 || ((end - begin) == 1 && opts.insertMode);\r\n            }\r\n\r\n\r\n            //private functions\r\n            function installEventRuler(npt) {\r\n                var events = $._data(npt).events;\r\n\r\n                $.each(events, function (eventType, eventHandlers) {\r\n                    $.each(eventHandlers, function (ndx, eventHandler) {\r\n                        if (eventHandler.namespace == \"inputmask\") {\r\n                            if (eventHandler.type != \"setvalue\") {\r\n                                var handler = eventHandler.handler;\r\n                                eventHandler.handler = function (e) {\r\n                                    if (this.readOnly || this.disabled)\r\n                                        e.preventDefault;\r\n                                    else\r\n                                        return handler.apply(this, arguments);\r\n                                };\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            function patchValueProperty(npt) {\r\n                var valueProperty;\r\n                if (Object.getOwnPropertyDescriptor)\r\n                    valueProperty = Object.getOwnPropertyDescriptor(npt, \"value\");\r\n                if (valueProperty && valueProperty.get) {\r\n                    if (!npt._valueGet) {\r\n                        var valueGet = valueProperty.get;\r\n                        var valueSet = valueProperty.set;\r\n                        npt._valueGet = function () {\r\n                            return isRTL ? valueGet.call(this).split('').reverse().join('') : valueGet.call(this);\r\n                        };\r\n                        npt._valueSet = function (value) {\r\n                            valueSet.call(this, isRTL ? value.split('').reverse().join('') : value);\r\n                        };\r\n\r\n                        Object.defineProperty(npt, \"value\", {\r\n                            get: function () {\r\n                                var $self = $(this), inputData = $(this).data('_inputmask'), masksets = inputData['masksets'],\r\n                                    activeMasksetIndex = inputData['activeMasksetIndex'];\r\n                                return inputData && inputData['opts'].autoUnmask ? $self.inputmask('unmaskedvalue') : valueGet.call(this) != masksets[activeMasksetIndex]['_buffer'].join('') ? valueGet.call(this) : '';\r\n                            },\r\n                            set: function (value) {\r\n                                valueSet.call(this, value);\r\n                                $(this).triggerHandler('setvalue.inputmask');\r\n                            }\r\n                        });\r\n                    }\r\n                } else if (document.__lookupGetter__ && npt.__lookupGetter__(\"value\")) {\r\n                    if (!npt._valueGet) {\r\n                        var valueGet = npt.__lookupGetter__(\"value\");\r\n                        var valueSet = npt.__lookupSetter__(\"value\");\r\n                        npt._valueGet = function () {\r\n                            return isRTL ? valueGet.call(this).split('').reverse().join('') : valueGet.call(this);\r\n                        };\r\n                        npt._valueSet = function (value) {\r\n                            valueSet.call(this, isRTL ? value.split('').reverse().join('') : value);\r\n                        };\r\n\r\n                        npt.__defineGetter__(\"value\", function () {\r\n                            var $self = $(this), inputData = $(this).data('_inputmask'), masksets = inputData['masksets'],\r\n                                activeMasksetIndex = inputData['activeMasksetIndex'];\r\n                            return inputData && inputData['opts'].autoUnmask ? $self.inputmask('unmaskedvalue') : valueGet.call(this) != masksets[activeMasksetIndex]['_buffer'].join('') ? valueGet.call(this) : '';\r\n                        });\r\n                        npt.__defineSetter__(\"value\", function (value) {\r\n                            valueSet.call(this, value);\r\n                            $(this).triggerHandler('setvalue.inputmask');\r\n                        });\r\n                    }\r\n                } else {\r\n                    if (!npt._valueGet) {\r\n                        npt._valueGet = function () { return isRTL ? this.value.split('').reverse().join('') : this.value; };\r\n                        npt._valueSet = function (value) { this.value = isRTL ? value.split('').reverse().join('') : value; };\r\n                    }\r\n                    if ($.valHooks.text == undefined || $.valHooks.text.inputmaskpatch != true) {\r\n                        var valueGet = $.valHooks.text && $.valHooks.text.get ? $.valHooks.text.get : function (elem) { return elem.value; };\r\n                        var valueSet = $.valHooks.text && $.valHooks.text.set ? $.valHooks.text.set : function (elem, value) {\r\n                            elem.value = value;\r\n                            return elem;\r\n                        };\r\n\r\n                        jQuery.extend($.valHooks, {\r\n                            text: {\r\n                                get: function (elem) {\r\n                                    var $elem = $(elem);\r\n                                    if ($elem.data('_inputmask')) {\r\n                                        if ($elem.data('_inputmask')['opts'].autoUnmask)\r\n                                            return $elem.inputmask('unmaskedvalue');\r\n                                        else {\r\n                                            var result = valueGet(elem),\r\n                                                inputData = $elem.data('_inputmask'), masksets = inputData['masksets'],\r\n                                                activeMasksetIndex = inputData['activeMasksetIndex'];\r\n                                            return result != masksets[activeMasksetIndex]['_buffer'].join('') ? result : '';\r\n                                        }\r\n                                    } else return valueGet(elem);\r\n                                },\r\n                                set: function (elem, value) {\r\n                                    var $elem = $(elem);\r\n                                    var result = valueSet(elem, value);\r\n                                    if ($elem.data('_inputmask')) $elem.triggerHandler('setvalue.inputmask');\r\n                                    return result;\r\n                                },\r\n                                inputmaskpatch: true\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            //shift chars to left from start to end and put c at end position if defined\r\n\r\n            function shiftL(start, end, c, maskJumps) {\r\n                var buffer = getActiveBuffer();\r\n                if (maskJumps !== false) //jumping over nonmask position\r\n                    while (!isMask(start) && start - 1 >= 0) start--;\r\n                for (var i = start; i < end && i < getMaskLength() ; i++) {\r\n                    if (isMask(i)) {\r\n                        setReTargetPlaceHolder(buffer, i);\r\n                        var j = seekNext(i);\r\n                        var p = getBufferElement(buffer, j);\r\n                        if (p != getPlaceHolder(j)) {\r\n                            if (j < getMaskLength() && isValid(i, p, true) !== false && getActiveTests()[determineTestPosition(i)].def == getActiveTests()[determineTestPosition(j)].def) {\r\n                                setBufferElement(buffer, i, p, true);\r\n                            } else {\r\n                                if (isMask(i))\r\n                                    break;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        setReTargetPlaceHolder(buffer, i);\r\n                    }\r\n                }\r\n                if (c != undefined)\r\n                    setBufferElement(buffer, seekPrevious(end), c);\r\n\r\n                if (getActiveMaskSet()[\"greedy\"] == false) {\r\n                    var trbuffer = truncateInput(buffer.join('')).split('');\r\n                    buffer.length = trbuffer.length;\r\n                    for (var i = 0, bl = buffer.length; i < bl; i++) {\r\n                        buffer[i] = trbuffer[i];\r\n                    }\r\n                    if (buffer.length == 0) getActiveMaskSet()[\"buffer\"] = getActiveBufferTemplate().slice();\r\n                }\r\n                return start; //return the used start position\r\n            }\r\n\r\n            function shiftR(start, end, c) {\r\n                var buffer = getActiveBuffer();\r\n                if (getBufferElement(buffer, start, true) != getPlaceHolder(start)) {\r\n                    for (var i = seekPrevious(end) ; i > start && i >= 0; i--) {\r\n                        if (isMask(i)) {\r\n                            var j = seekPrevious(i);\r\n                            var t = getBufferElement(buffer, j);\r\n                            if (t != getPlaceHolder(j)) {\r\n                                if (isValid(j, t, true) !== false && getActiveTests()[determineTestPosition(i)].def == getActiveTests()[determineTestPosition(j)].def) {\r\n                                    setBufferElement(buffer, i, t, true);\r\n                                    setReTargetPlaceHolder(buffer, j);\r\n                                } //else break;\r\n                            }\r\n                        } else\r\n                            setReTargetPlaceHolder(buffer, i);\r\n                    }\r\n                }\r\n                if (c != undefined && getBufferElement(buffer, start) == getPlaceHolder(start))\r\n                    setBufferElement(buffer, start, c);\r\n                var lengthBefore = buffer.length;\r\n                if (getActiveMaskSet()[\"greedy\"] == false) {\r\n                    var trbuffer = truncateInput(buffer.join('')).split('');\r\n                    buffer.length = trbuffer.length;\r\n                    for (var i = 0, bl = buffer.length; i < bl; i++) {\r\n                        buffer[i] = trbuffer[i];\r\n                    }\r\n                    if (buffer.length == 0) getActiveMaskSet()[\"buffer\"] = getActiveBufferTemplate().slice();\r\n                }\r\n                return end - (lengthBefore - buffer.length); //return new start position\r\n            }\r\n\r\n            function HandleRemove(input, k, pos) {\r\n                if (opts.numericInput || isRTL) {\r\n                    switch (k) {\r\n                        case opts.keyCode.BACKSPACE:\r\n                            k = opts.keyCode.DELETE;\r\n                            break;\r\n                        case opts.keyCode.DELETE:\r\n                            k = opts.keyCode.BACKSPACE;\r\n                            break;\r\n                    }\r\n                    if (isRTL) {\r\n                        var pend = pos.end;\r\n                        pos.end = pos.begin;\r\n                        pos.begin = pend;\r\n                    }\r\n                }\r\n\r\n                var isSelection = true;\r\n                if (pos.begin == pos.end) {\r\n                    var posBegin = k == opts.keyCode.BACKSPACE ? pos.begin - 1 : pos.begin;\r\n                    if (opts.isNumeric && opts.radixPoint != \"\" && getActiveBuffer()[posBegin] == opts.radixPoint) {\r\n                        pos.begin = (getActiveBuffer().length - 1 == posBegin) /* radixPoint is latest? delete it */ ? pos.begin : k == opts.keyCode.BACKSPACE ? posBegin : seekNext(posBegin);\r\n                        pos.end = pos.begin;\r\n                    }\r\n                    isSelection = false;\r\n                    if (k == opts.keyCode.BACKSPACE)\r\n                        pos.begin--;\r\n                    else if (k == opts.keyCode.DELETE)\r\n                        pos.end++;\r\n                } else if (pos.end - pos.begin == 1 && !opts.insertMode) {\r\n                    isSelection = false;\r\n                    if (k == opts.keyCode.BACKSPACE)\r\n                        pos.begin--;\r\n                }\r\n\r\n                clearBuffer(getActiveBuffer(), pos.begin, pos.end);\r\n\r\n                var ml = getMaskLength();\r\n                if (opts.greedy == false) {\r\n                    shiftL(pos.begin, ml, undefined, !isRTL && (k == opts.keyCode.BACKSPACE && !isSelection));\r\n                } else {\r\n                    var newpos = pos.begin;\r\n                    for (var i = pos.begin; i < pos.end; i++) { //seeknext to skip placeholders at start in selection\r\n                        if (isMask(i) || !isSelection)\r\n                            newpos = shiftL(pos.begin, ml, undefined, !isRTL && (k == opts.keyCode.BACKSPACE && !isSelection));\r\n                    }\r\n                    if (!isSelection) pos.begin = newpos;\r\n                }\r\n                var firstMaskPos = seekNext(-1);\r\n                clearBuffer(getActiveBuffer(), pos.begin, pos.end, true);\r\n                checkVal(input, false, masksets[1] == undefined || firstMaskPos >= pos.end, getActiveBuffer());\r\n                if (getActiveMaskSet()['lastValidPosition'] < firstMaskPos) {\r\n                    getActiveMaskSet()[\"lastValidPosition\"] = -1;\r\n                    getActiveMaskSet()[\"p\"] = firstMaskPos;\r\n                } else {\r\n                    getActiveMaskSet()[\"p\"] = pos.begin;\r\n                }\r\n            }\r\n\r\n            function keydownEvent(e) {\r\n                //Safari 5.1.x - modal dialog fires keypress twice workaround\r\n                skipKeyPressEvent = false;\r\n                var input = this, $input = $(input), k = e.keyCode, pos = caret(input);\r\n\r\n                //backspace, delete, and escape get special treatment\r\n                if (k == opts.keyCode.BACKSPACE || k == opts.keyCode.DELETE || (iphone && k == 127) || e.ctrlKey && k == 88) { //backspace/delete\r\n                    e.preventDefault(); //stop default action but allow propagation\r\n                    if (k == 88) valueOnFocus = getActiveBuffer().join('');\r\n                    HandleRemove(input, k, pos);\r\n                    determineActiveMasksetIndex();\r\n                    writeBuffer(input, getActiveBuffer(), getActiveMaskSet()[\"p\"]);\r\n                    if (input._valueGet() == getActiveBufferTemplate().join(''))\r\n                        $input.trigger('cleared');\r\n\r\n                    if (opts.showTooltip) { //update tooltip\r\n                        $input.prop(\"title\", getActiveMaskSet()[\"mask\"]);\r\n                    }\r\n                } else if (k == opts.keyCode.END || k == opts.keyCode.PAGE_DOWN) { //when END or PAGE_DOWN pressed set position at lastmatch\r\n                    setTimeout(function () {\r\n                        var caretPos = seekNext(getActiveMaskSet()[\"lastValidPosition\"]);\r\n                        if (!opts.insertMode && caretPos == getMaskLength() && !e.shiftKey) caretPos--;\r\n                        caret(input, e.shiftKey ? pos.begin : caretPos, caretPos);\r\n                    }, 0);\r\n                } else if ((k == opts.keyCode.HOME && !e.shiftKey) || k == opts.keyCode.PAGE_UP) { //Home or page_up\r\n                    caret(input, 0, e.shiftKey ? pos.begin : 0);\r\n                } else if (k == opts.keyCode.ESCAPE || (k == 90 && e.ctrlKey)) { //escape && undo\r\n                    checkVal(input, true, false, valueOnFocus.split(''));\r\n                    $input.click();\r\n                } else if (k == opts.keyCode.INSERT && !(e.shiftKey || e.ctrlKey)) { //insert\r\n                    opts.insertMode = !opts.insertMode;\r\n                    caret(input, !opts.insertMode && pos.begin == getMaskLength() ? pos.begin - 1 : pos.begin);\r\n                } else if (opts.insertMode == false && !e.shiftKey) {\r\n                    if (k == opts.keyCode.RIGHT) {\r\n                        setTimeout(function () {\r\n                            var caretPos = caret(input);\r\n                            caret(input, caretPos.begin);\r\n                        }, 0);\r\n                    } else if (k == opts.keyCode.LEFT) {\r\n                        setTimeout(function () {\r\n                            var caretPos = caret(input);\r\n                            caret(input, caretPos.begin - 1);\r\n                        }, 0);\r\n                    }\r\n                }\r\n\r\n                var currentCaretPos = caret(input);\r\n                if (opts.onKeyDown.call(this, e, getActiveBuffer(), opts) === true) //extra stuff to execute on keydown\r\n                    caret(input, currentCaretPos.begin, currentCaretPos.end);\r\n                ignorable = $.inArray(k, opts.ignorables) != -1;\r\n            }\r\n\r\n\r\n            function keypressEvent(e, checkval, k, writeOut, strict, ndx) {\r\n                //Safari 5.1.x - modal dialog fires keypress twice workaround\r\n                if (k == undefined && skipKeyPressEvent) return false;\r\n                skipKeyPressEvent = true;\r\n\r\n                var input = this, $input = $(input);\r\n\r\n                e = e || window.event;\r\n                var k = checkval ? k : (e.which || e.charCode || e.keyCode);\r\n\r\n                if (checkval !== true && (!(e.ctrlKey && e.altKey) && (e.ctrlKey || e.metaKey || ignorable))) {\r\n                    return true;\r\n                } else {\r\n                    if (k) {\r\n                        //special treat the decimal separator\r\n                        if (checkval !== true && k == 46 && e.shiftKey == false && opts.radixPoint == \",\") k = 44;\r\n\r\n                        var pos, results, result, c = String.fromCharCode(k);\r\n                        if (checkval) {\r\n                            var pcaret = strict ? ndx : getActiveMaskSet()[\"lastValidPosition\"] + 1;\r\n                            pos = { begin: pcaret, end: pcaret };\r\n                        } else {\r\n                            pos = caret(input);\r\n                        }\r\n\r\n                        //should we clear a possible selection??\r\n                        var isSlctn = isSelection(pos.begin, pos.end), redetermineLVP = false,\r\n                            initialIndex = activeMasksetIndex;\r\n                        if (isSlctn) {\r\n                            activeMasksetIndex = initialIndex;\r\n                            $.each(masksets, function (ndx, lmnt) { //init undobuffer for recovery when not valid\r\n                                if (typeof (lmnt) == \"object\") {\r\n                                    activeMasksetIndex = ndx;\r\n                                    getActiveMaskSet()[\"undoBuffer\"] = getActiveBuffer().join('');\r\n                                }\r\n                            });\r\n                            HandleRemove(input, opts.keyCode.DELETE, pos);\r\n                            if (!opts.insertMode) { //preserve some space\r\n                                $.each(masksets, function (ndx, lmnt) {\r\n                                    if (typeof (lmnt) == \"object\") {\r\n                                        activeMasksetIndex = ndx;\r\n                                        shiftR(pos.begin, getMaskLength());\r\n                                        getActiveMaskSet()[\"lastValidPosition\"] = seekNext(getActiveMaskSet()[\"lastValidPosition\"]);\r\n                                    }\r\n                                });\r\n                            }\r\n                            activeMasksetIndex = initialIndex; //restore index\r\n                        }\r\n\r\n                        var radixPosition = getActiveBuffer().join('').indexOf(opts.radixPoint);\r\n                        if (opts.isNumeric && checkval !== true && radixPosition != -1) {\r\n                            if (opts.greedy && pos.begin <= radixPosition) {\r\n                                pos.begin = seekPrevious(pos.begin);\r\n                                pos.end = pos.begin;\r\n                            } else if (c == opts.radixPoint) {\r\n                                pos.begin = radixPosition;\r\n                                pos.end = pos.begin;\r\n                            }\r\n                        }\r\n\r\n\r\n                        var p = pos.begin;\r\n                        results = isValid(p, c, strict);\r\n                        if (strict === true) results = [{ \"activeMasksetIndex\": activeMasksetIndex, \"result\": results }];\r\n                        var minimalForwardPosition = -1;\r\n                        $.each(results, function (index, result) {\r\n                            activeMasksetIndex = result[\"activeMasksetIndex\"];\r\n                            getActiveMaskSet()[\"writeOutBuffer\"] = true;\r\n                            var np = result[\"result\"];\r\n                            if (np !== false) {\r\n                                var refresh = false, buffer = getActiveBuffer();\r\n                                if (np !== true) {\r\n                                    refresh = np[\"refresh\"]; //only rewrite buffer from isValid\r\n                                    p = np.pos != undefined ? np.pos : p; //set new position from isValid\r\n                                    c = np.c != undefined ? np.c : c; //set new char from isValid\r\n                                }\r\n                                if (refresh !== true) {\r\n                                    if (opts.insertMode == true) {\r\n                                        var lastUnmaskedPosition = getMaskLength();\r\n                                        var bfrClone = buffer.slice();\r\n                                        while (getBufferElement(bfrClone, lastUnmaskedPosition, true) != getPlaceHolder(lastUnmaskedPosition) && lastUnmaskedPosition >= p) {\r\n                                            lastUnmaskedPosition = lastUnmaskedPosition == 0 ? -1 : seekPrevious(lastUnmaskedPosition);\r\n                                        }\r\n                                        if (lastUnmaskedPosition >= p) {\r\n                                            shiftR(p, getMaskLength(), c);\r\n                                            //shift the lvp if needed\r\n                                            var lvp = getActiveMaskSet()[\"lastValidPosition\"], nlvp = seekNext(lvp);\r\n                                            if (nlvp != getMaskLength() && lvp >= p && (getBufferElement(getActiveBuffer(), nlvp, true) != getPlaceHolder(nlvp))) {\r\n                                                getActiveMaskSet()[\"lastValidPosition\"] = nlvp;\r\n                                            }\r\n                                        } else getActiveMaskSet()[\"writeOutBuffer\"] = false;\r\n                                    } else setBufferElement(buffer, p, c, true);\r\n                                    if (minimalForwardPosition == -1 || minimalForwardPosition > seekNext(p)) {\r\n                                        minimalForwardPosition = seekNext(p);\r\n                                    }\r\n                                } else if (!strict) {\r\n                                    var nextPos = p < getMaskLength() ? p + 1 : p;\r\n                                    if (minimalForwardPosition == -1 || minimalForwardPosition > nextPos) {\r\n                                        minimalForwardPosition = nextPos;\r\n                                    }\r\n                                }\r\n                                if (minimalForwardPosition > getActiveMaskSet()[\"p\"])\r\n                                    getActiveMaskSet()[\"p\"] = minimalForwardPosition; //needed for checkval strict \r\n                            }\r\n                        });\r\n\r\n                        if (strict !== true) {\r\n                            activeMasksetIndex = initialIndex;\r\n                            determineActiveMasksetIndex();\r\n                        }\r\n                        if (writeOut !== false) {\r\n                            $.each(results, function (ndx, rslt) {\r\n                                if (rslt[\"activeMasksetIndex\"] == activeMasksetIndex) {\r\n                                    result = rslt;\r\n                                    return false;\r\n                                }\r\n                            });\r\n                            if (result != undefined) {\r\n                                var self = this;\r\n                                setTimeout(function () { opts.onKeyValidation.call(self, result[\"result\"], opts); }, 0);\r\n                                if (getActiveMaskSet()[\"writeOutBuffer\"] && result[\"result\"] !== false) {\r\n                                    var buffer = getActiveBuffer();\r\n\r\n                                    var newCaretPosition;\r\n                                    if (checkval) {\r\n                                        newCaretPosition = undefined;\r\n                                    } else if (opts.numericInput) {\r\n                                        if (p > radixPosition) {\r\n                                            newCaretPosition = seekPrevious(minimalForwardPosition);\r\n                                        } else if (c == opts.radixPoint) {\r\n                                            newCaretPosition = minimalForwardPosition - 1;\r\n                                        } else newCaretPosition = seekPrevious(minimalForwardPosition - 1);\r\n                                    } else {\r\n                                        newCaretPosition = minimalForwardPosition;\r\n                                    }\r\n\r\n                                    writeBuffer(input, buffer, newCaretPosition);\r\n                                    if (checkval !== true) {\r\n                                        setTimeout(function () { //timeout needed for IE\r\n                                            if (isComplete(buffer) === true)\r\n                                                $input.trigger(\"complete\");\r\n                                            skipInputEvent = true;\r\n                                            $input.trigger(\"input\");\r\n                                        }, 0);\r\n                                    }\r\n                                } else if (isSlctn) {\r\n                                    getActiveMaskSet()[\"buffer\"] = getActiveMaskSet()[\"undoBuffer\"].split('');\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (opts.showTooltip) { //update tooltip\r\n                            $input.prop(\"title\", getActiveMaskSet()[\"mask\"]);\r\n                        }\r\n\r\n                        //needed for IE8 and below\r\n                        if (e) e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function keyupEvent(e) {\r\n                var $input = $(this), input = this, k = e.keyCode, buffer = getActiveBuffer();\r\n\r\n                if (androidchrome && k == opts.keyCode.BACKSPACE) {\r\n                    if (chromeValueOnInput == input._valueGet())\r\n                        keydownEvent.call(this, e);\r\n                }\r\n\r\n                opts.onKeyUp.call(this, e, buffer, opts); //extra stuff to execute on keyup\r\n                if (k == opts.keyCode.TAB && opts.showMaskOnFocus) {\r\n                    if ($input.hasClass('focus.inputmask') && input._valueGet().length == 0) {\r\n                        buffer = getActiveBufferTemplate().slice();\r\n                        writeBuffer(input, buffer);\r\n                        caret(input, 0);\r\n                        valueOnFocus = getActiveBuffer().join('');\r\n                    } else {\r\n                        writeBuffer(input, buffer);\r\n                        if (buffer.join('') == getActiveBufferTemplate().join('') && $.inArray(opts.radixPoint, buffer) != -1) {\r\n                            caret(input, TranslatePosition(0));\r\n                            $input.click();\r\n                        } else\r\n                            caret(input, TranslatePosition(0), TranslatePosition(getMaskLength()));\r\n                    }\r\n                }\r\n            }\r\n\r\n            function inputEvent(e) {\r\n                if (skipInputEvent === true) {\r\n                    skipInputEvent = false;\r\n                    return true;\r\n                }\r\n                var input = this, $input = $(input);\r\n\r\n                chromeValueOnInput = getActiveBuffer().join('');\r\n                checkVal(input, false, false);\r\n                writeBuffer(input, getActiveBuffer());\r\n                if (isComplete(getActiveBuffer()) === true)\r\n                    $input.trigger(\"complete\");\r\n                $input.click();\r\n            }\r\n\r\n            function mask(el) {\r\n                $el = $(el);\r\n                if ($el.is(\":input\")) {\r\n                    //store tests & original buffer in the input element - used to get the unmasked value\r\n                    $el.data('_inputmask', {\r\n                        'masksets': masksets,\r\n                        'activeMasksetIndex': activeMasksetIndex,\r\n                        'opts': opts,\r\n                        'isRTL': false\r\n                    });\r\n\r\n                    //show tooltip\r\n                    if (opts.showTooltip) {\r\n                        $el.prop(\"title\", getActiveMaskSet()[\"mask\"]);\r\n                    }\r\n\r\n                    //correct greedy setting if needed\r\n                    getActiveMaskSet()['greedy'] = getActiveMaskSet()['greedy'] ? getActiveMaskSet()['greedy'] : getActiveMaskSet()['repeat'] == 0;\r\n\r\n                    //handle maxlength attribute\r\n                    if ($el.attr(\"maxLength\") != null) //only when the attribute is set\r\n                    {\r\n                        var maxLength = $el.prop('maxLength');\r\n                        if (maxLength > -1) { //handle *-repeat\r\n                            $.each(masksets, function (ndx, ms) {\r\n                                if (typeof (ms) == \"object\") {\r\n                                    if (ms[\"repeat\"] == \"*\") {\r\n                                        ms[\"repeat\"] = maxLength;\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                        if (getMaskLength() >= maxLength && maxLength > -1) { //FF sets no defined max length to -1 \r\n                            if (maxLength < getActiveBufferTemplate().length) getActiveBufferTemplate().length = maxLength;\r\n                            if (getActiveMaskSet()['greedy'] == false) {\r\n                                getActiveMaskSet()['repeat'] = Math.round(maxLength / getActiveBufferTemplate().length);\r\n                            }\r\n                            $el.prop('maxLength', getMaskLength() * 2);\r\n                        }\r\n                    }\r\n\r\n                    patchValueProperty(el);\r\n\r\n                    if (opts.numericInput) opts.isNumeric = opts.numericInput;\r\n                    if (el.dir == \"rtl\" || (opts.numericInput && opts.rightAlignNumerics) || (opts.isNumeric && opts.rightAlignNumerics))\r\n                        $el.css(\"text-align\", \"right\");\r\n\r\n                    if (el.dir == \"rtl\" || opts.numericInput) {\r\n                        el.dir = \"ltr\";\r\n                        $el.removeAttr(\"dir\");\r\n                        var inputData = $el.data('_inputmask');\r\n                        inputData['isRTL'] = true;\r\n                        $el.data('_inputmask', inputData);\r\n                        isRTL = true;\r\n                    }\r\n\r\n                    //unbind all events - to make sure that no other mask will interfere when re-masking\r\n                    $el.unbind(\".inputmask\");\r\n                    $el.removeClass('focus.inputmask');\r\n                    //bind events\r\n                    $el.closest('form').bind(\"submit\", function () { //trigger change on submit if any\r\n                        if (valueOnFocus != getActiveBuffer().join('')) {\r\n                            $el.change();\r\n                        }\r\n                    }).bind('reset', function () {\r\n                        setTimeout(function () {\r\n                            $el.trigger(\"setvalue\");\r\n                        }, 0);\r\n                    });\r\n                    $el.bind(\"mouseenter.inputmask\", function () {\r\n                        var $input = $(this), input = this;\r\n                        if (!$input.hasClass('focus.inputmask') && opts.showMaskOnHover) {\r\n                            if (input._valueGet() != getActiveBuffer().join('')) {\r\n                                writeBuffer(input, getActiveBuffer());\r\n                            }\r\n                        }\r\n                    }).bind(\"blur.inputmask\", function () {\r\n                        var $input = $(this), input = this, nptValue = input._valueGet(), buffer = getActiveBuffer();\r\n                        $input.removeClass('focus.inputmask');\r\n                        if (valueOnFocus != getActiveBuffer().join('')) {\r\n                            $input.change();\r\n                        }\r\n                        if (opts.clearMaskOnLostFocus && nptValue != '') {\r\n                            if (nptValue == getActiveBufferTemplate().join(''))\r\n                                input._valueSet('');\r\n                            else { //clearout optional tail of the mask\r\n                                clearOptionalTail(input);\r\n                            }\r\n                        }\r\n                        if (isComplete(buffer) === false) {\r\n                            $input.trigger(\"incomplete\");\r\n                            if (opts.clearIncomplete) {\r\n                                $.each(masksets, function (ndx, ms) {\r\n                                    if (typeof (ms) == \"object\") {\r\n                                        ms[\"buffer\"] = ms[\"_buffer\"].slice();\r\n                                        ms[\"lastValidPosition\"] = -1;\r\n                                    }\r\n                                });\r\n                                activeMasksetIndex = 0;\r\n                                if (opts.clearMaskOnLostFocus)\r\n                                    input._valueSet('');\r\n                                else {\r\n                                    buffer = getActiveBufferTemplate().slice();\r\n                                    writeBuffer(input, buffer);\r\n                                }\r\n                            }\r\n                        }\r\n                    }).bind(\"focus.inputmask\", function () {\r\n                        var $input = $(this), input = this, nptValue = input._valueGet();\r\n                        if (opts.showMaskOnFocus && !$input.hasClass('focus.inputmask') && (!opts.showMaskOnHover || (opts.showMaskOnHover && nptValue == ''))) {\r\n                            if (input._valueGet() != getActiveBuffer().join('')) {\r\n                                writeBuffer(input, getActiveBuffer(), seekNext(getActiveMaskSet()[\"lastValidPosition\"]));\r\n                            }\r\n                        }\r\n                        $input.addClass('focus.inputmask');\r\n                        valueOnFocus = getActiveBuffer().join('');\r\n                    }).bind(\"mouseleave.inputmask\", function () {\r\n                        var $input = $(this), input = this;\r\n                        if (opts.clearMaskOnLostFocus) {\r\n                            if (!$input.hasClass('focus.inputmask') && input._valueGet() != $input.attr(\"placeholder\")) {\r\n                                if (input._valueGet() == getActiveBufferTemplate().join('') || input._valueGet() == '')\r\n                                    input._valueSet('');\r\n                                else { //clearout optional tail of the mask\r\n                                    clearOptionalTail(input);\r\n                                }\r\n                            }\r\n                        }\r\n                    }).bind(\"click.inputmask\", function () {\r\n                        var input = this;\r\n                        setTimeout(function () {\r\n                            var selectedCaret = caret(input), buffer = getActiveBuffer();\r\n                            if (selectedCaret.begin == selectedCaret.end) {\r\n                                var clickPosition = isRTL ? TranslatePosition(selectedCaret.begin) : selectedCaret.begin,\r\n                                    lvp = getActiveMaskSet()[\"lastValidPosition\"],\r\n                                    lastPosition;\r\n                                if (opts.isNumeric) {\r\n                                    lastPosition = opts.skipRadixDance === false && opts.radixPoint != \"\" && $.inArray(opts.radixPoint, buffer) != -1 ?\r\n                                        (opts.numericInput ? seekNext($.inArray(opts.radixPoint, buffer)) : $.inArray(opts.radixPoint, buffer)) :\r\n                                        seekNext(lvp);\r\n                                } else {\r\n                                    lastPosition = seekNext(lvp);\r\n                                }\r\n                                if (clickPosition < lastPosition) {\r\n                                    if (isMask(clickPosition))\r\n                                        caret(input, clickPosition);\r\n                                    else caret(input, seekNext(clickPosition));\r\n                                } else\r\n                                    caret(input, lastPosition);\r\n                            }\r\n                        }, 0);\r\n                    }).bind('dblclick.inputmask', function () {\r\n                        var input = this;\r\n                        setTimeout(function () {\r\n                            caret(input, 0, seekNext(getActiveMaskSet()[\"lastValidPosition\"]));\r\n                        }, 0);\r\n                    }).bind(pasteEvent + \".inputmask dragdrop.inputmask drop.inputmask\", function (e) {\r\n                        if (skipInputEvent === true) {\r\n                            skipInputEvent = false;\r\n                            return true;\r\n                        }\r\n                        var input = this, $input = $(input);\r\n\r\n                        //paste event for IE8 and lower I guess ;-)\r\n                        if (e.type == \"propertychange\" && input._valueGet().length <= getMaskLength()) {\r\n                            return true;\r\n                        }\r\n                        setTimeout(function () {\r\n                            var pasteValue = opts.onBeforePaste != undefined ? opts.onBeforePaste.call(this, input._valueGet()) : input._valueGet();\r\n                            checkVal(input, true, false, pasteValue.split(''), true);\r\n                            if (isComplete(getActiveBuffer()) === true)\r\n                                $input.trigger(\"complete\");\r\n                            $input.click();\r\n                        }, 0);\r\n                    }).bind('setvalue.inputmask', function () {\r\n                        var input = this;\r\n                        checkVal(input, true);\r\n                        valueOnFocus = getActiveBuffer().join('');\r\n                        if (input._valueGet() == getActiveBufferTemplate().join(''))\r\n                            input._valueSet('');\r\n                    }).bind('complete.inputmask', opts.oncomplete\r\n                    ).bind('incomplete.inputmask', opts.onincomplete\r\n                    ).bind('cleared.inputmask', opts.oncleared\r\n                    ).bind(\"keyup.inputmask\", keyupEvent);\r\n\r\n                    if (androidchrome) {\r\n                        $el.bind(\"input.inputmask\", inputEvent);\r\n                    } else {\r\n                        $el.bind(\"keydown.inputmask\", keydownEvent\r\n                        ).bind(\"keypress.inputmask\", keypressEvent);\r\n                    }\r\n\r\n                    if (msie10)\r\n                        $el.bind(\"input.inputmask\", inputEvent);\r\n\r\n                    //apply mask\r\n                    checkVal(el, true, false);\r\n                    valueOnFocus = getActiveBuffer().join('');\r\n                    // Wrap document.activeElement in a try/catch block since IE9 throw \"Unspecified error\" if document.activeElement is undefined when we are in an IFrame.\r\n                    var activeElement;\r\n                    try {\r\n                        activeElement = document.activeElement;\r\n                    } catch (e) {\r\n                    }\r\n                    if (activeElement === el) { //position the caret when in focus\r\n                        $el.addClass('focus.inputmask');\r\n                        caret(el, seekNext(getActiveMaskSet()[\"lastValidPosition\"]));\r\n                    } else if (opts.clearMaskOnLostFocus) {\r\n                        if (getActiveBuffer().join('') == getActiveBufferTemplate().join('')) {\r\n                            el._valueSet('');\r\n                        } else {\r\n                            clearOptionalTail(el);\r\n                        }\r\n                    } else {\r\n                        writeBuffer(el, getActiveBuffer());\r\n                    }\r\n\r\n                    installEventRuler(el);\r\n                }\r\n            }\r\n\r\n            //action object\r\n            if (actionObj != undefined) {\r\n                switch (actionObj[\"action\"]) {\r\n                    case \"isComplete\":\r\n                        return isComplete(actionObj[\"buffer\"]);\r\n                    case \"unmaskedvalue\":\r\n                        isRTL = actionObj[\"$input\"].data('_inputmask')['isRTL'];\r\n                        return unmaskedvalue(actionObj[\"$input\"], actionObj[\"skipDatepickerCheck\"]);\r\n                    case \"mask\":\r\n                        mask(actionObj[\"el\"]);\r\n                        break;\r\n                    case \"format\":\r\n                        $el = $({});\r\n                        $el.data('_inputmask', {\r\n                            'masksets': masksets,\r\n                            'activeMasksetIndex': activeMasksetIndex,\r\n                            'opts': opts,\r\n                            'isRTL': opts.numericInput\r\n                        });\r\n                        if (opts.numericInput) {\r\n                            opts.isNumeric = opts.numericInput;\r\n                            isRTL = true;\r\n                        }\r\n\r\n                        checkVal($el, false, false, actionObj[\"value\"].split(''), true);\r\n                        return getActiveBuffer().join('');\r\n                }\r\n            }\r\n        }\r\n        $.inputmask = {\r\n            //options default\r\n            defaults: {\r\n                placeholder: \"_\",\r\n                optionalmarker: { start: \"[\", end: \"]\" },\r\n                quantifiermarker: { start: \"{\", end: \"}\" },\r\n                groupmarker: { start: \"(\", end: \")\" },\r\n                escapeChar: \"\\\\\",\r\n                mask: null,\r\n                oncomplete: $.noop, //executes when the mask is complete\r\n                onincomplete: $.noop, //executes when the mask is incomplete and focus is lost\r\n                oncleared: $.noop, //executes when the mask is cleared\r\n                repeat: 0, //repetitions of the mask: * ~ forever, otherwise specify an integer\r\n                greedy: true, //true: allocated buffer for the mask and repetitions - false: allocate only if needed\r\n                autoUnmask: false, //automatically unmask when retrieving the value with $.fn.val or value if the browser supports __lookupGetter__ or getOwnPropertyDescriptor\r\n                clearMaskOnLostFocus: true,\r\n                insertMode: true, //insert the input or overwrite the input\r\n                clearIncomplete: false, //clear the incomplete input on blur\r\n                aliases: {}, //aliases definitions => see jquery.inputmask.extensions.js\r\n                onKeyUp: $.noop, //override to implement autocomplete on certain keys for example\r\n                onKeyDown: $.noop, //override to implement autocomplete on certain keys for example\r\n                onBeforePaste: undefined, //executes before masking the pasted value to allow preprocessing of the pasted value.  args => pastedValue => return processedValue\r\n                onUnMask: undefined, //executes after unmasking to allow postprocessing of the unmaskedvalue.  args => maskedValue, unmaskedValue\r\n                showMaskOnFocus: true, //show the mask-placeholder when the input has focus\r\n                showMaskOnHover: true, //show the mask-placeholder when hovering the empty input\r\n                onKeyValidation: $.noop, //executes on every key-press with the result of isValid. Params: result, opts\r\n                skipOptionalPartCharacter: \" \", //a character which can be used to skip an optional part of a mask\r\n                showTooltip: false, //show the activemask as tooltip\r\n                numericInput: false, //numericInput input direction style (input shifts to the left while holding the caret position)\r\n                //numeric basic properties\r\n                isNumeric: false, //enable numeric features\r\n                radixPoint: \"\", //\".\", // | \",\"\r\n                skipRadixDance: false, //disable radixpoint caret positioning\r\n                rightAlignNumerics: true, //align numerics to the right\r\n                //numeric basic properties\r\n                definitions: {\r\n                    '9': {\r\n                        validator: \"[0-9]\",\r\n                        cardinality: 1\r\n                    },\r\n                    'a': {\r\n                        validator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451]\",\r\n                        cardinality: 1\r\n                    },\r\n                    '*': {\r\n                        validator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u04510-9]\",\r\n                        cardinality: 1\r\n                    }\r\n                },\r\n                keyCode: {\r\n                    ALT: 18, BACKSPACE: 8, CAPS_LOCK: 20, COMMA: 188, COMMAND: 91, COMMAND_LEFT: 91, COMMAND_RIGHT: 93, CONTROL: 17, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, INSERT: 45, LEFT: 37, MENU: 93, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108,\r\n                    NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SHIFT: 16, SPACE: 32, TAB: 9, UP: 38, WINDOWS: 91\r\n                },\r\n                //specify keycodes which should not be considered in the keypress event, otherwise the preventDefault will stop their default behavior especially in FF\r\n                ignorables: [8, 9, 13, 19, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 93, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123],\r\n                getMaskLength: function (buffer, greedy, repeat, currentBuffer, opts) {\r\n                    var calculatedLength = buffer.length;\r\n                    if (!greedy) {\r\n                        if (repeat == \"*\") {\r\n                            calculatedLength = currentBuffer.length + 1;\r\n                        } else if (repeat > 1) {\r\n                            calculatedLength += (buffer.length * (repeat - 1));\r\n                        }\r\n                    }\r\n                    return calculatedLength;\r\n                }\r\n            },\r\n            escapeRegex: function (str) {\r\n                var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\\\'];\r\n                return str.replace(new RegExp('(\\\\' + specials.join('|\\\\') + ')', 'gim'), '\\\\$1');\r\n            },\r\n            format: function (value, options) {\r\n                var opts = $.extend(true, {}, $.inputmask.defaults, options);\r\n                resolveAlias(opts.alias, options, opts);\r\n                return maskScope(generateMaskSets(opts), 0, opts, { \"action\": \"format\", \"value\": value });\r\n            }\r\n        };\r\n\r\n        $.fn.inputmask = function (fn, options) {\r\n            var opts = $.extend(true, {}, $.inputmask.defaults, options),\r\n                masksets,\r\n                activeMasksetIndex = 0;\r\n\r\n            if (typeof fn === \"string\") {\r\n                switch (fn) {\r\n                    case \"mask\":\r\n                        //resolve possible aliases given by options\r\n                        resolveAlias(opts.alias, options, opts);\r\n                        masksets = generateMaskSets(opts);\r\n                        if (masksets.length == 0) { return this; }\r\n\r\n                        return this.each(function () {\r\n                            maskScope($.extend(true, {}, masksets), 0, opts, { \"action\": \"mask\", \"el\": this });\r\n                        });\r\n                    case \"unmaskedvalue\":\r\n                        var $input = $(this), input = this;\r\n                        if ($input.data('_inputmask')) {\r\n                            masksets = $input.data('_inputmask')['masksets'];\r\n                            activeMasksetIndex = $input.data('_inputmask')['activeMasksetIndex'];\r\n                            opts = $input.data('_inputmask')['opts'];\r\n                            return maskScope(masksets, activeMasksetIndex, opts, { \"action\": \"unmaskedvalue\", \"$input\": $input });\r\n                        } else return $input.val();\r\n                    case \"remove\":\r\n                        return this.each(function () {\r\n                            var $input = $(this), input = this;\r\n                            if ($input.data('_inputmask')) {\r\n                                masksets = $input.data('_inputmask')['masksets'];\r\n                                activeMasksetIndex = $input.data('_inputmask')['activeMasksetIndex'];\r\n                                opts = $input.data('_inputmask')['opts'];\r\n                                //writeout the unmaskedvalue\r\n                                input._valueSet(maskScope(masksets, activeMasksetIndex, opts, { \"action\": \"unmaskedvalue\", \"$input\": $input, \"skipDatepickerCheck\": true }));\r\n                                //clear data\r\n                                $input.removeData('_inputmask');\r\n                                //unbind all events\r\n                                $input.unbind(\".inputmask\");\r\n                                $input.removeClass('focus.inputmask');\r\n                                //restore the value property\r\n                                var valueProperty;\r\n                                if (Object.getOwnPropertyDescriptor)\r\n                                    valueProperty = Object.getOwnPropertyDescriptor(input, \"value\");\r\n                                if (valueProperty && valueProperty.get) {\r\n                                    if (input._valueGet) {\r\n                                        Object.defineProperty(input, \"value\", {\r\n                                            get: input._valueGet,\r\n                                            set: input._valueSet\r\n                                        });\r\n                                    }\r\n                                } else if (document.__lookupGetter__ && input.__lookupGetter__(\"value\")) {\r\n                                    if (input._valueGet) {\r\n                                        input.__defineGetter__(\"value\", input._valueGet);\r\n                                        input.__defineSetter__(\"value\", input._valueSet);\r\n                                    }\r\n                                }\r\n                                try { //try catch needed for IE7 as it does not supports deleting fns\r\n                                    delete input._valueGet;\r\n                                    delete input._valueSet;\r\n                                } catch (e) {\r\n                                    input._valueGet = undefined;\r\n                                    input._valueSet = undefined;\r\n\r\n                                }\r\n                            }\r\n                        });\r\n                        break;\r\n                    case \"getemptymask\": //return the default (empty) mask value, usefull for setting the default value in validation\r\n                        if (this.data('_inputmask')) {\r\n                            masksets = this.data('_inputmask')['masksets'];\r\n                            activeMasksetIndex = this.data('_inputmask')['activeMasksetIndex'];\r\n                            return masksets[activeMasksetIndex]['_buffer'].join('');\r\n                        }\r\n                        else return \"\";\r\n                    case \"hasMaskedValue\": //check wheter the returned value is masked or not; currently only works reliable when using jquery.val fn to retrieve the value \r\n                        return this.data('_inputmask') ? !this.data('_inputmask')['opts'].autoUnmask : false;\r\n                    case \"isComplete\":\r\n                        masksets = this.data('_inputmask')['masksets'];\r\n                        activeMasksetIndex = this.data('_inputmask')['activeMasksetIndex'];\r\n                        opts = this.data('_inputmask')['opts'];\r\n                        return maskScope(masksets, activeMasksetIndex, opts, { \"action\": \"isComplete\", \"buffer\": this[0]._valueGet().split('') });\r\n                    case \"getmetadata\": //return mask metadata if exists\r\n                        if (this.data('_inputmask')) {\r\n                            masksets = this.data('_inputmask')['masksets'];\r\n                            activeMasksetIndex = this.data('_inputmask')['activeMasksetIndex'];\r\n                            return masksets[activeMasksetIndex]['metadata'];\r\n                        }\r\n                        else return undefined;\r\n                    default:\r\n                        //check if the fn is an alias\r\n                        if (!resolveAlias(fn, options, opts)) {\r\n                            //maybe fn is a mask so we try\r\n                            //set mask\r\n                            opts.mask = fn;\r\n                        }\r\n                        masksets = generateMaskSets(opts);\r\n                        if (masksets.length == 0) { return this; }\r\n                        return this.each(function () {\r\n                            maskScope($.extend(true, {}, masksets), activeMasksetIndex, opts, { \"action\": \"mask\", \"el\": this });\r\n                        });\r\n\r\n                        break;\r\n                }\r\n            } else if (typeof fn == \"object\") {\r\n                opts = $.extend(true, {}, $.inputmask.defaults, fn);\r\n\r\n                resolveAlias(opts.alias, fn, opts); //resolve aliases\r\n                masksets = generateMaskSets(opts);\r\n                if (masksets.length == 0) { return this; }\r\n                return this.each(function () {\r\n                    maskScope($.extend(true, {}, masksets), activeMasksetIndex, opts, { \"action\": \"mask\", \"el\": this });\r\n                });\r\n            } else if (fn == undefined) {\r\n                //look for data-inputmask atribute - the attribute should only contain optipns\r\n                return this.each(function () {\r\n                    var attrOptions = $(this).attr(\"data-inputmask\");\r\n                    if (attrOptions && attrOptions != \"\") {\r\n                        try {\r\n                            attrOptions = attrOptions.replace(new RegExp(\"'\", \"g\"), '\"');\r\n                            var dataoptions = $.parseJSON(\"{\" + attrOptions + \"}\");\r\n                            $.extend(true, dataoptions, options);\r\n                            opts = $.extend(true, {}, $.inputmask.defaults, dataoptions);\r\n                            resolveAlias(opts.alias, dataoptions, opts);\r\n                            opts.alias = undefined;\r\n                            $(this).inputmask(opts);\r\n                        } catch (ex) { } //need a more relax parseJSON\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n})(jQuery);\r\n","/*\r\nInput Mask plugin extensions\r\nhttp://github.com/RobinHerbots/jquery.inputmask\r\nCopyright (c) 2010 -  Robin Herbots\r\nLicensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)\r\nVersion: 0.0.0-dev\r\n\r\nOptional extensions on the jquery.inputmask base\r\n*/\r\n(function(factory) {\r\n\t\tif (typeof define === \"function\" && define.amd) {\r\n\t\t\tdefine([\"jquery\", \"inputmask\"], factory);\r\n\t\t} else if (typeof exports === \"object\") {\r\n\t\t\tmodule.exports = factory(require(\"jquery\"), require(\"./inputmask\"));\r\n\t\t} else {\r\n\t\t\tfactory(jQuery, window.Inputmask);\r\n\t\t}\r\n\t}\r\n\t(function($, Inputmask) {\r\n\t//extra definitions\r\n\tInputmask.extendDefinitions({\r\n\t\t\"A\": {\r\n\t\t\tvalidator: \"[A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\r\n\t\t\tcardinality: 1,\r\n\t\t\tcasing: \"upper\" //auto uppercasing\r\n\t\t},\r\n\t\t\"&\": { //alfanumeric uppercasing\r\n\t\t\tvalidator: \"[0-9A-Za-z\\u0410-\\u044F\\u0401\\u0451\\u00C0-\\u00FF\\u00B5]\",\r\n\t\t\tcardinality: 1,\r\n\t\t\tcasing: \"upper\"\r\n\t\t},\r\n\t\t\"#\": { //hexadecimal\r\n\t\t\tvalidator: \"[0-9A-Fa-f]\",\r\n\t\t\tcardinality: 1,\r\n\t\t\tcasing: \"upper\"\r\n\t\t}\r\n\t});\r\n\tInputmask.extendAliases({\r\n\t\t\"url\": {\r\n\t\t\tmask: \"ir\",\r\n\t\t\tplaceholder: \"\",\r\n\t\t\tseparator: \"\",\r\n\t\t\tdefaultPrefix: \"http://\",\r\n\t\t\tregex: {\r\n\t\t\t\turlpre1: new RegExp(\"[fh]\"),\r\n\t\t\t\turlpre2: new RegExp(\"(ft|ht)\"),\r\n\t\t\t\turlpre3: new RegExp(\"(ftp|htt)\"),\r\n\t\t\t\turlpre4: new RegExp(\"(ftp:|http|ftps)\"),\r\n\t\t\t\turlpre5: new RegExp(\"(ftp:/|ftps:|http:|https)\"),\r\n\t\t\t\turlpre6: new RegExp(\"(ftp://|ftps:/|http:/|https:)\"),\r\n\t\t\t\turlpre7: new RegExp(\"(ftp://|ftps://|http://|https:/)\"),\r\n\t\t\t\turlpre8: new RegExp(\"(ftp://|ftps://|http://|https://)\")\r\n\t\t\t},\r\n\t\t\tdefinitions: {\r\n\t\t\t\t\"i\": {\r\n\t\t\t\t\tvalidator: function(chrs, maskset, pos, strict, opts) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcardinality: 8,\r\n\t\t\t\t\tprevalidator: (function() {\r\n\t\t\t\t\t\tvar result = [],\r\n\t\t\t\t\t\t\tprefixLimit = 8;\r\n\t\t\t\t\t\tfor (var i = 0; i < prefixLimit; i++) {\r\n\t\t\t\t\t\t\tresult[i] = (function() {\r\n\t\t\t\t\t\t\t\tvar j = i;\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tvalidator: function(chrs, maskset, pos, strict, opts) {\r\n\t\t\t\t\t\t\t\t\t\tif (opts.regex[\"urlpre\" + (j + 1)]) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar tmp = chrs,\r\n\t\t\t\t\t\t\t\t\t\t\t\tk;\r\n\t\t\t\t\t\t\t\t\t\t\tif (((j + 1) - chrs.length) > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttmp = maskset.buffer.join('').substring(0, ((j + 1) - chrs.length)) + \"\" + tmp;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tvar isValid = opts.regex[\"urlpre\" + (j + 1)].test(tmp);\r\n\t\t\t\t\t\t\t\t\t\t\tif (!strict && !isValid) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpos = pos - j;\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (k = 0; k < opts.defaultPrefix.length; k++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaskset.buffer[pos] = opts.defaultPrefix[k];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpos++;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (k = 0; k < tmp.length - 1; k++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaskset.buffer[pos] = tmp[k];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpos++;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"pos\": pos\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn isValid;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcardinality: j\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t})()\r\n\t\t\t\t},\r\n\t\t\t\t\"r\": {\r\n\t\t\t\t\tvalidator: \".\",\r\n\t\t\t\t\tcardinality: 50\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinsertMode: false,\r\n\t\t\tautoUnmask: false\r\n\t\t},\r\n\t\t\"ip\": { //ip-address mask\r\n\t\t\tmask: \"i[i[i]].i[i[i]].i[i[i]].i[i[i]]\",\r\n\t\t\tdefinitions: {\r\n\t\t\t\t\"i\": {\r\n\t\t\t\t\tvalidator: function(chrs, maskset, pos, strict, opts) {\r\n\t\t\t\t\t\tif (pos - 1 > -1 && maskset.buffer[pos - 1] !== \".\") {\r\n\t\t\t\t\t\t\tchrs = maskset.buffer[pos - 1] + chrs;\r\n\t\t\t\t\t\t\tif (pos - 2 > -1 && maskset.buffer[pos - 2] !== \".\") {\r\n\t\t\t\t\t\t\t\tchrs = maskset.buffer[pos - 2] + chrs;\r\n\t\t\t\t\t\t\t} else chrs = \"0\" + chrs;\r\n\t\t\t\t\t\t} else chrs = \"00\" + chrs;\r\n\t\t\t\t\t\treturn new RegExp(\"25[0-5]|2[0-4][0-9]|[01][0-9][0-9]\").test(chrs);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcardinality: 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"email\": {\r\n\t\t\tmask: \"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]\",\r\n\t\t\tgreedy: false,\r\n\t\t\tonBeforePaste: function(pastedValue, opts) {\r\n\t\t\t\tpastedValue = pastedValue.toLowerCase();\r\n\t\t\t\treturn pastedValue.replace(\"mailto:\", \"\");\r\n\t\t\t},\r\n\t\t\tdefinitions: {\r\n\t\t\t\t\"*\": {\r\n\t\t\t\t\tvalidator: \"[0-9A-Za-z!#$%&'*+/=?^_`{|}~\\-]\",\r\n\t\t\t\t\tcardinality: 1,\r\n\t\t\t\t\tcasing: \"lower\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"mac\": {\r\n\t\t\tmask: \"##:##:##:##:##:##\"\r\n\t\t}\r\n\t});\r\n\treturn Inputmask;\r\n}));\r\n","(function ($) {\r\n    \"use strict\";\r\n    if (!$.browser) {\r\n        $.browser = {};\r\n        $.browser.mozilla = /mozilla/.test(navigator.userAgent.toLowerCase()) && !/webkit/.test(navigator.userAgent.toLowerCase());\r\n        $.browser.webkit = /webkit/.test(navigator.userAgent.toLowerCase());\r\n        $.browser.opera = /opera/.test(navigator.userAgent.toLowerCase());\r\n        $.browser.msie = /msie/.test(navigator.userAgent.toLowerCase());\r\n    }\r\n\r\n    var methods = {\r\n        destroy : function () {\r\n            $(this).unbind(\".maskMoney\");\r\n\r\n            if ($.browser.msie) {\r\n                this.onpaste = null;\r\n            }\r\n            return this;\r\n        },\r\n\r\n        mask : function (value) {\r\n            return this.each(function () {\r\n                var $this = $(this),\r\n                    decimalSize;\r\n                if (typeof value === \"number\") {\r\n                    $this.trigger(\"mask\");\r\n                    decimalSize = $($this.val().split(/\\D/)).last()[0].length;\r\n                    value = value.toFixed(decimalSize);\r\n                    $this.val(value);\r\n                }\r\n                return $this.trigger(\"mask\");\r\n            });\r\n        },\r\n\r\n        unmasked : function () {\r\n            return this.map(function () {\r\n                var value = ($(this).val() || \"0\"),\r\n                    isNegative = value.indexOf(\"-\") !== -1,\r\n                    decimalPart;\r\n                // get the last position of the array that is a number(coercion makes \"\" to be evaluated as false)\r\n                $(value.split(/\\D/).reverse()).each(function (index, element) {\r\n                    if(element) {\r\n                        decimalPart = element;\r\n                        return false;\r\n                   }\r\n                });\r\n                value = value.replace(/\\D/g, \"\");\r\n                value = value.replace(new RegExp(decimalPart + \"$\"), \".\" + decimalPart);\r\n                if (isNegative) {\r\n                    value = \"-\" + value;\r\n                }\r\n                return parseFloat(value);\r\n            });\r\n        },\r\n\r\n        init : function (settings) {\r\n            settings = $.extend({\r\n                prefix: \"\",\r\n                suffix: \"\",\r\n                affixesStay: true,\r\n                thousands: \",\",\r\n                decimal: \".\",\r\n                precision: 2,\r\n                allowZero: false,\r\n                allowNegative: false\r\n            }, settings);\r\n\r\n            return this.each(function () {\r\n                var $input = $(this),\r\n                    onFocusValue;\r\n\r\n                // data-* api\r\n                settings = $.extend(settings, $input.data());\r\n\r\n                function getInputSelection() {\r\n                    var el = $input.get(0),\r\n                        start = 0,\r\n                        end = 0,\r\n                        normalizedValue,\r\n                        range,\r\n                        textInputRange,\r\n                        len,\r\n                        endRange;\r\n\r\n                    if (typeof el.selectionStart === \"number\" && typeof el.selectionEnd === \"number\") {\r\n                        start = el.selectionStart;\r\n                        end = el.selectionEnd;\r\n                    } else {\r\n                        range = document.selection.createRange();\r\n\r\n                        if (range && range.parentElement() === el) {\r\n                            len = el.value.length;\r\n                            normalizedValue = el.value.replace(/\\r\\n/g, \"\\n\");\r\n\r\n                            // Create a working TextRange that lives only in the input\r\n                            textInputRange = el.createTextRange();\r\n                            textInputRange.moveToBookmark(range.getBookmark());\r\n\r\n                            // Check if the start and end of the selection are at the very end\r\n                            // of the input, since moveStart/moveEnd doesn't return what we want\r\n                            // in those cases\r\n                            endRange = el.createTextRange();\r\n                            endRange.collapse(false);\r\n\r\n                            if (textInputRange.compareEndPoints(\"StartToEnd\", endRange) > -1) {\r\n                                start = end = len;\r\n                            } else {\r\n                                start = -textInputRange.moveStart(\"character\", -len);\r\n                                start += normalizedValue.slice(0, start).split(\"\\n\").length - 1;\r\n\r\n                                if (textInputRange.compareEndPoints(\"EndToEnd\", endRange) > -1) {\r\n                                    end = len;\r\n                                } else {\r\n                                    end = -textInputRange.moveEnd(\"character\", -len);\r\n                                    end += normalizedValue.slice(0, end).split(\"\\n\").length - 1;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return {\r\n                        start: start,\r\n                        end: end\r\n                    };\r\n                } // getInputSelection\r\n\r\n                function canInputMoreNumbers() {\r\n                    var haventReachedMaxLength = !($input.val().length >= $input.attr(\"maxlength\") && $input.attr(\"maxlength\") >= 0),\r\n                        selection = getInputSelection(),\r\n                        start = selection.start,\r\n                        end = selection.end,\r\n                        haveNumberSelected = (selection.start !== selection.end && $input.val().substring(start, end).match(/\\d/)) ? true : false,\r\n                        startWithZero = ($input.val().substring(0, 1) === \"0\");\r\n                    return haventReachedMaxLength || haveNumberSelected || startWithZero;\r\n                }\r\n\r\n                function setCursorPosition(pos) {\r\n                    $input.each(function (index, elem) {\r\n                        if (elem.setSelectionRange) {\r\n                            elem.focus();\r\n                            elem.setSelectionRange(pos, pos);\r\n                        } else if (elem.createTextRange) {\r\n                            var range = elem.createTextRange();\r\n                            range.collapse(true);\r\n                            range.moveEnd(\"character\", pos);\r\n                            range.moveStart(\"character\", pos);\r\n                            range.select();\r\n                        }\r\n                    });\r\n                }\r\n\r\n                function setSymbol(value) {\r\n                    var operator = \"\";\r\n                    if (value.indexOf(\"-\") > -1) {\r\n                        value = value.replace(\"-\", \"\");\r\n                        operator = \"-\";\r\n                    }\r\n                    return operator + settings.prefix + value + settings.suffix;\r\n                }\r\n\r\n                function maskValue(value) {\r\n                    var negative = (value.indexOf(\"-\") > -1 && settings.allowNegative) ? \"-\" : \"\",\r\n                        onlyNumbers = value.replace(/[^0-9]/g, \"\"),\r\n                        integerPart = onlyNumbers.slice(0, onlyNumbers.length - settings.precision),\r\n                        newValue,\r\n                        decimalPart,\r\n                        leadingZeros;\r\n\r\n                    // remove initial zeros\r\n                    integerPart = integerPart.replace(/^0*/g, \"\");\r\n                    // put settings.thousands every 3 chars\r\n                    integerPart = integerPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, settings.thousands);\r\n                    if (integerPart === \"\") {\r\n                        integerPart = \"0\";\r\n                    }\r\n                    newValue = negative + integerPart;\r\n\r\n                    if (settings.precision > 0) {\r\n                        decimalPart = onlyNumbers.slice(onlyNumbers.length - settings.precision);\r\n                        leadingZeros = new Array((settings.precision + 1) - decimalPart.length).join(0);\r\n                        newValue += settings.decimal + leadingZeros + decimalPart;\r\n                    }\r\n                    return setSymbol(newValue);\r\n                }\r\n\r\n                function maskAndPosition(startPos) {\r\n                    var originalLen = $input.val().length,\r\n                        newLen;\r\n                    $input.val(maskValue($input.val()));\r\n                    newLen = $input.val().length;\r\n                    startPos = startPos - (originalLen - newLen);\r\n                    setCursorPosition(startPos);\r\n                }\r\n\r\n                function mask() {\r\n                    var value = $input.val();\r\n                    $input.val(maskValue(value));\r\n                }\r\n\r\n                function changeSign() {\r\n                    var inputValue = $input.val();\r\n                    if (settings.allowNegative) {\r\n                        if (inputValue !== \"\" && inputValue.charAt(0) === \"-\") {\r\n                            return inputValue.replace(\"-\", \"\");\r\n                        } else {\r\n                            return \"-\" + inputValue;\r\n                        }\r\n                    } else {\r\n                        return inputValue;\r\n                    }\r\n                }\r\n\r\n                function preventDefault(e) {\r\n                    if (e.preventDefault) { //standard browsers\r\n                        e.preventDefault();\r\n                    } else { // old internet explorer\r\n                        e.returnValue = false;\r\n                    }\r\n                }\r\n\r\n                function keypressEvent(e) {\r\n                    e = e || window.event;\r\n                    var key = e.which || e.charCode || e.keyCode,\r\n                        keyPressedChar,\r\n                        selection,\r\n                        startPos,\r\n                        endPos,\r\n                        value;\r\n                    //added to handle an IE \"special\" event\r\n                    if (key === undefined) {\r\n                        return false;\r\n                    }\r\n\r\n                    // any key except the numbers 0-9\r\n                    if (key < 48 || key > 57) {\r\n                        // -(minus) key\r\n                        if (key === 45) {\r\n                            $input.val(changeSign());\r\n                            return false;\r\n                        // +(plus) key\r\n                        } else if (key === 43) {\r\n                            $input.val($input.val().replace(\"-\", \"\"));\r\n                            return false;\r\n                        // enter key or tab key\r\n                        } else if (key === 13 || key === 9) {\r\n                            return true;\r\n                        } else if ($.browser.mozilla && (key === 37 || key === 39) && e.charCode === 0) {\r\n                            // needed for left arrow key or right arrow key with firefox\r\n                            // the charCode part is to avoid allowing \"%\"(e.charCode 0, e.keyCode 37)\r\n                            return true;\r\n                        } else { // any other key with keycode less than 48 and greater than 57\r\n                            preventDefault(e);\r\n                            return true;\r\n                        }\r\n                    } else if (!canInputMoreNumbers()) {\r\n                        return false;\r\n                    } else {\r\n                        preventDefault(e);\r\n\r\n                        keyPressedChar = String.fromCharCode(key);\r\n                        selection = getInputSelection();\r\n                        startPos = selection.start;\r\n                        endPos = selection.end;\r\n                        value = $input.val();\r\n                        $input.val(value.substring(0, startPos) + keyPressedChar + value.substring(endPos, value.length));\r\n                        maskAndPosition(startPos + 1);\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                function keydownEvent(e) {\r\n                    e = e || window.event;\r\n                    var key = e.which || e.charCode || e.keyCode,\r\n                        selection,\r\n                        startPos,\r\n                        endPos,\r\n                        value,\r\n                        lastNumber;\r\n                    //needed to handle an IE \"special\" event\r\n                    if (key === undefined) {\r\n                        return false;\r\n                    }\r\n\r\n                    selection = getInputSelection();\r\n                    startPos = selection.start;\r\n                    endPos = selection.end;\r\n\r\n                    if (key === 8 || key === 46 || key === 63272) { // backspace or delete key (with special case for safari)\r\n                        preventDefault(e);\r\n\r\n                        value = $input.val();\r\n                        // not a selection\r\n                        if (startPos === endPos) {\r\n                            // backspace\r\n                            if (key === 8) {\r\n                                if (settings.suffix === \"\") {\r\n                                    startPos -= 1;\r\n                                } else {\r\n                                    // needed to find the position of the last number to be erased\r\n                                    lastNumber = value.split(\"\").reverse().join(\"\").search(/\\d/);\r\n                                    startPos = value.length - lastNumber - 1;\r\n                                    endPos = startPos + 1;\r\n                                }\r\n                            //delete\r\n                            } else {\r\n                                endPos += 1;\r\n                            }\r\n                        }\r\n\r\n                        $input.val(value.substring(0, startPos) + value.substring(endPos, value.length));\r\n\r\n                        maskAndPosition(startPos);\r\n                        return false;\r\n                    } else if (key === 9) { // tab key\r\n                        return true;\r\n                    } else { // any other key\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                function focusEvent() {\r\n                    onFocusValue = $input.val();\r\n                    mask();\r\n                    var input = $input.get(0),\r\n                        textRange;\r\n                    if (input.createTextRange) {\r\n                        textRange = input.createTextRange();\r\n                        textRange.collapse(false); // set the cursor at the end of the input\r\n                        textRange.select();\r\n                    }\r\n                }\r\n\r\n                function cutPasteEvent() {\r\n                    setTimeout(function() {\r\n                        mask();\r\n                    }, 0);\r\n                }\r\n\r\n                function getDefaultMask() {\r\n                    var n = parseFloat(\"0\") / Math.pow(10, settings.precision);\r\n                    return (n.toFixed(settings.precision)).replace(new RegExp(\"\\\\.\", \"g\"), settings.decimal);\r\n                }\r\n\r\n                function blurEvent(e) {\r\n                    if ($.browser.msie) {\r\n                        keypressEvent(e);\r\n                    }\r\n\r\n                    if ($input.val() === \"\" || $input.val() === setSymbol(getDefaultMask())) {\r\n                        if (!settings.allowZero) {\r\n                            $input.val(\"\");\r\n                        } else if (!settings.affixesStay) {\r\n                            $input.val(getDefaultMask());\r\n                        } else {\r\n                            $input.val(setSymbol(getDefaultMask()));\r\n                        }\r\n                    } else {\r\n                        if (!settings.affixesStay) {\r\n                            var newValue = $input.val().replace(settings.prefix, \"\").replace(settings.suffix, \"\");\r\n                            $input.val(newValue);\r\n                        }\r\n                    }\r\n                    if ($input.val() !== onFocusValue) {\r\n                        $input.change();\r\n                    }\r\n                }\r\n\r\n                function clickEvent() {\r\n                    var input = $input.get(0),\r\n                        length;\r\n                    if (input.setSelectionRange) {\r\n                        length = $input.val().length;\r\n                        input.setSelectionRange(length, length);\r\n                    } else {\r\n                        $input.val($input.val());\r\n                    }\r\n                }\r\n\r\n                $input.unbind(\".maskMoney\");\r\n                $input.bind(\"keypress.maskMoney\", keypressEvent);\r\n                $input.bind(\"keydown.maskMoney\", keydownEvent);\r\n                $input.bind(\"blur.maskMoney\", blurEvent);\r\n                $input.bind(\"focus.maskMoney\", focusEvent);\r\n                $input.bind(\"click.maskMoney\", clickEvent);\r\n                $input.bind(\"cut.maskMoney\", cutPasteEvent);\r\n                $input.bind(\"paste.maskMoney\", cutPasteEvent);\r\n                $input.bind(\"mask.maskMoney\", mask);\r\n            });\r\n        }\r\n    };\r\n\r\n    $.fn.maskMoney = function (method) {\r\n        if (methods[method]) {\r\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n        } else if (typeof method === \"object\" || ! method) {\r\n            return methods.init.apply(this, arguments);\r\n        } else {\r\n            $.error(\"Method \" +  method + \" does not exist on jQuery.maskMoney\");\r\n        }\r\n    };\r\n})(window.jQuery || window.Zepto);\r\n","function findAddressBrazil(zipInput, idCityInput, cityInput, stateInput, addressInput, neighborhoodInput) {\r\n\r\n    if (zipInput.val() == \"42.700-000\") {\r\n        //Cidade de Lauro de Freitas\r\n        idCityInput.val('-');\r\n        cityInput.val('Lauro de Freitas');\r\n        stateInput.val('BA');\r\n        addressInput.val('CENTRO');\r\n        neighborhoodInput.val('CENTRO');\r\n\r\n    } else {\r\n\r\n        var request = $.ajax({\r\n            url: \"https://viacep.com.br/ws/\" + zipInput.val().replace(/\\D/g, '') + \"/json/\",\r\n            method: \"POST\",\r\n            dataType: \"jsonp\"\r\n        });\r\n\r\n        request.done(function (msg) {\r\n            idCityInput.val(msg.ibge);\r\n            cityInput.val(msg.localidade);\r\n            stateInput.val(msg.uf);\r\n            addressInput.val(msg.logradouro);\r\n            neighborhoodInput.val(msg.bairro);\r\n        });\r\n\r\n        request.fail(function (jqXHR, textStatus) {\r\n            cityInput.val('Falha na busca da cidade');\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction returnAddressBrazil(zip) {\r\n    var request = $.ajax({\r\n        url: \"https://viacep.com.br/ws/\" + zip + \"/json/\",\r\n        method: \"POST\",\r\n        dataType: \"jsonp\"\r\n    });\r\n\r\n\r\n    var indexedAddress;\r\n\r\n    request.done(function (msg) {\r\n        indexedAddress[\"cityCode\"] = msg.ibge;\r\n        indexedAddress[\"cityName\"] = msg.localidade;\r\n        indexedAddress[\"state\"] = msg.uf;\r\n        indexedAddress[\"address\"] = logradouro;\r\n        indexedAddress[\"neighborhood\"] = msg.bairro;\r\n    });\r\n\r\n}\r\n\r\n\r\n//TODO: Terminar essa funo\r\nfunction image_url(entity, id, photo, size, alternate)\r\n{\r\n\r\n    if (size == undefined) {\r\n        size = '';\r\n    } else {\r\n        size = '_size' + size;\r\n    }\r\n\r\n    if (alternate == undefined) {\r\n        alternate = \"generic.png\";\r\n    }\r\n\r\n    if (photo == undefined || photo == \"\")\r\n        return \"/img/system/\" + alternate;\r\n    var splitted = photo.split('.');\r\n    photo = '/uploads/' + entity + '/' + id + '/' + splitted[0] + size + '.' + splitted[1];\r\n\r\n\r\n    return photo;\r\n    /*\r\n     $.ajax({\r\n     url: photo,\r\n     error: function(){\r\n     return \"/img/system/\" + alternate;\r\n     },\r\n     success: function(){\r\n     console.log(photo);\r\n     return photo;\r\n     }\r\n     \r\n     \r\n     }); */\r\n}\r\n\r\n\r\nfunction insertion_sort(list) {\r\n    var size = list.length;\r\n\r\n    for (var i = 1; i < size; i++) {\r\n        var pivot = list[i];\r\n        var j = i;\r\n        while (j > 0 && list[j - 1] > pivot) {\r\n            list[j] = list[j - 1];\r\n            j = j - 1;\r\n        }\r\n        list[j] = pivot;\r\n    }\r\n    return list;\r\n}\r\n\r\n\r\nfunction php_to_javascript_date(php_date) {\r\n    var match = php_date.match(/^(\\d+)-(\\d+)-(\\d+) (\\d+)\\:(\\d+)\\:(\\d+)$/);\r\n    var date = new Date(match[1], match[2] - 1, match[3], match[4], match[5], match[6]);\r\n\r\n    return date;\r\n}\r\n\r\nfunction mark_as_read() {\r\n    $(\".notification-menu .content\").on('click', function () {\r\n        $.ajax({\r\n            url: \"/exam/get-next-question\",\r\n            type: \"POST\",\r\n            data: {\r\n                'question': next,\r\n                'from-result': from_result\r\n            },\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n            },\r\n            cache: false,\r\n            success: function (data) {\r\n\r\n            }\r\n        });\r\n    });\r\n}","// Avoid `console` errors in browsers that lack a console.\r\n(function () {\r\n    var method;\r\n    var noop = function () {\r\n    };\r\n    var methods = [\r\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\r\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\r\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\r\n        'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'\r\n    ];\r\n    var length = methods.length;\r\n    var console = (window.console = window.console || {});\r\n\r\n    while (length--) {\r\n        method = methods[length];\r\n\r\n        // Only stub undefined methods.\r\n        if (!console[method]) {\r\n            console[method] = noop;\r\n        }\r\n    }\r\n}());\r\n\r\n// Place any jQuery/helper plugins in here.\r\n$(function () {\r\n\r\n    function is_email(email){\r\n        er = /^[a-zA-Z0-9][a-zA-Z0-9\\._-]+@([a-zA-Z0-9\\._-]+\\.)[a-zA-Z-0-9]{2,3}/; \r\n        if(!er.exec(email)){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    //Escuta o boto de submit do formulrio de cadastro de usurios no carrinho\r\n    //Verifica se o usurio informou os campos obrigatrios\r\n    $('.register_on_cart').submit(function(e){\r\n        \r\n        //Varivel que retornar se tudo ocorreu bem\r\n        var is_valid = true;\r\n        //Removendo todos os cones de alerta\r\n        $(\".fa-warning\").remove();\r\n        //Removendo todos os p mensagem de campo obrigatrio\r\n        $('.p-error').remove();\r\n        //Removendo todas os spans com a mensagem de campo obrigatrio\r\n        $('.span-error').remove();\r\n       \r\n        //Faz loop em todos os inputs do formulrio\r\n        $(this).find('input').each(function(key, val){\r\n            //Se o input for do tipo text ou email\r\n            if(($(this).attr('type') == 'text' || $(this).attr('type') == 'email') && $(this).attr('data-not-required') == undefined){\r\n                //Verifico se est vazio\r\n                if($(this).val() == \"\" ){\r\n                    is_valid = false;\r\n                    $(this).css('background-color', 'rgba(249, 3, 3, 0.37)');\r\n                    $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    $(this).after('<p class=\"p-error\" style=\"color: red;\">Campo Obrigatrio</p>');\r\n                }else{\r\n                    $(this).css('background-color', 'initial');\r\n                }\r\n            }\r\n            //Se o input for do tipo password\r\n            if($(this).attr('type') == 'password' && $(this).attr('data-not-required') == undefined){\r\n                //Verifico se est vazio\r\n                if($(this).val() == \"\"){\r\n                    is_valid = false;\r\n                    $(this).css('background-color', 'rgba(249, 3, 3, 0.37)');\r\n                    $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    $(this).after('<p class=\"p-error\" style=\"color: red;\">Campo Obrigatrio</p>');\r\n                }else{\r\n                    $(this).css('background-color', 'initial');\r\n                }\r\n            }\r\n            //Se o input for do tipo checkbox\r\n            if($(this).attr('type') == 'checkbox' && $(this).attr('data-not-required') == undefined){\r\n                //Verifico se est selecionado\r\n                if(!$(this).is(':checked')){\r\n                    $(this).parent().after('<span class=\"span-error\" style=\"color: red; margin-left: 2%;\">Campo Obrigatrio</span>');\r\n                    $(this).parent().after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    is_valid = false;\r\n                }else{\r\n                    $(this).parent().parent().find('.span-error').remove();\r\n                }\r\n            }\r\n        });\r\n        //Se deu tudo certo, retorna true, se no, retorna false\r\n        return is_valid;\r\n    });\r\n\r\n    //Escuta o boto de e-mail da url carrinho/autenticacao, e insere um registro\r\n    //Criar log das tentativas de cadastro a partir do carrinho\r\n    $('#email_register').on('focusout', function(){\r\n        if($(this).val() != \"\"){\r\n            $.ajax({\r\n                method: 'POST',\r\n                url: '/carrinho/criar-tentativa-de-registro-no-carrinho',\r\n                dataType: 'JSON',\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                },\r\n                data: {\r\n                    email: $(this).val()\r\n                },\r\n                success: function(data){\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Funo para validao de formulrio\r\n     * @param form\r\n     *      \r\n     **/\r\n    function validateForm(form){\r\n        //Varivel que retornar se tudo ocorreu bem\r\n        var is_valid = true;\r\n        //Removendo todos os cones de alerta\r\n        $(\".fa-warning\").remove();\r\n        //Removendo todos os p mensagem de campo obrigatrio\r\n        $('.p-error').remove();\r\n        //Removendo todas os spans com a mensagem de campo obrigatrio\r\n        $('.span-error').remove();\r\n       \r\n        //Faz loop em todos os inputs do formulrio\r\n        form.find('input').each(function(key, val){\r\n            //Se o input for do tipo text ou email\r\n            if($(this).attr('type') == 'text' && $(this).attr('data-not-required') == undefined){\r\n                //Verifico se est vazio\r\n                if($(this).val() == \"\" ){\r\n                    is_valid = false;\r\n                    $(this).css('background-color', 'rgba(249, 3, 3, 0.37)');\r\n                    $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    $(this).after('<p class=\"p-error\" style=\"color: red;\">Campo Obrigatrio</p>');\r\n                }else{\r\n                    $(this).css('background-color', 'white');\r\n                }\r\n            }\r\n            //Se o input for do tipo password\r\n            if($(this).attr('type') == 'password' && $(this).attr('data-not-required') == undefined){\r\n                //Verifico se est vazio\r\n                if($(this).val() == \"\"){\r\n                    is_valid = false;\r\n                    $(this).css('background-color', 'rgba(249, 3, 3, 0.37)');\r\n                    $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    $(this).after('<p class=\"p-error\" style=\"color: red;\">Campo Obrigatrio</p>');\r\n                }else{\r\n                    $(this).css('background-color', 'white');\r\n                }\r\n            }\r\n            //Se o input for do tipo checkbox\r\n            if($(this).attr('type') == 'checkbox' && $(this).attr('data-not-required') == undefined){\r\n                //Verifico se est selecionado\r\n                if(!$(this).is(':checked')){\r\n                    $(this).parent().after('<span class=\"span-error\" style=\"color: red; margin-left: 2%;\">Campo Obrigatrio</span>');\r\n                    $(this).parent().after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    is_valid = false;\r\n                }else{\r\n                    $(this).parent().parent().find('.span-error').remove();\r\n                }\r\n            }\r\n            //Se o input for do tipo email\r\n            if($(this).attr('type') == 'email'){\r\n                //Verifico se est vazio\r\n                if($(this).val() == \"\"){\r\n                    is_valid = false;\r\n                    $(this).css('background-color', 'rgba(249, 3, 3, 0.37)');\r\n                    $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"Campo obrigatrio\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    $(this).after('<p class=\"p-error\" style=\"color: red;\">Campo Obrigatrio</p>');\r\n                }\r\n                //Verifico se o email  valido\r\n                else if(!is_email($(this).val())){\r\n                    is_valid = false;\r\n                    $(this).css('background-color', 'rgba(249, 3, 3, 0.37)');\r\n                    $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"E-mail Invlido\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                    $(this).after('<p class=\"p-error\" style=\"color: red;\">E-mail Invlido</p>');\r\n                }else{\r\n                    $(this).css('background-color', 'white');\r\n                }\r\n            }\r\n        });\r\n\r\n        return is_valid;\r\n    }\r\n\r\n    //Varivel que ir controlar os clicks do usurio\r\n    var click = 1;\r\n    //Escuta o boto de inscrio de usurios na campanha Quero Aula + E-book\r\n    $('#subscribe_oab_e_etica').on('submit', function(e){\r\n        \r\n        //Validando formulrio\r\n        var is_valid = validateForm($(this));\r\n        \r\n        //Se o formulrio foi validado com sucesso\r\n        if(is_valid == true){\r\n            if(click == 1){\r\n                click = 2;\r\n                $('#loading').css({\r\n                    'display': 'block'\r\n                });\r\n                $.ajax({\r\n                    method: 'POST',\r\n                    dataType: 'Json',\r\n                    url: '/subscribe-ebook-oab-e-etica',\r\n                    headers: {\r\n                        'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                    },\r\n                    data: $(this).serialize(),\r\n                    success: function(data){\r\n                        if(data == 'success'){\r\n                            click = 1;\r\n                            $('#loading').css({\r\n                                'display': 'none'\r\n                            });\r\n\r\n                            window.location.href = '/etica-oab/enviado';\r\n                            /*html = '<div id=\"alert\" style=\"display: none; color: white; background-color: #00a65a !important; border-radius: 3px; padding: 15px; border: 1px solid transparent\" class=\"form-group col-xs-12 col-sm-12 col-md-12\">';\r\n                            html += 'E-book enviado com sucesso!';\r\n                            html += '</div>';\r\n                            $(html).insertAfter('#subscribe_oab_e_etica');\r\n                            $('#alert').fadeIn('slow');\r\n                            $('#email').val(\"\");\r\n                            $('#name').val(\"\");\r\n                            setTimeout(function(){\r\n                                $('#alert').fadeOut('slow');\r\n                                $('#alert').remove();\r\n                            }, 2000);*/\r\n                        }else{\r\n                            $('#loading').css({\r\n                                'display': 'none'\r\n                            });\r\n                            html = '<div id=\"alert\" style=\"display: none; color: white; background-color: #red !important; border-radius: 3px; padding: 15px; border: 1px solid transparent\" class=\"form-group col-xs-12 col-sm-12 col-md-12\">';\r\n                            html += 'Erro ao enviar e-book!';\r\n                            html += '</div>';\r\n                            $(html).insertAfter('#subscribe_oab_e_etica');\r\n                            $('#alert').fadeIn('slow');\r\n                            $('#email').val(\"\");\r\n                            $('#name').val(\"\");\r\n                            setTimeout(function(){ \r\n                                $('#alert').fadeOut('slow');\r\n                                $('#alert').remove();\r\n                            }, 2000);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return false;\r\n    });\r\n\r\n    $(document).ready(function () {\r\n        $('[data-toggle=\"tooltip\"]').tooltip();\r\n    });\r\n\r\n\r\n    if ($(\".colorpicker-box\").length)\r\n        $(\".colorpicker-box\").colorpicker();\r\n    if ($.isFunction($.fn.select2)) {\r\n        $(\".select2\").select2();\r\n    }\r\n    if ($.isFunction($.fn.datepicker)) {\r\n        $(\".datepicker\").datepicker({format: 'dd/mm/yyyy'});\r\n    }\r\n\r\n    if ($.isFunction($.fn.wysihtml5)) {\r\n        if (!$(\"#comments-content\").length) {\r\n\r\n            $(\".textarea\").wysihtml5({\r\n                toolbar: {\r\n                    html: true,\r\n                },\r\n                parserRules: {\r\n                    tags: {\r\n                        strong: {},\r\n                        em: {},\r\n                        table: {\r\n                            check_attributes: {\r\n                                width: \"any\",\r\n                                style: \"any\",\r\n                                colspan: \"any\",\r\n                            }\r\n                        },\r\n                        td: {\r\n                            check_attributes: {\r\n                                width: \"any\",\r\n                                style: \"any\",\r\n                                colspan: \"any\",\r\n                            }\r\n                        },\r\n                        tr: {\r\n                            check_attributes: {\r\n                                width: \"any\",\r\n                                style: \"any\",\r\n                                colspan: \"any\",\r\n                            }\r\n                        },\r\n                        th: {\r\n                            check_attributes: {\r\n                                width: \"any\",\r\n                                style: \"any\",\r\n                                colspan: \"any\",\r\n                            }\r\n                        },\r\n                        img: {\r\n                            check_attributes: {\r\n                                src: \"src\",\r\n                            }\r\n                        }\r\n                    },\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    setRandom();\r\n\r\n    $(\".title-has-slug\").blur(function () {\r\n        var slug = convertToSlug(this.value);\r\n        $(\".slug-from-title\").val(slug);\r\n    });\r\n    if ($.isFunction($.fn.select2)) {\r\n        $(\".selectCity\").select2({\r\n            ajax: {\r\n                url: \"/admin/cities/select/\",\r\n                dataType: 'json',\r\n                delay: 250,\r\n                data: function (params) {\r\n                    return {\r\n                        term: params.term, // search term\r\n                        page: params.page\r\n                    };\r\n                },\r\n                processResults: function (data, page) {\r\n                    return {\r\n                        results: data.results\r\n                    };\r\n                },\r\n                cache: false\r\n            },\r\n            escapeMarkup: function (markup) {\r\n                return markup;\r\n            },\r\n            minimumInputLength: 3,\r\n            templateResult: formatRepo,\r\n            templateSelection: formatRepoSelection\r\n        });\r\n    }\r\n    function formatRepo(repo) {\r\n        if (repo.loading)\r\n            return repo.text;\r\n        var markup = '<div class=\"clearfix\">' + repo.name + '</div>';\r\n        return markup;\r\n    }\r\n\r\n    function formatRepoSelection(repo) {\r\n        return repo.name;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    if ($.isFunction($.fn.select2)) {\r\n        $('.tags-select').select2({\r\n            tags: true,\r\n            minimumInputLength: 3,\r\n            ajax: {\r\n                type: 'POST',\r\n                url: '/admin/tags/select',\r\n                dataType: 'json',\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                },\r\n                data: function (params) {\r\n                    return {\r\n                        term: params.term\r\n                    };\r\n                },\r\n                processResults: function (data) {\r\n                    return {results: data};\r\n                }\r\n            }\r\n        });\r\n\r\n        createSelect('courses');\r\n        createSelect('students');\r\n        createSelect('users', '/admin/access/users/select');\r\n        if ($(\"#course-data\").length > 0)\r\n            createSelect('lessons', '/admin/lessons/select', undefined, $(\"#course-data\").data('course-id'));\r\n    }\r\n\r\n\r\n\r\n    $(\".zip\").on('blur', function (e) {\r\n        findAddressBrazil($(\"#zip\"), $(\"#city_id\"), $(\"#city\"), $(\"#state\"), $(\"#address\"), $(\"#neighborhood\"));\r\n    });\r\n\r\n    $('#update_zip').click(function(e){\r\n        findAddressBrazil($(\"#billZip\"),$(\"#billCityCode\"),$(\"#billCity\"),$(\"#billState\"),$(\"#billAddress\"),$(\"#billDistrict\"));\r\n    });\r\n\r\n    $(\".zip\").parent().parent().one('mouseover', function () {\r\n        findAddressBrazil($(\"#zip\"), $(\"#city_id\"), $(\"#city\"), $(\"#state\"), $(\"#address\"), $(\"#neighborhood\"));\r\n    });\r\n\r\n\r\n    $(\".testCoupon\").on('click', function (e) {\r\n        if ($(\"#coupon_code\").val() != '') {\r\n            alert('Confirme o cupom de descontos informado antes de finalizar a compra. Para isso, clique em Ok.');\r\n            return false;\r\n        }\r\n    });\r\n\r\n    // Relativo a tabs\r\n    //-----------------------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n    if ($(\"#module-table\").length)\r\n        createModuleTable();\r\n\r\n    /*\r\n     Allows you to add data-method=\"METHOD to links to automatically inject a form with the method on click\r\n     Example: <a href=\"{{route('customers.destroy', $customer->id)}}\" data-method=\"delete\" name=\"delete_item\">Delete</a>\r\n     Injects a form with that's fired on click of the link with a DELETE request.\r\n     Good because you don't have to dirty your HTML with delete forms everywhere.\r\n     */\r\n\r\n    $(\".cel\").inputmask(\"(99) 999999999\");\r\n    $(\".personal_id\").inputmask(\"999.999.999-99\");\r\n\r\n    $('#personal_id').inputmask('999.999.999-99');\r\n    $(\".company_id\").inputmask(\"99.999.999/9999-99\");\r\n    $(\".birthdate\").inputmask(\"99/99/9999\");\r\n    $(\"#birthdate\").inputmask(\"99/99/9999\");\r\n    $(\".datemask\").inputmask(\"99/99/9999\");\r\n    $(\".zip\").inputmask(\"99.999-999\");\r\n\r\n    $('#update_zip').on('click', function(){\r\n        $(\".zip\").focus();\r\n    });\r\n\r\n    var mask = 0;\r\n    $('.grade').focus(function () {\r\n        if (mask == 0) {\r\n            $('.grade').inputmask({mask: '[9][9][9].99', numericInput: true});\r\n            mask = 1;\r\n        }\r\n    });\r\n\r\n    $('.grade').click(function () {\r\n        if (mask == 0) {\r\n            $('.grade').inputmask({mask: '[9][9][9].99', numericInput: true});\r\n            mask = 1;\r\n        }\r\n    });\r\n\r\n\r\n    $(\".money\").maskMoney({thousands: '.', decimal: ',', affixesStay: false, allowZero: true});\r\n    //$(\".time\").maskMoney({thousands:'',decimal:',',affixesStay: false, allowZero: true});\r\n\r\n    $('[data-method]').append(function ()\r\n    {\r\n        var method;\r\n        if($(this).attr('data-method') != undefined || $(this).attr('data-method') != \"\"){\r\n            method = $(this).attr('data-method');\r\n        }else{\r\n            method = \"POST\";\r\n        }\r\n        //id do order\r\n        var orderid = $(this).attr('data-id');\r\n        var typeAlert = $(this).attr('data-alert');\r\n        var message = $(this).attr('data-message');\r\n        var name = null;\r\n        switch (typeAlert) {\r\n            case 'delete-order':\r\n                name = \"delete_order\";\r\n                break;\r\n            case 'send_email':\r\n                name = \"send_email\";\r\n                break;\r\n            case 'released_for_certification':\r\n                name = \"released_for_certification\";\r\n                break;\r\n            default:\r\n                name = \"delete_item\";\r\n                break;\r\n        }\r\n        return \"\\n\" +\r\n                \"<form action='\" + $(this).attr('href') + \"' method='\"+method+\"' data-id='\" + orderid + \"' data-message='\" + message + \"' name='\" + name + \"' style='display:none'>\\n\" +\r\n                \"   <input type='hidden' name='_method' value='\" + $(this).attr('data-method') + \"'>\\n\" +\r\n                \"   <input type='hidden' name='_token' value='\" + $('meta[name=\"_token\"]').attr('content') + \"'>\\n\" +\r\n                \"</form>\\n\"\r\n    })\r\n            .removeAttr('href')\r\n            .attr('style', 'cursor:pointer;')\r\n            .attr('onclick', '$(this).find(\"form\").submit();');\r\n\r\n    /*\r\n     Generic are you sure dialog\r\n     */\r\n    $('form[name=delete_item]').submit(function () {\r\n        return confirm(\"Tem certeza que deseja excluir esse item?\");\r\n    });\r\n\r\n    /**\r\n     * Todo fomulrio que contm o nome\r\n     */\r\n    //Formulrio para exclusao de pedidos\r\n    $('form[name=delete_order]')\r\n            .submit(function () {\r\n\r\n                console.log('Enviando para Google Analytcs' + ' Order:' + $(this).attr('data-id'));\r\n\r\n                //Se o atributo data-message ele exibe a messagem de data-message\r\n                if ($(this).attr('data-message') != undefined) {\r\n\r\n                    //Se o usuario confirmar a excluso o pedido ser retirado do google analitcs\r\n                    if (confirm($(this).attr('data-message'))) {\r\n                        //Pesquisando dados do pedido para excluso do google analitcs\r\n                        $.ajax({\r\n                            url: \"/admin/orders/\" + $(this).attr('data-id'),\r\n                            method: 'GET'\r\n                        }).done(function (data) {\r\n\r\n                            //Recuperando informaoes do pedido e itens\r\n                            var items = data[1];\r\n                            var transaction = data[0];\r\n                            ga('create', 'UA-78805304-1', 'auto', {'name': 'myTracker'});\r\n                            ga('myTracker.require', 'ecommerce');\r\n                            ga('myTracker.ecommerce:addTransaction', transaction);\r\n\r\n                            for (var i in items) {\r\n                                ga('myTracker.ecommerce:addItem', items[i]);\r\n                            }\r\n\r\n                            //Nao remove do google analitcs se estiver sendo executado em Localhost\r\n                            if (window.location.hostname != 'localhost') {\r\n                                ga('myTracker.ecommerce:send');\r\n                                console.log('Removed of Google Analitcs');\r\n                            } else {\r\n                                console.log('Not Removed of Google Analitcs because is LocalHost');\r\n                            }\r\n\r\n                        });\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n    /*\r\n     Generic are you sure dialog\r\n     */\r\n    $('form[name=send_email]').submit(function () {\r\n        if ($(this).attr('data-message') != undefined) {\r\n            return confirm($(this).attr('data-message'));\r\n        }\r\n        return confirm(\"Tem certeza que deseja enviar a mensagem para o(s) aluno(s)?\");\r\n    });\r\n    \r\n    /*\r\n     Generic are you sure dialog\r\n     */\r\n    $('form[name=released_for_certification]').submit(function () {\r\n        if ($(this).attr('data-message') != undefined) {\r\n            return confirm($(this).attr('data-message'));\r\n        }\r\n        return confirm(\"Tem certeza que deseja enviar a mensagem para o(s) aluno(s)?\");\r\n    });\r\n\r\n    /*\r\n     Bind all bootstrap tooltips\r\n     */\r\n    $(\"[data-toggle=\\\"tooltip\\\"]\").tooltip();\r\n    $(\"[data-toggle=\\\"popover\\\"]\").popover();\r\n    //This closes the popover when its clicked away from\r\n    $('body').on('click', function (e) {\r\n        $('[data-toggle=\"popover\"]').each(function () {\r\n            if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {\r\n                $(this).popover('hide');\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\nfunction convertToSlug(str)\r\n{\r\n    str = str.replace(/^\\s+|\\s+$/g, ''); // trim\r\n    str = str.toLowerCase();\r\n\r\n    // remove accents, swap  for n, etc\r\n    var from = \"/_,:;\";\r\n    var to = \"aaaaaeeeeeiiiiooooouuuunc------\";\r\n    for (var i = 0, l = from.length; i < l; i++) {\r\n        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\r\n    }\r\n\r\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\r\n            .replace(/\\s+/g, '-') // collapse whitespace and replace by -\r\n            .replace(/-+/g, '-'); // collapse dashes\r\n\r\n    return str;\r\n}\r\n\r\n//Funo geradoras de select2. O primeiro parmetro pode ser tanto um nome quanto um seletor do campo no qual aplicar o jquery.\r\n//Caso um nome seja passado em selector, ele assumir que o campo alvo possui a classe  nome-select\r\n//Opcionalmente, uma rota pode ser passada\r\nfunction createSelect(selector, route, modal, other_parameter) {\r\n\r\n    var target_route;\r\n    if (route == undefined) {\r\n        target_route = '/admin/' + selector + '/select';\r\n    } else {\r\n        target_route = route;\r\n    }\r\n\r\n    var param = other_parameter;\r\n    var $select_selector;\r\n\r\n    if (selector instanceof jQuery) {\r\n        $select_selector = selector;\r\n\r\n    } else {\r\n        $select_selector = $('.' + selector + '-select');\r\n    }\r\n    if (modal == undefined) {\r\n        $select_selector.select2({\r\n            minimumInputLength: 3,\r\n            ajax: {\r\n                type: 'POST',\r\n                url: target_route,\r\n                dataType: 'json',\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                },\r\n                data: function (params) {\r\n                    if (param != undefined) {\r\n                        return{\r\n                            term: params.term,\r\n                            other: param,\r\n                        }\r\n                    }\r\n                    return {\r\n                        term: params.term\r\n                    };\r\n                },\r\n                processResults: function (data) {\r\n                    return {results: data};\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        $select_selector.select2({\r\n            minimumInputLength: 3,\r\n            dropdownParent: modal,\r\n            ajax: {\r\n                type: 'POST',\r\n                url: target_route,\r\n                dataType: 'json',\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                },\r\n                data: function (params) {\r\n                    if (param != undefined) {\r\n                        return{\r\n                            term: params.term,\r\n                            other: param,\r\n                        }\r\n                    }\r\n                    return {\r\n                        term: params.term\r\n                    };\r\n                },\r\n                processResults: function (data) {\r\n                    return {results: data};\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction generateUUID() {\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n}\r\n;\r\n\r\n\r\nfunction setRandom() {\r\n    $('#random_code').on('click', function () {\r\n        $('[name=\"code\"]').val(generateUUID());\r\n    });\r\n}\r\n\r\n","/**\r\n * Created by ambiente on 09/03/16.\r\n */\r\n\r\n\r\nconsole.log('calling notify');\r\nadd_read_notify();\r\n\r\nfunction add_read_notify(){\r\n$(\".notification-item\").click(function(){\r\n    console.log('clicado');\r\n    $.ajax({\r\n        url: \"/notification/read-notification\",\r\n        type: \"POST\",\r\n        data: { 'notification': $(this).data('notification-id')\r\n        },\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n        },\r\n        cache: false,\r\n        success: function(data){\r\n            console.log('Comentrio lido');\r\n        }\r\n    });\r\n});\r\n}\r\n\r\n","/**\r\n * jquery.dlmenu.js v1.0.1\r\n * http://www.codrops.com\r\n *\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n * \r\n * Copyright 2013, Codrops\r\n * http://www.codrops.com\r\n */\r\n;( function( $, window, undefined ) {\r\n\r\n\t'use strict';\r\n\r\n\t// global\r\n\tvar Modernizr = window.Modernizr, $body = $( 'body' );\r\n\r\n\t$.DLMenu = function( options, element ) {\r\n\t\tthis.$el = $( element );\r\n\t\tthis._init( options );\r\n\t};\r\n\r\n\t// the options\r\n\t$.DLMenu.defaults = {\r\n\t\t// classes for the animation effects\r\n\t\tanimationClasses : { classin : 'dl-animate-in-1', classout : 'dl-animate-out-1' },\r\n\t\t// callback: click a link that has a sub menu\r\n\t\t// el is the link element (li); name is the level name\r\n\t\tonLevelClick : function( el, name ) { return false; },\r\n\t\t// callback: click a link that does not have a sub menu\r\n\t\t// el is the link element (li); ev is the event obj\r\n\t\tonLinkClick : function( el, ev ) { return false; }\r\n\t};\r\n\r\n\t$.DLMenu.prototype = {\r\n\t\t_init : function( options ) {\r\n\r\n\t\t\t// options\r\n\t\t\tthis.options = $.extend( true, {}, $.DLMenu.defaults, options );\r\n\t\t\t// cache some elements and initialize some variables\r\n\t\t\tthis._config();\r\n\t\t\t\r\n\t\t\tvar animEndEventNames = {\r\n\t\t\t\t\t'WebkitAnimation' : 'webkitAnimationEnd',\r\n\t\t\t\t\t'OAnimation' : 'oAnimationEnd',\r\n\t\t\t\t\t'msAnimation' : 'MSAnimationEnd',\r\n\t\t\t\t\t'animation' : 'animationend'\r\n\t\t\t\t},\r\n\t\t\t\ttransEndEventNames = {\r\n\t\t\t\t\t'WebkitTransition' : 'webkitTransitionEnd',\r\n\t\t\t\t\t'MozTransition' : 'transitionend',\r\n\t\t\t\t\t'OTransition' : 'oTransitionEnd',\r\n\t\t\t\t\t'msTransition' : 'MSTransitionEnd',\r\n\t\t\t\t\t'transition' : 'transitionend'\r\n\t\t\t\t};\r\n\t\t\t// animation end event name\r\n\t\t\tthis.animEndEventName = animEndEventNames[ Modernizr.prefixed( 'animation' ) ] + '.dlmenu';\r\n\t\t\t// transition end event name\r\n\t\t\tthis.transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ] + '.dlmenu',\r\n\t\t\t// support for css animations and css transitions\r\n\t\t\tthis.supportAnimations = Modernizr.cssanimations,\r\n\t\t\tthis.supportTransitions = Modernizr.csstransitions;\r\n\r\n\t\t\tthis._initEvents();\r\n\r\n\t\t},\r\n\t\t_config : function() {\r\n\t\t\tthis.open = false;\r\n\t\t\tthis.$trigger = this.$el.children( '.dl-trigger' );\r\n\t\t\tthis.$menu = this.$el.children( 'ul.dl-menu' );\r\n\t\t\tthis.$menuitems = this.$menu.find( 'li:not(.dl-back)' );\r\n\t\t\tthis.$el.find( 'ul.dl-submenu' ).prepend( '<li class=\"dl-back\"><a href=\"#\">Voltar</a></li>' );\r\n\t\t\tthis.$back = this.$menu.find( 'li.dl-back' );\r\n\t\t},\r\n\t\t_initEvents : function() {\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis.$trigger.on( 'click.dlmenu', function() {\r\n\t\t\t\t\r\n\t\t\t\tif( self.open ) {\r\n\t\t\t\t\tself._closeMenu();\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\tself._openMenu();\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tthis.$menuitems.on( 'click.dlmenu', function( event ) {\r\n\t\t\t\t\r\n\t\t\t\tevent.stopPropagation();\r\n\r\n\t\t\t\tvar $item = $(this),\r\n\t\t\t\t\t$submenu = $item.children( 'ul.dl-submenu' );\r\n\r\n\t\t\t\tif( $submenu.length > 0 ) {\r\n\r\n\t\t\t\t\tvar $flyin = $submenu.clone().css( 'opacity', 0 ).insertAfter( self.$menu ),\r\n\t\t\t\t\t\tonAnimationEndFn = function() {\r\n\t\t\t\t\t\t\tself.$menu.off( self.animEndEventName ).removeClass( self.options.animationClasses.classout ).addClass( 'dl-subview' );\r\n\t\t\t\t\t\t\t$item.addClass( 'dl-subviewopen' ).parents( '.dl-subviewopen:first' ).removeClass( 'dl-subviewopen' ).addClass( 'dl-subview' );\r\n\t\t\t\t\t\t\t$flyin.remove();\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\t\t$flyin.addClass( self.options.animationClasses.classin );\r\n\t\t\t\t\t\tself.$menu.addClass( self.options.animationClasses.classout );\r\n\t\t\t\t\t\tif( self.supportAnimations ) {\r\n\t\t\t\t\t\t\tself.$menu.on( self.animEndEventName, onAnimationEndFn );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tonAnimationEndFn.call();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.options.onLevelClick( $item, $item.children( 'a:first' ).text() );\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tself.options.onLinkClick( $item, event );\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tthis.$back.on( 'click.dlmenu', function( event ) {\r\n\t\t\t\t\r\n\t\t\t\tvar $this = $( this ),\r\n\t\t\t\t\t$submenu = $this.parents( 'ul.dl-submenu:first' ),\r\n\t\t\t\t\t$item = $submenu.parent(),\r\n\r\n\t\t\t\t\t$flyin = $submenu.clone().insertAfter( self.$menu );\r\n\r\n\t\t\t\tvar onAnimationEndFn = function() {\r\n\t\t\t\t\tself.$menu.off( self.animEndEventName ).removeClass( self.options.animationClasses.classin );\r\n\t\t\t\t\t$flyin.remove();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\t$flyin.addClass( self.options.animationClasses.classout );\r\n\t\t\t\t\tself.$menu.addClass( self.options.animationClasses.classin );\r\n\t\t\t\t\tif( self.supportAnimations ) {\r\n\t\t\t\t\t\tself.$menu.on( self.animEndEventName, onAnimationEndFn );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tonAnimationEndFn.call();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$item.removeClass( 'dl-subviewopen' );\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar $subview = $this.parents( '.dl-subview:first' );\r\n\t\t\t\t\tif( $subview.is( 'li' ) ) {\r\n\t\t\t\t\t\t$subview.addClass( 'dl-subviewopen' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$subview.removeClass( 'dl-subview' );\r\n\t\t\t\t} );\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t} );\r\n\t\t\t\r\n\t\t},\r\n\t\tcloseMenu : function() {\r\n\t\t\tif( this.open ) {\r\n\t\t\t\tthis._closeMenu();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_closeMenu : function() {\r\n\t\t\tvar self = this,\r\n\t\t\t\tonTransitionEndFn = function() {\r\n\t\t\t\t\tself.$menu.off( self.transEndEventName );\r\n\t\t\t\t\tself._resetMenu();\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\tthis.$menu.removeClass( 'dl-menuopen' );\r\n\t\t\tthis.$menu.addClass( 'dl-menu-toggle' );\r\n\t\t\tthis.$trigger.removeClass( 'dl-active' );\r\n\t\t\t\r\n\t\t\tif( this.supportTransitions ) {\r\n\t\t\t\tthis.$menu.on( this.transEndEventName, onTransitionEndFn );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tonTransitionEndFn.call();\r\n\t\t\t}\r\n\r\n\t\t\tthis.open = false;\r\n\t\t},\r\n\t\topenMenu : function() {\r\n\t\t\tif( !this.open ) {\r\n\t\t\t\tthis._openMenu();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_openMenu : function() {\r\n\t\t\tvar self = this;\r\n\t\t\t// clicking somewhere else makes the menu close\r\n\t\t\t$body.off( 'click' ).on( 'click.dlmenu', function() {\r\n\t\t\t\tself._closeMenu() ;\r\n\t\t\t} );\r\n\t\t\tthis.$menu.addClass( 'dl-menuopen dl-menu-toggle' ).on( this.transEndEventName, function() {\r\n\t\t\t\t$( this ).removeClass( 'dl-menu-toggle' );\r\n\t\t\t} );\r\n\t\t\tthis.$trigger.addClass( 'dl-active' );\r\n\t\t\tthis.open = true;\r\n\t\t},\r\n\t\t// resets the menu to its original state (first level of options)\r\n\t\t_resetMenu : function() {\r\n\t\t\tthis.$menu.removeClass( 'dl-subview' );\r\n\t\t\tthis.$menuitems.removeClass( 'dl-subview dl-subviewopen' );\r\n\t\t}\r\n\t};\r\n\r\n\tvar logError = function( message ) {\r\n\t\tif ( window.console ) {\r\n\t\t\twindow.console.error( message );\r\n\t\t}\r\n\t};\r\n\r\n\t$.fn.dlmenu = function( options ) {\r\n\t\tif ( typeof options === 'string' ) {\r\n\t\t\tvar args = Array.prototype.slice.call( arguments, 1 );\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data( this, 'dlmenu' );\r\n\t\t\t\tif ( !instance ) {\r\n\t\t\t\t\tlogError( \"cannot call methods on dlmenu prior to initialization; \" +\r\n\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt(0) === \"_\" ) {\r\n\t\t\t\t\tlogError( \"no such method '\" + options + \"' for dlmenu instance\" );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstance[ options ].apply( instance, args );\r\n\t\t\t});\r\n\t\t} \r\n\t\telse {\r\n\t\t\tthis.each(function() {\t\r\n\t\t\t\tvar instance = $.data( this, 'dlmenu' );\r\n\t\t\t\tif ( instance ) {\r\n\t\t\t\t\tinstance._init();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tinstance = $.data( this, 'dlmenu', new $.DLMenu( options, this ) );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n} )( jQuery, window );","\"function\"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});\r\n(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e=\"\";if(\"function\"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;\"function\"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);\"string\"===typeof b.options.jsonPath?\r\n(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data(\"owl-originalStyles\",this.$elem.attr(\"style\"));this.$elem.data(\"owl-originalClasses\",this.$elem.attr(\"class\"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;\r\nthis.wrapItems();this.$owlItems=this.$elem.find(\".owl-item\");this.$owlWrapper=this.$elem.find(\".owl-wrapper\");this.playDirection=\"next\";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&\r\n(this.options.autoPlay=5E3);this.play();this.$elem.find(\".owl-wrapper\").css(\"display\",\"block\");this.$elem.is(\":visible\")?this.$elem.css(\"opacity\",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();\"function\"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();\"function\"===typeof this.options.afterAction&&this.options.afterAction.apply(this,\r\n[this.$elem])},updateVars:function(){\"function\"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();\"function\"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(\":visible\"))a.$elem.css({opacity:0}),\r\ng.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(\":visible\")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class=\"owl-wrapper\">').wrap('<div class=\"owl-item\"></div>');this.$elem.find(\".owl-wrapper\").wrap('<div class=\"owl-wrapper-outer\">');this.wrapperOuter=this.$elem.find(\".owl-wrapper-outer\");this.$elem.css(\"display\",\"block\")},\r\nbaseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=\r\n!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),\r\na<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&\r\n!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=\r\nthis,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data(\"owl-item\",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data(\"owl-roundPages\",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/\r\nthis.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),\r\nc=c.data(\"owl-roundPages\"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class=\"owl-controls\"/>').toggleClass(\"clickable\",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class=\"owl-buttons\"/>');a.owlControls.append(b);a.buttonPrev=\r\nf(\"<div/>\",{\"class\":\"owl-prev\",html:a.options.navigationText[0]||\"\"});a.buttonNext=f(\"<div/>\",{\"class\":\"owl-next\",html:a.options.navigationText[1]||\"\"});b.append(a.buttonPrev).append(a.buttonNext);b.on(\"touchstart.owlControls mousedown.owlControls\",'div[class^=\"owl\"]',function(a){a.preventDefault()});b.on(\"touchend.owlControls mouseup.owlControls\",'div[class^=\"owl\"]',function(b){b.preventDefault();f(this).hasClass(\"owl-next\")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=\r\nf('<div class=\"owl-pagination\"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on(\"touchend.owlControls mouseup.owlControls\",\".owl-page\",function(b){b.preventDefault();Number(f(this).data(\"owl-page\"))!==a.currentItem&&a.goTo(Number(f(this).data(\"owl-page\")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html(\"\");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&\r\n(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f(\"<div/>\",{\"class\":\"owl-page\"}),g=f(\"<span></span>\",{text:!0===this.options.paginationNumbers?a:\"\",\"class\":!0===this.options.paginationNumbers?\"owl-numbers\":\"\"}),d.append(g),d.data(\"owl-page\",b===c?e:c),d.data(\"owl-roundPages\",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(\".owl-page\").each(function(){f(this).data(\"owl-roundPages\")===\r\nf(a.$owlItems[a.currentItem]).data(\"owl-roundPages\")&&(a.paginationWrapper.find(\".owl-page\").removeClass(\"active\"),f(this).addClass(\"active\"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass(\"disabled\"),this.buttonNext.addClass(\"disabled\")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass(\"disabled\"),this.buttonNext.removeClass(\"disabled\")):this.currentItem===\r\nthis.maximumItem?(this.buttonPrev.removeClass(\"disabled\"),this.buttonNext.addClass(\"disabled\")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass(\"disabled\"),this.buttonNext.removeClass(\"disabled\")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;\r\nthis.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a=\"rewind\";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?\r\nthis.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a=\"rewind\";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;\"function\"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&\"drag\"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),\r\n!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed(\"paginationSpeed\"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):\"rewind\"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed(\"slideSpeed\"),g.setTimeout(function(){c.isCss3Finish=!0},\r\nc.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):\"rewind\"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){\"function\"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=\r\nthis.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());\"function\"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus=\"stop\";g.clearInterval(this.autoPlayInterval)},\r\ncheckAp:function(){\"stop\"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus=\"play\";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){\"slideSpeed\"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):\"paginationSpeed\"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):\"string\"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},\r\naddCssSpeed:function(a){return{\"-webkit-transition\":\"all \"+a+\"ms ease\",\"-moz-transition\":\"all \"+a+\"ms ease\",\"-o-transition\":\"all \"+a+\"ms ease\",transition:\"all \"+a+\"ms ease\"}},removeTransition:function(){return{\"-webkit-transition\":\"\",\"-moz-transition\":\"\",\"-o-transition\":\"\",transition:\"\"}},doTranslate:function(a){return{\"-webkit-transform\":\"translate3d(\"+a+\"px, 0px, 0px)\",\"-moz-transform\":\"translate3d(\"+a+\"px, 0px, 0px)\",\"-o-transform\":\"translate3d(\"+a+\"px, 0px, 0px)\",\"-ms-transform\":\"translate3d(\"+\r\na+\"px, 0px, 0px)\",transform:\"translate3d(\"+a+\"px, 0px,0px)\"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement(\"div\");a.style.cssText=\"  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)\";\r\na=a.style.cssText.match(/translate3d\\(0px, 0px, 0px\\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:\"ontouchstart\"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=[\"s\",\"e\",\"x\"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=[\"touchstart.owl mousedown.owl\",\"touchmove.owl mousemove.owl\",\"touchend.owl touchcancel.owl mouseup.owl\"]:\r\n!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=[\"touchstart.owl\",\"touchmove.owl\",\"touchend.owl touchcancel.owl\"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=[\"mousedown.owl\",\"mousemove.owl\",\"mouseup.owl\"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on(\"dragstart.owl\",function(a){a.preventDefault()});this.$elem.on(\"mousedown.disableTextSelect\",function(a){return f(a.target).is(\"input, textarea, select, option\")})},\r\ngestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){\"on\"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):\"off\"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;\r\n\"function\"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off(\"touchmove.owl\");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}\r\nfunction c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass(\"grabbing\");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection=\"left\":d.owl.dragDirection=\"right\";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,\"drag\"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on(\"click.disable\",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off(\"click.disable\")}),\r\na=f._data(a.target,\"events\").click,c=a.pop(),a.splice(0,0,c)));b(\"off\")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,\".owl-wrapper\",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;\r\n!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass(\"grabbing\")||d.$owlWrapper.addClass(\"grabbing\");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b(\"on\");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=\r\na=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&\"left\"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&\"right\"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):\r\n(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a=\"right\",this.playDirection=\"next\"):(a=\"left\",this.playDirection=\"prev\");return a},customEvents:function(){var a=this;a.$elem.on(\"owl.next\",function(){a.next()});a.$elem.on(\"owl.prev\",function(){a.prev()});a.$elem.on(\"owl.play\",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus=\"play\"});a.$elem.on(\"owl.stop\",function(){a.stop();a.hoverStatus=\"stop\"});a.$elem.on(\"owl.goTo\",function(b,e){a.goTo(e)});\r\na.$elem.on(\"owl.jumpTo\",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on(\"mouseover\",function(){a.stop()}),a.$elem.on(\"mouseout\",function(){\"stop\"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),\"loaded\"!==b.data(\"owl-loaded\")&&(e=b.data(\"owl-item\"),c=b.find(\".lazyOwl\"),\"string\"!==typeof c.data(\"src\")?\r\nb.data(\"owl-loaded\",\"loaded\"):(void 0===b.data(\"owl-loaded\")&&(c.hide(),b.addClass(\"loading\").data(\"owl-loaded\",\"checked\")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data(\"owl-loaded\",\"loaded\").removeClass(\"loading\");b.removeAttr(\"data-src\");\"fade\"===d.options.lazyEffect?b.fadeIn(400):b.show();\"function\"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,\r\n[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;\"DIV\"===b.prop(\"tagName\")?(b.css(\"background-image\",\"url(\"+b.data(\"src\")+\")\"),k=!0):b[0].src=b.data(\"src\");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css(\"height\",a+\"px\");e.wrapperOuter.hasClass(\"autoHeight\")||g.setTimeout(function(){e.wrapperOuter.addClass(\"autoHeight\")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,\r\n100):e.wrapperOuter.css(\"height\",\"\")}var e=this,c=f(e.$owlItems[e.currentItem]).find(\"img\"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||\"undefined\"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass(\"active\");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass(\"active\");\r\nthis.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass=\"owl-\"+a+\"-out\";this.inClass=\"owl-\"+a+\"-in\"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass(\"owl-origin\").css({\"-webkit-transform-origin\":g+\"px\",\"-moz-perspective-origin\":g+\r\n\"px\",\"perspective-origin\":g+\"px\"});d.css({position:\"relative\",left:f+\"px\"}).addClass(b).on(\"webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend\",function(){a.endPrev=!0;d.off(\"webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend\");a.clearTransStyle(d,b)});c.addClass(e).on(\"webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend\",function(){a.endCurrent=!0;c.off(\"webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend\");a.clearTransStyle(c,e)})},clearTransStyle:function(a,\r\nb){a.css({position:\"\",left:\"\"}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass(\"owl-origin\"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(\".owl owl mousedown.disableTextSelect\");\r\nf(k).off(\".owl owl\");f(g).off(\"resize\",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr(\"style\",this.$elem.data(\"owl-originalStyles\")||\"\").attr(\"class\",this.$elem.data(\"owl-originalClasses\"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,\r\na);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===\r\nf(this).data(\"owl-init\"))return!1;f(this).data(\"owl-init\",!0);var b=Object.create(l);b.init(a,this);f.data(this,\"owlCarousel\",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:[\"prev\",\"next\"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,\r\nresponsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:\"owl-carousel\",theme:\"owl-theme\",lazyLoad:!1,lazyFollow:!0,lazyEffect:\"fade\",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);","/*\r\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\r\n *\r\n * Uses the built in easing capabilities added In jQuery 1.1\r\n * to offer multiple easing options\r\n *\r\n * TERMS OF USE - jQuery Easing\r\n * \r\n * Open source under the BSD License. \r\n * \r\n * Copyright  2008 George McGinley Smith\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without modification, \r\n * are permitted provided that the following conditions are met:\r\n * \r\n * Redistributions of source code must retain the above copyright notice, this list of \r\n * conditions and the following disclaimer.\r\n * Redistributions in binary form must reproduce the above copyright notice, this list \r\n * of conditions and the following disclaimer in the documentation and/or other materials \r\n * provided with the distribution.\r\n * \r\n * Neither the name of the author nor the names of contributors may be used to endorse \r\n * or promote products derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\r\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\r\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\r\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \r\n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \r\n * OF THE POSSIBILITY OF SUCH DAMAGE. \r\n *\r\n*/\r\n\r\njQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:\"easeOutQuad\",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});\r\n\r\n/*\r\n *\r\n * TERMS OF USE - EASING EQUATIONS\r\n * \r\n * Open source under the BSD License. \r\n * \r\n * Copyright  2001 Robert Penner\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without modification, \r\n * are permitted provided that the following conditions are met:\r\n * \r\n * Redistributions of source code must retain the above copyright notice, this list of \r\n * conditions and the following disclaimer.\r\n * Redistributions in binary form must reproduce the above copyright notice, this list \r\n * of conditions and the following disclaimer in the documentation and/or other materials \r\n * provided with the distribution.\r\n * \r\n * Neither the name of the author nor the names of contributors may be used to endorse \r\n * or promote products derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\r\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\r\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\r\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \r\n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \r\n * OF THE POSSIBILITY OF SUCH DAMAGE. \r\n *\r\n */","! function(t) {\r\n    \"use strict\";\r\n    var e = function(e, s) {\r\n        if (this.$element = t(e), this.options = t.extend(!0, {}, t.fn.typeahead.defaults, s), this.$menu = t(this.options.menu).appendTo(\"body\"), this.shown = !1, this.eventSupported = this.options.eventSupported || this.eventSupported, this.grepper = this.options.grepper || this.grepper, this.highlighter = this.options.highlighter || this.highlighter, this.lookup = this.options.lookup || this.lookup, this.matcher = this.options.matcher || this.matcher, this.render = this.options.render || this.render, this.select = this.options.select || this.select, this.sorter = this.options.sorter || this.sorter, this.source = this.options.source || this.source, !this.source.length) {\r\n            var i = this.options.ajax;\r\n            this.ajax = \"string\" == typeof i ? t.extend({}, t.fn.typeahead.defaults.ajax, {\r\n                url: i\r\n            }) : t.extend({}, t.fn.typeahead.defaults.ajax, i), this.ajax.url || (this.ajax = null)\r\n        }\r\n        this.listen()\r\n    };\r\n    e.prototype = {\r\n        constructor: e,\r\n        eventSupported: function(t) {\r\n            var e = t in this.$element;\r\n            return e || (this.$element.setAttribute(t, \"return;\"), e = \"function\" == typeof this.$element[t]), e\r\n        },\r\n        ajaxer: function() {\r\n            console.log('ajaxer');\r\n            var e = this,\r\n                s = e.$element.val();\r\n            return s === e.query ? e : (e.query = s, e.ajax.timerId && (clearTimeout(e.ajax.timerId), e.ajax.timerId = null), !s || s.length < e.ajax.triggerLength ? (e.ajax.xhr && (e.ajax.xhr.abort(), e.ajax.xhr = null, e.ajaxToggleLoadClass(!1)), e.shown ? e.hide() : e) : (e.ajax.timerId = setTimeout(function() {\r\n                t.proxy(e.ajaxExecute(s), e)\r\n            }, e.ajax.timeout), e))\r\n        },\r\n        ajaxExecute: function(e) {\r\n            console.log('ajaxExecute');\r\n            this.ajaxToggleLoadClass(!0), this.ajax.xhr && this.ajax.xhr.abort();\r\n            var s = this.ajax.preDispatch ? this.ajax.preDispatch(e) : {\r\n                    query: e\r\n                },\r\n                i = \"post\" === this.ajax.method ? t.post : t.get;\r\n            this.ajax.xhr = i(this.ajax.url, s, t.proxy(this.ajaxLookup, this)), this.ajax.timerId = null\r\n        },\r\n        ajaxLookup: function(t) {\r\n            console.log('ajaxLookup');\r\n            var e;\r\n            return this.ajaxToggleLoadClass(!1), this.ajax.xhr ? (this.ajax.preProcess && (t = this.ajax.preProcess(t)), this.ajax.data = t, e = this.grepper(this.ajax.data), e && e.length ? (this.ajax.xhr = null, this.render(e.slice(0, this.options.items)).show()) : this.shown ? this.hide() : this) : void 0\r\n        },\r\n        ajaxToggleLoadClass: function(t) {\r\n            console.log('ajaxToggleLoadClass');\r\n            this.ajax.loadingClass && this.$element.toggleClass(this.ajax.loadingClass, t)\r\n        },\r\n        lookup: function() {\r\n            console.log('lookup');\r\n            var t, e = this;\r\n            return e.ajax ? void e.ajaxer() : (e.query = e.$element.val(), e.query ? (t = e.grepper(e.source), t && t.length ? e.render(t.slice(0, e.options.items)).show() : e.shown ? e.hide() : e) : e.shown ? e.hide() : e)\r\n        },\r\n        grepper: function(e) {\r\n            console.log('grepper');\r\n            var s, i = this;\r\n            return e && e.length && !e[0].hasOwnProperty(i.options.display) ? null : (s = t.grep(e, function(t) {\r\n                return i.matcher(t[i.options.display], t)\r\n            }), this.sorter(s))\r\n        },\r\n        matcher: function(t) {\r\n            console.log('matcher');\r\n            return ~t.toLowerCase().indexOf(this.query.toLowerCase())\r\n        },\r\n        sorter: function(t) {\r\n            console.log('sorter');\r\n            for (var e, s = this, i = [], a = [], n = []; e = t.shift();) e[s.options.display].toLowerCase().indexOf(this.query.toLowerCase()) ? ~e[s.options.display].indexOf(this.query) ? a.push(e) : n.push(e) : i.push(e);\r\n            return i.concat(a, n)\r\n        },\r\n        show: function() {\r\n            console.log('show');\r\n            var e = t.extend({}, this.$element.offset(), {\r\n                height: this.$element[0].offsetHeight\r\n            });\r\n            return this.$menu.css({\r\n                top: e.top + e.height,\r\n                left: e.left\r\n            }), this.$menu.show(), this.shown = !0, this\r\n        },\r\n        hide: function() {\r\n            console.log('hide');\r\n            return this.$menu.hide(), this.shown = !1, this\r\n        },\r\n        highlighter: function(t) {\r\n            console.log('highlighter');\r\n            var e = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\r\n            return t.replace(new RegExp(\"(\" + e + \")\", \"ig\"), function(t, e) {\r\n                return \"<strong>\" + e + \"</strong>\"\r\n            })\r\n        },\r\n        render: function(e) {\r\n            console.log('render');\r\n            var s = this;\r\n            return e = t(e).map(function(e, i) {\r\n                return e = t(s.options.item).attr(\"data-value\", i[s.options.val]), e.find(\"a\").html(s.highlighter(i[s.options.display], i)), e[0]\r\n            }), e.first().addClass(\"\"), this.$menu.html(e), this\r\n            //}), e.first().addClass(\"active\"), this.$menu.html(e), this\r\n        },\r\n        select: function() {\r\n            var t = this.$menu.find(\".active\");\r\n            if(t.text()){\r\n                return this.$element.val(t.text()).change(), this.options.itemSelected(t, t.attr(\"data-value\"), t.text()), this.hide()\r\n            }else{\r\n                return this.$element.val(this.$element[0].value).change(), this.options.itemSelected(t, t.attr(\"data-value\"), this.$element[0].value), this.hide()\r\n            }\r\n\r\n        },\r\n        next: function() {\r\n            console.log('next');\r\n            var e = this.$menu.find(\".active\").removeClass(\"active\"),\r\n                s = e.next();\r\n            s.length || (s = t(this.$menu.find(\"li\")[0])), s.addClass(\"active\")\r\n        },\r\n        prev: function() {\r\n            console.log('prev');\r\n            var t = this.$menu.find(\".active\").removeClass(\"active\"),\r\n                e = t.prev();\r\n            e.length || (e = this.$menu.find(\"li\").last()), e.addClass(\"active\")\r\n        },\r\n        listen: function() {\r\n            console.log('listen');\r\n            this.$element.on(\"blur\", t.proxy(this.blur, this)).on(\"keyup\", t.proxy(this.keyup, this)), this.eventSupported(\"keydown\") ? this.$element.on(\"keydown\", t.proxy(this.keypress, this)) : this.$element.on(\"keypress\", t.proxy(this.keypress, this)), this.$menu.on(\"click\", t.proxy(this.click, this)).on(\"mouseenter\", \"li\", t.proxy(this.mouseenter, this))\r\n        },\r\n        keyup: function(t) {\r\n            console.log('keyup');\r\n            switch (t.stopPropagation(), t.preventDefault(), t.keyCode) {\r\n                case 40:\r\n                case 38:\r\n                    break;\r\n                case 9:\r\n                case 13:\r\n                    console.log(9, 13);\r\n                    if (!this.shown) return;\r\n                    this.select();\r\n                    break;\r\n                case 27:\r\n                    this.hide();\r\n                    break;\r\n                default:\r\n                    this.lookup()\r\n            }\r\n        },\r\n        keypress: function(t) {\r\n            console.log('keypress');\r\n            if (t.stopPropagation(), this.shown) switch (t.keyCode) {\r\n                case 9:\r\n                case 13:\r\n                case 27:\r\n                    t.preventDefault();\r\n                    break;\r\n                case 38:\r\n                    t.preventDefault(), this.prev();\r\n                    break;\r\n                case 40:\r\n                    t.preventDefault(), this.next()\r\n            }\r\n        },\r\n        blur: function(t) {\r\n            console.log('blur');\r\n            var e = this;\r\n            t.stopPropagation(), t.preventDefault(), setTimeout(function() {\r\n                e.$menu.is(\":focus\") || e.hide()\r\n            }, 150)\r\n        },\r\n        click: function(t) {\r\n            console.log('click');\r\n            t.stopPropagation(), t.preventDefault(), this.select()\r\n        },\r\n        mouseenter: function(e) {\r\n            console.log('mouseenter');\r\n            this.$menu.find(\".active\").removeClass(\"active\"), t(e.currentTarget).addClass(\"active\")\r\n        }\r\n    }, t.fn.typeahead = function(s) {\r\n        return this.each(function() {\r\n            var i = t(this),\r\n                a = i.data(\"typeahead\"),\r\n                n = \"object\" == typeof s && s;\r\n            a || i.data(\"typeahead\", a = new e(this, n)), \"string\" == typeof s && a[s]()\r\n        })\r\n    }, t.fn.typeahead.defaults = {\r\n        source: [],\r\n        items: 8,\r\n        menu: '<ul class=\"typeahead dropdown-menu\"></ul>',\r\n        item: '<li><a href=\"#\"></a></li>',\r\n        display: \"name\",\r\n        val: \"id\",\r\n        itemSelected: function() {},\r\n        ajax: {\r\n            url: null,\r\n            timeout: 300,\r\n            method: \"post\",\r\n            triggerLength: 3,\r\n            loadingClass: null,\r\n            displayField: null,\r\n            preDispatch: null,\r\n            preProcess: null\r\n        }\r\n    }, t.fn.typeahead.Constructor = e, t(function() {\r\n        t(\"body\").on(\"focus.typeahead.data-api\", '[data-provide=\"typeahead\"]', function(e) {\r\n            var s = t(this);\r\n            s.data(\"typeahead\") || (e.preventDefault(), s.typeahead(s.data()))\r\n        })\r\n    })\r\n}(window.jQuery);","/*! Magnific Popup - v1.0.0 - 2015-01-03\r\n* http://dimsemenov.com/plugins/magnific-popup/\r\n* Copyright (c) 2015 Dmitry Semenov; */\r\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h=\"Close\",i=\"BeforeClose\",j=\"AfterClose\",k=\"BeforeAppend\",l=\"MarkupParse\",m=\"Open\",n=\"Change\",o=\"mfp\",p=\".\"+o,q=\"mfp-ready\",r=\"mfp-removing\",s=\"mfp-prevent-close\",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement(\"div\");return f.className=\"mfp-\"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace(\"%title%\",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement(\"p\").style,b=[\"ms\",\"O\",\"Moz\",\"Webkit\"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+\"Transition\"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isIE7=-1!==c.indexOf(\"MSIE 7.\"),b.isIE8=-1!==c.indexOf(\"MSIE 8.\"),b.isLowIE=b.isIE7||b.isIE8,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f=\"\",b.ev=c.mainEl&&c.mainEl.length?c.mainEl.eq(0):d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos=\"auto\"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x(\"bg\").on(\"click\"+p,function(){b.close()}),b.wrap=x(\"wrap\").attr(\"tabindex\",-1).on(\"click\"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x(\"container\",b.wrap)),b.contentContainer=x(\"content\"),b.st.preloader&&(b.preloader=x(\"preloader\",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b[\"init\"+j].call(b)}y(\"BeforeOpen\"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=\" mfp-close-btn-in\"):b.wrap.append(z())),b.st.alignTop&&(f+=\" mfp-align-top\"),b.wrap.css(b.fixedContentPos?{overflow:b.st.overflowY,overflowX:\"hidden\",overflowY:b.st.overflowY}:{top:v.scrollTop(),position:\"absolute\"}),(b.st.fixedBgPos===!1||\"auto\"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:\"absolute\"}),b.st.enableEscapeKey&&d.on(\"keyup\"+p,function(a){27===a.keyCode&&b.close()}),v.on(\"resize\"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=\" mfp-auto-cursor\"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a(\"body, html\").css(\"overflow\",\"hidden\"):n.overflow=\"hidden\");var r=b.st.mainClass;return b.isIE7&&(r+=\" mfp-ie7\"),r&&b._addClassToMFP(r),b.updateItemHTML(),y(\"BuildControls\"),a(\"html\").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on(\"focusin\"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+\" \"+q+\" \";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+\" \"),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:\"\"};b.isIE7?a(\"body, html\").css(\"overflow\",\"\"):e.overflow=\"\",a(\"html\").css(e)}d.off(\"keyup\"+p+\" focusin\"+p),b.ev.off(p),b.wrap.attr(\"class\",\"mfp-wrap\").removeAttr(\"style\"),b.bgOverlay.attr(\"class\",\"mfp-bg\"),b.container.attr(\"class\",\"mfp-container\"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css(\"height\",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css(\"height\",b.wH),y(\"Resize\")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y(\"BeforeChange\",[b.currItem?b.currItem.type:\"\",d]),b.currItem=c,!b.currTemplate[d]){var f=b.st[d]?b.st[d].markup:!1;y(\"FirstMarkupParse\",f),b.currTemplate[d]=f?a(f):!0}e&&e!==c.type&&b.container.removeClass(\"mfp-\"+e+\"-holder\");var g=b[\"get\"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y(\"AfterChange\")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(\".mfp-close\").length||b.content.append(z()):b.content=a:b.content=\"\",y(k),b.container.addClass(\"mfp-\"+c+\"-holder\"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass(\"mfp-\"+f[g])){d=f[g];break}e.src=e.el.attr(\"data-mfp-src\"),e.src||(e.src=e.el.attr(\"href\"))}return e.type=d||b.st.type||\"inline\",e.index=c,e.parsed=!0,b.items[c]=e,y(\"ElementParse\",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e=\"click.magnificPopup\";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||2!==c.which&&!c.ctrlKey&&!c.metaKey){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass(\"mfp-s-\"+c),d||\"loading\"!==a||(d=b.st.tLoading);var e={status:a,text:d};y(\"UpdateStatus\",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find(\"a\").on(\"click\",function(a){a.stopImmediatePropagation()}),b.container.addClass(\"mfp-s-\"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass(\"mfp-close\")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(a,c){if(void 0===c||c===!1)return!0;if(e=a.split(\"_\"),e.length>1){var d=b.find(p+\"-\"+e[0]);if(d.length>0){var f=e[1];\"replaceWith\"===f?d[0]!==c[0]&&d.replaceWith(c):\"img\"===f?d.is(\"img\")?d.attr(\"src\",c):d.replaceWith('<img src=\"'+c+'\" class=\"'+d.attr(\"class\")+'\" />'):d.attr(e[1],c)}}else b.find(p+\"-\"+a).html(c)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement(\"div\");a.style.cssText=\"width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;\",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:\"\",preloader:!0,focus:\"\",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:\"auto\",fixedBgPos:\"auto\",overflowY:\"auto\",closeMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&times;</button>',tClose:\"Close (Esc)\",tLoading:\"Loading...\"}},a.fn.magnificPopup=function(c){A();var d=a(this);if(\"string\"==typeof c)if(\"open\"===c){var e,f=u?d.data(\"magnificPopup\"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data(\"magnificPopup\",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F=\"inline\",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:\"hide\",markup:\"\",tNotFound:\"Content not found\"},proto:{initInline:function(){b.types.push(F),w(h+\".\"+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C=\"mfp-\"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus(\"ready\")}else b.updateStatus(\"error\",e.tNotFound),f=a(\"<div>\");return c.inlineElement=f,f}return b.updateStatus(\"ready\"),b._parseMarkup(d,{},c),d}}});var H,I=\"ajax\",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:\"mfp-ajax-cur\",tError:'<a href=\"%url%\">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+\".\"+I,K),w(\"BeforeChange.\"+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus(\"loading\");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y(\"ParseAjax\",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus(\"ready\"),y(\"AjaxContentAdded\")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus(\"error\",b.st.ajax.tError.replace(\"%url%\",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),\"\"}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||\"\"}return\"\"};a.magnificPopup.registerModule(\"image\",{options:{markup:'<div class=\"mfp-figure\"><div class=\"mfp-close\"></div><figure><div class=\"mfp-img\"></div><figcaption><div class=\"mfp-bottom-bar\"><div class=\"mfp-title\"></div><div class=\"mfp-counter\"></div></div></figcaption></figure></div>',cursor:\"mfp-zoom-out-cur\",titleSrc:\"title\",verticalFit:!0,tError:'<a href=\"%url%\">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=\".image\";b.types.push(\"image\"),w(m+d,function(){\"image\"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off(\"resize\"+p)}),w(\"Resize\"+d,b.resizeImage),b.isLowIE&&w(\"AfterChange\",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css(\"padding-top\"),10)+parseInt(a.img.css(\"padding-bottom\"),10)),a.img.css(\"max-height\",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y(\"ImageHasSize\",a),a.imgHidden&&(b.content&&b.content.removeClass(\"mfp-loading\"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(\".mfploader\"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus(\"ready\")),c.hasSize=!0,c.loaded=!0,y(\"ImageLoadComplete\")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(\".mfploader\"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus(\"error\",h.tError.replace(\"%url%\",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(\".mfp-img\");if(i.length){var j=document.createElement(\"img\");j.className=\"mfp-img\",c.el&&c.el.find(\"img\").length&&(j.alt=c.el.find(\"img\").attr(\"alt\")),c.img=a(j).on(\"load.mfploader\",f).on(\"error.mfploader\",g),j.src=c.src,i.is(\"img\")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass(\"mfp-loading\"),b.updateStatus(\"error\",h.tError.replace(\"%url%\",c.src))):(d.removeClass(\"mfp-loading\"),b.updateStatus(\"ready\")),d):(b.updateStatus(\"loading\"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass(\"mfp-loading\"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement(\"p\").style.MozTransform),N};a.magnificPopup.registerModule(\"zoom\",{options:{enabled:!1,easing:\"ease-in-out\",duration:300,opener:function(a){return a.is(\"img\")?a:a.find(\"img\")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=\".zoom\";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr(\"style\").removeAttr(\"class\").addClass(\"mfp-animated-image\"),d=\"all \"+c.duration/1e3+\"s \"+c.easing,e={position:\"fixed\",zIndex:9999,left:0,top:0,\"-webkit-backface-visibility\":\"hidden\"},f=\"transition\";return e[\"-webkit-\"+f]=e[\"-moz-\"+f]=e[\"-o-\"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css(\"visibility\",\"visible\")};w(\"BuildControls\"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css(\"visibility\",\"hidden\"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y(\"ZoomAnimationEnded\")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css(\"visibility\",\"hidden\"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return\"image\"===b.currItem.type},_getItemToZoom:function(){return b.currItem.hasSize?b.currItem.img:!1},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css(\"padding-top\"),10),g=parseInt(d.css(\"padding-bottom\"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h[\"-moz-transform\"]=h.transform=\"translate(\"+e.left+\"px,\"+e.top+\"px)\":(h.left=e.left,h.top=e.top),h}}});var P=\"iframe\",Q=\"//about:blank\",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find(\"iframe\");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css(\"display\",a?\"block\":\"none\"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class=\"mfp-iframe-scaler\"><div class=\"mfp-close\"></div><iframe class=\"mfp-iframe\" src=\"//about:blank\" frameborder=\"0\" allowfullscreen></iframe></div>',srcAction:\"iframe_src\",patterns:{youtube:{index:\"youtube.com\",id:\"v=\",src:\"//www.youtube.com/embed/%id%?autoplay=1\"},vimeo:{index:\"vimeo.com/\",id:\"/\",src:\"//player.vimeo.com/video/%id%?autoplay=1\"},gmaps:{index:\"//maps.google.\",src:\"%id%&output=embed\"}}},proto:{initIframe:function(){b.types.push(P),w(\"BeforeChange\",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+\".\"+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e=\"string\"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace(\"%id%\",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus(\"ready\"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule(\"gallery\",{options:{enabled:!1,arrowMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:\"Previous (Left arrow key)\",tNext:\"Next (Right arrow key)\",tCounter:\"%curr% of %total%\"},proto:{initGallery:function(){var c=b.st.gallery,e=\".mfp-gallery\",g=Boolean(a.fn.mfpFastClick);return b.direction=!0,c&&c.enabled?(f+=\" mfp-gallery\",w(m+e,function(){c.navigateByImgClick&&b.wrap.on(\"click\"+e,\".mfp-img\",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on(\"keydown\"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w(\"UpdateStatus\"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):\"\"}),w(\"BuildControls\"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,\"left\")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,\"right\")).addClass(s),h=g?\"mfpFastClick\":\"click\";e[h](function(){b.prev()}),f[h](function(){b.next()}),b.isIE7&&(x(\"b\",e[0],!1,!0),x(\"a\",e[0],!1,!0),x(\"b\",f[0],!1,!0),x(\"a\",f[0],!1,!0)),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off(\"click\"+e),b.arrowLeft&&g&&b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(),b.arrowRight=b.arrowLeft=null})):!1},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y(\"LazyLoad\",d),\"image\"===d.type&&(d.img=a('<img class=\"mfp-img\" />').on(\"load.mfploader\",function(){d.hasSize=!0}).on(\"error.mfploader\",function(){d.hasSize=!0,d.loadError=!0,y(\"LazyLoadError\",d)}).attr(\"src\",d.src)),d.preloaded=!0}}}});var U=\"retina\";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\\.\\w+$/,function(a){return\"@2x\"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w(\"ImageHasSize.\"+U,function(a,b){b.img.css({\"max-width\":b.img[0].naturalWidth/c,width:\"100%\"})}),w(\"ElementParse.\"+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),function(){var b=1e3,c=\"ontouchstart\"in window,d=function(){v.off(\"touchmove\"+f+\" touchend\"+f)},e=\"mfpFastClick\",f=\".\"+e;a.fn.mfpFastClick=function(e){return a(this).each(function(){var g,h=a(this);if(c){var i,j,k,l,m,n;h.on(\"touchstart\"+f,function(a){l=!1,n=1,m=a.originalEvent?a.originalEvent.touches[0]:a.touches[0],j=m.clientX,k=m.clientY,v.on(\"touchmove\"+f,function(a){m=a.originalEvent?a.originalEvent.touches:a.touches,n=m.length,m=m[0],(Math.abs(m.clientX-j)>10||Math.abs(m.clientY-k)>10)&&(l=!0,d())}).on(\"touchend\"+f,function(a){d(),l||n>1||(g=!0,a.preventDefault(),clearTimeout(i),i=setTimeout(function(){g=!1},b),e())})})}h.on(\"click\"+f,function(){g||e()})})},a.fn.destroyMfpFastClick=function(){a(this).off(\"touchstart\"+f+\" click\"+f),c&&v.off(\"touchmove\"+f+\" touchend\"+f)}}(),A()});","/*\r\n Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net\r\n*/\r\n(function(){var c,f;c=this.jQuery||window.jQuery;f=c(window);c.fn.stick_in_parent=function(b){var A,w,J,n,B,K,p,q,L,k,E,t;null==b&&(b={});t=b.sticky_class;B=b.inner_scrolling;E=b.recalc_every;k=b.parent;q=b.offset_top;p=b.spacer;w=b.bottoming;null==q&&(q=0);null==k&&(k=void 0);null==B&&(B=!0);null==t&&(t=\"is_stuck\");A=c(document);null==w&&(w=!0);L=function(a){var b;return window.getComputedStyle?(a=window.getComputedStyle(a[0]),b=parseFloat(a.getPropertyValue(\"width\"))+parseFloat(a.getPropertyValue(\"margin-left\"))+\r\nparseFloat(a.getPropertyValue(\"margin-right\")),\"border-box\"!==a.getPropertyValue(\"box-sizing\")&&(b+=parseFloat(a.getPropertyValue(\"border-left-width\"))+parseFloat(a.getPropertyValue(\"border-right-width\"))+parseFloat(a.getPropertyValue(\"padding-left\"))+parseFloat(a.getPropertyValue(\"padding-right\"))),b):a.outerWidth(!0)};J=function(a,b,n,C,F,u,r,G){var v,H,m,D,I,d,g,x,y,z,h,l;if(!a.data(\"sticky_kit\")){a.data(\"sticky_kit\",!0);I=A.height();g=a.parent();null!=k&&(g=g.closest(k));if(!g.length)throw\"failed to find stick parent\";\r\nv=m=!1;(h=null!=p?p&&a.closest(p):c(\"<div />\"))&&h.css(\"position\",a.css(\"position\"));x=function(){var d,f,e;if(!G&&(I=A.height(),d=parseInt(g.css(\"border-top-width\"),10),f=parseInt(g.css(\"padding-top\"),10),b=parseInt(g.css(\"padding-bottom\"),10),n=g.offset().top+d+f,C=g.height(),m&&(v=m=!1,null==p&&(a.insertAfter(h),h.detach()),a.css({position:\"\",top:\"\",width:\"\",bottom:\"\"}).removeClass(t),e=!0),F=a.offset().top-(parseInt(a.css(\"margin-top\"),10)||0)-q,u=a.outerHeight(!0),r=a.css(\"float\"),h&&h.css({width:L(a),\r\nheight:u,display:a.css(\"display\"),\"vertical-align\":a.css(\"vertical-align\"),\"float\":r}),e))return l()};x();if(u!==C)return D=void 0,d=q,z=E,l=function(){var c,l,e,k;if(!G&&(e=!1,null!=z&&(--z,0>=z&&(z=E,x(),e=!0)),e||A.height()===I||x(),e=f.scrollTop(),null!=D&&(l=e-D),D=e,m?(w&&(k=e+u+d>C+n,v&&!k&&(v=!1,a.css({position:\"fixed\",bottom:\"\",top:d}).trigger(\"sticky_kit:unbottom\"))),e<F&&(m=!1,d=q,null==p&&(\"left\"!==r&&\"right\"!==r||a.insertAfter(h),h.detach()),c={position:\"\",width:\"\",top:\"\"},a.css(c).removeClass(t).trigger(\"sticky_kit:unstick\")),\r\nB&&(c=f.height(),u+q>c&&!v&&(d-=l,d=Math.max(c-u,d),d=Math.min(q,d),m&&a.css({top:d+\"px\"})))):e>F&&(m=!0,c={position:\"fixed\",top:d},c.width=\"border-box\"===a.css(\"box-sizing\")?a.outerWidth()+\"px\":a.width()+\"px\",a.css(c).addClass(t),null==p&&(a.after(h),\"left\"!==r&&\"right\"!==r||h.append(a)),a.trigger(\"sticky_kit:stick\")),m&&w&&(null==k&&(k=e+u+d>C+n),!v&&k)))return v=!0,\"static\"===g.css(\"position\")&&g.css({position:\"relative\"}),a.css({position:\"absolute\",bottom:b,top:\"auto\"}).trigger(\"sticky_kit:bottom\")},\r\ny=function(){x();return l()},H=function(){G=!0;f.off(\"touchmove\",l);f.off(\"scroll\",l);f.off(\"resize\",y);c(document.body).off(\"sticky_kit:recalc\",y);a.off(\"sticky_kit:detach\",H);a.removeData(\"sticky_kit\");a.css({position:\"\",bottom:\"\",top:\"\",width:\"\"});g.position(\"position\",\"\");if(m)return null==p&&(\"left\"!==r&&\"right\"!==r||a.insertAfter(h),h.remove()),a.removeClass(t)},f.on(\"touchmove\",l),f.on(\"scroll\",l),f.on(\"resize\",y),c(document.body).on(\"sticky_kit:recalc\",y),a.on(\"sticky_kit:detach\",H),setTimeout(l,\r\n0)}};n=0;for(K=this.length;n<K;n++)b=this[n],J(c(b));return this}}).call(this);\r\n","/* jQuery - Easy Ticker - Plugin v2.0 www.aakashweb.com (c) 2014 Aakash Chakravarthy MIT License. */\r\n;(function($,h,i,j){var k=\"easyTicker\",defaults={direction:'up',easing:'swing',speed:'slow',interval:2000,height:'auto',visible:0,mousePause:1,controls:{up:'',down:'',toggle:'',playText:'Play',stopText:'Stop'}};function EasyTicker(f,g){var s=this;s.opts=$.extend({},defaults,g);s.elem=$(f);s.targ=$(f).children(':first-child');s.timer=0;s.mHover=0;s.winFocus=1;init();start();$([h,i]).off('focus.jqet').on('focus.jqet',function(){s.winFocus=1}).off('blur.jqet').on('blur.jqet',function(){s.winFocus=0});if(s.opts.mousePause==1){s.elem.mouseenter(function(){s.timerTemp=s.timer;stop()}).mouseleave(function(){if(s.timerTemp!==0)start()})}$(s.opts.controls.up).on('click',function(e){e.preventDefault();moveDir('up')});$(s.opts.controls.down).on('click',function(e){e.preventDefault();moveDir('down')});$(s.opts.controls.toggle).on('click',function(e){e.preventDefault();if(s.timer==0)start();else stop()});function init(){s.elem.children().css('margin',0).children().css('margin',0);s.elem.css({position:'relative',height:s.opts.height,overflow:'hidden'});s.targ.css({'position':'absolute','margin':0});setInterval(function(){adjHeight()},100)}function start(){s.timer=setInterval(function(){if(s.winFocus==1){move(s.opts.direction)}},s.opts.interval);$(s.opts.controls.toggle).addClass('et-run').html(s.opts.controls.stopText)}function stop(){clearInterval(s.timer);s.timer=0;$(s.opts.controls.toggle).removeClass('et-run').html(s.opts.controls.playText)}function move(a){var b,eq,appType;if(!s.elem.is(':visible'))return;if(a=='up'){b=':first-child';eq='-=';appType='appendTo'}else{b=':last-child';eq='+=';appType='prependTo'}var c=s.targ.children(b);var d=c.outerHeight();s.targ.stop(true,true).animate({'top':eq+d+\"px\"},s.opts.speed,s.opts.easing,function(){c.hide()[appType](s.targ).fadeIn();s.targ.css('top',0);adjHeight()})}function moveDir(a){stop();if(a=='up')move('up');else move('down')}function fullHeight(){var a=0;var b=s.elem.css('display');s.elem.css('display','block');s.targ.children().each(function(){a+=$(this).outerHeight()});s.elem.css({'display':b,'height':a})}function visHeight(a){var b=0;s.targ.children(':lt('+s.opts.visible+')').each(function(){b+=$(this).outerHeight()});if(a==1){s.elem.stop(true,true).animate({height:b},s.opts.speed)}else{s.elem.css('height',b)}}function adjHeight(){if(s.opts.height=='auto'&&s.opts.visible!=0){anim=arguments.callee.caller.name=='init'?0:1;visHeight(anim)}else if(s.opts.height=='auto'){fullHeight()}}return{up:function(){moveDir('up')},down:function(){moveDir('down')},start:start,stop:stop,options:s.opts}}$.fn[k]=function(a){return this.each(function(){if(!$.data(this,k)){$.data(this,k,new EasyTicker(this,a))}})}})(jQuery,window,document);","jQuery(function ($) {\r\n\r\n    'use strict';\r\n\r\n    /*==============================================================*/\r\n    // Table of index\r\n    /*==============================================================*/\r\n\r\n    /*==============================================================\r\n     # sticky-nav\r\n     # Date Time\r\n     # language Select\r\n     # Search Slide\r\n     # Breaking News\r\n     # Owl Carousel\r\n     # magnificPopup\r\n     # newsletter\r\n     # weather\r\n     \r\n     ==============================================================*/\r\n//COMPARTILHAMENTO PELO FACEBOOK\r\n//==========================================================\r\n    $.ajaxSetup({cache: true});\r\n    $.getScript('//connect.facebook.net/en_US/sdk.js', function () {\r\n        FB.init({\r\n            appId: '{1088274097890420}',\r\n            version: 'v2.7' // or v2.1, v2.2, v2.3, ...\r\n        });\r\n        $('#loginbutton,#feedbutton').removeAttr('disabled');\r\n        FB.getLoginStatus(updateStatusCallback);\r\n    });\r\n//=============================================================\r\n    /*==============================================================*/\r\n    // Search terms\r\n    /*==============================================================*/\r\n\r\n    $.getJSON('/busca/json-tags-cursos', function (data) {\r\n        jQuery('.typeahead').typeahead({\r\n            source: data,\r\n            display: 'title',\r\n            val: 'link',\r\n            highlight: 'false',\r\n            hint: 'true',\r\n            itemSelected: function (item, val) {\r\n                if (val === undefined) {\r\n                    window.location.href = '/busca?s=' + $('#search-form').val();\r\n                } else {\r\n                    window.location.href = '' + val + '';\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n\r\n//    $(\".entry-thumbnail\").on('mouseover', function () {\r\n//        console.log(this);\r\n//        //$(this).src = \"/img/frontend/ticket_black_friday.png\";\r\n//    });\r\n\r\n    /*==============================================================*/\r\n    // # sticky-nav\r\n    /*==============================================================*/\r\n    (function () {\r\n        var windowWidth = $(window).width();\r\n        if (windowWidth > 1000) {\r\n            $(window).scroll(function () {\r\n                var sT = $(this).scrollTop();\r\n                if (sT >= 120) {\r\n                    $('.homepage .navbar, .homepage-two.fixed-nav .navbar').addClass('sticky-nav')\r\n                } else {\r\n                    $('.homepage .navbar, .homepage-two.fixed-nav .navbar').removeClass('sticky-nav')\r\n                }\r\n                ;\r\n            });\r\n        } else {\r\n            $('.homepage .navbar, .homepage-two.fixed-nav .navbar').removeClass('sticky-nav')\r\n        }\r\n        ;\r\n        if (windowWidth > 1000) {\r\n            $(window).scroll(function () {\r\n                var sT = $(this).scrollTop();\r\n                if (sT >= 120) {\r\n                    $('.homepage #menubar, .homepage-two.fixed-nav #navigation').removeClass('container')\r\n                    $('.homepage #menubar, .homepage-two.fixed-nav #navigation').addClass('container-fluid')\r\n                } else {\r\n                    $('.homepage #menubar, .homepage-two.fixed-nav #navigation').removeClass('container-fluid')\r\n                    $('.homepage #menubar').addClass('container')\r\n                }\r\n            });\r\n        } else {\r\n            $('.homepage #menubar, .homepage-two.fixed-nav #navigation').removeClass('container-fluid')\r\n        }\r\n        ;\r\n\r\n    }());\r\n\r\n\r\n\r\n    /*==============================================================*/\r\n    // # language Select\r\n    /*==============================================================*/\r\n    (function () {\r\n        $('.language-dropdown').on('click', '.language-change a', function (ev) {\r\n            if (\"#\" === $(this).attr('href')) {\r\n                ev.preventDefault();\r\n                var parent = $(this).parents('.language-dropdown');\r\n                parent.find('.change-text').html($(this).html());\r\n            }\r\n        });\r\n    }());\r\n\r\n    /*==============================================================*/\r\n    // Search Slide\r\n    /*==============================================================*/\r\n\r\n    $('.search-icon').on('click', function () {\r\n        $('.searchNlogin').toggleClass(\"expanded\");\r\n    });\r\n\r\n\r\n    /*==============================================================*/\r\n    // Breaking News\r\n    /*==============================================================*/\r\n    (function () {\r\n        $('.breaking-news-scroll').easyTicker({\r\n            direction: 'up',\r\n            easing: 'swing',\r\n            speed: 'slow',\r\n            interval: 3000,\r\n            height: 'auto',\r\n            visible: 1,\r\n            mousePause: 1,\r\n            controls: {\r\n                up: '',\r\n                down: '',\r\n                toggle: '',\r\n                playText: 'Play',\r\n                stopText: 'Stop'\r\n            }\r\n        });\r\n\r\n    }());\r\n\r\n\r\n    /*==============================================================*/\r\n    // sticky\r\n    /*==============================================================*/\r\n    (function () {\r\n        $(\"#sticky\").stick_in_parent();\r\n    }());\r\n\r\n    /*==============================================================*/\r\n    // Owl Carousel\r\n    /*==============================================================*/\r\n    $(\"#home-slider\").owlCarousel({\r\n        pagination: true,\r\n        autoPlay: true,\r\n        singleItem: true,\r\n        stopOnHover: true,\r\n    });\r\n\r\n    $(\"#latest-news\").owlCarousel({\r\n        items: 4,\r\n        pagination: true,\r\n        autoPlay: true,\r\n        stopOnHover: true,\r\n    });\r\n\r\n    $(\".twitter-feeds\").owlCarousel({\r\n        items: 1,\r\n        singleItem: true,\r\n        pagination: false,\r\n        autoPlay: true,\r\n        stopOnHover: true,\r\n    });\r\n\r\n    $(\"#main-slider\").owlCarousel({\r\n        items: 3,\r\n        pagination: false,\r\n        navigation: false,\r\n        autoPlay: true,\r\n        stopOnHover: true\r\n\r\n    });\r\n\r\n\r\n\r\n\r\n    /*==============================================================*/\r\n    // Magnific Popup\r\n    /*==============================================================*/\r\n\r\n    (function () {\r\n        $('.image-link').magnificPopup({\r\n            gallery: {\r\n                enabled: true\r\n            },\r\n            type: 'image'\r\n        });\r\n        $('.feature-image .image-link').magnificPopup({\r\n            gallery: {\r\n                enabled: false\r\n            },\r\n            type: 'image'\r\n        });\r\n        $('.image-popup').magnificPopup({\r\n            type: 'image'\r\n        });\r\n        $('.video-link').magnificPopup({type: 'iframe'});\r\n    }());\r\n\r\n\r\n    /*=====================================================*/\r\n    /* Custom Functions                                    */\r\n    /*=====================================================*/\r\n\r\n    if ($(\".tell-a-friend-button\").length > 0) {\r\n        $(\".tell-a-friend-button\").click(function () {\r\n            $(\"#tellAFriendModal\").remove();\r\n            if ($(\"#tellAFriendModal\").length > 0) {\r\n                $(\"#tellAFriendModal\").modal('toggle');\r\n            } else {\r\n                $.ajax({\r\n                    url: '/opentellafriend',\r\n                    type: 'post',\r\n                    headers: {\r\n                        'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                    },\r\n                    data: {\r\n                        id: $(this).data('id'),\r\n                        type: $(this).data('type'),\r\n                        title: $(this).data('title'),\r\n                    },\r\n                    success: function (data) {\r\n                        if ($(\"#tellAFriendModal\").length <= 0) {\r\n                            $(\"#main-content\").append(data);\r\n                            $(\"#tellAFriendModal\").modal('toggle');\r\n                            $(\"#tellAFriendModal\").off('shown.bs.modal').on('shown.bs.modal', function () {\r\n                                $(window).keydown(function (event) {\r\n                                    if (event.keyCode == 13) {\r\n                                        event.preventDefault();\r\n                                    }\r\n                                });\r\n\r\n                                $('#friends').multipleInput();\r\n                                $(\".e-mail\").blur(function () {\r\n\r\n\r\n                                    if (!isEmail($(this).val())) {\r\n                                        if ($(\".fa-warning\").length <= 0) {\r\n                                            $(this).css('background-color', '#DDD');\r\n                                            $(this).parent().find('label').after('&nbsp;<i data-toggle=\"tooltip\" title=\"E-mail invlido\" class=\"fa fa-warning\" style=\"color: red\"></i>');\r\n                                        }\r\n                                    } else {\r\n                                        $(this).css('background-color', 'initial');\r\n                                        $(\".fa-warning\").remove();\r\n\r\n                                    }\r\n                                });\r\n\r\n\r\n                                $('#tellAFriendForm').submit(function (e) {\r\n                                    console.log($(this).serialize());\r\n                                    e.preventDefault();\r\n                                    $(\".btn-tell\").val('Enviando...');\r\n                                    $.ajax({\r\n                                        url: '/tellafriend',\r\n                                        type: 'post',\r\n                                        target: 'blank',\r\n                                        headers: {\r\n                                            'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                                        },\r\n                                        data: $(this).serialize(),\r\n                                        success: function (data) {\r\n\r\n                                            $(\"#tellAFriendModalClose\").modal('toggle');\r\n                                            $(\"#tellAFriendModal\").css('display', 'none');\r\n                                            $('.modal-backdrop').hide();\r\n                                            $(\"#tellAFriendModal\").remove();\r\n                                            //$(\"#tell-a-friend-form\").html(\"<div class='row'><div class='col-md-11'><h2 style='padding:20px'>Sua indicao foi enviada com sucesso!</h2></div><div class='col-md-1'>  <button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div></div>\");\r\n                                        },\r\n                                        error: function () {\r\n                                            $(\"#tellAFriendModal\").remove();\r\n                                        }\r\n\r\n                                    });\r\n                                });\r\n\r\n\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    function isEmail(email) {\r\n        var regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\r\n        return regex.test(email);\r\n    }\r\n\r\n    (function ($) {\r\n        $.fn.multipleInput = function () {\r\n            return this.each(function () {\r\n                var $list;\r\n                $list = $('<ul />');\r\n                var $input = $('<input type=\"text\" />').keyup(function (event) {\r\n                    if (event.which == 32 || event.which == 188) {\r\n                        var val = $(this).val().slice(0, -1); // remove space/comma from value\r\n                        $list.append($('<li class=\"multipleInput-email\"><span>' + val + '</span></li>')\r\n                                .append($('<a href=\"#\" class=\"multipleInput-close\" title=\"Remove\" />')\r\n                                        .click(function (e) {\r\n                                            $(this).parent().remove();\r\n                                            e.preventDefault();\r\n                                        })\r\n                                        )\r\n                                );\r\n                        $(this).attr('placeholder', '');\r\n                        $(this).val('');\r\n                    }\r\n                });\r\n\r\n                var $container = $('<div class=\"multipleInput-container\" />').click(function () {\r\n                    $input.focus();\r\n                });\r\n\r\n                $container.append($list).append($input).insertAfter($(this));\r\n\r\n                var $orig = $(this);\r\n                $(this).closest('form').submit(function (e) {\r\n                    var emails = new Array();\r\n                    $('.multipleInput-email span').each(function () {\r\n                        emails.push($(this).html());\r\n                    });\r\n                    emails.push($input.val());\r\n                    $orig.val(emails.join());\r\n                });\r\n                return $(this).hide();\r\n            });\r\n        };\r\n    })(jQuery);\r\n\r\n\r\n\r\n});\r\n\r\n","\t\tjQuery(document).ready(function($){\r\n\t\t\t$('.preset-list li a').on('click',function(event){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tvar color = $(this).data('color'),\r\n\t\t\t\t\turl = 'css/presets/'+color+'.css';\r\n\t\t\t\t\tlogoSrc = 'images/presets/'+color+'/logo.png';\r\n\t\t\t\t\tlogoIconSrc = 'images/presets/'+color+'/logo-icon.png';\r\n\t\t\t\t\r\n\t\t\t\t$('.navbar-brand img').attr('src', logoSrc);\r\n\t\t\t\t$('.logo-icon img').attr('src', logoIconSrc);\r\n\t\t\t\t$('#preset').attr('href', url);\r\n\t\t\t});\r\n\r\n\t\t\t$('.style-chooser .toggler').on('click', function(event){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\t$(this).closest('.style-chooser').toggleClass('opened');\r\n\t\t\t});\r\n\t\t});","$('#scroll-top').on('click', function(e){\r\n\te.preventDefault();\r\n\t$('html, body').animate({scrollTop: 0}, 'slow');\r\n});","//Escuta o boto de exportar anotaes\r\n$('#btn-export').on('click', function(e){\r\n\t//Abrindo nova aba e escrendo o HTML no documento\r\n\tnewWindow = window.open();\r\n\tnewWindow.document.open();\r\n\tnewWindow.document.write(getHtmlForPrint());\r\n\t\r\n\t//2 milisegundos para dar tempo da funo escrever o HTML no documento\r\n\tsetTimeout(function(){ \r\n\t\t//Se for firefox, pausar o carregamento do documento aps j ter escrito HTML\r\n\t\tif(jQuery.browser.mozilla){\r\n\t\t\tnewWindow.stop();\r\n\t\t}\r\n\t\tnewWindow.print(); \r\n\t}, 200);\r\n});\r\n\r\n//Funo para pegar o contudo que quero imprimir pro usurio\r\nfunction getContentForPrint(element){\r\n\tvar htmlToPrint = document.getElementById(element).outerHTML;\r\n\treturn htmlToPrint;\r\n}\r\n\r\n//Funo para concatenar o HTML que dever ser escrito no documento\r\nfunction getHtmlForPrint(){\r\n\t\r\n\tvar html = '<!doctype html><html>';\r\n\t\t\r\n\t\thtml += '<head>';\r\n\t\t\thtml += '<!--[if IE]><link rel=\"shortcut icon\" href=\"/favicon.ico\"><![endif]-->';\r\n\t\t\thtml += '<link rel=\"shortcut icon\" href=\"/favicon.ico\" type=\"image/x-icon\">';\r\n\t\t\thtml += '<title> Exportar Anotaes </title>'\r\n\t\t\thtml += '<meta charset=\"utf-8\">';\r\n        \thtml += '<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">';\r\n        \thtml += '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">';\r\n\t\t\thtml += '<style type=\"text/css\">';\r\n\t\t\t\thtml += 'body{font-size: 12px !important}';\r\n\t\t\thtml += '</style>';\r\n\t\t\thtml += css;\r\n\t\thtml += '</head>';\r\n\r\n\t\thtml += '<body>';\r\n\t\t\thtml += '<section class=\"body\">';\r\n\t        \thtml += '<div class=\"inner-wrapper\" style=\"padding-top: 0;\">';\r\n\t            \thtml += '<section role=\"main\" class=\"content-body\">';\r\n\t                \thtml += '<div id=\"course\" class=\"container\">';\r\n\t                    \thtml += '<div class=\"row\">';\r\n\t                        \thtml += '<div class=\"col-md-12\" >';\r\n\t                            \thtml += '<div id=\"tabs-content\" class=\"tab-content\">';\r\n\t                                \thtml += '<div id=\"module-tab\" class=\"tab-pane fade in active\">';\r\n\t                                \t\thtml+= '<section id=\"content-export\" class=\"panel\">';\r\n\t\t                                    \thtml += getContentForPrint('content-export');\r\n\t\t                                    html += '</section>';\r\n\t                                    html += '</div>';\r\n\t                           \t \thtml += '</div>';\r\n\t                        \thtml += '</div>';\r\n\t                    \thtml += '</div>';\r\n\t                \thtml += '</div>';\r\n\t            \thtml += '</section>'; \r\n\t        \thtml += '</div>';\r\n\t   \t \thtml += '</section>';\r\n\t\thtml += '</body>';\r\n\r\n\thtml += '</html>';\r\n\t\r\n\treturn html;\r\n}","$(function () {\r\n\t$(\"#carousel\").owlCarousel({\r\n \t\tautoPlay: 6000,\r\n \t\tstopOnHover : true,\r\n \t\tsingleItem:true,\r\n \t\tslideSpeed : 500,\r\n \t\tnavigation : true,\r\n\t\tnavigationText: [\"<i class='fa fa-arrow-left'></i>\",\"<i class='fa fa-arrow-right'></i>\"],\r\n \t});\r\n\t$(\".owl-buttons\").css('display','none');\r\n\r\n\r\n});","//! moment.js\r\n//! version : 2.14.1\r\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\r\n//! license : MIT\r\n//! momentjs.com\r\n!function(a,b){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=b():\"function\"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){\"use strict\";function a(){return md.apply(null,arguments)}\r\n// This is done to register the method called with moment()\r\n// without creating circular dependencies.\r\nfunction b(a){md=a}function c(a){return a instanceof Array||\"[object Array]\"===Object.prototype.toString.call(a)}function d(a){return\"[object Object]\"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)\r\n// even if its not own property I'd still call it non-empty\r\nreturn!1;return!0}function f(a){return a instanceof Date||\"[object Date]\"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,\"toString\")&&(a.toString=b.toString),h(b,\"valueOf\")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return qb(a,b,c,d,!0).utc()}function k(){\r\n// We need to deep clone this object.\r\nreturn{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a),c=nd.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a){return void 0===a}function p(a,b){var c,d,e;if(o(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),o(b._i)||(a._i=b._i),o(b._f)||(a._f=b._f),o(b._l)||(a._l=b._l),o(b._strict)||(a._strict=b._strict),o(b._tzm)||(a._tzm=b._tzm),o(b._isUTC)||(a._isUTC=b._isUTC),o(b._offset)||(a._offset=b._offset),o(b._pf)||(a._pf=l(b)),o(b._locale)||(a._locale=b._locale),od.length>0)for(c in od)d=od[c],e=b[d],o(e)||(a[d]=e);return a}\r\n// Moment prototype object\r\nfunction q(b){p(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),pd===!1&&(pd=!0,a.updateOffset(this),pd=!1)}function r(a){return a instanceof q||null!=a&&null!=a._isAMomentObject}function s(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=s(b)),c}\r\n// compare two arrays, return the number of differences\r\nfunction u(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function v(b){a.suppressDeprecationWarnings===!1&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"Deprecation warning: \"+b)}function w(b,c){var d=!0;return i(function(){return null!=a.deprecationHandler&&a.deprecationHandler(null,b),d&&(v(b+\"\\nArguments: \"+Array.prototype.slice.call(arguments).join(\", \")+\"\\n\"+(new Error).stack),d=!1),c.apply(this,arguments)},c)}function x(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),qd[b]||(v(c),qd[b]=!0)}function y(a){return a instanceof Function||\"[object Function]\"===Object.prototype.toString.call(a)}function z(a){var b,c;for(c in a)b=a[c],y(b)?this[c]=b:this[\"_\"+c]=b;this._config=a,\r\n// Lenient ordinal parsing accepts just a number in addition to\r\n// number + (possibly) stuff coming from _ordinalParseLenient.\r\nthis._ordinalParseLenient=new RegExp(this._ordinalParse.source+\"|\"+/\\d{1,2}/.source)}function A(a,b){var c,e=i({},a);for(c in b)h(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},i(e[c],a[c]),i(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)h(a,c)&&!h(b,c)&&d(a[c])&&(\r\n// make sure changes to properties don't modify parent config\r\ne[c]=i({},e[c]));return e}function B(a){null!=a&&this.set(a)}function C(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return y(d)?d.call(b,c):d}function D(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function E(){return this._invalidDate}function F(a){return this._ordinal.replace(\"%d\",a)}function G(a,b,c,d){var e=this._relativeTime[c];return y(e)?e(a,b,c,d):e.replace(/%d/i,a)}function H(a,b){var c=this._relativeTime[a>0?\"future\":\"past\"];return y(c)?c(b):c.replace(/%s/i,b)}function I(a,b){var c=a.toLowerCase();zd[c]=zd[c+\"s\"]=zd[b]=a}function J(a){return\"string\"==typeof a?zd[a]||zd[a.toLowerCase()]:void 0}function K(a){var b,c,d={};for(c in a)h(a,c)&&(b=J(c),b&&(d[b]=a[c]));return d}function L(a,b){Ad[a]=b}function M(a){var b=[];for(var c in a)b.push({unit:c,priority:Ad[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function N(b,c){return function(d){return null!=d?(P(this,b,d),a.updateOffset(this,c),this):O(this,b)}}function O(a,b){return a.isValid()?a._d[\"get\"+(a._isUTC?\"UTC\":\"\")+b]():NaN}function P(a,b,c){a.isValid()&&a._d[\"set\"+(a._isUTC?\"UTC\":\"\")+b](c)}\r\n// MOMENTS\r\nfunction Q(a){return a=J(a),y(this[a])?this[a]():this}function R(a,b){if(\"object\"==typeof a){a=K(a);for(var c=M(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=J(a),y(this[a]))return this[a](b);return this}function S(a,b,c){var d=\"\"+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?\"+\":\"\":\"-\")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}\r\n// token:    'M'\r\n// padded:   ['MM', 2]\r\n// ordinal:  'Mo'\r\n// callback: function () { this.month() + 1 }\r\nfunction T(a,b,c,d){var e=d;\"string\"==typeof d&&(e=function(){return this[d]()}),a&&(Ed[a]=e),b&&(Ed[b[0]]=function(){return S(e.apply(this,arguments),b[1],b[2])}),c&&(Ed[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function U(a){return a.match(/\\[[\\s\\S]/)?a.replace(/^\\[|\\]$/g,\"\"):a.replace(/\\\\/g,\"\")}function V(a){var b,c,d=a.match(Bd);for(b=0,c=d.length;c>b;b++)Ed[d[b]]?d[b]=Ed[d[b]]:d[b]=U(d[b]);return function(b){var e,f=\"\";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}\r\n// format date using native date object\r\nfunction W(a,b){return a.isValid()?(b=X(b,a.localeData()),Dd[b]=Dd[b]||V(b),Dd[b](a)):a.localeData().invalidDate()}function X(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cd.lastIndex=0;d>=0&&Cd.test(a);)a=a.replace(Cd,c),Cd.lastIndex=0,d-=1;return a}function Y(a,b,c){Wd[a]=y(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return h(Wd,a)?Wd[a](b._strict,b._locale):new RegExp($(a))}\r\n// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\r\nfunction $(a){return _(a.replace(\"\\\\\",\"\").replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function _(a){return a.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")}function aa(a,b){var c,d=b;for(\"string\"==typeof a&&(a=[a]),\"number\"==typeof b&&(d=function(a,c){c[b]=t(a)}),c=0;c<a.length;c++)Xd[a[c]]=d}function ba(a,b){aa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ca(a,b,c){null!=b&&h(Xd,a)&&Xd[a](b,c._a,c,a)}function da(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ea(a,b){return c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||fe).test(b)?\"format\":\"standalone\"][a.month()]}function fa(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[fe.test(b)?\"format\":\"standalone\"][a.month()]}function ga(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(\r\n// this is not used\r\nthis._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=j([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,\"\").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,\"\").toLocaleLowerCase();return c?\"MMM\"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null):(e=sd.call(this._longMonthsParse,g),-1!==e?e:null):\"MMM\"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:(e=sd.call(this._longMonthsParse,g),-1!==e?e:null)):(e=sd.call(this._longMonthsParse,g),-1!==e?e:(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null))}function ha(a,b,c){var d,e,f;if(this._monthsParseExact)return ga.call(this,a,b,c);\r\n// TODO: add sorting\r\n// Sorting makes sure if one month (or abbr) is a prefix of another\r\n// see sorting in computeMonthsParse\r\nfor(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){\r\n// test the regex\r\nif(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp(\"^\"+this.months(e,\"\").replace(\".\",\"\")+\"$\",\"i\"),this._shortMonthsParse[d]=new RegExp(\"^\"+this.monthsShort(e,\"\").replace(\".\",\"\")+\"$\",\"i\")),c||this._monthsParse[d]||(f=\"^\"+this.months(e,\"\")+\"|^\"+this.monthsShort(e,\"\"),this._monthsParse[d]=new RegExp(f.replace(\".\",\"\"),\"i\")),c&&\"MMMM\"===b&&this._longMonthsParse[d].test(a))return d;if(c&&\"MMM\"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}\r\n// MOMENTS\r\nfunction ia(a,b){var c;if(!a.isValid())\r\n// No op\r\nreturn a;if(\"string\"==typeof b)if(/^\\d+$/.test(b))b=t(b);else\r\n// TODO: Another silent failure?\r\nif(b=a.localeData().monthsParse(b),\"number\"!=typeof b)return a;return c=Math.min(a.date(),da(a.year(),b)),a._d[\"set\"+(a._isUTC?\"UTC\":\"\")+\"Month\"](b,c),a}function ja(b){return null!=b?(ia(this,b),a.updateOffset(this,!0),this):O(this,\"Month\")}function ka(){return da(this.year(),this.month())}function la(a){return this._monthsParseExact?(h(this,\"_monthsRegex\")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,\"_monthsShortRegex\")||(this._monthsShortRegex=ie),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function ma(a){return this._monthsParseExact?(h(this,\"_monthsRegex\")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex):(h(this,\"_monthsRegex\")||(this._monthsRegex=je),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function na(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=j([2e3,b]),d.push(this.monthsShort(c,\"\")),e.push(this.months(c,\"\")),f.push(this.months(c,\"\")),f.push(this.monthsShort(c,\"\"));for(\r\n// Sorting makes sure if one month (or abbr) is a prefix of another it\r\n// will match the longer piece.\r\nd.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=_(d[b]),e[b]=_(e[b]);for(b=0;24>b;b++)f[b]=_(f[b]);this._monthsRegex=new RegExp(\"^(\"+f.join(\"|\")+\")\",\"i\"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(\"^(\"+e.join(\"|\")+\")\",\"i\"),this._monthsShortStrictRegex=new RegExp(\"^(\"+d.join(\"|\")+\")\",\"i\")}\r\n// HELPERS\r\nfunction oa(a){return pa(a)?366:365}function pa(a){return a%4===0&&a%100!==0||a%400===0}function qa(){return pa(this.year())}function ra(a,b,c,d,e,f,g){\r\n//can't just apply() to create a date:\r\n//http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\r\nvar h=new Date(a,b,c,d,e,f,g);\r\n//the date constructor remaps years 0-99 to 1900-1999\r\nreturn 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));\r\n//the Date.UTC function remaps years 0-99 to 1900-1999\r\nreturn 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}\r\n// start-of-first-week - start-of-year\r\nfunction ta(a,b,c){var// first-week day -- which january is always in the first week (4 for iso, 1 for other)\r\nd=7+b-c,\r\n// first-week day local weekday -- which local weekday is fwd\r\ne=(7+sa(a,0,d).getUTCDay()-b)%7;return-e+d-1}\r\n//http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\r\nfunction ua(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ta(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=oa(f)+j):j>oa(a)?(f=a+1,g=j-oa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function va(a,b,c){var d,e,f=ta(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+wa(e,b,c)):g>wa(a.year(),b,c)?(d=g-wa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function wa(a,b,c){var d=ta(a,b,c),e=ta(a+1,b,c);return(oa(a)-d+e)/7}\r\n// HELPERS\r\n// LOCALES\r\nfunction xa(a){return va(a,this._week.dow,this._week.doy).week}function ya(){return this._week.dow}function za(){return this._week.doy}\r\n// MOMENTS\r\nfunction Aa(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),\"d\")}function Ba(a){var b=va(this,1,4).week;return null==a?b:this.add(7*(a-b),\"d\")}\r\n// HELPERS\r\nfunction Ca(a,b){return\"string\"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),\"number\"==typeof a?a:null):parseInt(a,10)}function Da(a,b){return\"string\"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ea(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?\"format\":\"standalone\"][a.day()]}function Fa(a){return this._weekdaysShort[a.day()]}function Ga(a){return this._weekdaysMin[a.day()]}function Ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=j([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,\"\").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,\"\").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,\"\").toLocaleLowerCase();return c?\"dddd\"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:null):\"ddd\"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null):\"dddd\"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):\"ddd\"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ia(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ha.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){\r\n// test the regex\r\nif(e=j([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp(\"^\"+this.weekdays(e,\"\").replace(\".\",\".?\")+\"$\",\"i\"),this._shortWeekdaysParse[d]=new RegExp(\"^\"+this.weekdaysShort(e,\"\").replace(\".\",\".?\")+\"$\",\"i\"),this._minWeekdaysParse[d]=new RegExp(\"^\"+this.weekdaysMin(e,\"\").replace(\".\",\".?\")+\"$\",\"i\")),this._weekdaysParse[d]||(f=\"^\"+this.weekdays(e,\"\")+\"|^\"+this.weekdaysShort(e,\"\")+\"|^\"+this.weekdaysMin(e,\"\"),this._weekdaysParse[d]=new RegExp(f.replace(\".\",\"\"),\"i\")),c&&\"dddd\"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&\"ddd\"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&\"dd\"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}\r\n// MOMENTS\r\nfunction Ja(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ca(a,this.localeData()),this.add(a-b,\"d\")):b}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,\"d\")}function La(a){if(!this.isValid())return null!=a?this:NaN;\r\n// behaves the same as moment#day except\r\n// as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\r\n// as a setter, sunday should belong to the previous week.\r\nif(null!=a){var b=Da(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Ma(a){return this._weekdaysParseExact?(h(this,\"_weekdaysRegex\")||Pa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,\"_weekdaysRegex\")||(this._weekdaysRegex=pe),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Na(a){return this._weekdaysParseExact?(h(this,\"_weekdaysRegex\")||Pa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,\"_weekdaysShortRegex\")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oa(a){return this._weekdaysParseExact?(h(this,\"_weekdaysRegex\")||Pa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,\"_weekdaysMinRegex\")||(this._weekdaysMinRegex=re),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],k=[];for(b=0;7>b;b++)c=j([2e3,1]).day(b),d=this.weekdaysMin(c,\"\"),e=this.weekdaysShort(c,\"\"),f=this.weekdays(c,\"\"),g.push(d),h.push(e),i.push(f),k.push(d),k.push(e),k.push(f);for(\r\n// Sorting makes sure if one weekday (or abbr) is a prefix of another it\r\n// will match the longer piece.\r\ng.sort(a),h.sort(a),i.sort(a),k.sort(a),b=0;7>b;b++)h[b]=_(h[b]),i[b]=_(i[b]),k[b]=_(k[b]);this._weekdaysRegex=new RegExp(\"^(\"+k.join(\"|\")+\")\",\"i\"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(\"^(\"+i.join(\"|\")+\")\",\"i\"),this._weekdaysShortStrictRegex=new RegExp(\"^(\"+h.join(\"|\")+\")\",\"i\"),this._weekdaysMinStrictRegex=new RegExp(\"^(\"+g.join(\"|\")+\")\",\"i\")}\r\n// FORMATTING\r\nfunction Qa(){return this.hours()%12||12}function Ra(){return this.hours()||24}function Sa(a,b){T(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}\r\n// PARSING\r\nfunction Ta(a,b){return b._meridiemParse}\r\n// LOCALES\r\nfunction Ua(a){\r\n// IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\r\n// Using charAt should be more compatible.\r\nreturn\"p\"===(a+\"\").toLowerCase().charAt(0)}function Va(a,b,c){return a>11?c?\"pm\":\"PM\":c?\"am\":\"AM\"}function Wa(a){return a?a.toLowerCase().replace(\"_\",\"-\"):a}\r\n// pick the locale from the array\r\n// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\r\n// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\r\nfunction Xa(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Wa(a[f]).split(\"-\"),b=e.length,c=Wa(a[f+1]),c=c?c.split(\"-\"):null;b>0;){if(d=Ya(e.slice(0,b).join(\"-\")))return d;if(c&&c.length>=b&&u(e,c,!0)>=b-1)\r\n//the next array item is better than a shallower substring of this one\r\nbreak;b--}f++}return null}function Ya(a){var b=null;\r\n// TODO: Find a better way to register and load all the locales in Node\r\nif(!we[a]&&\"undefined\"!=typeof module&&module&&module.exports)try{b=se._abbr,require(\"./locale/\"+a),\r\n// because defineLocale currently also sets the global locale, we\r\n// want to undo that for lazy loaded locales\r\nZa(b)}catch(c){}return we[a]}\r\n// This function will load locale and then set the global locale.  If\r\n// no arguments are passed in, it will simply return the current global\r\n// locale key.\r\nfunction Za(a,b){var c;\r\n// moment.duration._locale = moment._locale = data;\r\nreturn a&&(c=o(b)?ab(a):$a(a,b),c&&(se=c)),se._abbr}function $a(a,b){if(null!==b){var c=ve;\r\n// treat as if there is no base config\r\n// backwards compat for now: also set the locale\r\nreturn b.abbr=a,null!=we[a]?(x(\"defineLocaleOverride\",\"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.\"),c=we[a]._config):null!=b.parentLocale&&(null!=we[b.parentLocale]?c=we[b.parentLocale]._config:x(\"parentLocaleUndefined\",\"specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/\")),we[a]=new B(A(c,b)),Za(a),we[a]}\r\n// useful for testing\r\nreturn delete we[a],null}function _a(a,b){if(null!=b){var c,d=ve;\r\n// MERGE\r\nnull!=we[a]&&(d=we[a]._config),b=A(d,b),c=new B(b),c.parentLocale=we[a],we[a]=c,\r\n// backwards compat for now: also set the locale\r\nZa(a)}else\r\n// pass null for config to unupdate, useful for tests\r\nnull!=we[a]&&(null!=we[a].parentLocale?we[a]=we[a].parentLocale:null!=we[a]&&delete we[a]);return we[a]}\r\n// returns locale data\r\nfunction ab(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return se;if(!c(a)){if(b=Ya(a))return b;a=[a]}return Xa(a)}function bb(){return rd(we)}function cb(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[Zd]<0||c[Zd]>11?Zd:c[$d]<1||c[$d]>da(c[Yd],c[Zd])?$d:c[_d]<0||c[_d]>24||24===c[_d]&&(0!==c[ae]||0!==c[be]||0!==c[ce])?_d:c[ae]<0||c[ae]>59?ae:c[be]<0||c[be]>59?be:c[ce]<0||c[ce]>999?ce:-1,l(a)._overflowDayOfYear&&(Yd>b||b>$d)&&(b=$d),l(a)._overflowWeeks&&-1===b&&(b=de),l(a)._overflowWeekday&&-1===b&&(b=ee),l(a).overflow=b),a}\r\n// date from iso format\r\nfunction db(a){var b,c,d,e,f,g,h=a._i,i=xe.exec(h)||ye.exec(h);if(i){for(l(a).iso=!0,b=0,c=Ae.length;c>b;b++)if(Ae[b][1].exec(i[1])){e=Ae[b][0],d=Ae[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Be.length;c>b;b++)if(Be[b][1].exec(i[3])){\r\n// match[2] should be 'T' or space\r\nf=(i[2]||\" \")+Be[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!ze.exec(i[4]))return void(a._isValid=!1);g=\"Z\"}a._f=e+(f||\"\")+(g||\"\"),jb(a)}else a._isValid=!1}\r\n// date from iso format or fallback\r\nfunction eb(b){var c=Ce.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(db(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}\r\n// Pick the first defined of two or three arguments.\r\nfunction fb(a,b,c){return null!=a?a:null!=b?b:c}function gb(b){\r\n// hooks is actually the exported moment object\r\nvar c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}\r\n// convert an array to a date.\r\n// the array should mirror the parameters below\r\n// note: all values past the year are optional and will default to the lowest possible value.\r\n// [year, month, day , hour, minute, second, millisecond]\r\nfunction hb(a){var b,c,d,e,f=[];if(!a._d){\r\n// Default to current date.\r\n// * if no year, month, day of month are given, default to today\r\n// * if day of month is given, default month and year\r\n// * if month is given, default only year\r\n// * if year is given, don't default anything\r\nfor(d=gb(a),a._w&&null==a._a[$d]&&null==a._a[Zd]&&ib(a),a._dayOfYear&&(e=fb(a._a[Yd],d[Yd]),a._dayOfYear>oa(e)&&(l(a)._overflowDayOfYear=!0),c=sa(e,0,a._dayOfYear),a._a[Zd]=c.getUTCMonth(),a._a[$d]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];\r\n// Zero out whatever was not defaulted, including time\r\nfor(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];\r\n// Check for 24:00:00.000\r\n24===a._a[_d]&&0===a._a[ae]&&0===a._a[be]&&0===a._a[ce]&&(a._nextDay=!0,a._a[_d]=0),a._d=(a._useUTC?sa:ra).apply(null,f),\r\n// Apply timezone offset from input. The actual utcOffset can be changed\r\n// with parseZone.\r\nnull!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[_d]=24)}}function ib(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=fb(b.GG,a._a[Yd],va(rb(),1,4).year),d=fb(b.W,1),e=fb(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=fb(b.gg,a._a[Yd],va(rb(),f,g).year),d=fb(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>wa(c,f,g)?l(a)._overflowWeeks=!0:null!=i?l(a)._overflowWeekday=!0:(h=ua(c,d,e,f,g),a._a[Yd]=h.year,a._dayOfYear=h.dayOfYear)}\r\n// date from string and format string\r\nfunction jb(b){\r\n// TODO: Move this to another part of the creation flow to prevent circular deps\r\nif(b._f===a.ISO_8601)return void db(b);b._a=[],l(b).empty=!0;\r\n// This array is used to make a Date, either with `new Date` or `Date.UTC`\r\nvar c,d,e,f,g,h=\"\"+b._i,i=h.length,j=0;for(e=X(b._f,b._locale).match(Bd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(Z(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Ed[f]?(d?l(b).empty=!1:l(b).unusedTokens.push(f),ca(f,d,b)):b._strict&&!d&&l(b).unusedTokens.push(f);\r\n// add remaining unparsed input length to the string\r\nl(b).charsLeftOver=i-j,h.length>0&&l(b).unusedInput.push(h),\r\n// clear _12h flag if hour is <= 12\r\nb._a[_d]<=12&&l(b).bigHour===!0&&b._a[_d]>0&&(l(b).bigHour=void 0),l(b).parsedDateParts=b._a.slice(0),l(b).meridiem=b._meridiem,\r\n// handle meridiem\r\nb._a[_d]=kb(b._locale,b._a[_d],b._meridiem),hb(b),cb(b)}function kb(a,b,c){var d;\r\n// Fallback\r\nreturn null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}\r\n// date from string and array of format strings\r\nfunction lb(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],jb(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function mb(a){if(!a._d){var b=K(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),hb(a)}}function nb(a){var b=new q(cb(ob(a)));\r\n// Adding is smart enough around DST\r\nreturn b._nextDay&&(b.add(1,\"d\"),b._nextDay=void 0),b}function ob(a){var b=a._i,d=a._f;return a._locale=a._locale||ab(a._l),null===b||void 0===d&&\"\"===b?n({nullInput:!0}):(\"string\"==typeof b&&(a._i=b=a._locale.preparse(b)),r(b)?new q(cb(b)):(c(d)?lb(a):f(b)?a._d=b:d?jb(a):pb(a),m(a)||(a._d=null),a))}function pb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):f(d)?b._d=new Date(d.valueOf()):\"string\"==typeof d?eb(b):c(d)?(b._a=g(d.slice(0),function(a){return parseInt(a,10)}),hb(b)):\"object\"==typeof d?mb(b):\"number\"==typeof d?\r\n// from milliseconds\r\nb._d=new Date(d):a.createFromInputFallback(b)}function qb(a,b,f,g,h){var i={};\r\n// object construction must be done this way.\r\n// https://github.com/moment/moment/issues/1423\r\nreturn\"boolean\"==typeof f&&(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,nb(i)}function rb(a,b,c,d){return qb(a,b,c,d,!1)}\r\n// Pick a moment m from moments so that m[fn](other) is true for all\r\n// other. This relies on the function fn to be transitive.\r\n//\r\n// moments should either be an array of moment objects or an array, whose\r\n// first element is an array of moment objects.\r\nfunction sb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return rb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}\r\n// TODO: Use [].sort instead?\r\nfunction tb(){var a=[].slice.call(arguments,0);return sb(\"isBefore\",a)}function ub(){var a=[].slice.call(arguments,0);return sb(\"isAfter\",a)}function vb(a){var b=K(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;\r\n// representation for dateAddRemove\r\nthis._milliseconds=+k+1e3*j+// 1000\r\n6e4*i+// 1000 * 60\r\n1e3*h*60*60,//using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\r\n// Because of dateAddRemove treats 24 hours as different from a\r\n// day when working around DST, we need to store them separately\r\nthis._days=+g+7*f,\r\n// It is impossible translate months into days without knowing\r\n// which months you are are talking about, so we have to store\r\n// it separately.\r\nthis._months=+e+3*d+12*c,this._data={},this._locale=ab(),this._bubble()}function wb(a){return a instanceof vb}\r\n// FORMATTING\r\nfunction xb(a,b){T(a,0,0,function(){var a=this.utcOffset(),c=\"+\";return 0>a&&(a=-a,c=\"-\"),c+S(~~(a/60),2)+b+S(~~a%60,2)})}function yb(a,b){var c=(b||\"\").match(a)||[],d=c[c.length-1]||[],e=(d+\"\").match(Ge)||[\"-\",0,0],f=+(60*e[1])+t(e[2]);return\"+\"===e[0]?f:-f}\r\n// Return a moment from input, that is local/utc/zone equivalent to model.\r\nfunction zb(b,c){var d,e;\r\n// Use low-level api, because this fn is low-level api.\r\nreturn c._isUTC?(d=c.clone(),e=(r(b)||f(b)?b.valueOf():rb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):rb(b).local()}function Ab(a){\r\n// On Firefox.24 Date#getTimezoneOffset returns a floating point.\r\n// https://github.com/moment/moment/pull/1871\r\nreturn 15*-Math.round(a._d.getTimezoneOffset()/15)}\r\n// MOMENTS\r\n// keepLocalTime = true means only change the timezone, without\r\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\r\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\r\n// +0200, so we adjust the time as needed, to be valid.\r\n//\r\n// Keeping the time actually adds/subtracts (one hour)\r\n// from the actual represented time. That is why we call updateOffset\r\n// a second time. In case it wants us to change the offset again\r\n// _changeInProgress == true case, then we have to adjust, because\r\n// there is no such time in the given timezone.\r\nfunction Bb(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?(\"string\"==typeof b?b=yb(Td,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ab(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,\"m\"),e!==b&&(!c||this._changeInProgress?Sb(this,Mb(b-e,\"m\"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ab(this):null!=b?this:NaN}function Cb(a,b){return null!=a?(\"string\"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Db(a){return this.utcOffset(0,a)}function Eb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ab(this),\"m\")),this}function Fb(){return this._tzm?this.utcOffset(this._tzm):\"string\"==typeof this._i&&this.utcOffset(yb(Sd,this._i)),this}function Gb(a){return this.isValid()?(a=a?rb(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Hb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ib(){if(!o(this._isDSTShifted))return this._isDSTShifted;var a={};if(p(a,this),a=ob(a),a._a){var b=a._isUTC?j(a._a):rb(a._a);this._isDSTShifted=this.isValid()&&u(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jb(){return this.isValid()?!this._isUTC:!1}function Kb(){return this.isValid()?this._isUTC:!1}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Mb(a,b){var c,d,e,f=a,\r\n// matching against regexp is expensive, do it on demand\r\ng=null;// checks for null or undefined\r\nreturn wb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:\"number\"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=He.exec(a))?(c=\"-\"===g[1]?-1:1,f={y:0,d:t(g[$d])*c,h:t(g[_d])*c,m:t(g[ae])*c,s:t(g[be])*c,ms:t(g[ce])*c}):(g=Ie.exec(a))?(c=\"-\"===g[1]?-1:1,f={y:Nb(g[2],c),M:Nb(g[3],c),w:Nb(g[4],c),d:Nb(g[5],c),h:Nb(g[6],c),m:Nb(g[7],c),s:Nb(g[8],c)}):null==f?f={}:\"object\"==typeof f&&(\"from\"in f||\"to\"in f)&&(e=Pb(rb(f.from),rb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new vb(f),wb(a)&&h(a,\"_locale\")&&(d._locale=a._locale),d}function Nb(a,b){\r\n// We'd normally use ~~inp for this, but unfortunately it also\r\n// converts floats to ints.\r\n// inp may be undefined, so careful calling replace on it.\r\nvar c=a&&parseFloat(a.replace(\",\",\".\"));\r\n// apply sign while we're at it\r\nreturn(isNaN(c)?0:c)*b}function Ob(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,\"M\").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,\"M\"),c}function Pb(a,b){var c;return a.isValid()&&b.isValid()?(b=zb(b,a),a.isBefore(b)?c=Ob(a,b):(c=Ob(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Qb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}\r\n// TODO: remove 'name' arg after deprecation is removed\r\nfunction Rb(a,b){return function(c,d){var e,f;\r\n//invert the arguments, but complain about it\r\nreturn null===d||isNaN(+d)||(x(b,\"moment().\"+b+\"(period, number) is deprecated. Please use moment().\"+b+\"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.\"),f=c,c=d,d=f),c=\"string\"==typeof c?+c:c,e=Mb(c,d),Sb(this,e,a),this}}function Sb(b,c,d,e){var f=c._milliseconds,g=Qb(c._days),h=Qb(c._months);b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&P(b,\"Date\",O(b,\"Date\")+g*d),h&&ia(b,O(b,\"Month\")+h*d),e&&a.updateOffset(b,g||h))}function Tb(a,b){var c=a.diff(b,\"days\",!0);return-6>c?\"sameElse\":-1>c?\"lastWeek\":0>c?\"lastDay\":1>c?\"sameDay\":2>c?\"nextDay\":7>c?\"nextWeek\":\"sameElse\"}function Ub(b,c){\r\n// We want to compare the start of today, vs this.\r\n// Getting start-of-today depends on whether we're local/utc/offset or not.\r\nvar d=b||rb(),e=zb(d,this).startOf(\"day\"),f=a.calendarFormat(this,e)||\"sameElse\",g=c&&(y(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,rb(d)))}function Vb(){return new q(this)}function Wb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?\"millisecond\":b),\"millisecond\"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function Xb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?\"millisecond\":b),\"millisecond\"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function Yb(a,b,c,d){return d=d||\"()\",(\"(\"===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(\")\"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function Zb(a,b){var c,d=r(a)?a:rb(a);return this.isValid()&&d.isValid()?(b=J(b||\"millisecond\"),\"millisecond\"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function $b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function _b(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function ac(a,b,c){var d,e,f,g;// 1000\r\n// 1000 * 60\r\n// 1000 * 60 * 60\r\n// 1000 * 60 * 60 * 24, negate dst\r\n// 1000 * 60 * 60 * 24 * 7, negate dst\r\nreturn this.isValid()?(d=zb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=J(b),\"year\"===b||\"month\"===b||\"quarter\"===b?(g=bc(this,d),\"quarter\"===b?g/=3:\"year\"===b&&(g/=12)):(f=this-d,g=\"second\"===b?f/1e3:\"minute\"===b?f/6e4:\"hour\"===b?f/36e5:\"day\"===b?(f-e)/864e5:\"week\"===b?(f-e)/6048e5:f),c?g:s(g)):NaN):NaN}function bc(a,b){\r\n// difference in months\r\nvar c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),\r\n// b is in (anchor - 1 month, anchor + 1 month)\r\nf=a.clone().add(e,\"months\");\r\n//check for negative zero, return zero if negative zero\r\n// linear across the month\r\n// linear across the month\r\nreturn 0>b-f?(c=a.clone().add(e-1,\"months\"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,\"months\"),d=(b-f)/(c-f)),-(e+d)||0}function cc(){return this.clone().locale(\"en\").format(\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\")}function dc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?y(Date.prototype.toISOString)?this.toDate().toISOString():W(a,\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\"):W(a,\"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]\")}function ec(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=W(this,b);return this.localeData().postformat(c)}function fc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Mb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function gc(a){return this.from(rb(),a)}function hc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Mb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.to(rb(),a)}\r\n// If passed a locale key, it will set the locale for this\r\n// instance.  Otherwise, it will return the locale configuration\r\n// variables for this instance.\r\nfunction jc(a){var b;return void 0===a?this._locale._abbr:(b=ab(a),null!=b&&(this._locale=b),this)}function kc(){return this._locale}function lc(a){\r\n// the following switch intentionally omits break keywords\r\n// to utilize falling through the cases.\r\nswitch(a=J(a)){case\"year\":this.month(0);/* falls through */\r\ncase\"quarter\":case\"month\":this.date(1);/* falls through */\r\ncase\"week\":case\"isoWeek\":case\"day\":case\"date\":this.hours(0);/* falls through */\r\ncase\"hour\":this.minutes(0);/* falls through */\r\ncase\"minute\":this.seconds(0);/* falls through */\r\ncase\"second\":this.milliseconds(0)}\r\n// weeks are a special case\r\n// quarters are also special\r\nreturn\"week\"===a&&this.weekday(0),\"isoWeek\"===a&&this.isoWeekday(1),\"quarter\"===a&&this.month(3*Math.floor(this.month()/3)),this}function mc(a){\r\n// 'date' is an alias for 'day', so it should be considered as such.\r\nreturn a=J(a),void 0===a||\"millisecond\"===a?this:(\"date\"===a&&(a=\"day\"),this.startOf(a).add(1,\"isoWeek\"===a?\"week\":a).subtract(1,\"ms\"))}function nc(){return this._d.valueOf()-6e4*(this._offset||0)}function oc(){return Math.floor(this.valueOf()/1e3)}function pc(){return new Date(this.valueOf())}function qc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function rc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function sc(){\r\n// new Date(NaN).toJSON() === null\r\nreturn this.isValid()?this.toISOString():null}function tc(){return m(this)}function uc(){return i({},l(this))}function vc(){return l(this).overflow}function wc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xc(a,b){T(0,[a,a.length],0,b)}\r\n// MOMENTS\r\nfunction yc(a){return Cc.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zc(a){return Cc.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Ac(){return wa(this.year(),1,4)}function Bc(){var a=this.localeData()._week;return wa(this.year(),a.dow,a.doy)}function Cc(a,b,c,d,e){var f;return null==a?va(this,d,e).year:(f=wa(a,d,e),b>f&&(b=f),Dc.call(this,a,b,c,d,e))}function Dc(a,b,c,d,e){var f=ua(a,b,c,d,e),g=sa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}\r\n// MOMENTS\r\nfunction Ec(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}\r\n// HELPERS\r\n// MOMENTS\r\nfunction Fc(a){var b=Math.round((this.clone().startOf(\"day\")-this.clone().startOf(\"year\"))/864e5)+1;return null==a?b:this.add(a-b,\"d\")}function Gc(a,b){b[ce]=t(1e3*(\"0.\"+a))}\r\n// MOMENTS\r\nfunction Hc(){return this._isUTC?\"UTC\":\"\"}function Ic(){return this._isUTC?\"Coordinated Universal Time\":\"\"}function Jc(a){return rb(1e3*a)}function Kc(){return rb.apply(null,arguments).parseZone()}function Lc(a){return a}function Mc(a,b,c,d){var e=ab(),f=j().set(d,b);return e[c](f,a)}function Nc(a,b,c){if(\"number\"==typeof a&&(b=a,a=void 0),a=a||\"\",null!=b)return Mc(a,b,c,\"month\");var d,e=[];for(d=0;12>d;d++)e[d]=Mc(a,d,c,\"month\");return e}\r\n// ()\r\n// (5)\r\n// (fmt, 5)\r\n// (fmt)\r\n// (true)\r\n// (true, 5)\r\n// (true, fmt, 5)\r\n// (true, fmt)\r\nfunction Oc(a,b,c,d){\"boolean\"==typeof a?(\"number\"==typeof b&&(c=b,b=void 0),b=b||\"\"):(b=a,c=b,a=!1,\"number\"==typeof b&&(c=b,b=void 0),b=b||\"\");var e=ab(),f=a?e._week.dow:0;if(null!=c)return Mc(b,(c+f)%7,d,\"day\");var g,h=[];for(g=0;7>g;g++)h[g]=Mc(b,(g+f)%7,d,\"day\");return h}function Pc(a,b){return Nc(a,b,\"months\")}function Qc(a,b){return Nc(a,b,\"monthsShort\")}function Rc(a,b,c){return Oc(a,b,c,\"weekdays\")}function Sc(a,b,c){return Oc(a,b,c,\"weekdaysShort\")}function Tc(a,b,c){return Oc(a,b,c,\"weekdaysMin\")}function Uc(){var a=this._data;return this._milliseconds=Ue(this._milliseconds),this._days=Ue(this._days),this._months=Ue(this._months),a.milliseconds=Ue(a.milliseconds),a.seconds=Ue(a.seconds),a.minutes=Ue(a.minutes),a.hours=Ue(a.hours),a.months=Ue(a.months),a.years=Ue(a.years),this}function Vc(a,b,c,d){var e=Mb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}\r\n// supports only 2.0-style add(1, 's') or add(duration)\r\nfunction Wc(a,b){return Vc(this,a,b,1)}\r\n// supports only 2.0-style subtract(1, 's') or subtract(duration)\r\nfunction Xc(a,b){return Vc(this,a,b,-1)}function Yc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Zc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;\r\n// if we have a mix of positive and negative values, bubble down first\r\n// check: https://github.com/moment/moment/issues/2166\r\n// The following code bubbles up values, see the tests for\r\n// examples of what that means.\r\n// convert days to months\r\n// 12 months -> 1 year\r\nreturn f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Yc(_c(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=s(f/1e3),i.seconds=a%60,b=s(a/60),i.minutes=b%60,c=s(b/60),i.hours=c%24,g+=s(c/24),e=s($c(g)),h+=e,g-=Yc(_c(e)),d=s(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function $c(a){\r\n// 400 years have 146097 days (taking into account leap year rules)\r\n// 400 years have 12 months === 4800\r\nreturn 4800*a/146097}function _c(a){\r\n// the reverse of daysToMonths\r\nreturn 146097*a/4800}function ad(a){var b,c,d=this._milliseconds;if(a=J(a),\"month\"===a||\"year\"===a)return b=this._days+d/864e5,c=this._months+$c(b),\"month\"===a?c:c/12;switch(b=this._days+Math.round(_c(this._months)),a){case\"week\":return b/7+d/6048e5;case\"day\":return b+d/864e5;case\"hour\":return 24*b+d/36e5;case\"minute\":return 1440*b+d/6e4;case\"second\":return 86400*b+d/1e3;\r\n// Math.floor prevents floating point math errors here\r\ncase\"millisecond\":return Math.floor(864e5*b)+d;default:throw new Error(\"Unknown unit \"+a)}}\r\n// TODO: Use this.as('ms')?\r\nfunction bd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)}function cd(a){return function(){return this.as(a)}}function dd(a){return a=J(a),this[a+\"s\"]()}function ed(a){return function(){return this._data[a]}}function fd(){return s(this.days()/7)}\r\n// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\r\nfunction gd(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function hd(a,b,c){var d=Mb(a).abs(),e=jf(d.as(\"s\")),f=jf(d.as(\"m\")),g=jf(d.as(\"h\")),h=jf(d.as(\"d\")),i=jf(d.as(\"M\")),j=jf(d.as(\"y\")),k=e<kf.s&&[\"s\",e]||1>=f&&[\"m\"]||f<kf.m&&[\"mm\",f]||1>=g&&[\"h\"]||g<kf.h&&[\"hh\",g]||1>=h&&[\"d\"]||h<kf.d&&[\"dd\",h]||1>=i&&[\"M\"]||i<kf.M&&[\"MM\",i]||1>=j&&[\"y\"]||[\"yy\",j];return k[2]=b,k[3]=+a>0,k[4]=c,gd.apply(null,k)}\r\n// This function allows you to set the rounding function for relative time strings\r\nfunction id(a){return void 0===a?jf:\"function\"==typeof a?(jf=a,!0):!1}\r\n// This function allows you to set a threshold for relative time strings\r\nfunction jd(a,b){return void 0===kf[a]?!1:void 0===b?kf[a]:(kf[a]=b,!0)}function kd(a){var b=this.localeData(),c=hd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function ld(){\r\n// for ISO strings we do not use the normal bubbling rules:\r\n//  * milliseconds bubble up until they become hours\r\n//  * days do not bubble at all\r\n//  * months bubble up until they become years\r\n// This is because there is no context-free conversion between hours and days\r\n// (think of clock changes)\r\n// and also not between days and months (28-31 days per month)\r\nvar a,b,c,d=lf(this._milliseconds)/1e3,e=lf(this._days),f=lf(this._months);a=s(d/60),b=s(a/60),d%=60,a%=60,c=s(f/12),f%=12;\r\n// inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\r\nvar g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?\"-\":\"\")+\"P\"+(g?g+\"Y\":\"\")+(h?h+\"M\":\"\")+(i?i+\"D\":\"\")+(j||k||l?\"T\":\"\")+(j?j+\"H\":\"\")+(k?k+\"M\":\"\")+(l?l+\"S\":\"\"):\"P0D\"}var md,nd;nd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};\r\n// Plugins that add properties should also add the key here (null value),\r\n// so we can properly clone ourselves.\r\nvar od=a.momentProperties=[],pd=!1,qd={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var rd;rd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var sd,td={sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},ud={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},vd=\"Invalid date\",wd=\"%d\",xd=/\\d{1,2}/,yd={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},zd={},Ad={},Bd=/(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cd=/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dd={},Ed={},Fd=/\\d/,Gd=/\\d\\d/,Hd=/\\d{3}/,Id=/\\d{4}/,Jd=/[+-]?\\d{6}/,Kd=/\\d\\d?/,Ld=/\\d\\d\\d\\d?/,Md=/\\d\\d\\d\\d\\d\\d?/,Nd=/\\d{1,3}/,Od=/\\d{1,4}/,Pd=/[+-]?\\d{1,6}/,Qd=/\\d+/,Rd=/[+-]?\\d+/,Sd=/Z|[+-]\\d\\d:?\\d\\d/gi,Td=/Z|[+-]\\d\\d(?::?\\d\\d)?/gi,Ud=/[+-]?\\d+(\\.\\d{1,3})?/,Vd=/[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i,Wd={},Xd={},Yd=0,Zd=1,$d=2,_d=3,ae=4,be=5,ce=6,de=7,ee=8;sd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){\r\n// I know\r\nvar b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},T(\"M\",[\"MM\",2],\"Mo\",function(){return this.month()+1}),T(\"MMM\",0,0,function(a){return this.localeData().monthsShort(this,a)}),T(\"MMMM\",0,0,function(a){return this.localeData().months(this,a)}),I(\"month\",\"M\"),L(\"month\",8),Y(\"M\",Kd),Y(\"MM\",Kd,Gd),Y(\"MMM\",function(a,b){return b.monthsShortRegex(a)}),Y(\"MMMM\",function(a,b){return b.monthsRegex(a)}),aa([\"M\",\"MM\"],function(a,b){b[Zd]=t(a)-1}),aa([\"MMM\",\"MMMM\"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Zd]=e:l(c).invalidMonth=a});\r\n// LOCALES\r\nvar fe=/D[oD]?(\\[[^\\[\\]]*\\]|\\s+)+MMMM?/,ge=\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),he=\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),ie=Vd,je=Vd;\r\n// FORMATTING\r\nT(\"Y\",0,0,function(){var a=this.year();return 9999>=a?\"\"+a:\"+\"+a}),T(0,[\"YY\",2],0,function(){return this.year()%100}),T(0,[\"YYYY\",4],0,\"year\"),T(0,[\"YYYYY\",5],0,\"year\"),T(0,[\"YYYYYY\",6,!0],0,\"year\"),\r\n// ALIASES\r\nI(\"year\",\"y\"),\r\n// PRIORITIES\r\nL(\"year\",1),\r\n// PARSING\r\nY(\"Y\",Rd),Y(\"YY\",Kd,Gd),Y(\"YYYY\",Od,Id),Y(\"YYYYY\",Pd,Jd),Y(\"YYYYYY\",Pd,Jd),aa([\"YYYYY\",\"YYYYYY\"],Yd),aa(\"YYYY\",function(b,c){c[Yd]=2===b.length?a.parseTwoDigitYear(b):t(b)}),aa(\"YY\",function(b,c){c[Yd]=a.parseTwoDigitYear(b)}),aa(\"Y\",function(a,b){b[Yd]=parseInt(a,10)}),\r\n// HOOKS\r\na.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)};\r\n// MOMENTS\r\nvar ke=N(\"FullYear\",!0);\r\n// FORMATTING\r\nT(\"w\",[\"ww\",2],\"wo\",\"week\"),T(\"W\",[\"WW\",2],\"Wo\",\"isoWeek\"),\r\n// ALIASES\r\nI(\"week\",\"w\"),I(\"isoWeek\",\"W\"),\r\n// PRIORITIES\r\nL(\"week\",5),L(\"isoWeek\",5),\r\n// PARSING\r\nY(\"w\",Kd),Y(\"ww\",Kd,Gd),Y(\"W\",Kd),Y(\"WW\",Kd,Gd),ba([\"w\",\"ww\",\"W\",\"WW\"],function(a,b,c,d){b[d.substr(0,1)]=t(a)});var le={dow:0,// Sunday is the first day of the week.\r\ndoy:6};\r\n// FORMATTING\r\nT(\"d\",0,\"do\",\"day\"),T(\"dd\",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),T(\"ddd\",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),T(\"dddd\",0,0,function(a){return this.localeData().weekdays(this,a)}),T(\"e\",0,0,\"weekday\"),T(\"E\",0,0,\"isoWeekday\"),\r\n// ALIASES\r\nI(\"day\",\"d\"),I(\"weekday\",\"e\"),I(\"isoWeekday\",\"E\"),\r\n// PRIORITY\r\nL(\"day\",11),L(\"weekday\",11),L(\"isoWeekday\",11),\r\n// PARSING\r\nY(\"d\",Kd),Y(\"e\",Kd),Y(\"E\",Kd),Y(\"dd\",function(a,b){return b.weekdaysMinRegex(a)}),Y(\"ddd\",function(a,b){return b.weekdaysShortRegex(a)}),Y(\"dddd\",function(a,b){return b.weekdaysRegex(a)}),ba([\"dd\",\"ddd\",\"dddd\"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);\r\n// if we didn't get a weekday name, mark the date as invalid\r\nnull!=e?b.d=e:l(c).invalidWeekday=a}),ba([\"d\",\"e\",\"E\"],function(a,b,c,d){b[d]=t(a)});\r\n// LOCALES\r\nvar me=\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),ne=\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),oe=\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),pe=Vd,qe=Vd,re=Vd;T(\"H\",[\"HH\",2],0,\"hour\"),T(\"h\",[\"hh\",2],0,Qa),T(\"k\",[\"kk\",2],0,Ra),T(\"hmm\",0,0,function(){return\"\"+Qa.apply(this)+S(this.minutes(),2)}),T(\"hmmss\",0,0,function(){return\"\"+Qa.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),T(\"Hmm\",0,0,function(){return\"\"+this.hours()+S(this.minutes(),2)}),T(\"Hmmss\",0,0,function(){return\"\"+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),Sa(\"a\",!0),Sa(\"A\",!1),\r\n// ALIASES\r\nI(\"hour\",\"h\"),\r\n// PRIORITY\r\nL(\"hour\",13),Y(\"a\",Ta),Y(\"A\",Ta),Y(\"H\",Kd),Y(\"h\",Kd),Y(\"HH\",Kd,Gd),Y(\"hh\",Kd,Gd),Y(\"hmm\",Ld),Y(\"hmmss\",Md),Y(\"Hmm\",Ld),Y(\"Hmmss\",Md),aa([\"H\",\"HH\"],_d),aa([\"a\",\"A\"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),aa([\"h\",\"hh\"],function(a,b,c){b[_d]=t(a),l(c).bigHour=!0}),aa(\"hmm\",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d)),l(c).bigHour=!0}),aa(\"hmmss\",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e)),l(c).bigHour=!0}),aa(\"Hmm\",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d))}),aa(\"Hmmss\",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e))});var se,te=/[ap]\\.?m?\\.?/i,ue=N(\"Hours\",!0),ve={calendar:td,longDateFormat:ud,invalidDate:vd,ordinal:wd,ordinalParse:xd,relativeTime:yd,months:ge,monthsShort:he,week:le,weekdays:me,weekdaysMin:oe,weekdaysShort:ne,meridiemParse:te},we={},xe=/^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?/,ye=/^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?/,ze=/Z|[+-]\\d\\d(?::?\\d\\d)?/,Ae=[[\"YYYYYY-MM-DD\",/[+-]\\d{6}-\\d\\d-\\d\\d/],[\"YYYY-MM-DD\",/\\d{4}-\\d\\d-\\d\\d/],[\"GGGG-[W]WW-E\",/\\d{4}-W\\d\\d-\\d/],[\"GGGG-[W]WW\",/\\d{4}-W\\d\\d/,!1],[\"YYYY-DDD\",/\\d{4}-\\d{3}/],[\"YYYY-MM\",/\\d{4}-\\d\\d/,!1],[\"YYYYYYMMDD\",/[+-]\\d{10}/],[\"YYYYMMDD\",/\\d{8}/],\r\n// YYYYMM is NOT allowed by the standard\r\n[\"GGGG[W]WWE\",/\\d{4}W\\d{3}/],[\"GGGG[W]WW\",/\\d{4}W\\d{2}/,!1],[\"YYYYDDD\",/\\d{7}/]],Be=[[\"HH:mm:ss.SSSS\",/\\d\\d:\\d\\d:\\d\\d\\.\\d+/],[\"HH:mm:ss,SSSS\",/\\d\\d:\\d\\d:\\d\\d,\\d+/],[\"HH:mm:ss\",/\\d\\d:\\d\\d:\\d\\d/],[\"HH:mm\",/\\d\\d:\\d\\d/],[\"HHmmss.SSSS\",/\\d\\d\\d\\d\\d\\d\\.\\d+/],[\"HHmmss,SSSS\",/\\d\\d\\d\\d\\d\\d,\\d+/],[\"HHmmss\",/\\d\\d\\d\\d\\d\\d/],[\"HHmm\",/\\d\\d\\d\\d/],[\"HH\",/\\d\\d/]],Ce=/^\\/?Date\\((\\-?\\d+)/i;a.createFromInputFallback=w(\"moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.\",function(a){a._d=new Date(a._i+(a._useUTC?\" UTC\":\"\"))}),\r\n// constant that refers to the ISO standard\r\na.ISO_8601=function(){};var De=w(\"moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:n()}),Ee=w(\"moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:n()}),Fe=function(){return Date.now?Date.now():+new Date};xb(\"Z\",\":\"),xb(\"ZZ\",\"\"),\r\n// PARSING\r\nY(\"Z\",Td),Y(\"ZZ\",Td),aa([\"Z\",\"ZZ\"],function(a,b,c){c._useUTC=!0,c._tzm=yb(Td,a)});\r\n// HELPERS\r\n// timezone chunker\r\n// '+10:00' > ['10',  '00']\r\n// '-1530'  > ['-15', '30']\r\nvar Ge=/([\\+\\-]|\\d\\d)/gi;\r\n// HOOKS\r\n// This function will be called whenever a moment is mutated.\r\n// It is intended to keep the offset in sync with the timezone.\r\na.updateOffset=function(){};\r\n// ASP.NET json date format regex\r\nvar He=/^(\\-)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?\\d*)?$/,Ie=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Mb.fn=vb.prototype;var Je=Rb(1,\"add\"),Ke=Rb(-1,\"subtract\");a.defaultFormat=\"YYYY-MM-DDTHH:mm:ssZ\",a.defaultFormatUtc=\"YYYY-MM-DDTHH:mm:ss[Z]\";var Le=w(\"moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.\",function(a){return void 0===a?this.localeData():this.locale(a)});\r\n// FORMATTING\r\nT(0,[\"gg\",2],0,function(){return this.weekYear()%100}),T(0,[\"GG\",2],0,function(){return this.isoWeekYear()%100}),xc(\"gggg\",\"weekYear\"),xc(\"ggggg\",\"weekYear\"),xc(\"GGGG\",\"isoWeekYear\"),xc(\"GGGGG\",\"isoWeekYear\"),\r\n// ALIASES\r\nI(\"weekYear\",\"gg\"),I(\"isoWeekYear\",\"GG\"),\r\n// PRIORITY\r\nL(\"weekYear\",1),L(\"isoWeekYear\",1),\r\n// PARSING\r\nY(\"G\",Rd),Y(\"g\",Rd),Y(\"GG\",Kd,Gd),Y(\"gg\",Kd,Gd),Y(\"GGGG\",Od,Id),Y(\"gggg\",Od,Id),Y(\"GGGGG\",Pd,Jd),Y(\"ggggg\",Pd,Jd),ba([\"gggg\",\"ggggg\",\"GGGG\",\"GGGGG\"],function(a,b,c,d){b[d.substr(0,2)]=t(a)}),ba([\"gg\",\"GG\"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),\r\n// FORMATTING\r\nT(\"Q\",0,\"Qo\",\"quarter\"),\r\n// ALIASES\r\nI(\"quarter\",\"Q\"),\r\n// PRIORITY\r\nL(\"quarter\",7),\r\n// PARSING\r\nY(\"Q\",Fd),aa(\"Q\",function(a,b){b[Zd]=3*(t(a)-1)}),\r\n// FORMATTING\r\nT(\"D\",[\"DD\",2],\"Do\",\"date\"),\r\n// ALIASES\r\nI(\"date\",\"D\"),\r\n// PRIOROITY\r\nL(\"date\",9),\r\n// PARSING\r\nY(\"D\",Kd),Y(\"DD\",Kd,Gd),Y(\"Do\",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),aa([\"D\",\"DD\"],$d),aa(\"Do\",function(a,b){b[$d]=t(a.match(Kd)[0],10)});\r\n// MOMENTS\r\nvar Me=N(\"Date\",!0);\r\n// FORMATTING\r\nT(\"DDD\",[\"DDDD\",3],\"DDDo\",\"dayOfYear\"),\r\n// ALIASES\r\nI(\"dayOfYear\",\"DDD\"),\r\n// PRIORITY\r\nL(\"dayOfYear\",4),\r\n// PARSING\r\nY(\"DDD\",Nd),Y(\"DDDD\",Hd),aa([\"DDD\",\"DDDD\"],function(a,b,c){c._dayOfYear=t(a)}),\r\n// FORMATTING\r\nT(\"m\",[\"mm\",2],0,\"minute\"),\r\n// ALIASES\r\nI(\"minute\",\"m\"),\r\n// PRIORITY\r\nL(\"minute\",14),\r\n// PARSING\r\nY(\"m\",Kd),Y(\"mm\",Kd,Gd),aa([\"m\",\"mm\"],ae);\r\n// MOMENTS\r\nvar Ne=N(\"Minutes\",!1);\r\n// FORMATTING\r\nT(\"s\",[\"ss\",2],0,\"second\"),\r\n// ALIASES\r\nI(\"second\",\"s\"),\r\n// PRIORITY\r\nL(\"second\",15),\r\n// PARSING\r\nY(\"s\",Kd),Y(\"ss\",Kd,Gd),aa([\"s\",\"ss\"],be);\r\n// MOMENTS\r\nvar Oe=N(\"Seconds\",!1);\r\n// FORMATTING\r\nT(\"S\",0,0,function(){return~~(this.millisecond()/100)}),T(0,[\"SS\",2],0,function(){return~~(this.millisecond()/10)}),T(0,[\"SSS\",3],0,\"millisecond\"),T(0,[\"SSSS\",4],0,function(){return 10*this.millisecond()}),T(0,[\"SSSSS\",5],0,function(){return 100*this.millisecond()}),T(0,[\"SSSSSS\",6],0,function(){return 1e3*this.millisecond()}),T(0,[\"SSSSSSS\",7],0,function(){return 1e4*this.millisecond()}),T(0,[\"SSSSSSSS\",8],0,function(){return 1e5*this.millisecond()}),T(0,[\"SSSSSSSSS\",9],0,function(){return 1e6*this.millisecond()}),\r\n// ALIASES\r\nI(\"millisecond\",\"ms\"),\r\n// PRIORITY\r\nL(\"millisecond\",16),\r\n// PARSING\r\nY(\"S\",Nd,Fd),Y(\"SS\",Nd,Gd),Y(\"SSS\",Nd,Hd);var Pe;for(Pe=\"SSSS\";Pe.length<=9;Pe+=\"S\")Y(Pe,Qd);for(Pe=\"S\";Pe.length<=9;Pe+=\"S\")aa(Pe,Gc);\r\n// MOMENTS\r\nvar Qe=N(\"Milliseconds\",!1);\r\n// FORMATTING\r\nT(\"z\",0,0,\"zoneAbbr\"),T(\"zz\",0,0,\"zoneName\");var Re=q.prototype;Re.add=Je,Re.calendar=Ub,Re.clone=Vb,Re.diff=ac,Re.endOf=mc,Re.format=ec,Re.from=fc,Re.fromNow=gc,Re.to=hc,Re.toNow=ic,Re.get=Q,Re.invalidAt=vc,Re.isAfter=Wb,Re.isBefore=Xb,Re.isBetween=Yb,Re.isSame=Zb,Re.isSameOrAfter=$b,Re.isSameOrBefore=_b,Re.isValid=tc,Re.lang=Le,Re.locale=jc,Re.localeData=kc,Re.max=Ee,Re.min=De,Re.parsingFlags=uc,Re.set=R,Re.startOf=lc,Re.subtract=Ke,Re.toArray=qc,Re.toObject=rc,Re.toDate=pc,Re.toISOString=dc,Re.toJSON=sc,Re.toString=cc,Re.unix=oc,Re.valueOf=nc,Re.creationData=wc,\r\n// Year\r\nRe.year=ke,Re.isLeapYear=qa,\r\n// Week Year\r\nRe.weekYear=yc,Re.isoWeekYear=zc,\r\n// Quarter\r\nRe.quarter=Re.quarters=Ec,\r\n// Month\r\nRe.month=ja,Re.daysInMonth=ka,\r\n// Week\r\nRe.week=Re.weeks=Aa,Re.isoWeek=Re.isoWeeks=Ba,Re.weeksInYear=Bc,Re.isoWeeksInYear=Ac,\r\n// Day\r\nRe.date=Me,Re.day=Re.days=Ja,Re.weekday=Ka,Re.isoWeekday=La,Re.dayOfYear=Fc,\r\n// Hour\r\nRe.hour=Re.hours=ue,\r\n// Minute\r\nRe.minute=Re.minutes=Ne,\r\n// Second\r\nRe.second=Re.seconds=Oe,\r\n// Millisecond\r\nRe.millisecond=Re.milliseconds=Qe,\r\n// Offset\r\nRe.utcOffset=Bb,Re.utc=Db,Re.local=Eb,Re.parseZone=Fb,Re.hasAlignedHourOffset=Gb,Re.isDST=Hb,Re.isLocal=Jb,Re.isUtcOffset=Kb,Re.isUtc=Lb,Re.isUTC=Lb,\r\n// Timezone\r\nRe.zoneAbbr=Hc,Re.zoneName=Ic,\r\n// Deprecations\r\nRe.dates=w(\"dates accessor is deprecated. Use date instead.\",Me),Re.months=w(\"months accessor is deprecated. Use month instead\",ja),Re.years=w(\"years accessor is deprecated. Use year instead\",ke),Re.zone=w(\"moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/\",Cb),Re.isDSTShifted=w(\"isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information\",Ib);var Se=Re,Te=B.prototype;Te.calendar=C,Te.longDateFormat=D,Te.invalidDate=E,Te.ordinal=F,Te.preparse=Lc,Te.postformat=Lc,Te.relativeTime=G,Te.pastFuture=H,Te.set=z,\r\n// Month\r\nTe.months=ea,Te.monthsShort=fa,Te.monthsParse=ha,Te.monthsRegex=ma,Te.monthsShortRegex=la,\r\n// Week\r\nTe.week=xa,Te.firstDayOfYear=za,Te.firstDayOfWeek=ya,\r\n// Day of Week\r\nTe.weekdays=Ea,Te.weekdaysMin=Ga,Te.weekdaysShort=Fa,Te.weekdaysParse=Ia,Te.weekdaysRegex=Ma,Te.weekdaysShortRegex=Na,Te.weekdaysMinRegex=Oa,\r\n// Hours\r\nTe.isPM=Ua,Te.meridiem=Va,Za(\"en\",{ordinalParse:/\\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===t(a%100/10)?\"th\":1===b?\"st\":2===b?\"nd\":3===b?\"rd\":\"th\";return a+c}}),\r\n// Side effect imports\r\na.lang=w(\"moment.lang is deprecated. Use moment.locale instead.\",Za),a.langData=w(\"moment.langData is deprecated. Use moment.localeData instead.\",ab);var Ue=Math.abs,Ve=cd(\"ms\"),We=cd(\"s\"),Xe=cd(\"m\"),Ye=cd(\"h\"),Ze=cd(\"d\"),$e=cd(\"w\"),_e=cd(\"M\"),af=cd(\"y\"),bf=ed(\"milliseconds\"),cf=ed(\"seconds\"),df=ed(\"minutes\"),ef=ed(\"hours\"),ff=ed(\"days\"),gf=ed(\"months\"),hf=ed(\"years\"),jf=Math.round,kf={s:45,// seconds to minute\r\nm:45,// minutes to hour\r\nh:22,// hours to day\r\nd:26,// days to month\r\nM:11},lf=Math.abs,mf=vb.prototype;mf.abs=Uc,mf.add=Wc,mf.subtract=Xc,mf.as=ad,mf.asMilliseconds=Ve,mf.asSeconds=We,mf.asMinutes=Xe,mf.asHours=Ye,mf.asDays=Ze,mf.asWeeks=$e,mf.asMonths=_e,mf.asYears=af,mf.valueOf=bd,mf._bubble=Zc,mf.get=dd,mf.milliseconds=bf,mf.seconds=cf,mf.minutes=df,mf.hours=ef,mf.days=ff,mf.weeks=fd,mf.months=gf,mf.years=hf,mf.humanize=kd,mf.toISOString=ld,mf.toString=ld,mf.toJSON=ld,mf.locale=jc,mf.localeData=kc,\r\n// Deprecations\r\nmf.toIsoString=w(\"toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)\",ld),mf.lang=Le,\r\n// Side effect imports\r\n// FORMATTING\r\nT(\"X\",0,0,\"unix\"),T(\"x\",0,0,\"valueOf\"),\r\n// PARSING\r\nY(\"x\",Rd),Y(\"X\",Ud),aa(\"X\",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),aa(\"x\",function(a,b,c){c._d=new Date(t(a))}),\r\n// Side effect imports\r\na.version=\"2.14.1\",b(rb),a.fn=Se,a.min=tb,a.max=ub,a.now=Fe,a.utc=j,a.unix=Jc,a.months=Pc,a.isDate=f,a.locale=Za,a.invalid=n,a.duration=Mb,a.isMoment=r,a.weekdays=Rc,a.parseZone=Kc,a.localeData=ab,a.isDuration=wb,a.monthsShort=Qc,a.weekdaysMin=Tc,a.defineLocale=$a,a.updateLocale=_a,a.locales=bb,a.weekdaysShort=Sc,a.normalizeUnits=J,a.relativeTimeRounding=id,a.relativeTimeThreshold=jd,a.calendarFormat=Tb,a.prototype=Se;var nf=a;return nf});","!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\",\"moment\"],e):\"object\"==typeof exports?module.exports=e(require(\"jquery\"),require(\"moment\")):e(jQuery,moment)}(function(e,a){!function(){!function(){var e={1:\"\",2:\"\",3:\"\",4:\"\",5:\"\",6:\"\",7:\"\",8:\"\",9:\"\",0:\"\"},t={\"\":\"1\",\"\":\"2\",\"\":\"3\",\"\":\"4\",\"\":\"5\",\"\":\"6\",\"\":\"7\",\"\":\"8\",\"\":\"9\",\"\":\"0\"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:[\"  \",\" \",[\"\",\"\"],\"%d \",\"%d \",\"%d \"],m:[\"  \",\" \",[\"\",\"\"],\"%d \",\"%d \",\"%d \"],h:[\"  \",\" \",[\"\",\"\"],\"%d \",\"%d \",\"%d \"],d:[\"  \",\" \",[\"\",\"\"],\"%d \",\"%d \",\"%d \"],M:[\"  \",\" \",[\"\",\"\"],\"%d \",\"%d \",\"%d \"],y:[\"  \",\" \",[\"\",\"\"],\"%d \",\"%d \",\"%d \"]},s=function(e){return function(a,t,s,d){var i=n(a),o=r[e][n(a)];return 2===i&&(o=o[t?0:1]),o.replace(/%d/i,a)}},d=[\"  \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\"  \",\"  \",\"  \"],i=a.defineLocale(\"ar\",{months:d,monthsShort:d,weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"D/M/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},meridiemParse:/|/,isPM:function(e){return\"\"===e},meridiem:function(e,a,t){return e<12?\"\":\"\"},calendar:{sameDay:\"[  ] LT\",nextDay:\"[  ] LT\",nextWeek:\"dddd [ ] LT\",lastDay:\"[  ] LT\",lastWeek:\"dddd [ ] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:s(\"s\"),m:s(\"m\"),mm:s(\"m\"),h:s(\"h\"),hh:s(\"h\"),d:s(\"d\"),dd:s(\"d\"),M:s(\"M\"),MM:s(\"M\"),y:s(\"y\"),yy:s(\"y\")},preparse:function(e){return e.replace(/\\u200f/g,\"\").replace(/[]/g,function(e){return t[e]}).replace(//g,\",\")},postformat:function(a){return a.replace(/\\d/g,function(a){return e[a]}).replace(/,/g,\"\")},week:{dow:6,doy:12}});return i}(),e.fullCalendar.datepickerLocale(\"ar\",\"ar\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ar\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:\"\",noEventsMessage:\"  \"})}(),function(){!function(){var e=a.defineLocale(\"ar-ma\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[  ] LT\",nextDay:\"[  ] LT\",nextWeek:\"dddd [ ] LT\",lastDay:\"[  ] LT\",lastWeek:\"dddd [ ] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\"\",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",d:\"\",dd:\"%d \",M:\"\",MM:\"%d \",y:\"\",yy:\"%d \"},week:{dow:6,doy:12}});return e}(),e.fullCalendar.datepickerLocale(\"ar-ma\",\"ar\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ar-ma\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:\"\",noEventsMessage:\"  \"})}(),function(){!function(){var e={1:\"\",2:\"\",3:\"\",4:\"\",5:\"\",6:\"\",7:\"\",8:\"\",9:\"\",0:\"\"},t={\"\":\"1\",\"\":\"2\",\"\":\"3\",\"\":\"4\",\"\":\"5\",\"\":\"6\",\"\":\"7\",\"\":\"8\",\"\":\"9\",\"\":\"0\"},n=a.defineLocale(\"ar-sa\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},meridiemParse:/|/,isPM:function(e){return\"\"===e},meridiem:function(e,a,t){return e<12?\"\":\"\"},calendar:{sameDay:\"[  ] LT\",nextDay:\"[  ] LT\",nextWeek:\"dddd [ ] LT\",lastDay:\"[  ] LT\",lastWeek:\"dddd [ ] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\"\",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",d:\"\",dd:\"%d \",M:\"\",MM:\"%d \",y:\"\",yy:\"%d \"},preparse:function(e){return e.replace(/[]/g,function(e){return t[e]}).replace(//g,\",\")},postformat:function(a){return a.replace(/\\d/g,function(a){return e[a]}).replace(/,/g,\"\")},week:{dow:6,doy:12}});return n}(),e.fullCalendar.datepickerLocale(\"ar-sa\",\"ar\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ar-sa\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:\"\",noEventsMessage:\"  \"})}(),function(){!function(){var e=a.defineLocale(\"ar-tn\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[  ] LT\",nextDay:\"[  ] LT\",nextWeek:\"dddd [ ] LT\",lastDay:\"[  ] LT\",lastWeek:\"dddd [ ] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\"\",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",d:\"\",dd:\"%d \",M:\"\",MM:\"%d \",y:\"\",yy:\"%d \"},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"ar-tn\",\"ar\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ar-tn\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:\"\",noEventsMessage:\"  \"})}(),function(){!function(){var e=a.defineLocale(\"bg\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"D.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY H:mm\",LLLL:\"dddd, D MMMM YYYY H:mm\"},calendar:{sameDay:\"[ ] LT\",nextDay:\"[ ] LT\",nextWeek:\"dddd [] LT\",lastDay:\"[ ] LT\",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return\"[ ] dddd [] LT\";case 1:case 2:case 4:case 5:return\"[ ] dddd [] LT\"}},sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",d:\"\",dd:\"%d \",M:\"\",MM:\"%d \",y:\"\",yy:\"%d \"},ordinalParse:/\\d{1,2}-(|||||)/,ordinal:function(e){var a=e%10,t=e%100;return 0===e?e+\"-\":0===t?e+\"-\":t>10&&t<20?e+\"-\":1===a?e+\"-\":2===a?e+\"-\":7===a||8===a?e+\"-\":e+\"-\"},week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"bg\",\"bg\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",nextBigText:\"&#x3E;&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"Wk\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"bg\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:function(e){return\"+ \"+e},noEventsMessage:\"   \"})}(),function(){!function(){var e=a.defineLocale(\"ca\",{months:\"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre\".split(\"_\"),monthsShort:\"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.\".split(\"_\"),monthsParseExact:!0,weekdays:\"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte\".split(\"_\"),weekdaysShort:\"dg._dl._dt._dc._dj._dv._ds.\".split(\"_\"),weekdaysMin:\"Dg_Dl_Dt_Dc_Dj_Dv_Ds\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY H:mm\",LLLL:\"dddd D MMMM YYYY H:mm\"},calendar:{sameDay:function(){return\"[avui a \"+(1!==this.hours()?\"les\":\"la\")+\"] LT\"},nextDay:function(){return\"[dem a \"+(1!==this.hours()?\"les\":\"la\")+\"] LT\"},nextWeek:function(){return\"dddd [a \"+(1!==this.hours()?\"les\":\"la\")+\"] LT\"},lastDay:function(){return\"[ahir a \"+(1!==this.hours()?\"les\":\"la\")+\"] LT\"},lastWeek:function(){return\"[el] dddd [passat a \"+(1!==this.hours()?\"les\":\"la\")+\"] LT\"},sameElse:\"L\"},relativeTime:{future:\"en %s\",past:\"fa %s\",s:\"uns segons\",m:\"un minut\",mm:\"%d minuts\",h:\"una hora\",hh:\"%d hores\",d:\"un dia\",dd:\"%d dies\",M:\"un mes\",MM:\"%d mesos\",y:\"un any\",yy:\"%d anys\"},ordinalParse:/\\d{1,2}(r|n|t||a)/,ordinal:function(e,a){var t=1===e?\"r\":2===e?\"n\":3===e?\"r\":4===e?\"t\":\"\";return\"w\"!==a&&\"W\"!==a||(t=\"a\"),e+t},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"ca\",\"ca\",{closeText:\"Tanca\",prevText:\"Anterior\",nextText:\"Segent\",currentText:\"Avui\",monthNames:[\"gener\",\"febrer\",\"mar\",\"abril\",\"maig\",\"juny\",\"juliol\",\"agost\",\"setembre\",\"octubre\",\"novembre\",\"desembre\"],monthNamesShort:[\"gen\",\"feb\",\"mar\",\"abr\",\"maig\",\"juny\",\"jul\",\"ag\",\"set\",\"oct\",\"nov\",\"des\"],dayNames:[\"diumenge\",\"dilluns\",\"dimarts\",\"dimecres\",\"dijous\",\"divendres\",\"dissabte\"],dayNamesShort:[\"dg\",\"dl\",\"dt\",\"dc\",\"dj\",\"dv\",\"ds\"],dayNamesMin:[\"dg\",\"dl\",\"dt\",\"dc\",\"dj\",\"dv\",\"ds\"],weekHeader:\"Set\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ca\",{buttonText:{month:\"Mes\",week:\"Setmana\",day:\"Dia\",list:\"Agenda\"},allDayText:\"Tot el dia\",eventLimitText:\"ms\",noEventsMessage:\"No hi ha esdeveniments per mostrar\"})}(),function(){!function(){function e(e){return e>1&&e<5&&1!==~~(e/10)}function t(a,t,n,r){var s=a+\" \";switch(n){case\"s\":return t||r?\"pr sekund\":\"pr sekundami\";case\"m\":return t?\"minuta\":r?\"minutu\":\"minutou\";case\"mm\":return t||r?s+(e(a)?\"minuty\":\"minut\"):s+\"minutami\";case\"h\":return t?\"hodina\":r?\"hodinu\":\"hodinou\";case\"hh\":return t||r?s+(e(a)?\"hodiny\":\"hodin\"):s+\"hodinami\";case\"d\":return t||r?\"den\":\"dnem\";case\"dd\":return t||r?s+(e(a)?\"dny\":\"dn\"):s+\"dny\";case\"M\":return t||r?\"msc\":\"mscem\";case\"MM\":return t||r?s+(e(a)?\"msce\":\"msc\"):s+\"msci\";case\"y\":return t||r?\"rok\":\"rokem\";case\"yy\":return t||r?s+(e(a)?\"roky\":\"let\"):s+\"lety\"}}var n=\"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec\".split(\"_\"),r=\"led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro\".split(\"_\"),s=a.defineLocale(\"cs\",{months:n,monthsShort:r,monthsParse:function(e,a){var t,n=[];for(t=0;t<12;t++)n[t]=new RegExp(\"^\"+e[t]+\"$|^\"+a[t]+\"$\",\"i\");return n}(n,r),shortMonthsParse:function(e){var a,t=[];for(a=0;a<12;a++)t[a]=new RegExp(\"^\"+e[a]+\"$\",\"i\");return t}(r),longMonthsParse:function(e){var a,t=[];for(a=0;a<12;a++)t[a]=new RegExp(\"^\"+e[a]+\"$\",\"i\");return t}(n),weekdays:\"nedle_pondl_ter_steda_tvrtek_ptek_sobota\".split(\"_\"),weekdaysShort:\"ne_po_t_st_t_p_so\".split(\"_\"),weekdaysMin:\"ne_po_t_st_t_p_so\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd D. MMMM YYYY H:mm\",l:\"D. M. YYYY\"},calendar:{sameDay:\"[dnes v] LT\",nextDay:\"[ztra v] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[v nedli v] LT\";case 1:case 2:return\"[v] dddd [v] LT\";case 3:return\"[ve stedu v] LT\";case 4:return\"[ve tvrtek v] LT\";case 5:return\"[v ptek v] LT\";case 6:return\"[v sobotu v] LT\"}},lastDay:\"[vera v] LT\",lastWeek:function(){switch(this.day()){case 0:return\"[minulou nedli v] LT\";case 1:case 2:return\"[minul] dddd [v] LT\";case 3:return\"[minulou stedu v] LT\";case 4:case 5:return\"[minul] dddd [v] LT\";case 6:return\"[minulou sobotu v] LT\"}},sameElse:\"L\"},relativeTime:{future:\"za %s\",past:\"ped %s\",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return s}(),e.fullCalendar.datepickerLocale(\"cs\",\"cs\",{closeText:\"Zavt\",prevText:\"&#x3C;Dve\",nextText:\"Pozdji&#x3E;\",currentText:\"Nyn\",monthNames:[\"leden\",\"nor\",\"bezen\",\"duben\",\"kvten\",\"erven\",\"ervenec\",\"srpen\",\"z\",\"jen\",\"listopad\",\"prosinec\"],monthNamesShort:[\"led\",\"no\",\"be\",\"dub\",\"kv\",\"er\",\"vc\",\"srp\",\"z\",\"j\",\"lis\",\"pro\"],dayNames:[\"nedle\",\"pondl\",\"ter\",\"steda\",\"tvrtek\",\"ptek\",\"sobota\"],dayNamesShort:[\"ne\",\"po\",\"t\",\"st\",\"t\",\"p\",\"so\"],dayNamesMin:[\"ne\",\"po\",\"t\",\"st\",\"t\",\"p\",\"so\"],weekHeader:\"Td\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"cs\",{buttonText:{month:\"Msc\",week:\"Tden\",day:\"Den\",list:\"Agenda\"},allDayText:\"Cel den\",eventLimitText:function(e){return\"+dal: \"+e},noEventsMessage:\"dn akce k zobrazen\"})}(),function(){!function(){var e=a.defineLocale(\"da\",{months:\"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec\".split(\"_\"),weekdays:\"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag\".split(\"_\"),weekdaysShort:\"sn_man_tir_ons_tor_fre_lr\".split(\"_\"),weekdaysMin:\"s_ma_ti_on_to_fr_l\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd [d.] D. MMMM YYYY HH:mm\"},calendar:{sameDay:\"[I dag kl.] LT\",nextDay:\"[I morgen kl.] LT\",nextWeek:\"dddd [kl.] LT\",lastDay:\"[I gr kl.] LT\",lastWeek:\"[sidste] dddd [kl] LT\",sameElse:\"L\"},relativeTime:{future:\"om %s\",past:\"%s siden\",s:\"f sekunder\",m:\"et minut\",mm:\"%d minutter\",h:\"en time\",hh:\"%d timer\",d:\"en dag\",dd:\"%d dage\",M:\"en mned\",MM:\"%d mneder\",y:\"et r\",yy:\"%d r\"},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"da\",\"da\",{closeText:\"Luk\",prevText:\"&#x3C;Forrige\",nextText:\"Nste&#x3E;\",currentText:\"Idag\",monthNames:[\"Januar\",\"Februar\",\"Marts\",\"April\",\"Maj\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],dayNames:[\"Sndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lrdag\"],dayNamesShort:[\"Sn\",\"Man\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lr\"],dayNamesMin:[\"S\",\"Ma\",\"Ti\",\"On\",\"To\",\"Fr\",\"L\"],weekHeader:\"Uge\",dateFormat:\"dd-mm-yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"da\",{buttonText:{month:\"Mned\",week:\"Uge\",day:\"Dag\",list:\"Agenda\"},allDayText:\"Hele dagen\",eventLimitText:\"flere\",noEventsMessage:\"Ingen arrangementer at vise\"})}(),function(){!function(){function e(e,a,t,n){var r={m:[\"eine Minute\",\"einer Minute\"],h:[\"eine Stunde\",\"einer Stunde\"],d:[\"ein Tag\",\"einem Tag\"],dd:[e+\" Tage\",e+\" Tagen\"],M:[\"ein Monat\",\"einem Monat\"],MM:[e+\" Monate\",e+\" Monaten\"],y:[\"ein Jahr\",\"einem Jahr\"],yy:[e+\" Jahre\",e+\" Jahren\"]};return a?r[t][0]:r[t][1]}var t=a.defineLocale(\"de\",{months:\"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),monthsShort:\"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.\".split(\"_\"),monthsParseExact:!0,weekdays:\"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag\".split(\"_\"),weekdaysShort:\"So._Mo._Di._Mi._Do._Fr._Sa.\".split(\"_\"),weekdaysMin:\"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd, D. MMMM YYYY HH:mm\"},calendar:{sameDay:\"[heute um] LT [Uhr]\",sameElse:\"L\",nextDay:\"[morgen um] LT [Uhr]\",nextWeek:\"dddd [um] LT [Uhr]\",lastDay:\"[gestern um] LT [Uhr]\",lastWeek:\"[letzten] dddd [um] LT [Uhr]\"},relativeTime:{future:\"in %s\",past:\"vor %s\",s:\"ein paar Sekunden\",m:e,mm:\"%d Minuten\",h:e,hh:\"%d Stunden\",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return t}(),e.fullCalendar.datepickerLocale(\"de\",\"de\",{closeText:\"Schlieen\",prevText:\"&#x3C;Zurck\",nextText:\"Vor&#x3E;\",currentText:\"Heute\",monthNames:[\"Januar\",\"Februar\",\"Mrz\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mr\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\"],dayNames:[\"Sonntag\",\"Montag\",\"Dienstag\",\"Mittwoch\",\"Donnerstag\",\"Freitag\",\"Samstag\"],dayNamesShort:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"],dayNamesMin:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"],weekHeader:\"KW\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"de\",{buttonText:{month:\"Monat\",week:\"Woche\",day:\"Tag\",list:\"Terminbersicht\"},allDayText:\"Ganztgig\",eventLimitText:function(e){return\"+ weitere \"+e},noEventsMessage:\"Keine Ereignisse anzuzeigen\"})}(),function(){!function(){function e(e,a,t,n){var r={m:[\"eine Minute\",\"einer Minute\"],h:[\"eine Stunde\",\"einer Stunde\"],d:[\"ein Tag\",\"einem Tag\"],dd:[e+\" Tage\",e+\" Tagen\"],M:[\"ein Monat\",\"einem Monat\"],MM:[e+\" Monate\",e+\" Monaten\"],y:[\"ein Jahr\",\"einem Jahr\"],yy:[e+\" Jahre\",e+\" Jahren\"]};return a?r[t][0]:r[t][1]}var t=a.defineLocale(\"de-at\",{months:\"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),monthsShort:\"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.\".split(\"_\"),monthsParseExact:!0,weekdays:\"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag\".split(\"_\"),weekdaysShort:\"So._Mo._Di._Mi._Do._Fr._Sa.\".split(\"_\"),weekdaysMin:\"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd, D. MMMM YYYY HH:mm\"},calendar:{sameDay:\"[heute um] LT [Uhr]\",sameElse:\"L\",nextDay:\"[morgen um] LT [Uhr]\",nextWeek:\"dddd [um] LT [Uhr]\",lastDay:\"[gestern um] LT [Uhr]\",lastWeek:\"[letzten] dddd [um] LT [Uhr]\"},relativeTime:{future:\"in %s\",past:\"vor %s\",s:\"ein paar Sekunden\",m:e,mm:\"%d Minuten\",h:e,hh:\"%d Stunden\",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return t}(),e.fullCalendar.datepickerLocale(\"de-at\",\"de\",{closeText:\"Schlieen\",prevText:\"&#x3C;Zurck\",nextText:\"Vor&#x3E;\",currentText:\"Heute\",monthNames:[\"Januar\",\"Februar\",\"Mrz\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mr\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\"],dayNames:[\"Sonntag\",\"Montag\",\"Dienstag\",\"Mittwoch\",\"Donnerstag\",\"Freitag\",\"Samstag\"],dayNamesShort:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"],dayNamesMin:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"],weekHeader:\"KW\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"de-at\",{buttonText:{month:\"Monat\",week:\"Woche\",day:\"Tag\",list:\"Terminbersicht\"},allDayText:\"Ganztgig\",eventLimitText:function(e){return\"+ weitere \"+e},noEventsMessage:\"Keine Ereignisse anzuzeigen\"})}(),function(){!function(){function e(e){return e instanceof Function||\"[object Function]\"===Object.prototype.toString.call(e)}var t=a.defineLocale(\"el\",{monthsNominativeEl:\"___________\".split(\"_\"),monthsGenitiveEl:\"___________\".split(\"_\"),months:function(e,a){return/D/.test(a.substring(0,a.indexOf(\"MMMM\")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),meridiem:function(e,a,t){return e>11?t?\"\":\"\":t?\"\":\"\"},isPM:function(e){return\"\"===(e+\"\").toLowerCase()[0]},meridiemParse:/[]\\.??\\.?/i,longDateFormat:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY h:mm A\",LLLL:\"dddd, D MMMM YYYY h:mm A\"},calendarEl:{sameDay:\"[ {}] LT\",nextDay:\"[ {}] LT\",nextWeek:\"dddd [{}] LT\",lastDay:\"[ {}] LT\",lastWeek:function(){switch(this.day()){case 6:return\"[ ] dddd [{}] LT\";default:return\"[ ] dddd [{}] LT\"}},sameElse:\"L\"},calendar:function(a,t){var n=this._calendarEl[a],r=t&&t.hours();return e(n)&&(n=n.apply(t)),n.replace(\"{}\",r%12===1?\"\":\"\")},relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:1,doy:4}});return t}(),e.fullCalendar.datepickerLocale(\"el\",\"el\",{closeText:\"\",prevText:\"\",nextText:\"\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"el\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\"\",eventLimitText:\"\",noEventsMessage:\"     \"})}(),function(){!function(){var e=a.defineLocale(\"en-au\",{months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),longDateFormat:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY h:mm A\",LLLL:\"dddd, D MMMM YYYY h:mm A\"},calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},ordinalParse:/\\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10,t=1===~~(e%100/10)?\"th\":1===a?\"st\":2===a?\"nd\":3===a?\"rd\":\"th\";return e+t},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"en-au\",\"en-AU\",{closeText:\"Done\",prevText:\"Prev\",nextText:\"Next\",currentText:\"Today\",monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],dayNamesShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],dayNamesMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],weekHeader:\"Wk\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"en-au\")}(),function(){!function(){var e=a.defineLocale(\"en-ca\",{months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),longDateFormat:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"YYYY-MM-DD\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},ordinalParse:/\\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10,t=1===~~(e%100/10)?\"th\":1===a?\"st\":2===a?\"nd\":3===a?\"rd\":\"th\";return e+t}});return e}(),e.fullCalendar.locale(\"en-ca\")}(),function(){!function(){var e=a.defineLocale(\"en-gb\",{months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},ordinalParse:/\\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10,t=1===~~(e%100/10)?\"th\":1===a?\"st\":2===a?\"nd\":3===a?\"rd\":\"th\";return e+t},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"en-gb\",\"en-GB\",{closeText:\"Done\",prevText:\"Prev\",nextText:\"Next\",currentText:\"Today\",monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],dayNamesShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],dayNamesMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],weekHeader:\"Wk\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"en-gb\")}(),function(){!function(){var e=a.defineLocale(\"en-ie\",{months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD-MM-YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},ordinalParse:/\\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10,t=1===~~(e%100/10)?\"th\":1===a?\"st\":2===a?\"nd\":3===a?\"rd\":\"th\";return e+t},week:{dow:1,doy:4}});return e}(),e.fullCalendar.locale(\"en-ie\")}(),function(){!function(){var e=a.defineLocale(\"en-nz\",{months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),longDateFormat:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY h:mm A\",LLLL:\"dddd, D MMMM YYYY h:mm A\"},calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},ordinalParse:/\\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10,t=1===~~(e%100/10)?\"th\":1===a?\"st\":2===a?\"nd\":3===a?\"rd\":\"th\";return e+t},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"en-nz\",\"en-NZ\",{closeText:\"Done\",prevText:\"Prev\",nextText:\"Next\",currentText:\"Today\",monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],dayNamesShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],dayNamesMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],weekHeader:\"Wk\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"en-nz\")}(),function(){!function(){var e=\"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.\".split(\"_\"),t=\"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\"),n=a.defineLocale(\"es\",{\r\nmonths:\"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre\".split(\"_\"),monthsShort:function(a,n){return/-MMM-/.test(n)?t[a.month()]:e[a.month()]},monthsParseExact:!0,weekdays:\"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),weekdaysShort:\"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),weekdaysMin:\"do_lu_ma_mi_ju_vi_s\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY H:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY H:mm\"},calendar:{sameDay:function(){return\"[hoy a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},nextDay:function(){return\"[maana a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},nextWeek:function(){return\"dddd [a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},lastDay:function(){return\"[ayer a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},lastWeek:function(){return\"[el] dddd [pasado a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},sameElse:\"L\"},relativeTime:{future:\"en %s\",past:\"hace %s\",s:\"unos segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"una hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ao\",yy:\"%d aos\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:1,doy:4}});return n}(),e.fullCalendar.datepickerLocale(\"es\",\"es\",{closeText:\"Cerrar\",prevText:\"&#x3C;Ant\",nextText:\"Sig&#x3E;\",currentText:\"Hoy\",monthNames:[\"enero\",\"febrero\",\"marzo\",\"abril\",\"mayo\",\"junio\",\"julio\",\"agosto\",\"septiembre\",\"octubre\",\"noviembre\",\"diciembre\"],monthNamesShort:[\"ene\",\"feb\",\"mar\",\"abr\",\"may\",\"jun\",\"jul\",\"ago\",\"sep\",\"oct\",\"nov\",\"dic\"],dayNames:[\"domingo\",\"lunes\",\"martes\",\"mircoles\",\"jueves\",\"viernes\",\"sbado\"],dayNamesShort:[\"dom\",\"lun\",\"mar\",\"mi\",\"jue\",\"vie\",\"sb\"],dayNamesMin:[\"D\",\"L\",\"M\",\"X\",\"J\",\"V\",\"S\"],weekHeader:\"Sm\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"es\",{buttonText:{month:\"Mes\",week:\"Semana\",day:\"Da\",list:\"Agenda\"},allDayHtml:\"Todo<br/>el da\",eventLimitText:\"ms\",noEventsMessage:\"No hay eventos para mostrar\"})}(),function(){!function(){var e=\"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.\".split(\"_\"),t=\"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\"),n=a.defineLocale(\"es-do\",{months:\"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre\".split(\"_\"),monthsShort:function(a,n){return/-MMM-/.test(n)?t[a.month()]:e[a.month()]},monthsParseExact:!0,weekdays:\"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),weekdaysShort:\"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),weekdaysMin:\"do_lu_ma_mi_ju_vi_s\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY h:mm A\",LLLL:\"dddd, D [de] MMMM [de] YYYY h:mm A\"},calendar:{sameDay:function(){return\"[hoy a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},nextDay:function(){return\"[maana a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},nextWeek:function(){return\"dddd [a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},lastDay:function(){return\"[ayer a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},lastWeek:function(){return\"[el] dddd [pasado a la\"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},sameElse:\"L\"},relativeTime:{future:\"en %s\",past:\"hace %s\",s:\"unos segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"una hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ao\",yy:\"%d aos\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:1,doy:4}});return n}(),e.fullCalendar.datepickerLocale(\"es-do\",\"es\",{closeText:\"Cerrar\",prevText:\"&#x3C;Ant\",nextText:\"Sig&#x3E;\",currentText:\"Hoy\",monthNames:[\"enero\",\"febrero\",\"marzo\",\"abril\",\"mayo\",\"junio\",\"julio\",\"agosto\",\"septiembre\",\"octubre\",\"noviembre\",\"diciembre\"],monthNamesShort:[\"ene\",\"feb\",\"mar\",\"abr\",\"may\",\"jun\",\"jul\",\"ago\",\"sep\",\"oct\",\"nov\",\"dic\"],dayNames:[\"domingo\",\"lunes\",\"martes\",\"mircoles\",\"jueves\",\"viernes\",\"sbado\"],dayNamesShort:[\"dom\",\"lun\",\"mar\",\"mi\",\"jue\",\"vie\",\"sb\"],dayNamesMin:[\"D\",\"L\",\"M\",\"X\",\"J\",\"V\",\"S\"],weekHeader:\"Sm\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"es-do\",{buttonText:{month:\"Mes\",week:\"Semana\",day:\"Da\",list:\"Agenda\"},allDayHtml:\"Todo<br/>el da\",eventLimitText:\"ms\",noEventsMessage:\"No hay eventos para mostrar\"})}(),function(){!function(){var e=a.defineLocale(\"eu\",{months:\"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua\".split(\"_\"),monthsShort:\"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.\".split(\"_\"),monthsParseExact:!0,weekdays:\"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata\".split(\"_\"),weekdaysShort:\"ig._al._ar._az._og._ol._lr.\".split(\"_\"),weekdaysMin:\"ig_al_ar_az_og_ol_lr\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY-MM-DD\",LL:\"YYYY[ko] MMMM[ren] D[a]\",LLL:\"YYYY[ko] MMMM[ren] D[a] HH:mm\",LLLL:\"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm\",l:\"YYYY-M-D\",ll:\"YYYY[ko] MMM D[a]\",lll:\"YYYY[ko] MMM D[a] HH:mm\",llll:\"ddd, YYYY[ko] MMM D[a] HH:mm\"},calendar:{sameDay:\"[gaur] LT[etan]\",nextDay:\"[bihar] LT[etan]\",nextWeek:\"dddd LT[etan]\",lastDay:\"[atzo] LT[etan]\",lastWeek:\"[aurreko] dddd LT[etan]\",sameElse:\"L\"},relativeTime:{future:\"%s barru\",past:\"duela %s\",s:\"segundo batzuk\",m:\"minutu bat\",mm:\"%d minutu\",h:\"ordu bat\",hh:\"%d ordu\",d:\"egun bat\",dd:\"%d egun\",M:\"hilabete bat\",MM:\"%d hilabete\",y:\"urte bat\",yy:\"%d urte\"},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"eu\",\"eu\",{closeText:\"Egina\",prevText:\"&#x3C;Aur\",nextText:\"Hur&#x3E;\",currentText:\"Gaur\",monthNames:[\"urtarrila\",\"otsaila\",\"martxoa\",\"apirila\",\"maiatza\",\"ekaina\",\"uztaila\",\"abuztua\",\"iraila\",\"urria\",\"azaroa\",\"abendua\"],monthNamesShort:[\"urt.\",\"ots.\",\"mar.\",\"api.\",\"mai.\",\"eka.\",\"uzt.\",\"abu.\",\"ira.\",\"urr.\",\"aza.\",\"abe.\"],dayNames:[\"igandea\",\"astelehena\",\"asteartea\",\"asteazkena\",\"osteguna\",\"ostirala\",\"larunbata\"],dayNamesShort:[\"ig.\",\"al.\",\"ar.\",\"az.\",\"og.\",\"ol.\",\"lr.\"],dayNamesMin:[\"ig\",\"al\",\"ar\",\"az\",\"og\",\"ol\",\"lr\"],weekHeader:\"As\",dateFormat:\"yy-mm-dd\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"eu\",{buttonText:{month:\"Hilabetea\",week:\"Astea\",day:\"Eguna\",list:\"Agenda\"},allDayHtml:\"Egun<br/>osoa\",eventLimitText:\"gehiago\",noEventsMessage:\"Ez dago ekitaldirik erakusteko\"})}(),function(){!function(){var e={1:\"\",2:\"\",3:\"\",4:\"\",5:\"\",6:\"\",7:\"\",8:\"\",9:\"\",0:\"\"},t={\"\":\"1\",\"\":\"2\",\"\":\"3\",\"\":\"4\",\"\":\"5\",\"\":\"6\",\"\":\"7\",\"\":\"8\",\"\":\"9\",\"\":\"0\"},n=a.defineLocale(\"fa\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,a,t){return e<12?\"  \":\"  \"},calendar:{sameDay:\"[ ] LT\",nextDay:\"[ ] LT\",nextWeek:\"dddd [] LT\",lastDay:\"[ ] LT\",lastWeek:\"dddd [] [] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"},preparse:function(e){return e.replace(/[-]/g,function(e){return t[e]}).replace(//g,\",\")},postformat:function(a){return a.replace(/\\d/g,function(a){return e[a]}).replace(/,/g,\"\")},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:6,doy:12}});return n}(),e.fullCalendar.datepickerLocale(\"fa\",\"fa\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"yy/mm/dd\",firstDay:6,isRTL:!0,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"fa\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:function(e){return\"  \"+e},noEventsMessage:\"   \"})}(),function(){!function(){function e(e,a,n,r){var s=\"\";switch(n){case\"s\":return r?\"muutaman sekunnin\":\"muutama sekunti\";case\"m\":return r?\"minuutin\":\"minuutti\";case\"mm\":s=r?\"minuutin\":\"minuuttia\";break;case\"h\":return r?\"tunnin\":\"tunti\";case\"hh\":s=r?\"tunnin\":\"tuntia\";break;case\"d\":return r?\"pivn\":\"piv\";case\"dd\":s=r?\"pivn\":\"piv\";break;case\"M\":return r?\"kuukauden\":\"kuukausi\";case\"MM\":s=r?\"kuukauden\":\"kuukautta\";break;case\"y\":return r?\"vuoden\":\"vuosi\";case\"yy\":s=r?\"vuoden\":\"vuotta\"}return s=t(e,r)+\" \"+s}function t(e,a){return e<10?a?r[e]:n[e]:e}var n=\"nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn\".split(\" \"),r=[\"nolla\",\"yhden\",\"kahden\",\"kolmen\",\"neljn\",\"viiden\",\"kuuden\",n[7],n[8],n[9]],s=a.defineLocale(\"fi\",{months:\"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu\".split(\"_\"),monthsShort:\"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu\".split(\"_\"),weekdays:\"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai\".split(\"_\"),weekdaysShort:\"su_ma_ti_ke_to_pe_la\".split(\"_\"),weekdaysMin:\"su_ma_ti_ke_to_pe_la\".split(\"_\"),longDateFormat:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD.MM.YYYY\",LL:\"Do MMMM[ta] YYYY\",LLL:\"Do MMMM[ta] YYYY, [klo] HH.mm\",LLLL:\"dddd, Do MMMM[ta] YYYY, [klo] HH.mm\",l:\"D.M.YYYY\",ll:\"Do MMM YYYY\",lll:\"Do MMM YYYY, [klo] HH.mm\",llll:\"ddd, Do MMM YYYY, [klo] HH.mm\"},calendar:{sameDay:\"[tnn] [klo] LT\",nextDay:\"[huomenna] [klo] LT\",nextWeek:\"dddd [klo] LT\",lastDay:\"[eilen] [klo] LT\",lastWeek:\"[viime] dddd[na] [klo] LT\",sameElse:\"L\"},relativeTime:{future:\"%s pst\",past:\"%s sitten\",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return s}(),e.fullCalendar.datepickerLocale(\"fi\",\"fi\",{closeText:\"Sulje\",prevText:\"&#xAB;Edellinen\",nextText:\"Seuraava&#xBB;\",currentText:\"Tnn\",monthNames:[\"Tammikuu\",\"Helmikuu\",\"Maaliskuu\",\"Huhtikuu\",\"Toukokuu\",\"Keskuu\",\"Heinkuu\",\"Elokuu\",\"Syyskuu\",\"Lokakuu\",\"Marraskuu\",\"Joulukuu\"],monthNamesShort:[\"Tammi\",\"Helmi\",\"Maalis\",\"Huhti\",\"Touko\",\"Kes\",\"Hein\",\"Elo\",\"Syys\",\"Loka\",\"Marras\",\"Joulu\"],dayNamesShort:[\"Su\",\"Ma\",\"Ti\",\"Ke\",\"To\",\"Pe\",\"La\"],dayNames:[\"Sunnuntai\",\"Maanantai\",\"Tiistai\",\"Keskiviikko\",\"Torstai\",\"Perjantai\",\"Lauantai\"],dayNamesMin:[\"Su\",\"Ma\",\"Ti\",\"Ke\",\"To\",\"Pe\",\"La\"],weekHeader:\"Vk\",dateFormat:\"d.m.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"fi\",{buttonText:{month:\"Kuukausi\",week:\"Viikko\",day:\"Piv\",list:\"Tapahtumat\"},allDayText:\"Koko piv\",eventLimitText:\"lis\",noEventsMessage:\"Ei tapahtumia nytettvi\"})}(),function(){!function(){var e=a.defineLocale(\"fr\",{months:\"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre\".split(\"_\"),monthsShort:\"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.\".split(\"_\"),monthsParseExact:!0,weekdays:\"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi\".split(\"_\"),weekdaysShort:\"dim._lun._mar._mer._jeu._ven._sam.\".split(\"_\"),weekdaysMin:\"Di_Lu_Ma_Me_Je_Ve_Sa\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Aujourd'hui ] LT\",nextDay:\"[Demain ] LT\",nextWeek:\"dddd [] LT\",lastDay:\"[Hier ] LT\",lastWeek:\"dddd [dernier ] LT\",sameElse:\"L\"},relativeTime:{future:\"dans %s\",past:\"il y a %s\",s:\"quelques secondes\",m:\"une minute\",mm:\"%d minutes\",h:\"une heure\",hh:\"%d heures\",d:\"un jour\",dd:\"%d jours\",M:\"un mois\",MM:\"%d mois\",y:\"un an\",yy:\"%d ans\"},ordinalParse:/\\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?\"er\":\"\")},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"fr\",\"fr\",{closeText:\"Fermer\",prevText:\"Prcdent\",nextText:\"Suivant\",currentText:\"Aujourd'hui\",monthNames:[\"janvier\",\"fvrier\",\"mars\",\"avril\",\"mai\",\"juin\",\"juillet\",\"aot\",\"septembre\",\"octobre\",\"novembre\",\"dcembre\"],monthNamesShort:[\"janv.\",\"fvr.\",\"mars\",\"avr.\",\"mai\",\"juin\",\"juil.\",\"aot\",\"sept.\",\"oct.\",\"nov.\",\"dc.\"],dayNames:[\"dimanche\",\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\"],dayNamesShort:[\"dim.\",\"lun.\",\"mar.\",\"mer.\",\"jeu.\",\"ven.\",\"sam.\"],dayNamesMin:[\"D\",\"L\",\"M\",\"M\",\"J\",\"V\",\"S\"],weekHeader:\"Sem.\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"fr\",{buttonText:{year:\"Anne\",month:\"Mois\",week:\"Semaine\",day:\"Jour\",list:\"Mon planning\"},allDayHtml:\"Toute la<br/>journe\",eventLimitText:\"en plus\",noEventsMessage:\"Aucun vnement  afficher\"})}(),function(){!function(){var e=a.defineLocale(\"fr-ca\",{months:\"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre\".split(\"_\"),monthsShort:\"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.\".split(\"_\"),monthsParseExact:!0,weekdays:\"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi\".split(\"_\"),weekdaysShort:\"dim._lun._mar._mer._jeu._ven._sam.\".split(\"_\"),weekdaysMin:\"Di_Lu_Ma_Me_Je_Ve_Sa\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY-MM-DD\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Aujourd'hui ] LT\",nextDay:\"[Demain ] LT\",nextWeek:\"dddd [] LT\",lastDay:\"[Hier ] LT\",lastWeek:\"dddd [dernier ] LT\",sameElse:\"L\"},relativeTime:{future:\"dans %s\",past:\"il y a %s\",s:\"quelques secondes\",m:\"une minute\",mm:\"%d minutes\",h:\"une heure\",hh:\"%d heures\",d:\"un jour\",dd:\"%d jours\",M:\"un mois\",MM:\"%d mois\",y:\"un an\",yy:\"%d ans\"},ordinalParse:/\\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?\"er\":\"e\")}});return e}(),e.fullCalendar.datepickerLocale(\"fr-ca\",\"fr-CA\",{closeText:\"Fermer\",prevText:\"Prcdent\",nextText:\"Suivant\",currentText:\"Aujourd'hui\",monthNames:[\"janvier\",\"fvrier\",\"mars\",\"avril\",\"mai\",\"juin\",\"juillet\",\"aot\",\"septembre\",\"octobre\",\"novembre\",\"dcembre\"],monthNamesShort:[\"janv.\",\"fvr.\",\"mars\",\"avril\",\"mai\",\"juin\",\"juil.\",\"aot\",\"sept.\",\"oct.\",\"nov.\",\"dc.\"],dayNames:[\"dimanche\",\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\"],dayNamesShort:[\"dim.\",\"lun.\",\"mar.\",\"mer.\",\"jeu.\",\"ven.\",\"sam.\"],dayNamesMin:[\"D\",\"L\",\"M\",\"M\",\"J\",\"V\",\"S\"],weekHeader:\"Sem.\",dateFormat:\"yy-mm-dd\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"fr-ca\",{buttonText:{year:\"Anne\",month:\"Mois\",week:\"Semaine\",day:\"Jour\",list:\"Mon planning\"},allDayHtml:\"Toute la<br/>journe\",eventLimitText:\"en plus\",noEventsMessage:\"Aucun vnement  afficher\"})}(),function(){!function(){var e=a.defineLocale(\"fr-ch\",{months:\"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre\".split(\"_\"),monthsShort:\"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.\".split(\"_\"),monthsParseExact:!0,weekdays:\"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi\".split(\"_\"),weekdaysShort:\"dim._lun._mar._mer._jeu._ven._sam.\".split(\"_\"),weekdaysMin:\"Di_Lu_Ma_Me_Je_Ve_Sa\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Aujourd'hui ] LT\",nextDay:\"[Demain ] LT\",nextWeek:\"dddd [] LT\",lastDay:\"[Hier ] LT\",lastWeek:\"dddd [dernier ] LT\",sameElse:\"L\"},relativeTime:{future:\"dans %s\",past:\"il y a %s\",s:\"quelques secondes\",m:\"une minute\",mm:\"%d minutes\",h:\"une heure\",hh:\"%d heures\",d:\"un jour\",dd:\"%d jours\",M:\"un mois\",MM:\"%d mois\",y:\"un an\",yy:\"%d ans\"},ordinalParse:/\\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?\"er\":\"e\")},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"fr-ch\",\"fr-CH\",{closeText:\"Fermer\",prevText:\"&#x3C;Prc\",nextText:\"Suiv&#x3E;\",currentText:\"Courant\",monthNames:[\"janvier\",\"fvrier\",\"mars\",\"avril\",\"mai\",\"juin\",\"juillet\",\"aot\",\"septembre\",\"octobre\",\"novembre\",\"dcembre\"],monthNamesShort:[\"janv.\",\"fvr.\",\"mars\",\"avril\",\"mai\",\"juin\",\"juil.\",\"aot\",\"sept.\",\"oct.\",\"nov.\",\"dc.\"],dayNames:[\"dimanche\",\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\"],dayNamesShort:[\"dim.\",\"lun.\",\"mar.\",\"mer.\",\"jeu.\",\"ven.\",\"sam.\"],dayNamesMin:[\"D\",\"L\",\"M\",\"M\",\"J\",\"V\",\"S\"],weekHeader:\"Sm\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"fr-ch\",{buttonText:{year:\"Anne\",month:\"Mois\",week:\"Semaine\",day:\"Jour\",list:\"Mon planning\"},allDayHtml:\"Toute la<br/>journe\",eventLimitText:\"en plus\",noEventsMessage:\"Aucun vnement  afficher\"})}(),function(){!function(){var e=a.defineLocale(\"gl\",{months:\"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro\".split(\"_\"),monthsShort:\"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.\".split(\"_\"),monthsParseExact:!0,weekdays:\"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado\".split(\"_\"),weekdaysShort:\"Dom._Lun._Mar._Mr._Xov._Ven._Sb.\".split(\"_\"),weekdaysMin:\"Do_Lu_Ma_M_Xo_Ve_S\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY H:mm\",LLLL:\"dddd D MMMM YYYY H:mm\"},calendar:{sameDay:function(){return\"[hoxe \"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},nextDay:function(){return\"[ma \"+(1!==this.hours()?\"s\":\"\")+\"] LT\"},nextWeek:function(){return\"dddd [\"+(1!==this.hours()?\"s\":\"a\")+\"] LT\"},lastDay:function(){return\"[onte \"+(1!==this.hours()?\"\":\"a\")+\"] LT\"},lastWeek:function(){return\"[o] dddd [pasado \"+(1!==this.hours()?\"s\":\"a\")+\"] LT\"},sameElse:\"L\"},relativeTime:{future:function(e){return\"uns segundos\"===e?\"nuns segundos\":\"en \"+e},past:\"hai %s\",s:\"uns segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"unha hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ano\",yy:\"%d anos\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"gl\",\"gl\",{closeText:\"Pechar\",prevText:\"&#x3C;Ant\",nextText:\"Seg&#x3E;\",currentText:\"Hoxe\",monthNames:[\"Xaneiro\",\"Febreiro\",\"Marzo\",\"Abril\",\"Maio\",\"Xuo\",\"Xullo\",\"Agosto\",\"Setembro\",\"Outubro\",\"Novembro\",\"Decembro\"],monthNamesShort:[\"Xan\",\"Feb\",\"Mar\",\"Abr\",\"Mai\",\"Xu\",\"Xul\",\"Ago\",\"Set\",\"Out\",\"Nov\",\"Dec\"],dayNames:[\"Domingo\",\"Luns\",\"Martes\",\"Mrcores\",\"Xoves\",\"Venres\",\"Sbado\"],dayNamesShort:[\"Dom\",\"Lun\",\"Mar\",\"Mr\",\"Xov\",\"Ven\",\"Sb\"],dayNamesMin:[\"Do\",\"Lu\",\"Ma\",\"M\",\"Xo\",\"Ve\",\"S\"],weekHeader:\"Sm\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"gl\",{buttonText:{month:\"Mes\",week:\"Semana\",day:\"Da\",list:\"Axenda\"},allDayHtml:\"Todo<br/>o da\",eventLimitText:\"mis\",noEventsMessage:\"Non hai eventos para amosar\"})}(),function(){!function(){var e=a.defineLocale(\"he\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D []MMMM YYYY\",LLL:\"D []MMMM YYYY HH:mm\",LLLL:\"dddd, D []MMMM YYYY HH:mm\",l:\"D/M/YYYY\",ll:\"D MMM YYYY\",lll:\"D MMM YYYY HH:mm\",llll:\"ddd, D MMM YYYY HH:mm\"},calendar:{sameDay:\"[ ]LT\",nextDay:\"[ ]LT\",nextWeek:\"dddd [] LT\",lastDay:\"[ ]LT\",lastWeek:\"[] dddd [ ] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:\"\",mm:\"%d \",h:\"\",hh:function(e){return 2===e?\"\":e+\" \"},d:\"\",dd:function(e){return 2===e?\"\":e+\" \"},M:\"\",MM:function(e){return 2===e?\"\":e+\" \"},y:\"\",yy:function(e){return 2===e?\"\":e%10===0&&10!==e?e+\" \":e+\" \"}},meridiemParse:/\"|\"| | | ||/i,isPM:function(e){return/^(\"| |)$/.test(e)},meridiem:function(e,a,t){return e<5?\" \":e<10?\"\":e<12?t?'\"':\" \":e<18?t?'\"':\" \":\"\"}});return e}(),e.fullCalendar.datepickerLocale(\"he\",\"he\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"'\",\"'\",\"'\",\"'\",\"'\",\"'\",\"\"],dayNamesMin:[\"'\",\"'\",\"'\",\"'\",\"'\",\"'\",\"\"],weekHeader:\"Wk\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!0,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"he\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\" \"},allDayText:\" \",eventLimitText:\"\",noEventsMessage:\"  \",weekNumberTitle:\"\"})}(),function(){!function(){var e={1:\"\",2:\"\",3:\"\",4:\"\",5:\"\",6:\"\",7:\"\",8:\"\",9:\"\",0:\"\"},t={\"\":\"1\",\"\":\"2\",\"\":\"3\",\"\":\"4\",\"\":\"5\",\"\":\"6\",\"\":\"7\",\"\":\"8\",\"\":\"9\",\"\":\"0\"},n=a.defineLocale(\"hi\",{months:\"___________\".split(\"_\"),monthsShort:\"._.__.___._._._._._.\".split(\"_\"),monthsParseExact:!0,weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"A h:mm \",LTS:\"A h:mm:ss \",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY, A h:mm \",LLLL:\"dddd, D MMMM YYYY, A h:mm \"},calendar:{sameDay:\"[] LT\",nextDay:\"[] LT\",nextWeek:\"dddd, LT\",lastDay:\"[] LT\",lastWeek:\"[] dddd, LT\",sameElse:\"L\"},relativeTime:{future:\"%s \",past:\"%s \",s:\"  \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"},preparse:function(e){return e.replace(/[]/g,function(e){return t[e]})},postformat:function(a){return a.replace(/\\d/g,function(a){return e[a]})},meridiemParse:/|||/,meridiemHour:function(e,a){return 12===e&&(e=0),\"\"===a?e<4?e:e+12:\"\"===a?e:\"\"===a?e>=10?e:e+12:\"\"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?\"\":e<10?\"\":e<17?\"\":e<20?\"\":\"\"},week:{dow:0,doy:6}});return n}(),e.fullCalendar.datepickerLocale(\"hi\",\"hi\",{closeText:\"\",prevText:\"\",nextText:\"\",currentText:\"\",monthNames:[\" \",\"\",\"\",\"\",\"\",\"\",\"\",\" \",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"hi\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:function(e){return\"+ \"+e},noEventsMessage:\"      \"})}(),function(){!function(){function e(e,a,t){var n=e+\" \";switch(t){case\"m\":return a?\"jedna minuta\":\"jedne minute\";case\"mm\":return n+=1===e?\"minuta\":2===e||3===e||4===e?\"minute\":\"minuta\";case\"h\":return a?\"jedan sat\":\"jednog sata\";case\"hh\":return n+=1===e?\"sat\":2===e||3===e||4===e?\"sata\":\"sati\";case\"dd\":return n+=1===e?\"dan\":\"dana\";case\"MM\":return n+=1===e?\"mjesec\":2===e||3===e||4===e?\"mjeseca\":\"mjeseci\";case\"yy\":return n+=1===e?\"godina\":2===e||3===e||4===e?\"godine\":\"godina\"}}var t=a.defineLocale(\"hr\",{months:{format:\"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca\".split(\"_\"),standalone:\"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac\".split(\"_\")},monthsShort:\"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.\".split(\"_\"),monthsParseExact:!0,weekdays:\"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota\".split(\"_\"),weekdaysShort:\"ned._pon._uto._sri._et._pet._sub.\".split(\"_\"),weekdaysMin:\"ne_po_ut_sr_e_pe_su\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD. MM. YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd, D. MMMM YYYY H:mm\"},calendar:{sameDay:\"[danas u] LT\",nextDay:\"[sutra u] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[u] [nedjelju] [u] LT\";case 3:return\"[u] [srijedu] [u] LT\";case 6:return\"[u] [subotu] [u] LT\";case 1:case 2:case 4:case 5:return\"[u] dddd [u] LT\"}},lastDay:\"[juer u] LT\",lastWeek:function(){switch(this.day()){case 0:case 3:return\"[prolu] dddd [u] LT\";case 6:return\"[prole] [subote] [u] LT\";case 1:case 2:case 4:case 5:return\"[proli] dddd [u] LT\"}},sameElse:\"L\"},relativeTime:{future:\"za %s\",past:\"prije %s\",s:\"par sekundi\",m:e,mm:e,h:e,hh:e,d:\"dan\",dd:e,M:\"mjesec\",MM:e,y:\"godinu\",yy:e},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:7}});return t}(),e.fullCalendar.datepickerLocale(\"hr\",\"hr\",{closeText:\"Zatvori\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"Danas\",monthNames:[\"Sijeanj\",\"Veljaa\",\"Oujak\",\"Travanj\",\"Svibanj\",\"Lipanj\",\"Srpanj\",\"Kolovoz\",\"Rujan\",\"Listopad\",\"Studeni\",\"Prosinac\"],monthNamesShort:[\"Sij\",\"Velj\",\"Ou\",\"Tra\",\"Svi\",\"Lip\",\"Srp\",\"Kol\",\"Ruj\",\"Lis\",\"Stu\",\"Pro\"],dayNames:[\"Nedjelja\",\"Ponedjeljak\",\"Utorak\",\"Srijeda\",\"etvrtak\",\"Petak\",\"Subota\"],dayNamesShort:[\"Ned\",\"Pon\",\"Uto\",\"Sri\",\"et\",\"Pet\",\"Sub\"],dayNamesMin:[\"Ne\",\"Po\",\"Ut\",\"Sr\",\"e\",\"Pe\",\"Su\"],weekHeader:\"Tje\",dateFormat:\"dd.mm.yy.\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"hr\",{buttonText:{month:\"Mjesec\",week:\"Tjedan\",day:\"Dan\",list:\"Raspored\"},allDayText:\"Cijeli dan\",eventLimitText:function(e){return\"+ jo \"+e},noEventsMessage:\"Nema dogaaja za prikaz\"})}(),function(){!function(){function e(e,a,t,n){var r=e;switch(t){case\"s\":return n||a?\"nhny msodperc\":\"nhny msodperce\";case\"m\":return\"egy\"+(n||a?\" perc\":\" perce\");case\"mm\":return r+(n||a?\" perc\":\" perce\");case\"h\":return\"egy\"+(n||a?\" ra\":\" rja\");case\"hh\":return r+(n||a?\" ra\":\" rja\");case\"d\":return\"egy\"+(n||a?\" nap\":\" napja\");case\"dd\":return r+(n||a?\" nap\":\" napja\");case\"M\":return\"egy\"+(n||a?\" hnap\":\" hnapja\");case\"MM\":return r+(n||a?\" hnap\":\" hnapja\");case\"y\":return\"egy\"+(n||a?\" v\":\" ve\");case\"yy\":return r+(n||a?\" v\":\" ve\")}return\"\"}function t(e){return(e?\"\":\"[mlt] \")+\"[\"+n[this.day()]+\"] LT[-kor]\"}var n=\"vasrnap htfn kedden szerdn cstrtkn pnteken szombaton\".split(\" \"),r=a.defineLocale(\"hu\",{months:\"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december\".split(\"_\"),monthsShort:\"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec\".split(\"_\"),weekdays:\"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat\".split(\"_\"),weekdaysShort:\"vas_ht_kedd_sze_cst_pn_szo\".split(\"_\"),weekdaysMin:\"v_h_k_sze_cs_p_szo\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"YYYY.MM.DD.\",LL:\"YYYY. MMMM D.\",LLL:\"YYYY. MMMM D. H:mm\",LLLL:\"YYYY. MMMM D., dddd H:mm\"},meridiemParse:/de|du/i,isPM:function(e){return\"u\"===e.charAt(1).toLowerCase()},meridiem:function(e,a,t){return e<12?t===!0?\"de\":\"DE\":t===!0?\"du\":\"DU\"},calendar:{sameDay:\"[ma] LT[-kor]\",nextDay:\"[holnap] LT[-kor]\",nextWeek:function(){return t.call(this,!0)},lastDay:\"[tegnap] LT[-kor]\",lastWeek:function(){return t.call(this,!1)},sameElse:\"L\"},relativeTime:{future:\"%s mlva\",past:\"%s\",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:7}});return r}(),e.fullCalendar.datepickerLocale(\"hu\",\"hu\",{closeText:\"bezr\",prevText:\"vissza\",nextText:\"elre\",currentText:\"ma\",monthNames:[\"Janur\",\"Februr\",\"Mrcius\",\"prilis\",\"Mjus\",\"Jnius\",\"Jlius\",\"Augusztus\",\"Szeptember\",\"Oktber\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mr\",\"pr\",\"Mj\",\"Jn\",\"Jl\",\"Aug\",\"Szep\",\"Okt\",\"Nov\",\"Dec\"],dayNames:[\"Vasrnap\",\"Htf\",\"Kedd\",\"Szerda\",\"Cstrtk\",\"Pntek\",\"Szombat\"],dayNamesShort:[\"Vas\",\"Ht\",\"Ked\",\"Sze\",\"Cs\",\"Pn\",\"Szo\"],dayNamesMin:[\"V\",\"H\",\"K\",\"Sze\",\"Cs\",\"P\",\"Szo\"],weekHeader:\"Ht\",dateFormat:\"yy.mm.dd.\",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:\"\"}),e.fullCalendar.locale(\"hu\",{buttonText:{month:\"Hnap\",week:\"Ht\",day:\"Nap\",list:\"Napl\"},allDayText:\"Egsz nap\",eventLimitText:\"tovbbi\",noEventsMessage:\"Nincs megjelenthet esemnyek\"})}(),function(){!function(){var e=a.defineLocale(\"id\",{months:\"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des\".split(\"_\"),weekdays:\"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu\".split(\"_\"),weekdaysShort:\"Min_Sen_Sel_Rab_Kam_Jum_Sab\".split(\"_\"),weekdaysMin:\"Mg_Sn_Sl_Rb_Km_Jm_Sb\".split(\"_\"),longDateFormat:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [pukul] HH.mm\",LLLL:\"dddd, D MMMM YYYY [pukul] HH.mm\"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,a){return 12===e&&(e=0),\"pagi\"===a?e:\"siang\"===a?e>=11?e:e+12:\"sore\"===a||\"malam\"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?\"pagi\":e<15?\"siang\":e<19?\"sore\":\"malam\"},calendar:{sameDay:\"[Hari ini pukul] LT\",nextDay:\"[Besok pukul] LT\",nextWeek:\"dddd [pukul] LT\",lastDay:\"[Kemarin pukul] LT\",lastWeek:\"dddd [lalu pukul] LT\",sameElse:\"L\"},relativeTime:{future:\"dalam %s\",past:\"%s yang lalu\",s:\"beberapa detik\",m:\"semenit\",mm:\"%d menit\",h:\"sejam\",hh:\"%d jam\",d:\"sehari\",dd:\"%d hari\",M:\"sebulan\",MM:\"%d bulan\",y:\"setahun\",yy:\"%d tahun\"},week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"id\",\"id\",{closeText:\"Tutup\",prevText:\"&#x3C;mundur\",nextText:\"maju&#x3E;\",currentText:\"hari ini\",monthNames:[\"Januari\",\"Februari\",\"Maret\",\"April\",\"Mei\",\"Juni\",\"Juli\",\"Agustus\",\"September\",\"Oktober\",\"Nopember\",\"Desember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Agus\",\"Sep\",\"Okt\",\"Nop\",\"Des\"],dayNames:[\"Minggu\",\"Senin\",\"Selasa\",\"Rabu\",\"Kamis\",\"Jumat\",\"Sabtu\"],dayNamesShort:[\"Min\",\"Sen\",\"Sel\",\"Rab\",\"kam\",\"Jum\",\"Sab\"],dayNamesMin:[\"Mg\",\"Sn\",\"Sl\",\"Rb\",\"Km\",\"jm\",\"Sb\"],weekHeader:\"Mg\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"id\",{buttonText:{month:\"Bulan\",week:\"Minggu\",day:\"Hari\",list:\"Agenda\"},allDayHtml:\"Sehari<br/>penuh\",eventLimitText:\"lebih\",noEventsMessage:\"Tidak ada acara untuk ditampilkan\"})}(),function(){!function(){function e(e){return e%100===11||e%10!==1}function t(a,t,n,r){var s=a+\" \";switch(n){case\"s\":return t||r?\"nokkrar sekndur\":\"nokkrum sekndum\";case\"m\":return t?\"mnta\":\"mntu\";case\"mm\":return e(a)?s+(t||r?\"mntur\":\"mntum\"):t?s+\"mnta\":s+\"mntu\";case\"hh\":return e(a)?s+(t||r?\"klukkustundir\":\"klukkustundum\"):s+\"klukkustund\";case\"d\":return t?\"dagur\":r?\"dag\":\"degi\";case\"dd\":return e(a)?t?s+\"dagar\":s+(r?\"daga\":\"dgum\"):t?s+\"dagur\":s+(r?\"dag\":\"degi\");case\"M\":return t?\"mnuur\":r?\"mnu\":\"mnui\";case\"MM\":return e(a)?t?s+\"mnuir\":s+(r?\"mnui\":\"mnuum\"):t?s+\"mnuur\":s+(r?\"mnu\":\"mnui\");case\"y\":return t||r?\"r\":\"ri\";case\"yy\":return e(a)?s+(t||r?\"r\":\"rum\"):s+(t||r?\"r\":\"ri\")}}var n=a.defineLocale(\"is\",{months:\"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des\".split(\"_\"),weekdays:\"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur\".split(\"_\"),weekdaysShort:\"sun_mn_ri_mi_fim_fs_lau\".split(\"_\"),weekdaysMin:\"Su_M_r_Mi_Fi_F_La\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY [kl.] H:mm\",LLLL:\"dddd, D. MMMM YYYY [kl.] H:mm\"},calendar:{\r\nsameDay:\"[ dag kl.] LT\",nextDay:\"[ morgun kl.] LT\",nextWeek:\"dddd [kl.] LT\",lastDay:\"[ gr kl.] LT\",lastWeek:\"[sasta] dddd [kl.] LT\",sameElse:\"L\"},relativeTime:{future:\"eftir %s\",past:\"fyrir %s san\",s:t,m:t,mm:t,h:\"klukkustund\",hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return n}(),e.fullCalendar.datepickerLocale(\"is\",\"is\",{closeText:\"Loka\",prevText:\"&#x3C; Fyrri\",nextText:\"Nsti &#x3E;\",currentText:\" dag\",monthNames:[\"Janar\",\"Febrar\",\"Mars\",\"Aprl\",\"Ma\",\"Jn\",\"Jl\",\"gst\",\"September\",\"Oktber\",\"Nvember\",\"Desember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Ma\",\"Jn\",\"Jl\",\"g\",\"Sep\",\"Okt\",\"Nv\",\"Des\"],dayNames:[\"Sunnudagur\",\"Mnudagur\",\"rijudagur\",\"Mivikudagur\",\"Fimmtudagur\",\"Fstudagur\",\"Laugardagur\"],dayNamesShort:[\"Sun\",\"Mn\",\"ri\",\"Mi\",\"Fim\",\"Fs\",\"Lau\"],dayNamesMin:[\"Su\",\"M\",\"r\",\"Mi\",\"Fi\",\"F\",\"La\"],weekHeader:\"Vika\",dateFormat:\"dd.mm.yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"is\",{buttonText:{month:\"Mnuur\",week:\"Vika\",day:\"Dagur\",list:\"Dagskr\"},allDayHtml:\"Allan<br/>daginn\",eventLimitText:\"meira\",noEventsMessage:\"Engir viburir til a sna\"})}(),function(){!function(){var e=a.defineLocale(\"it\",{months:\"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre\".split(\"_\"),monthsShort:\"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic\".split(\"_\"),weekdays:\"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato\".split(\"_\"),weekdaysShort:\"Dom_Lun_Mar_Mer_Gio_Ven_Sab\".split(\"_\"),weekdaysMin:\"Do_Lu_Ma_Me_Gi_Ve_Sa\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Oggi alle] LT\",nextDay:\"[Domani alle] LT\",nextWeek:\"dddd [alle] LT\",lastDay:\"[Ieri alle] LT\",lastWeek:function(){switch(this.day()){case 0:return\"[la scorsa] dddd [alle] LT\";default:return\"[lo scorso] dddd [alle] LT\"}},sameElse:\"L\"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?\"tra\":\"in\")+\" \"+e},past:\"%s fa\",s:\"alcuni secondi\",m:\"un minuto\",mm:\"%d minuti\",h:\"un'ora\",hh:\"%d ore\",d:\"un giorno\",dd:\"%d giorni\",M:\"un mese\",MM:\"%d mesi\",y:\"un anno\",yy:\"%d anni\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"it\",\"it\",{closeText:\"Chiudi\",prevText:\"&#x3C;Prec\",nextText:\"Succ&#x3E;\",currentText:\"Oggi\",monthNames:[\"Gennaio\",\"Febbraio\",\"Marzo\",\"Aprile\",\"Maggio\",\"Giugno\",\"Luglio\",\"Agosto\",\"Settembre\",\"Ottobre\",\"Novembre\",\"Dicembre\"],monthNamesShort:[\"Gen\",\"Feb\",\"Mar\",\"Apr\",\"Mag\",\"Giu\",\"Lug\",\"Ago\",\"Set\",\"Ott\",\"Nov\",\"Dic\"],dayNames:[\"Domenica\",\"Luned\",\"Marted\",\"Mercoled\",\"Gioved\",\"Venerd\",\"Sabato\"],dayNamesShort:[\"Dom\",\"Lun\",\"Mar\",\"Mer\",\"Gio\",\"Ven\",\"Sab\"],dayNamesMin:[\"Do\",\"Lu\",\"Ma\",\"Me\",\"Gi\",\"Ve\",\"Sa\"],weekHeader:\"Sm\",dateFormat:\"dd/mm/yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"it\",{buttonText:{month:\"Mese\",week:\"Settimana\",day:\"Giorno\",list:\"Agenda\"},allDayHtml:\"Tutto il<br/>giorno\",eventLimitText:function(e){return\"+altri \"+e},noEventsMessage:\"Non ci sono eventi da visualizzare\"})}(),function(){!function(){var e=a.defineLocale(\"ja\",{months:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"Ahm\",LTS:\"Ahms\",L:\"YYYY/MM/DD\",LL:\"YYYYMD\",LLL:\"YYYYMDAhm\",LLLL:\"YYYYMDAhm dddd\"},meridiemParse:/|/i,isPM:function(e){return\"\"===e},meridiem:function(e,a,t){return e<12?\"\":\"\"},calendar:{sameDay:\"[] LT\",nextDay:\"[] LT\",nextWeek:\"[]dddd LT\",lastDay:\"[] LT\",lastWeek:\"[]dddd LT\",sameElse:\"L\"},ordinalParse:/\\d{1,2}/,ordinal:function(e,a){switch(a){case\"d\":case\"D\":case\"DDD\":return e+\"\";default:return e}},relativeTime:{future:\"%s\",past:\"%s\",s:\"\",m:\"1\",mm:\"%d\",h:\"1\",hh:\"%d\",d:\"1\",dd:\"%d\",M:\"1\",MM:\"%d\",y:\"1\",yy:\"%d\"}});return e}(),e.fullCalendar.datepickerLocale(\"ja\",\"ja\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"yy/mm/dd\",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:\"\"}),e.fullCalendar.locale(\"ja\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\"\",eventLimitText:function(e){return\" \"+e+\" \"},noEventsMessage:\"\"})}(),function(){!function(){var e=a.defineLocale(\"ko\",{months:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"A h m\",LTS:\"A h m s\",L:\"YYYY.MM.DD\",LL:\"YYYY MMMM D\",LLL:\"YYYY MMMM D A h m\",LLLL:\"YYYY MMMM D dddd A h m\"},calendar:{sameDay:\" LT\",nextDay:\" LT\",nextWeek:\"dddd LT\",lastDay:\" LT\",lastWeek:\" dddd LT\",sameElse:\"L\"},relativeTime:{future:\"%s \",past:\"%s \",s:\" \",ss:\"%d\",m:\"\",mm:\"%d\",h:\" \",hh:\"%d\",d:\"\",dd:\"%d\",M:\" \",MM:\"%d\",y:\" \",yy:\"%d\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",meridiemParse:/|/,isPM:function(e){return\"\"===e},meridiem:function(e,a,t){return e<12?\"\":\"\"}});return e}(),e.fullCalendar.datepickerLocale(\"ko\",\"ko\",{closeText:\"\",prevText:\"\",nextText:\"\",currentText:\"\",monthNames:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],monthNamesShort:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"yy. m. d.\",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:\"\"}),e.fullCalendar.locale(\"ko\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\"\",eventLimitText:\"\",noEventsMessage:\"  \"})}(),function(){!function(){function e(e,a,t,n){var r={m:[\"eng Minutt\",\"enger Minutt\"],h:[\"eng Stonn\",\"enger Stonn\"],d:[\"een Dag\",\"engem Dag\"],M:[\"ee Mount\",\"engem Mount\"],y:[\"ee Joer\",\"engem Joer\"]};return a?r[t][0]:r[t][1]}function t(e){var a=e.substr(0,e.indexOf(\" \"));return r(a)?\"a \"+e:\"an \"+e}function n(e){var a=e.substr(0,e.indexOf(\" \"));return r(a)?\"viru \"+e:\"virun \"+e}function r(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var a=e%10,t=e/10;return r(0===a?t:a)}if(e<1e4){for(;e>=10;)e/=10;return r(e)}return e/=1e3,r(e)}var s=a.defineLocale(\"lb\",{months:\"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),monthsShort:\"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.\".split(\"_\"),monthsParseExact:!0,weekdays:\"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg\".split(\"_\"),weekdaysShort:\"So._M._D._M._Do._Fr._Sa.\".split(\"_\"),weekdaysMin:\"So_M_D_M_Do_Fr_Sa\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm [Auer]\",LTS:\"H:mm:ss [Auer]\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm [Auer]\",LLLL:\"dddd, D. MMMM YYYY H:mm [Auer]\"},calendar:{sameDay:\"[Haut um] LT\",sameElse:\"L\",nextDay:\"[Muer um] LT\",nextWeek:\"dddd [um] LT\",lastDay:\"[Gschter um] LT\",lastWeek:function(){switch(this.day()){case 2:case 4:return\"[Leschten] dddd [um] LT\";default:return\"[Leschte] dddd [um] LT\"}}},relativeTime:{future:t,past:n,s:\"e puer Sekonnen\",m:e,mm:\"%d Minutten\",h:e,hh:\"%d Stonnen\",d:e,dd:\"%d Deeg\",M:e,MM:\"%d Mint\",y:e,yy:\"%d Joer\"},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return s}(),e.fullCalendar.datepickerLocale(\"lb\",\"lb\",{closeText:\"Ferdeg\",prevText:\"Zrck\",nextText:\"Weider\",currentText:\"Haut\",monthNames:[\"Januar\",\"Februar\",\"Merz\",\"Abrll\",\"Mee\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Me\",\"Abr\",\"Mee\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\"],dayNames:[\"Sonndeg\",\"Mindeg\",\"Dnschdeg\",\"Mttwoch\",\"Donneschdeg\",\"Freideg\",\"Samschdeg\"],dayNamesShort:[\"Son\",\"Mi\",\"Dn\",\"Mt\",\"Don\",\"Fre\",\"Sam\"],dayNamesMin:[\"So\",\"M\",\"D\",\"M\",\"Do\",\"Fr\",\"Sa\"],weekHeader:\"W\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"lb\",{buttonText:{month:\"Mount\",week:\"Woch\",day:\"Dag\",list:\"Terminiwwersiicht\"},allDayText:\"Ganzen Dag\",eventLimitText:\"mi\",noEventsMessage:\"Nee Evenementer ze affichieren\"})}(),function(){!function(){function e(e,a,t,n){return a?\"kelios sekunds\":n?\"keli sekundi\":\"kelias sekundes\"}function t(e,a,t,n){return a?r(t)[0]:n?r(t)[1]:r(t)[2]}function n(e){return e%10===0||e>10&&e<20}function r(e){return d[e].split(\"_\")}function s(e,a,s,d){var i=e+\" \";return 1===e?i+t(e,a,s[0],d):a?i+(n(e)?r(s)[1]:r(s)[0]):d?i+r(s)[1]:i+(n(e)?r(s)[1]:r(s)[2])}var d={m:\"minut_minuts_minut\",mm:\"minuts_minui_minutes\",h:\"valanda_valandos_valand\",hh:\"valandos_valand_valandas\",d:\"diena_dienos_dien\",dd:\"dienos_dien_dienas\",M:\"mnuo_mnesio_mnes\",MM:\"mnesiai_mnesi_mnesius\",y:\"metai_met_metus\",yy:\"metai_met_metus\"},i=a.defineLocale(\"lt\",{months:{format:\"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio\".split(\"_\"),standalone:\"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis\".split(\"_\"),isFormat:/D[oD]?(\\[[^\\[\\]]*\\]|\\s+)+MMMM?|MMMM?(\\[[^\\[\\]]*\\]|\\s+)+D[oD]?/},monthsShort:\"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd\".split(\"_\"),weekdays:{format:\"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien\".split(\"_\"),standalone:\"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis\".split(\"_\"),isFormat:/dddd HH:mm/},weekdaysShort:\"Sek_Pir_Ant_Tre_Ket_Pen_e\".split(\"_\"),weekdaysMin:\"S_P_A_T_K_Pn_\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY-MM-DD\",LL:\"YYYY [m.] MMMM D [d.]\",LLL:\"YYYY [m.] MMMM D [d.], HH:mm [val.]\",LLLL:\"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]\",l:\"YYYY-MM-DD\",ll:\"YYYY [m.] MMMM D [d.]\",lll:\"YYYY [m.] MMMM D [d.], HH:mm [val.]\",llll:\"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]\"},calendar:{sameDay:\"[iandien] LT\",nextDay:\"[Rytoj] LT\",nextWeek:\"dddd LT\",lastDay:\"[Vakar] LT\",lastWeek:\"[Prajus] dddd LT\",sameElse:\"L\"},relativeTime:{future:\"po %s\",past:\"prie %s\",s:e,m:t,mm:s,h:t,hh:s,d:t,dd:s,M:t,MM:s,y:t,yy:s},ordinalParse:/\\d{1,2}-oji/,ordinal:function(e){return e+\"-oji\"},week:{dow:1,doy:4}});return i}(),e.fullCalendar.datepickerLocale(\"lt\",\"lt\",{closeText:\"Udaryti\",prevText:\"&#x3C;Atgal\",nextText:\"Pirmyn&#x3E;\",currentText:\"iandien\",monthNames:[\"Sausis\",\"Vasaris\",\"Kovas\",\"Balandis\",\"Gegu\",\"Birelis\",\"Liepa\",\"Rugpjtis\",\"Rugsjis\",\"Spalis\",\"Lapkritis\",\"Gruodis\"],monthNamesShort:[\"Sau\",\"Vas\",\"Kov\",\"Bal\",\"Geg\",\"Bir\",\"Lie\",\"Rugp\",\"Rugs\",\"Spa\",\"Lap\",\"Gru\"],dayNames:[\"sekmadienis\",\"pirmadienis\",\"antradienis\",\"treiadienis\",\"ketvirtadienis\",\"penktadienis\",\"etadienis\"],dayNamesShort:[\"sek\",\"pir\",\"ant\",\"tre\",\"ket\",\"pen\",\"e\"],dayNamesMin:[\"Se\",\"Pr\",\"An\",\"Tr\",\"Ke\",\"Pe\",\"e\"],weekHeader:\"SAV\",dateFormat:\"yy-mm-dd\",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:\"\"}),e.fullCalendar.locale(\"lt\",{buttonText:{month:\"Mnuo\",week:\"Savait\",day:\"Diena\",list:\"Darbotvark\"},allDayText:\"Vis dien\",eventLimitText:\"daugiau\",noEventsMessage:\"Nra vyki rodyti\"})}(),function(){!function(){function e(e,a,t){return t?a%10===1&&a%100!==11?e[2]:e[3]:a%10===1&&a%100!==11?e[0]:e[1]}function t(a,t,n){return a+\" \"+e(s[n],a,t)}function n(a,t,n){return e(s[n],a,t)}function r(e,a){return a?\"daas sekundes\":\"dam sekundm\"}var s={m:\"mintes_mintm_minte_mintes\".split(\"_\"),mm:\"mintes_mintm_minte_mintes\".split(\"_\"),h:\"stundas_stundm_stunda_stundas\".split(\"_\"),hh:\"stundas_stundm_stunda_stundas\".split(\"_\"),d:\"dienas_dienm_diena_dienas\".split(\"_\"),dd:\"dienas_dienm_diena_dienas\".split(\"_\"),M:\"mnea_mneiem_mnesis_mnei\".split(\"_\"),MM:\"mnea_mneiem_mnesis_mnei\".split(\"_\"),y:\"gada_gadiem_gads_gadi\".split(\"_\"),yy:\"gada_gadiem_gads_gadi\".split(\"_\")},d=a.defineLocale(\"lv\",{months:\"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec\".split(\"_\"),weekdays:\"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena\".split(\"_\"),weekdaysShort:\"Sv_P_O_T_C_Pk_S\".split(\"_\"),weekdaysMin:\"Sv_P_O_T_C_Pk_S\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY.\",LL:\"YYYY. [gada] D. MMMM\",LLL:\"YYYY. [gada] D. MMMM, HH:mm\",LLLL:\"YYYY. [gada] D. MMMM, dddd, HH:mm\"},calendar:{sameDay:\"[odien pulksten] LT\",nextDay:\"[Rt pulksten] LT\",nextWeek:\"dddd [pulksten] LT\",lastDay:\"[Vakar pulksten] LT\",lastWeek:\"[Pagju] dddd [pulksten] LT\",sameElse:\"L\"},relativeTime:{future:\"pc %s\",past:\"pirms %s\",s:r,m:n,mm:t,h:n,hh:t,d:n,dd:t,M:n,MM:t,y:n,yy:t},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return d}(),e.fullCalendar.datepickerLocale(\"lv\",\"lv\",{closeText:\"Aizvrt\",prevText:\"Iepr.\",nextText:\"Nk.\",currentText:\"odien\",monthNames:[\"Janvris\",\"Februris\",\"Marts\",\"Aprlis\",\"Maijs\",\"Jnijs\",\"Jlijs\",\"Augusts\",\"Septembris\",\"Oktobris\",\"Novembris\",\"Decembris\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Jn\",\"Jl\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],dayNames:[\"svtdiena\",\"pirmdiena\",\"otrdiena\",\"trediena\",\"ceturtdiena\",\"piektdiena\",\"sestdiena\"],dayNamesShort:[\"svt\",\"prm\",\"otr\",\"tre\",\"ctr\",\"pkt\",\"sst\"],dayNamesMin:[\"Sv\",\"Pr\",\"Ot\",\"Tr\",\"Ct\",\"Pk\",\"Ss\"],weekHeader:\"Ned.\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"lv\",{buttonText:{month:\"Mnesis\",week:\"Neda\",day:\"Diena\",list:\"Dienas krtba\"},allDayText:\"Visu dienu\",eventLimitText:function(e){return\"+vl \"+e},noEventsMessage:\"Nav notikumu, lai pardtu\"})}(),function(){!function(){var e=a.defineLocale(\"mk\",{months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"e_o_____a\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"D.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY H:mm\",LLLL:\"dddd, D MMMM YYYY H:mm\"},calendar:{sameDay:\"[ ] LT\",nextDay:\"[ ] LT\",nextWeek:\"[] dddd [] LT\",lastDay:\"[ ] LT\",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return\"[] dddd [] LT\";case 1:case 2:case 4:case 5:return\"[] dddd [] LT\"}},sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",d:\"\",dd:\"%d \",M:\"\",MM:\"%d \",y:\"\",yy:\"%d \"},ordinalParse:/\\d{1,2}-(|||||)/,ordinal:function(e){var a=e%10,t=e%100;return 0===e?e+\"-\":0===t?e+\"-\":t>10&&t<20?e+\"-\":1===a?e+\"-\":2===a?e+\"-\":7===a||8===a?e+\"-\":e+\"-\"},week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"mk\",\"mk\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"mk\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:function(e){return\"+ \"+e},noEventsMessage:\"   \"})}(),function(){!function(){var e=a.defineLocale(\"ms\",{months:\"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember\".split(\"_\"),monthsShort:\"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis\".split(\"_\"),weekdays:\"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu\".split(\"_\"),weekdaysShort:\"Ahd_Isn_Sel_Rab_Kha_Jum_Sab\".split(\"_\"),weekdaysMin:\"Ah_Is_Sl_Rb_Km_Jm_Sb\".split(\"_\"),longDateFormat:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [pukul] HH.mm\",LLLL:\"dddd, D MMMM YYYY [pukul] HH.mm\"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,a){return 12===e&&(e=0),\"pagi\"===a?e:\"tengahari\"===a?e>=11?e:e+12:\"petang\"===a||\"malam\"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?\"pagi\":e<15?\"tengahari\":e<19?\"petang\":\"malam\"},calendar:{sameDay:\"[Hari ini pukul] LT\",nextDay:\"[Esok pukul] LT\",nextWeek:\"dddd [pukul] LT\",lastDay:\"[Kelmarin pukul] LT\",lastWeek:\"dddd [lepas pukul] LT\",sameElse:\"L\"},relativeTime:{future:\"dalam %s\",past:\"%s yang lepas\",s:\"beberapa saat\",m:\"seminit\",mm:\"%d minit\",h:\"sejam\",hh:\"%d jam\",d:\"sehari\",dd:\"%d hari\",M:\"sebulan\",MM:\"%d bulan\",y:\"setahun\",yy:\"%d tahun\"},week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"ms\",\"ms\",{closeText:\"Tutup\",prevText:\"&#x3C;Sebelum\",nextText:\"Selepas&#x3E;\",currentText:\"hari ini\",monthNames:[\"Januari\",\"Februari\",\"Mac\",\"April\",\"Mei\",\"Jun\",\"Julai\",\"Ogos\",\"September\",\"Oktober\",\"November\",\"Disember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mac\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Ogo\",\"Sep\",\"Okt\",\"Nov\",\"Dis\"],dayNames:[\"Ahad\",\"Isnin\",\"Selasa\",\"Rabu\",\"Khamis\",\"Jumaat\",\"Sabtu\"],dayNamesShort:[\"Aha\",\"Isn\",\"Sel\",\"Rab\",\"kha\",\"Jum\",\"Sab\"],dayNamesMin:[\"Ah\",\"Is\",\"Se\",\"Ra\",\"Kh\",\"Ju\",\"Sa\"],weekHeader:\"Mg\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ms\",{buttonText:{month:\"Bulan\",week:\"Minggu\",day:\"Hari\",list:\"Agenda\"},allDayText:\"Sepanjang hari\",eventLimitText:function(e){return\"masih ada \"+e+\" acara\"},noEventsMessage:\"Tiada peristiwa untuk dipaparkan\"})}(),function(){!function(){var e=a.defineLocale(\"ms-my\",{months:\"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember\".split(\"_\"),monthsShort:\"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis\".split(\"_\"),weekdays:\"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu\".split(\"_\"),weekdaysShort:\"Ahd_Isn_Sel_Rab_Kha_Jum_Sab\".split(\"_\"),weekdaysMin:\"Ah_Is_Sl_Rb_Km_Jm_Sb\".split(\"_\"),longDateFormat:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [pukul] HH.mm\",LLLL:\"dddd, D MMMM YYYY [pukul] HH.mm\"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,a){return 12===e&&(e=0),\"pagi\"===a?e:\"tengahari\"===a?e>=11?e:e+12:\"petang\"===a||\"malam\"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?\"pagi\":e<15?\"tengahari\":e<19?\"petang\":\"malam\"},calendar:{sameDay:\"[Hari ini pukul] LT\",nextDay:\"[Esok pukul] LT\",nextWeek:\"dddd [pukul] LT\",lastDay:\"[Kelmarin pukul] LT\",lastWeek:\"dddd [lepas pukul] LT\",sameElse:\"L\"},relativeTime:{future:\"dalam %s\",past:\"%s yang lepas\",s:\"beberapa saat\",m:\"seminit\",mm:\"%d minit\",h:\"sejam\",hh:\"%d jam\",d:\"sehari\",dd:\"%d hari\",M:\"sebulan\",MM:\"%d bulan\",y:\"setahun\",yy:\"%d tahun\"},week:{dow:1,doy:7}});return e}(),e.fullCalendar.datepickerLocale(\"ms-my\",\"ms\",{closeText:\"Tutup\",prevText:\"&#x3C;Sebelum\",nextText:\"Selepas&#x3E;\",currentText:\"hari ini\",monthNames:[\"Januari\",\"Februari\",\"Mac\",\"April\",\"Mei\",\"Jun\",\"Julai\",\"Ogos\",\"September\",\"Oktober\",\"November\",\"Disember\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mac\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Ogo\",\"Sep\",\"Okt\",\"Nov\",\"Dis\"],dayNames:[\"Ahad\",\"Isnin\",\"Selasa\",\"Rabu\",\"Khamis\",\"Jumaat\",\"Sabtu\"],dayNamesShort:[\"Aha\",\"Isn\",\"Sel\",\"Rab\",\"kha\",\"Jum\",\"Sab\"],dayNamesMin:[\"Ah\",\"Is\",\"Se\",\"Ra\",\"Kh\",\"Ju\",\"Sa\"],weekHeader:\"Mg\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ms-my\",{buttonText:{month:\"Bulan\",week:\"Minggu\",day:\"Hari\",list:\"Agenda\"},allDayText:\"Sepanjang hari\",eventLimitText:function(e){return\"masih ada \"+e+\" acara\"},noEventsMessage:\"Tiada peristiwa untuk dipaparkan\"})}(),function(){!function(){var e=a.defineLocale(\"nb\",{months:\"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember\".split(\"_\"),monthsShort:\"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.\".split(\"_\"),monthsParseExact:!0,weekdays:\"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag\".split(\"_\"),weekdaysShort:\"s._ma._ti._on._to._fr._l.\".split(\"_\"),weekdaysMin:\"s_ma_ti_on_to_fr_l\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY [kl.] HH:mm\",LLLL:\"dddd D. MMMM YYYY [kl.] HH:mm\"},calendar:{sameDay:\"[i dag kl.] LT\",nextDay:\"[i morgen kl.] LT\",nextWeek:\"dddd [kl.] LT\",lastDay:\"[i gr kl.] LT\",lastWeek:\"[forrige] dddd [kl.] LT\",sameElse:\"L\"},relativeTime:{future:\"om %s\",past:\"%s siden\",s:\"noen sekunder\",m:\"ett minutt\",mm:\"%d minutter\",h:\"en time\",hh:\"%d timer\",d:\"en dag\",dd:\"%d dager\",M:\"en mned\",MM:\"%d mneder\",y:\"ett r\",yy:\"%d r\"},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"nb\",\"nb\",{closeText:\"Lukk\",prevText:\"&#xAB;Forrige\",nextText:\"Neste&#xBB;\",currentText:\"I dag\",monthNames:[\"januar\",\"februar\",\"mars\",\"april\",\"mai\",\"juni\",\"juli\",\"august\",\"september\",\"oktober\",\"november\",\"desember\"],monthNamesShort:[\"jan\",\"feb\",\"mar\",\"apr\",\"mai\",\"jun\",\"jul\",\"aug\",\"sep\",\"okt\",\"nov\",\"des\"],dayNamesShort:[\"sn\",\"man\",\"tir\",\"ons\",\"tor\",\"fre\",\"lr\"],dayNames:[\"sndag\",\"mandag\",\"tirsdag\",\"onsdag\",\"torsdag\",\"fredag\",\"lrdag\"],dayNamesMin:[\"s\",\"ma\",\"ti\",\"on\",\"to\",\"fr\",\"l\"],weekHeader:\"Uke\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"nb\",{buttonText:{month:\"Mned\",week:\"Uke\",day:\"Dag\",list:\"Agenda\"},allDayText:\"Hele dagen\",eventLimitText:\"til\",noEventsMessage:\"Ingen hendelser  vise\"})}(),function(){!function(){var e=\"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.\".split(\"_\"),t=\"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec\".split(\"_\"),n=a.defineLocale(\"nl\",{months:\"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december\".split(\"_\"),monthsShort:function(a,n){return/-MMM-/.test(n)?t[a.month()]:e[a.month()]},monthsParseExact:!0,weekdays:\"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag\".split(\"_\"),weekdaysShort:\"zo._ma._di._wo._do._vr._za.\".split(\"_\"),weekdaysMin:\"Zo_Ma_Di_Wo_Do_Vr_Za\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD-MM-YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[vandaag om] LT\",nextDay:\"[morgen om] LT\",nextWeek:\"dddd [om] LT\",lastDay:\"[gisteren om] LT\",lastWeek:\"[afgelopen] dddd [om] LT\",sameElse:\"L\"},relativeTime:{future:\"over %s\",past:\"%s geleden\",s:\"een paar seconden\",m:\"n minuut\",mm:\"%d minuten\",h:\"n uur\",hh:\"%d uur\",d:\"n dag\",dd:\"%d dagen\",M:\"n maand\",MM:\"%d maanden\",y:\"n jaar\",yy:\"%d jaar\"},ordinalParse:/\\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?\"ste\":\"de\")},week:{dow:1,doy:4}});return n}(),e.fullCalendar.datepickerLocale(\"nl\",\"nl\",{closeText:\"Sluiten\",prevText:\"\",nextText:\"\",currentText:\"Vandaag\",monthNames:[\"januari\",\"februari\",\"maart\",\"april\",\"mei\",\"juni\",\"juli\",\"augustus\",\"september\",\"oktober\",\"november\",\"december\"],monthNamesShort:[\"jan\",\"feb\",\"mrt\",\"apr\",\"mei\",\"jun\",\"jul\",\"aug\",\"sep\",\"okt\",\"nov\",\"dec\"],dayNames:[\"zondag\",\"maandag\",\"dinsdag\",\"woensdag\",\"donderdag\",\"vrijdag\",\"zaterdag\"],dayNamesShort:[\"zon\",\"maa\",\"din\",\"woe\",\"don\",\"vri\",\"zat\"],dayNamesMin:[\"zo\",\"ma\",\"di\",\"wo\",\"do\",\"vr\",\"za\"],weekHeader:\"Wk\",dateFormat:\"dd-mm-yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"nl\",{buttonText:{month:\"Maand\",week:\"Week\",day:\"Dag\",list:\"Agenda\"},allDayText:\"Hele dag\",eventLimitText:\"extra\",noEventsMessage:\"Geen evenementen om te laten zien\"})}(),function(){!function(){var e=a.defineLocale(\"nn\",{months:\"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des\".split(\"_\"),weekdays:\"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag\".split(\"_\"),weekdaysShort:\"sun_mn_tys_ons_tor_fre_lau\".split(\"_\"),weekdaysMin:\"su_m_ty_on_to_fr_l\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY [kl.] H:mm\",LLLL:\"dddd D. MMMM YYYY [kl.] HH:mm\"},calendar:{sameDay:\"[I dag klokka] LT\",nextDay:\"[I morgon klokka] LT\",nextWeek:\"dddd [klokka] LT\",lastDay:\"[I gr klokka] LT\",lastWeek:\"[Fregande] dddd [klokka] LT\",sameElse:\"L\"},relativeTime:{future:\"om %s\",past:\"%s sidan\",s:\"nokre sekund\",m:\"eit minutt\",mm:\"%d minutt\",h:\"ein time\",hh:\"%d timar\",d:\"ein dag\",dd:\"%d dagar\",M:\"ein mnad\",MM:\"%d mnader\",y:\"eit r\",yy:\"%d r\"},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"nn\",\"nn\",{closeText:\"Lukk\",prevText:\"&#xAB;Frre\",nextText:\"Neste&#xBB;\",currentText:\"I dag\",monthNames:[\"januar\",\"februar\",\"mars\",\"april\",\"mai\",\"juni\",\"juli\",\"august\",\"september\",\"oktober\",\"november\",\"desember\"],monthNamesShort:[\"jan\",\"feb\",\"mar\",\"apr\",\"mai\",\"jun\",\"jul\",\"aug\",\"sep\",\"okt\",\"nov\",\"des\"],dayNamesShort:[\"sun\",\"mn\",\"tys\",\"ons\",\"tor\",\"fre\",\"lau\"],dayNames:[\"sundag\",\"mndag\",\"tysdag\",\"onsdag\",\"torsdag\",\"fredag\",\"laurdag\"],dayNamesMin:[\"su\",\"m\",\"ty\",\"on\",\"to\",\"fr\",\"la\"],weekHeader:\"Veke\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"nn\",{buttonText:{month:\"Mnad\",week:\"Veke\",day:\"Dag\",list:\"Agenda\"},allDayText:\"Heile dagen\",eventLimitText:\"til\",noEventsMessage:\"Ingen hendelser  vise\"})}(),function(){!function(){function e(e){return e%10<5&&e%10>1&&~~(e/10)%10!==1}function t(a,t,n){var r=a+\" \";switch(n){case\"m\":return t?\"minuta\":\"minut\";case\"mm\":return r+(e(a)?\"minuty\":\"minut\");case\"h\":return t?\"godzina\":\"godzin\";case\"hh\":return r+(e(a)?\"godziny\":\"godzin\");case\"MM\":return r+(e(a)?\"miesice\":\"miesicy\");case\"yy\":return r+(e(a)?\"lata\":\"lat\")}}var n=\"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie\".split(\"_\"),r=\"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia\".split(\"_\"),s=a.defineLocale(\"pl\",{months:function(e,a){return\"\"===a?\"(\"+r[e.month()]+\"|\"+n[e.month()]+\")\":/D MMMM/.test(a)?r[e.month()]:n[e.month()]},monthsShort:\"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru\".split(\"_\"),weekdays:\"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota\".split(\"_\"),weekdaysShort:\"nie_pon_wt_r_czw_pt_sb\".split(\"_\"),weekdaysMin:\"Nd_Pn_Wt_r_Cz_Pt_So\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Dzi o] LT\",nextDay:\"[Jutro o] LT\",nextWeek:\"[W] dddd [o] LT\",lastDay:\"[Wczoraj o] LT\",lastWeek:function(){switch(this.day()){case 0:return\"[W zesz niedziel o] LT\";case 3:return\"[W zesz rod o] LT\";case 6:return\"[W zesz sobot o] LT\";default:return\"[W zeszy] dddd [o] LT\"}},sameElse:\"L\"},relativeTime:{future:\"za %s\",past:\"%s temu\",s:\"kilka sekund\",m:t,mm:t,h:t,hh:t,d:\"1 dzie\",dd:\"%d dni\",M:\"miesic\",MM:t,y:\"rok\",yy:t},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return s}(),e.fullCalendar.datepickerLocale(\"pl\",\"pl\",{closeText:\"Zamknij\",prevText:\"&#x3C;Poprzedni\",nextText:\"Nastpny&#x3E;\",currentText:\"Dzi\",monthNames:[\"Stycze\",\"Luty\",\"Marzec\",\"Kwiecie\",\"Maj\",\"Czerwiec\",\"Lipiec\",\"Sierpie\",\"Wrzesie\",\"Padziernik\",\"Listopad\",\"Grudzie\"],monthNamesShort:[\"Sty\",\"Lu\",\"Mar\",\"Kw\",\"Maj\",\"Cze\",\"Lip\",\"Sie\",\"Wrz\",\"Pa\",\"Lis\",\"Gru\"],dayNames:[\"Niedziela\",\"Poniedziaek\",\"Wtorek\",\"roda\",\"Czwartek\",\"Pitek\",\"Sobota\"],dayNamesShort:[\"Nie\",\"Pn\",\"Wt\",\"r\",\"Czw\",\"Pt\",\"So\"],dayNamesMin:[\"N\",\"Pn\",\"Wt\",\"r\",\"Cz\",\"Pt\",\"So\"],weekHeader:\"Tydz\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"pl\",{buttonText:{month:\"Miesic\",week:\"Tydzie\",day:\"Dzie\",list:\"Plan dnia\"},allDayText:\"Cay dzie\",eventLimitText:\"wicej\",noEventsMessage:\"Brak wydarze do wywietlenia\"})}(),function(){!function(){var e=a.defineLocale(\"pt\",{months:\"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro\".split(\"_\"),monthsShort:\"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez\".split(\"_\"),weekdays:\"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado\".split(\"_\"),weekdaysShort:\"Dom_Seg_Ter_Qua_Qui_Sex_Sb\".split(\"_\"),weekdaysMin:\"Dom_2_3_4_5_6_Sb\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY HH:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY HH:mm\"},calendar:{sameDay:\"[Hoje s] LT\",nextDay:\"[Amanh s] LT\",nextWeek:\"dddd [s] LT\",lastDay:\"[Ontem s] LT\",lastWeek:function(){return 0===this.day()||6===this.day()?\"[ltimo] dddd [s] LT\":\"[ltima] dddd [s] LT\"},sameElse:\"L\"},relativeTime:{future:\"em %s\",past:\"h %s\",s:\"segundos\",m:\"um minuto\",mm:\"%d minutos\",h:\"uma hora\",hh:\"%d horas\",d:\"um dia\",dd:\"%d dias\",M:\"um ms\",MM:\"%d meses\",y:\"um ano\",yy:\"%d anos\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\",week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"pt\",\"pt\",{closeText:\"Fechar\",prevText:\"Anterior\",nextText:\"Seguinte\",currentText:\"Hoje\",monthNames:[\"Janeiro\",\"Fevereiro\",\"Maro\",\"Abril\",\"Maio\",\"Junho\",\"Julho\",\"Agosto\",\"Setembro\",\"Outubro\",\"Novembro\",\"Dezembro\"],monthNamesShort:[\"Jan\",\"Fev\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Out\",\"Nov\",\"Dez\"],dayNames:[\"Domingo\",\"Segunda-feira\",\"Tera-feira\",\"Quarta-feira\",\"Quinta-feira\",\"Sexta-feira\",\"Sbado\"],dayNamesShort:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sb\"],dayNamesMin:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sb\"],weekHeader:\"Sem\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"pt\",{buttonText:{month:\"Ms\",week:\"Semana\",day:\"Dia\",list:\"Agenda\"},allDayText:\"Todo o dia\",eventLimitText:\"mais\",noEventsMessage:\"No h eventos para mostrar\"})}(),function(){!function(){var e=a.defineLocale(\"pt-br\",{months:\"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro\".split(\"_\"),monthsShort:\"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez\".split(\"_\"),weekdays:\"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado\".split(\"_\"),weekdaysShort:\"Dom_Seg_Ter_Qua_Qui_Sex_Sb\".split(\"_\"),weekdaysMin:\"Dom_2_3_4_5_6_Sb\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY [s] HH:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY [s] HH:mm\"},calendar:{sameDay:\"[Hoje s] LT\",nextDay:\"[Amanh s] LT\",nextWeek:\"dddd [s] LT\",lastDay:\"[Ontem s] LT\",lastWeek:function(){return 0===this.day()||6===this.day()?\"[ltimo] dddd [s] LT\":\"[ltima] dddd [s] LT\"},sameElse:\"L\"},relativeTime:{future:\"em %s\",past:\"%s atrs\",s:\"poucos segundos\",m:\"um minuto\",mm:\"%d minutos\",h:\"uma hora\",hh:\"%d horas\",d:\"um dia\",dd:\"%d dias\",M:\"um ms\",MM:\"%d meses\",y:\"um ano\",yy:\"%d anos\"},ordinalParse:/\\d{1,2}/,ordinal:\"%d\"});return e}(),e.fullCalendar.datepickerLocale(\"pt-br\",\"pt-BR\",{closeText:\"Fechar\",prevText:\"&#x3C;Anterior\",nextText:\"Prximo&#x3E;\",currentText:\"Hoje\",monthNames:[\"Janeiro\",\"Fevereiro\",\"Maro\",\"Abril\",\"Maio\",\"Junho\",\"Julho\",\"Agosto\",\"Setembro\",\"Outubro\",\"Novembro\",\"Dezembro\"],monthNamesShort:[\"Jan\",\"Fev\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Out\",\"Nov\",\"Dez\"],dayNames:[\"Domingo\",\"Segunda-feira\",\"Tera-feira\",\"Quarta-feira\",\"Quinta-feira\",\"Sexta-feira\",\"Sbado\"],dayNamesShort:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sb\"],dayNamesMin:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sb\"],\r\nweekHeader:\"Sm\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"pt-br\",{buttonText:{month:\"Ms\",week:\"Semana\",day:\"Dia\",list:\"Compromissos\"},allDayText:\"dia inteiro\",eventLimitText:function(e){return\"mais +\"+e},noEventsMessage:\"No h eventos para mostrar\"})}(),function(){!function(){function e(e,a,t){var n={mm:\"minute\",hh:\"ore\",dd:\"zile\",MM:\"luni\",yy:\"ani\"},r=\" \";return(e%100>=20||e>=100&&e%100===0)&&(r=\" de \"),e+r+n[t]}var t=a.defineLocale(\"ro\",{months:\"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie\".split(\"_\"),monthsShort:\"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.\".split(\"_\"),monthsParseExact:!0,weekdays:\"duminic_luni_mari_miercuri_joi_vineri_smbt\".split(\"_\"),weekdaysShort:\"Dum_Lun_Mar_Mie_Joi_Vin_Sm\".split(\"_\"),weekdaysMin:\"Du_Lu_Ma_Mi_Jo_Vi_S\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY H:mm\",LLLL:\"dddd, D MMMM YYYY H:mm\"},calendar:{sameDay:\"[azi la] LT\",nextDay:\"[mine la] LT\",nextWeek:\"dddd [la] LT\",lastDay:\"[ieri la] LT\",lastWeek:\"[fosta] dddd [la] LT\",sameElse:\"L\"},relativeTime:{future:\"peste %s\",past:\"%s n urm\",s:\"cteva secunde\",m:\"un minut\",mm:e,h:\"o or\",hh:e,d:\"o zi\",dd:e,M:\"o lun\",MM:e,y:\"un an\",yy:e},week:{dow:1,doy:7}});return t}(),e.fullCalendar.datepickerLocale(\"ro\",\"ro\",{closeText:\"nchide\",prevText:\"&#xAB; Luna precedent\",nextText:\"Luna urmtoare &#xBB;\",currentText:\"Azi\",monthNames:[\"Ianuarie\",\"Februarie\",\"Martie\",\"Aprilie\",\"Mai\",\"Iunie\",\"Iulie\",\"August\",\"Septembrie\",\"Octombrie\",\"Noiembrie\",\"Decembrie\"],monthNamesShort:[\"Ian\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Iun\",\"Iul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],dayNames:[\"Duminic\",\"Luni\",\"Mari\",\"Miercuri\",\"Joi\",\"Vineri\",\"Smbt\"],dayNamesShort:[\"Dum\",\"Lun\",\"Mar\",\"Mie\",\"Joi\",\"Vin\",\"Sm\"],dayNamesMin:[\"Du\",\"Lu\",\"Ma\",\"Mi\",\"Jo\",\"Vi\",\"S\"],weekHeader:\"Spt\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ro\",{buttonText:{prev:\"precedent\",next:\"urmtoare\",month:\"Lun\",week:\"Sptmn\",day:\"Zi\",list:\"Agend\"},allDayText:\"Toat ziua\",eventLimitText:function(e){return\"+alte \"+e},noEventsMessage:\"Nu exist evenimente de afiat\"})}(),function(){!function(){function e(e,a){var t=e.split(\"_\");return a%10===1&&a%100!==11?t[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?t[1]:t[2]}function t(a,t,n){var r={mm:t?\"__\":\"__\",hh:\"__\",dd:\"__\",MM:\"__\",yy:\"__\"};return\"m\"===n?t?\"\":\"\":a+\" \"+e(r[n],+a)}var n=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],r=a.defineLocale(\"ru\",{months:{format:\"___________\".split(\"_\"),standalone:\"___________\".split(\"_\")},monthsShort:{format:\"._._._.____._._._._.\".split(\"_\"),standalone:\"._.__.____._._._._.\".split(\"_\")},weekdays:{standalone:\"______\".split(\"_\"),format:\"______\".split(\"_\"),isFormat:/\\[ ?[] ?(?:||)? ?\\] ?dddd/},weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^([]|\\.?|[]|?\\.?|?|\\.?|[]|\\.?|[]|[]|\\.?|[]|\\.?|?|\\.?|[]|?\\.?|[]|\\.?|[]|?\\.?|[]|\\.?)/i,monthsShortRegex:/^([]|\\.?|[]|?\\.?|?|\\.?|[]|\\.?|[]|[]|\\.?|[]|\\.?|?|\\.?|[]|?\\.?|[]|\\.?|[]|?\\.?|[]|\\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\\.|?\\.|[.]|\\.|[]|[.]|[.]|\\.|?\\.|\\.|?\\.|\\.)/i,longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY .\",LLL:\"D MMMM YYYY ., HH:mm\",LLLL:\"dddd, D MMMM YYYY ., HH:mm\"},calendar:{sameDay:\"[ ] LT\",nextDay:\"[ ] LT\",lastDay:\"[ ] LT\",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?\"[] dddd [] LT\":\"[] dddd [] LT\";switch(this.day()){case 0:return\"[ ] dddd [] LT\";case 1:case 2:case 4:return\"[ ] dddd [] LT\";case 3:case 5:case 6:return\"[ ] dddd [] LT\"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?\"[] dddd [] LT\":\"[] dddd [] LT\";switch(this.day()){case 0:return\"[ ] dddd [] LT\";case 1:case 2:case 4:return\"[ ] dddd [] LT\";case 3:case 5:case 6:return\"[ ] dddd [] LT\"}},sameElse:\"L\"},relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:t,mm:t,h:\"\",hh:t,d:\"\",dd:t,M:\"\",MM:t,y:\"\",yy:t},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,a,t){return e<4?\"\":e<12?\"\":e<17?\"\":\"\"},ordinalParse:/\\d{1,2}-(||)/,ordinal:function(e,a){switch(a){case\"M\":case\"d\":case\"DDD\":return e+\"-\";case\"D\":return e+\"-\";case\"w\":case\"W\":return e+\"-\";default:return e}},week:{dow:1,doy:7}});return r}(),e.fullCalendar.datepickerLocale(\"ru\",\"ru\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"ru\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\" \"},allDayText:\" \",eventLimitText:function(e){return\"+  \"+e},noEventsMessage:\"   \"})}(),function(){!function(){function e(e){return e>1&&e<5}function t(a,t,n,r){var s=a+\" \";switch(n){case\"s\":return t||r?\"pr seknd\":\"pr sekundami\";case\"m\":return t?\"minta\":r?\"mintu\":\"mintou\";case\"mm\":return t||r?s+(e(a)?\"minty\":\"mint\"):s+\"mintami\";case\"h\":return t?\"hodina\":r?\"hodinu\":\"hodinou\";case\"hh\":return t||r?s+(e(a)?\"hodiny\":\"hodn\"):s+\"hodinami\";case\"d\":return t||r?\"de\":\"dom\";case\"dd\":return t||r?s+(e(a)?\"dni\":\"dn\"):s+\"dami\";case\"M\":return t||r?\"mesiac\":\"mesiacom\";case\"MM\":return t||r?s+(e(a)?\"mesiace\":\"mesiacov\"):s+\"mesiacmi\";case\"y\":return t||r?\"rok\":\"rokom\";case\"yy\":return t||r?s+(e(a)?\"roky\":\"rokov\"):s+\"rokmi\"}}var n=\"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december\".split(\"_\"),r=\"jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec\".split(\"_\"),s=a.defineLocale(\"sk\",{months:n,monthsShort:r,weekdays:\"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota\".split(\"_\"),weekdaysShort:\"ne_po_ut_st_t_pi_so\".split(\"_\"),weekdaysMin:\"ne_po_ut_st_t_pi_so\".split(\"_\"),longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd D. MMMM YYYY H:mm\"},calendar:{sameDay:\"[dnes o] LT\",nextDay:\"[zajtra o] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[v nedeu o] LT\";case 1:case 2:return\"[v] dddd [o] LT\";case 3:return\"[v stredu o] LT\";case 4:return\"[vo tvrtok o] LT\";case 5:return\"[v piatok o] LT\";case 6:return\"[v sobotu o] LT\"}},lastDay:\"[vera o] LT\",lastWeek:function(){switch(this.day()){case 0:return\"[minul nedeu o] LT\";case 1:case 2:return\"[minul] dddd [o] LT\";case 3:return\"[minul stredu o] LT\";case 4:case 5:return\"[minul] dddd [o] LT\";case 6:return\"[minul sobotu o] LT\"}},sameElse:\"L\"},relativeTime:{future:\"za %s\",past:\"pred %s\",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}});return s}(),e.fullCalendar.datepickerLocale(\"sk\",\"sk\",{closeText:\"Zavrie\",prevText:\"&#x3C;Predchdzajci\",nextText:\"Nasledujci&#x3E;\",currentText:\"Dnes\",monthNames:[\"janur\",\"februr\",\"marec\",\"aprl\",\"mj\",\"jn\",\"jl\",\"august\",\"september\",\"oktber\",\"november\",\"december\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mj\",\"Jn\",\"Jl\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],dayNames:[\"nedea\",\"pondelok\",\"utorok\",\"streda\",\"tvrtok\",\"piatok\",\"sobota\"],dayNamesShort:[\"Ned\",\"Pon\",\"Uto\",\"Str\",\"tv\",\"Pia\",\"Sob\"],dayNamesMin:[\"Ne\",\"Po\",\"Ut\",\"St\",\"t\",\"Pia\",\"So\"],weekHeader:\"Ty\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"sk\",{buttonText:{month:\"Mesiac\",week:\"Tde\",day:\"De\",list:\"Rozvrh\"},allDayText:\"Cel de\",eventLimitText:function(e){return\"+alie: \"+e},noEventsMessage:\"iadne akcie na zobrazenie\"})}(),function(){!function(){function e(e,a,t,n){var r=e+\" \";switch(t){case\"s\":return a||n?\"nekaj sekund\":\"nekaj sekundami\";case\"m\":return a?\"ena minuta\":\"eno minuto\";case\"mm\":return r+=1===e?a?\"minuta\":\"minuto\":2===e?a||n?\"minuti\":\"minutama\":e<5?a||n?\"minute\":\"minutami\":a||n?\"minut\":\"minutami\";case\"h\":return a?\"ena ura\":\"eno uro\";case\"hh\":return r+=1===e?a?\"ura\":\"uro\":2===e?a||n?\"uri\":\"urama\":e<5?a||n?\"ure\":\"urami\":a||n?\"ur\":\"urami\";case\"d\":return a||n?\"en dan\":\"enim dnem\";case\"dd\":return r+=1===e?a||n?\"dan\":\"dnem\":2===e?a||n?\"dni\":\"dnevoma\":a||n?\"dni\":\"dnevi\";case\"M\":return a||n?\"en mesec\":\"enim mesecem\";case\"MM\":return r+=1===e?a||n?\"mesec\":\"mesecem\":2===e?a||n?\"meseca\":\"mesecema\":e<5?a||n?\"mesece\":\"meseci\":a||n?\"mesecev\":\"meseci\";case\"y\":return a||n?\"eno leto\":\"enim letom\";case\"yy\":return r+=1===e?a||n?\"leto\":\"letom\":2===e?a||n?\"leti\":\"letoma\":e<5?a||n?\"leta\":\"leti\":a||n?\"let\":\"leti\"}}var t=a.defineLocale(\"sl\",{months:\"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.\".split(\"_\"),monthsParseExact:!0,weekdays:\"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota\".split(\"_\"),weekdaysShort:\"ned._pon._tor._sre._et._pet._sob.\".split(\"_\"),weekdaysMin:\"ne_po_to_sr_e_pe_so\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD. MM. YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd, D. MMMM YYYY H:mm\"},calendar:{sameDay:\"[danes ob] LT\",nextDay:\"[jutri ob] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[v] [nedeljo] [ob] LT\";case 3:return\"[v] [sredo] [ob] LT\";case 6:return\"[v] [soboto] [ob] LT\";case 1:case 2:case 4:case 5:return\"[v] dddd [ob] LT\"}},lastDay:\"[veraj ob] LT\",lastWeek:function(){switch(this.day()){case 0:return\"[prejnjo] [nedeljo] [ob] LT\";case 3:return\"[prejnjo] [sredo] [ob] LT\";case 6:return\"[prejnjo] [soboto] [ob] LT\";case 1:case 2:case 4:case 5:return\"[prejnji] dddd [ob] LT\"}},sameElse:\"L\"},relativeTime:{future:\"ez %s\",past:\"pred %s\",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:7}});return t}(),e.fullCalendar.datepickerLocale(\"sl\",\"sl\",{closeText:\"Zapri\",prevText:\"&#x3C;Prejnji\",nextText:\"Naslednji&#x3E;\",currentText:\"Trenutni\",monthNames:[\"Januar\",\"Februar\",\"Marec\",\"April\",\"Maj\",\"Junij\",\"Julij\",\"Avgust\",\"September\",\"Oktober\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Avg\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],dayNames:[\"Nedelja\",\"Ponedeljek\",\"Torek\",\"Sreda\",\"etrtek\",\"Petek\",\"Sobota\"],dayNamesShort:[\"Ned\",\"Pon\",\"Tor\",\"Sre\",\"et\",\"Pet\",\"Sob\"],dayNamesMin:[\"Ne\",\"Po\",\"To\",\"Sr\",\"e\",\"Pe\",\"So\"],weekHeader:\"Teden\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"sl\",{buttonText:{month:\"Mesec\",week:\"Teden\",day:\"Dan\",list:\"Dnevni red\"},allDayText:\"Ves dan\",eventLimitText:\"ve\",noEventsMessage:\"Ni dogodkov za prikaz\"})}(),function(){!function(){var e={words:{m:[\"jedan minut\",\"jedne minute\"],mm:[\"minut\",\"minute\",\"minuta\"],h:[\"jedan sat\",\"jednog sata\"],hh:[\"sat\",\"sata\",\"sati\"],dd:[\"dan\",\"dana\",\"dana\"],MM:[\"mesec\",\"meseca\",\"meseci\"],yy:[\"godina\",\"godine\",\"godina\"]},correctGrammaticalCase:function(e,a){return 1===e?a[0]:e>=2&&e<=4?a[1]:a[2]},translate:function(a,t,n){var r=e.words[n];return 1===n.length?t?r[0]:r[1]:a+\" \"+e.correctGrammaticalCase(a,r)}},t=a.defineLocale(\"sr\",{months:\"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar\".split(\"_\"),monthsShort:\"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.\".split(\"_\"),monthsParseExact:!0,weekdays:\"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota\".split(\"_\"),weekdaysShort:\"ned._pon._uto._sre._et._pet._sub.\".split(\"_\"),weekdaysMin:\"ne_po_ut_sr_e_pe_su\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD. MM. YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd, D. MMMM YYYY H:mm\"},calendar:{sameDay:\"[danas u] LT\",nextDay:\"[sutra u] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[u] [nedelju] [u] LT\";case 3:return\"[u] [sredu] [u] LT\";case 6:return\"[u] [subotu] [u] LT\";case 1:case 2:case 4:case 5:return\"[u] dddd [u] LT\"}},lastDay:\"[jue u] LT\",lastWeek:function(){var e=[\"[prole] [nedelje] [u] LT\",\"[prolog] [ponedeljka] [u] LT\",\"[prolog] [utorka] [u] LT\",\"[prole] [srede] [u] LT\",\"[prolog] [etvrtka] [u] LT\",\"[prolog] [petka] [u] LT\",\"[prole] [subote] [u] LT\"];return e[this.day()]},sameElse:\"L\"},relativeTime:{future:\"za %s\",past:\"pre %s\",s:\"nekoliko sekundi\",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:\"dan\",dd:e.translate,M:\"mesec\",MM:e.translate,y:\"godinu\",yy:e.translate},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:7}});return t}(),e.fullCalendar.datepickerLocale(\"sr\",\"sr\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"sr\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:function(e){return\"+  \"+e},noEventsMessage:\"   \"})}(),function(){!function(){var e={words:{m:[\" \",\" \"],mm:[\"\",\"\",\"\"],h:[\" \",\" \"],hh:[\"\",\"\",\"\"],dd:[\"\",\"\",\"\"],MM:[\"\",\"\",\"\"],yy:[\"\",\"\",\"\"]},correctGrammaticalCase:function(e,a){return 1===e?a[0]:e>=2&&e<=4?a[1]:a[2]},translate:function(a,t,n){var r=e.words[n];return 1===n.length?t?r[0]:r[1]:a+\" \"+e.correctGrammaticalCase(a,r)}},t=a.defineLocale(\"sr-cyrl\",{months:\"___________\".split(\"_\"),monthsShort:\"._._._.____._._._._.\".split(\"_\"),monthsParseExact:!0,weekdays:\"______\".split(\"_\"),weekdaysShort:\"._._._._._._.\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD. MM. YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd, D. MMMM YYYY H:mm\"},calendar:{sameDay:\"[ ] LT\",nextDay:\"[ ] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[] [] [] LT\";case 3:return\"[] [] [] LT\";case 6:return\"[] [] [] LT\";case 1:case 2:case 4:case 5:return\"[] dddd [] LT\"}},lastDay:\"[ ] LT\",lastWeek:function(){var e=[\"[] [] [] LT\",\"[] [] [] LT\",\"[] [] [] LT\",\"[] [] [] LT\",\"[] [] [] LT\",\"[] [] [] LT\",\"[] [] [] LT\"];return e[this.day()]},sameElse:\"L\"},relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:\"\",dd:e.translate,M:\"\",MM:e.translate,y:\"\",yy:e.translate},ordinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:7}});return t}(),e.fullCalendar.datepickerLocale(\"sr-cyrl\",\"sr\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"sr-cyrl\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\" \",eventLimitText:function(e){return\"+  \"+e},noEventsMessage:\"   \"})}(),function(){!function(){var e=a.defineLocale(\"sv\",{months:\"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec\".split(\"_\"),weekdays:\"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag\".split(\"_\"),weekdaysShort:\"sn_mn_tis_ons_tor_fre_lr\".split(\"_\"),weekdaysMin:\"s_m_ti_on_to_fr_l\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY-MM-DD\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [kl.] HH:mm\",LLLL:\"dddd D MMMM YYYY [kl.] HH:mm\",lll:\"D MMM YYYY HH:mm\",llll:\"ddd D MMM YYYY HH:mm\"},calendar:{sameDay:\"[Idag] LT\",nextDay:\"[Imorgon] LT\",lastDay:\"[Igr] LT\",nextWeek:\"[P] dddd LT\",lastWeek:\"[I] dddd[s] LT\",sameElse:\"L\"},relativeTime:{future:\"om %s\",past:\"fr %s sedan\",s:\"ngra sekunder\",m:\"en minut\",mm:\"%d minuter\",h:\"en timme\",hh:\"%d timmar\",d:\"en dag\",dd:\"%d dagar\",M:\"en mnad\",MM:\"%d mnader\",y:\"ett r\",yy:\"%d r\"},ordinalParse:/\\d{1,2}(e|a)/,ordinal:function(e){var a=e%10,t=1===~~(e%100/10)?\"e\":1===a?\"a\":2===a?\"a\":\"e\";return e+t},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"sv\",\"sv\",{closeText:\"Stng\",prevText:\"&#xAB;Frra\",nextText:\"Nsta&#xBB;\",currentText:\"Idag\",monthNames:[\"Januari\",\"Februari\",\"Mars\",\"April\",\"Maj\",\"Juni\",\"Juli\",\"Augusti\",\"September\",\"Oktober\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],dayNamesShort:[\"Sn\",\"Mn\",\"Tis\",\"Ons\",\"Tor\",\"Fre\",\"Lr\"],dayNames:[\"Sndag\",\"Mndag\",\"Tisdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lrdag\"],dayNamesMin:[\"S\",\"M\",\"Ti\",\"On\",\"To\",\"Fr\",\"L\"],weekHeader:\"Ve\",dateFormat:\"yy-mm-dd\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"sv\",{buttonText:{month:\"Mnad\",week:\"Vecka\",day:\"Dag\",list:\"Program\"},allDayText:\"Heldag\",eventLimitText:\"till\",noEventsMessage:\"Inga hndelser att visa\"})}(),function(){!function(){var e=a.defineLocale(\"th\",{months:\"___________\".split(\"_\"),monthsShort:\".._.._.._.._.._.._.._.._.._.._.._..\".split(\"_\"),monthsParseExact:!0,weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"._._._._._._.\".split(\"_\"),weekdaysParseExact:!0,longDateFormat:{LT:\"H  m \",LTS:\"H  m  s \",L:\"YYYY/MM/DD\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY  H  m \",LLLL:\"dddd D MMMM YYYY  H  m \"},meridiemParse:/|/,isPM:function(e){return\"\"===e},meridiem:function(e,a,t){return e<12?\"\":\"\"},calendar:{sameDay:\"[ ] LT\",nextDay:\"[ ] LT\",nextWeek:\"dddd[ ] LT\",lastDay:\"[ ] LT\",lastWeek:\"[]dddd[ ] LT\",sameElse:\"L\"},relativeTime:{future:\" %s\",past:\"%s\",s:\"\",m:\"1 \",mm:\"%d \",h:\"1 \",hh:\"%d \",d:\"1 \",dd:\"%d \",M:\"1 \",MM:\"%d \",y:\"1 \",yy:\"%d \"}});return e}(),e.fullCalendar.datepickerLocale(\"th\",\"th\",{closeText:\"\",prevText:\"&#xAB;&#xA0;\",nextText:\"&#xA0;&#xBB;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"..\",\"..\",\"..\",\"..\",\"..\",\"..\",\"..\",\"..\",\"..\",\"..\",\"..\",\"..\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\".\",\".\",\".\",\".\",\".\",\".\",\".\"],dayNamesMin:[\".\",\".\",\".\",\".\",\".\",\".\",\".\"],weekHeader:\"Wk\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"th\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\"\",eventLimitText:\"\",noEventsMessage:\"\"})}(),function(){!function(){var e={1:\"'inci\",5:\"'inci\",8:\"'inci\",70:\"'inci\",80:\"'inci\",2:\"'nci\",7:\"'nci\",20:\"'nci\",50:\"'nci\",3:\"'nc\",4:\"'nc\",100:\"'nc\",6:\"'nc\",9:\"'uncu\",10:\"'uncu\",30:\"'uncu\",60:\"'nc\",90:\"'nc\"},t=a.defineLocale(\"tr\",{months:\"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk\".split(\"_\"),monthsShort:\"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara\".split(\"_\"),weekdays:\"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi\".split(\"_\"),weekdaysShort:\"Paz_Pts_Sal_ar_Per_Cum_Cts\".split(\"_\"),weekdaysMin:\"Pz_Pt_Sa_a_Pe_Cu_Ct\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[bugn saat] LT\",nextDay:\"[yarn saat] LT\",nextWeek:\"[haftaya] dddd [saat] LT\",lastDay:\"[dn] LT\",lastWeek:\"[geen hafta] dddd [saat] LT\",sameElse:\"L\"},relativeTime:{future:\"%s sonra\",past:\"%s nce\",s:\"birka saniye\",m:\"bir dakika\",mm:\"%d dakika\",h:\"bir saat\",hh:\"%d saat\",d:\"bir gn\",dd:\"%d gn\",M:\"bir ay\",MM:\"%d ay\",y:\"bir yl\",yy:\"%d yl\"},ordinalParse:/\\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(a){if(0===a)return a+\"'nc\";var t=a%10,n=a%100-t,r=a>=100?100:null;return a+(e[t]||e[n]||e[r])},week:{dow:1,doy:7}});return t}(),e.fullCalendar.datepickerLocale(\"tr\",\"tr\",{closeText:\"kapat\",prevText:\"&#x3C;geri\",nextText:\"ileri&#x3e\",currentText:\"bugn\",monthNames:[\"Ocak\",\"ubat\",\"Mart\",\"Nisan\",\"Mays\",\"Haziran\",\"Temmuz\",\"Austos\",\"Eyll\",\"Ekim\",\"Kasm\",\"Aralk\"],monthNamesShort:[\"Oca\",\"ub\",\"Mar\",\"Nis\",\"May\",\"Haz\",\"Tem\",\"Au\",\"Eyl\",\"Eki\",\"Kas\",\"Ara\"],dayNames:[\"Pazar\",\"Pazartesi\",\"Sal\",\"aramba\",\"Perembe\",\"Cuma\",\"Cumartesi\"],dayNamesShort:[\"Pz\",\"Pt\",\"Sa\",\"a\",\"Pe\",\"Cu\",\"Ct\"],dayNamesMin:[\"Pz\",\"Pt\",\"Sa\",\"a\",\"Pe\",\"Cu\",\"Ct\"],weekHeader:\"Hf\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"tr\",{buttonText:{next:\"ileri\",month:\"Ay\",week:\"Hafta\",day:\"Gn\",list:\"Ajanda\"},allDayText:\"Tm gn\",eventLimitText:\"daha fazla\",noEventsMessage:\"Herhangi bir etkinlik grntlemek iin\"})}(),function(){!function(){function e(e,a){var t=e.split(\"_\");return a%10===1&&a%100!==11?t[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?t[1]:t[2]}function t(a,t,n){var r={mm:t?\"__\":\"__\",hh:t?\"__\":\"__\",dd:\"__\",MM:\"__\",yy:\"__\"};return\"m\"===n?t?\"\":\"\":\"h\"===n?t?\"\":\"\":a+\" \"+e(r[n],+a)}function n(e,a){var t={nominative:\"______\".split(\"_\"),accusative:\"______\".split(\"_\"),genitive:\"______\".split(\"_\")},n=/(\\[[]\\]) ?dddd/.test(a)?\"accusative\":/\\[?(?:|)? ?\\] ?dddd/.test(a)?\"genitive\":\"nominative\";return t[n][e.day()]}function r(e){return function(){return e+\"\"+(11===this.hours()?\"\":\"\")+\"] LT\"}}var s=a.defineLocale(\"uk\",{months:{format:\"___________\".split(\"_\"),standalone:\"___________\".split(\"_\")},monthsShort:\"___________\".split(\"_\"),weekdays:n,weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY .\",LLL:\"D MMMM YYYY ., HH:mm\",LLLL:\"dddd, D MMMM YYYY ., HH:mm\"},calendar:{sameDay:r(\"[ \"),nextDay:r(\"[ \"),lastDay:r(\"[ \"),nextWeek:r(\"[] dddd [\"),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r(\"[] dddd [\").call(this);case 1:case 2:case 4:return r(\"[] dddd [\").call(this)}},sameElse:\"L\"},relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:t,mm:t,h:\"\",hh:t,d:\"\",dd:t,M:\"\",MM:t,y:\"\",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,a,t){return e<4?\"\":e<12?\"\":e<17?\"\":\"\"},ordinalParse:/\\d{1,2}-(|)/,ordinal:function(e,a){switch(a){case\"M\":case\"d\":case\"DDD\":case\"w\":case\"W\":return e+\"-\";case\"D\":return e+\"-\";default:return e}},week:{dow:1,doy:7}});return s}(),e.fullCalendar.datepickerLocale(\"uk\",\"uk\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"dd.mm.yy\",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"uk\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\" \"},allDayText:\" \",eventLimitText:function(e){return\"+ \"+e+\"...\"},noEventsMessage:\"   \"})}(),function(){!function(){var e=a.defineLocale(\"vi\",{months:\"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12\".split(\"_\"),monthsShort:\"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12\".split(\"_\"),monthsParseExact:!0,weekdays:\"ch nht_th hai_th ba_th t_th nm_th su_th by\".split(\"_\"),weekdaysShort:\"CN_T2_T3_T4_T5_T6_T7\".split(\"_\"),weekdaysMin:\"CN_T2_T3_T4_T5_T6_T7\".split(\"_\"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,a,t){return e<12?t?\"sa\":\"SA\":t?\"ch\":\"CH\"},longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM [nm] YYYY\",LLL:\"D MMMM [nm] YYYY HH:mm\",LLLL:\"dddd, D MMMM [nm] YYYY HH:mm\",l:\"DD/M/YYYY\",ll:\"D MMM YYYY\",lll:\"D MMM YYYY HH:mm\",llll:\"ddd, D MMM YYYY HH:mm\"},calendar:{sameDay:\"[Hm nay lc] LT\",nextDay:\"[Ngy mai lc] LT\",nextWeek:\"dddd [tun ti lc] LT\",lastDay:\"[Hm qua lc] LT\",lastWeek:\"dddd [tun ri lc] LT\",sameElse:\"L\"},relativeTime:{future:\"%s ti\",past:\"%s trc\",s:\"vi giy\",m:\"mt pht\",mm:\"%d pht\",h:\"mt gi\",hh:\"%d gi\",d:\"mt ngy\",dd:\"%d ngy\",M:\"mt thng\",MM:\"%d thng\",y:\"mt nm\",yy:\"%d nm\"},ordinalParse:/\\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"vi\",\"vi\",{closeText:\"ng\",prevText:\"&#x3C;Trc\",nextText:\"Tip&#x3E;\",currentText:\"Hm nay\",monthNames:[\"Thng Mt\",\"Thng Hai\",\"Thng Ba\",\"Thng T\",\"Thng Nm\",\"Thng Su\",\"Thng By\",\"Thng Tm\",\"Thng Chn\",\"Thng Mi\",\"Thng Mi Mt\",\"Thng Mi Hai\"],monthNamesShort:[\"Thng 1\",\"Thng 2\",\"Thng 3\",\"Thng 4\",\"Thng 5\",\"Thng 6\",\"Thng 7\",\"Thng 8\",\"Thng 9\",\"Thng 10\",\"Thng 11\",\"Thng 12\"],dayNames:[\"Ch Nht\",\"Th Hai\",\"Th Ba\",\"Th T\",\"Th Nm\",\"Th Su\",\"Th By\"],dayNamesShort:[\"CN\",\"T2\",\"T3\",\"T4\",\"T5\",\"T6\",\"T7\"],dayNamesMin:[\"CN\",\"T2\",\"T3\",\"T4\",\"T5\",\"T6\",\"T7\"],weekHeader:\"Tu\",dateFormat:\"dd/mm/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"}),e.fullCalendar.locale(\"vi\",{buttonText:{month:\"Thng\",week:\"Tun\",day:\"Ngy\",list:\"Lch biu\"},allDayText:\"C ngy\",eventLimitText:function(e){return\"+ thm \"+e},noEventsMessage:\"Khng c s kin  hin th\"})}(),function(){!function(){var e=a.defineLocale(\"zh-cn\",{months:\"___________\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"Ahmm\",LTS:\"Ahms\",L:\"YYYY-MM-DD\",LL:\"YYYYMMMD\",LLL:\"YYYYMMMDAhmm\",LLLL:\"YYYYMMMDddddAhmm\",l:\"YYYY-MM-DD\",ll:\"YYYYMMMD\",lll:\"YYYYMMMDAhmm\",llll:\"YYYYMMMDddddAhmm\"},meridiemParse:/|||||/,meridiemHour:function(e,a){return 12===e&&(e=0),\"\"===a||\"\"===a||\"\"===a?e:\"\"===a||\"\"===a?e+12:e>=11?e:e+12},meridiem:function(e,a,t){var n=100*e+a;return n<600?\"\":n<900?\"\":n<1130?\"\":n<1230?\"\":n<1800?\"\":\"\"},calendar:{sameDay:function(){return 0===this.minutes()?\"[]Ah[]\":\"[]LT\"},nextDay:function(){return 0===this.minutes()?\"[]Ah[]\":\"[]LT\"},lastDay:function(){return 0===this.minutes()?\"[]Ah[]\":\"[]LT\"},nextWeek:function(){var e,t;return e=a().startOf(\"week\"),t=this.diff(e,\"days\")>=7?\"[]\":\"[]\",0===this.minutes()?t+\"dddAh\":t+\"dddAhmm\"},lastWeek:function(){var e,t;return e=a().startOf(\"week\"),t=this.unix()<e.unix()?\"[]\":\"[]\",0===this.minutes()?t+\"dddAh\":t+\"dddAhmm\"},sameElse:\"LL\"},ordinalParse:/\\d{1,2}(||)/,ordinal:function(e,a){switch(a){case\"d\":case\"D\":case\"DDD\":return e+\"\";case\"M\":return e+\"\";case\"w\":case\"W\":return e+\"\";default:return e}},relativeTime:{future:\"%s\",past:\"%s\",s:\"\",m:\"1 \",mm:\"%d \",h:\"1 \",hh:\"%d \",d:\"1 \",dd:\"%d \",M:\"1 \",MM:\"%d \",y:\"1 \",yy:\"%d \"},week:{dow:1,doy:4}});return e}(),e.fullCalendar.datepickerLocale(\"zh-cn\",\"zh-CN\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"yy-mm-dd\",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:\"\"}),e.fullCalendar.locale(\"zh-cn\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\"\",eventLimitText:function(e){return\" \"+e+\" \"},noEventsMessage:\"\"})}(),function(){!function(){var e=a.defineLocale(\"zh-tw\",{months:\"___________\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),longDateFormat:{LT:\"Ahmm\",LTS:\"Ahms\",L:\"YYYYMMMD\",LL:\"YYYYMMMD\",LLL:\"YYYYMMMDAhmm\",LLLL:\"YYYYMMMDddddAhmm\",l:\"YYYYMMMD\",ll:\"YYYYMMMD\",lll:\"YYYYMMMDAhmm\",llll:\"YYYYMMMDddddAhmm\"},meridiemParse:/|||||/,meridiemHour:function(e,a){return 12===e&&(e=0),\"\"===a||\"\"===a||\"\"===a?e:\"\"===a?e>=11?e:e+12:\"\"===a||\"\"===a?e+12:void 0},meridiem:function(e,a,t){var n=100*e+a;return n<600?\"\":n<900?\"\":n<1130?\"\":n<1230?\"\":n<1800?\"\":\"\"},calendar:{sameDay:\"[]LT\",nextDay:\"[]LT\",nextWeek:\"[]ddddLT\",lastDay:\"[]LT\",lastWeek:\"[]ddddLT\",sameElse:\"L\"},ordinalParse:/\\d{1,2}(||)/,ordinal:function(e,a){switch(a){case\"d\":case\"D\":case\"DDD\":return e+\"\";case\"M\":return e+\"\";case\"w\":case\"W\":return e+\"\";\r\ndefault:return e}},relativeTime:{future:\"%s\",past:\"%s\",s:\"\",m:\"1 \",mm:\"%d \",h:\"1 \",hh:\"%d \",d:\"1 \",dd:\"%d \",M:\"1 \",MM:\"%d \",y:\"1 \",yy:\"%d \"}});return e}(),e.fullCalendar.datepickerLocale(\"zh-tw\",\"zh-TW\",{closeText:\"\",prevText:\"&#x3C;\",nextText:\"&#x3E;\",currentText:\"\",monthNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],monthNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNames:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesShort:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],dayNamesMin:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],weekHeader:\"\",dateFormat:\"yy/mm/dd\",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:\"\"}),e.fullCalendar.locale(\"zh-tw\",{buttonText:{month:\"\",week:\"\",day:\"\",list:\"\"},allDayText:\"\",eventLimitText:\"\",noEventsMessage:\"\"})}(),a.locale(\"en\"),e.fullCalendar.locale(\"en\"),e.datepicker&&e.datepicker.setDefaults(e.datepicker.regional[\"\"])});","/*!\r\n * FullCalendar v3.0.1\r\n * Docs & License: http://fullcalendar.io/\r\n * (c) 2016 Adam Shaw\r\n */\r\n\r\n(function(factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine([ 'jquery', 'moment' ], factory);\r\n\t}\r\n\telse if (typeof exports === 'object') { // Node/CommonJS\r\n\t\tmodule.exports = factory(require('jquery'), require('moment'));\r\n\t}\r\n\telse {\r\n\t\tfactory(jQuery, moment);\r\n\t}\r\n})(function($, moment) {\r\n\r\n;;\r\n\r\nvar FC = $.fullCalendar = {\r\n\tversion: \"3.0.1\",\r\n\tinternalApiVersion: 6\r\n};\r\nvar fcViews = FC.views = {};\r\n\r\n\r\n$.fn.fullCalendar = function(options) {\r\n\tvar args = Array.prototype.slice.call(arguments, 1); // for a possible method call\r\n\tvar res = this; // what this function will return (this jQuery object by default)\r\n\r\n\tthis.each(function(i, _element) { // loop each DOM element involved\r\n\t\tvar element = $(_element);\r\n\t\tvar calendar = element.data('fullCalendar'); // get the existing calendar object (if any)\r\n\t\tvar singleRes; // the returned value of this single method call\r\n\r\n\t\t// a method call\r\n\t\tif (typeof options === 'string') {\r\n\t\t\tif (calendar && $.isFunction(calendar[options])) {\r\n\t\t\t\tsingleRes = calendar[options].apply(calendar, args);\r\n\t\t\t\tif (!i) {\r\n\t\t\t\t\tres = singleRes; // record the first method call result\r\n\t\t\t\t}\r\n\t\t\t\tif (options === 'destroy') { // for the destroy method, must remove Calendar object data\r\n\t\t\t\t\telement.removeData('fullCalendar');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// a new calendar initialization\r\n\t\telse if (!calendar) { // don't initialize twice\r\n\t\t\tcalendar = new Calendar(element, options);\r\n\t\t\telement.data('fullCalendar', calendar);\r\n\t\t\tcalendar.render();\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn res;\r\n};\r\n\r\n\r\nvar complexOptions = [ // names of options that are objects whose properties should be combined\r\n\t'header',\r\n\t'buttonText',\r\n\t'buttonIcons',\r\n\t'themeButtonIcons'\r\n];\r\n\r\n\r\n// Merges an array of option objects into a single object\r\nfunction mergeOptions(optionObjs) {\r\n\treturn mergeProps(optionObjs, complexOptions);\r\n}\r\n\r\n;;\r\n\r\n// exports\r\nFC.intersectRanges = intersectRanges;\r\nFC.applyAll = applyAll;\r\nFC.debounce = debounce;\r\nFC.isInt = isInt;\r\nFC.htmlEscape = htmlEscape;\r\nFC.cssToStr = cssToStr;\r\nFC.proxy = proxy;\r\nFC.capitaliseFirstLetter = capitaliseFirstLetter;\r\n\r\n\r\n/* FullCalendar-specific DOM Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\r\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\r\nfunction compensateScroll(rowEls, scrollbarWidths) {\r\n\tif (scrollbarWidths.left) {\r\n\t\trowEls.css({\r\n\t\t\t'border-left-width': 1,\r\n\t\t\t'margin-left': scrollbarWidths.left - 1\r\n\t\t});\r\n\t}\r\n\tif (scrollbarWidths.right) {\r\n\t\trowEls.css({\r\n\t\t\t'border-right-width': 1,\r\n\t\t\t'margin-right': scrollbarWidths.right - 1\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\r\n// Undoes compensateScroll and restores all borders/margins\r\nfunction uncompensateScroll(rowEls) {\r\n\trowEls.css({\r\n\t\t'margin-left': '',\r\n\t\t'margin-right': '',\r\n\t\t'border-left-width': '',\r\n\t\t'border-right-width': ''\r\n\t});\r\n}\r\n\r\n\r\n// Make the mouse cursor express that an event is not allowed in the current area\r\nfunction disableCursor() {\r\n\t$('body').addClass('fc-not-allowed');\r\n}\r\n\r\n\r\n// Returns the mouse cursor to its original look\r\nfunction enableCursor() {\r\n\t$('body').removeClass('fc-not-allowed');\r\n}\r\n\r\n\r\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\r\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\r\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and \r\n// reduces the available height.\r\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\r\n\r\n\t// *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\r\n\t// and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\r\n\r\n\tvar minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\r\n\tvar minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\r\n\tvar flexEls = []; // elements that are allowed to expand. array of DOM nodes\r\n\tvar flexOffsets = []; // amount of vertical space it takes up\r\n\tvar flexHeights = []; // actual css height\r\n\tvar usedHeight = 0;\r\n\r\n\tundistributeHeight(els); // give all elements their natural height\r\n\r\n\t// find elements that are below the recommended height (expandable).\r\n\t// important to query for heights in a single first pass (to avoid reflow oscillation).\r\n\tels.each(function(i, el) {\r\n\t\tvar minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\r\n\t\tvar naturalOffset = $(el).outerHeight(true);\r\n\r\n\t\tif (naturalOffset < minOffset) {\r\n\t\t\tflexEls.push(el);\r\n\t\t\tflexOffsets.push(naturalOffset);\r\n\t\t\tflexHeights.push($(el).height());\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// this element stretches past recommended height (non-expandable). mark the space as occupied.\r\n\t\t\tusedHeight += naturalOffset;\r\n\t\t}\r\n\t});\r\n\r\n\t// readjust the recommended height to only consider the height available to non-maxed-out rows.\r\n\tif (shouldRedistribute) {\r\n\t\tavailableHeight -= usedHeight;\r\n\t\tminOffset1 = Math.floor(availableHeight / flexEls.length);\r\n\t\tminOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\r\n\t}\r\n\r\n\t// assign heights to all expandable elements\r\n\t$(flexEls).each(function(i, el) {\r\n\t\tvar minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\r\n\t\tvar naturalOffset = flexOffsets[i];\r\n\t\tvar naturalHeight = flexHeights[i];\r\n\t\tvar newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\r\n\r\n\t\tif (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\r\n\t\t\t$(el).height(newHeight);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\n// Undoes distrubuteHeight, restoring all els to their natural height\r\nfunction undistributeHeight(els) {\r\n\tels.height('');\r\n}\r\n\r\n\r\n// Given `els`, a jQuery set of <td> cells, find the cell with the largest natural width and set the widths of all the\r\n// cells to be that width.\r\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\r\nfunction matchCellWidths(els) {\r\n\tvar maxInnerWidth = 0;\r\n\r\n\tels.find('> *').each(function(i, innerEl) {\r\n\t\tvar innerWidth = $(innerEl).outerWidth();\r\n\t\tif (innerWidth > maxInnerWidth) {\r\n\t\t\tmaxInnerWidth = innerWidth;\r\n\t\t}\r\n\t});\r\n\r\n\tmaxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\r\n\r\n\tels.width(maxInnerWidth);\r\n\r\n\treturn maxInnerWidth;\r\n}\r\n\r\n\r\n// Given one element that resides inside another,\r\n// Subtracts the height of the inner element from the outer element.\r\nfunction subtractInnerElHeight(outerEl, innerEl) {\r\n\tvar both = outerEl.add(innerEl);\r\n\tvar diff;\r\n\r\n\t// effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\r\n\tboth.css({\r\n\t\tposition: 'relative', // cause a reflow, which will force fresh dimension recalculation\r\n\t\tleft: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\r\n\t});\r\n\tdiff = outerEl.outerHeight() - innerEl.outerHeight(); // grab the dimensions\r\n\tboth.css({ position: '', left: '' }); // undo hack\r\n\r\n\treturn diff;\r\n}\r\n\r\n\r\n/* Element Geom Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nFC.getOuterRect = getOuterRect;\r\nFC.getClientRect = getClientRect;\r\nFC.getContentRect = getContentRect;\r\nFC.getScrollbarWidths = getScrollbarWidths;\r\n\r\n\r\n// borrowed from https://github.com/jquery/jquery-ui/blob/1.11.0/ui/core.js#L51\r\nfunction getScrollParent(el) {\r\n\tvar position = el.css('position'),\r\n\t\tscrollParent = el.parents().filter(function() {\r\n\t\t\tvar parent = $(this);\r\n\t\t\treturn (/(auto|scroll)/).test(\r\n\t\t\t\tparent.css('overflow') + parent.css('overflow-y') + parent.css('overflow-x')\r\n\t\t\t);\r\n\t\t}).eq(0);\r\n\r\n\treturn position === 'fixed' || !scrollParent.length ? $(el[0].ownerDocument || document) : scrollParent;\r\n}\r\n\r\n\r\n// Queries the outer bounding area of a jQuery element.\r\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\r\n// Origin is optional.\r\nfunction getOuterRect(el, origin) {\r\n\tvar offset = el.offset();\r\n\tvar left = offset.left - (origin ? origin.left : 0);\r\n\tvar top = offset.top - (origin ? origin.top : 0);\r\n\r\n\treturn {\r\n\t\tleft: left,\r\n\t\tright: left + el.outerWidth(),\r\n\t\ttop: top,\r\n\t\tbottom: top + el.outerHeight()\r\n\t};\r\n}\r\n\r\n\r\n// Queries the area within the margin/border/scrollbars of a jQuery element. Does not go within the padding.\r\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\r\n// Origin is optional.\r\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\r\nfunction getClientRect(el, origin) {\r\n\tvar offset = el.offset();\r\n\tvar scrollbarWidths = getScrollbarWidths(el);\r\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + scrollbarWidths.left - (origin ? origin.left : 0);\r\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + scrollbarWidths.top - (origin ? origin.top : 0);\r\n\r\n\treturn {\r\n\t\tleft: left,\r\n\t\tright: left + el[0].clientWidth, // clientWidth includes padding but NOT scrollbars\r\n\t\ttop: top,\r\n\t\tbottom: top + el[0].clientHeight // clientHeight includes padding but NOT scrollbars\r\n\t};\r\n}\r\n\r\n\r\n// Queries the area within the margin/border/padding of a jQuery element. Assumed not to have scrollbars.\r\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\r\n// Origin is optional.\r\nfunction getContentRect(el, origin) {\r\n\tvar offset = el.offset(); // just outside of border, margin not included\r\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + getCssFloat(el, 'padding-left') -\r\n\t\t(origin ? origin.left : 0);\r\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + getCssFloat(el, 'padding-top') -\r\n\t\t(origin ? origin.top : 0);\r\n\r\n\treturn {\r\n\t\tleft: left,\r\n\t\tright: left + el.width(),\r\n\t\ttop: top,\r\n\t\tbottom: top + el.height()\r\n\t};\r\n}\r\n\r\n\r\n// Returns the computed left/right/top/bottom scrollbar widths for the given jQuery element.\r\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\r\nfunction getScrollbarWidths(el) {\r\n\tvar leftRightWidth = el.innerWidth() - el[0].clientWidth; // the paddings cancel out, leaving the scrollbars\r\n\tvar widths = {\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\ttop: 0,\r\n\t\tbottom: el.innerHeight() - el[0].clientHeight // the paddings cancel out, leaving the bottom scrollbar\r\n\t};\r\n\r\n\tif (getIsLeftRtlScrollbars() && el.css('direction') == 'rtl') { // is the scrollbar on the left side?\r\n\t\twidths.left = leftRightWidth;\r\n\t}\r\n\telse {\r\n\t\twidths.right = leftRightWidth;\r\n\t}\r\n\r\n\treturn widths;\r\n}\r\n\r\n\r\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\r\n\r\nvar _isLeftRtlScrollbars = null;\r\n\r\nfunction getIsLeftRtlScrollbars() { // responsible for caching the computation\r\n\tif (_isLeftRtlScrollbars === null) {\r\n\t\t_isLeftRtlScrollbars = computeIsLeftRtlScrollbars();\r\n\t}\r\n\treturn _isLeftRtlScrollbars;\r\n}\r\n\r\nfunction computeIsLeftRtlScrollbars() { // creates an offscreen test element, then removes it\r\n\tvar el = $('<div><div/></div>')\r\n\t\t.css({\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: -1000,\r\n\t\t\tleft: 0,\r\n\t\t\tborder: 0,\r\n\t\t\tpadding: 0,\r\n\t\t\toverflow: 'scroll',\r\n\t\t\tdirection: 'rtl'\r\n\t\t})\r\n\t\t.appendTo('body');\r\n\tvar innerEl = el.children();\r\n\tvar res = innerEl.offset().left > el.offset().left; // is the inner div shifted to accommodate a left scrollbar?\r\n\tel.remove();\r\n\treturn res;\r\n}\r\n\r\n\r\n// Retrieves a jQuery element's computed CSS value as a floating-point number.\r\n// If the queried value is non-numeric (ex: IE can return \"medium\" for border width), will just return zero.\r\nfunction getCssFloat(el, prop) {\r\n\treturn parseFloat(el.css(prop)) || 0;\r\n}\r\n\r\n\r\n/* Mouse / Touch Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nFC.preventDefault = preventDefault;\r\n\r\n\r\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\r\nfunction isPrimaryMouseButton(ev) {\r\n\treturn ev.which == 1 && !ev.ctrlKey;\r\n}\r\n\r\n\r\nfunction getEvX(ev) {\r\n\tif (ev.pageX !== undefined) {\r\n\t\treturn ev.pageX;\r\n\t}\r\n\tvar touches = ev.originalEvent.touches;\r\n\tif (touches) {\r\n\t\treturn touches[0].pageX;\r\n\t}\r\n}\r\n\r\n\r\nfunction getEvY(ev) {\r\n\tif (ev.pageY !== undefined) {\r\n\t\treturn ev.pageY;\r\n\t}\r\n\tvar touches = ev.originalEvent.touches;\r\n\tif (touches) {\r\n\t\treturn touches[0].pageY;\r\n\t}\r\n}\r\n\r\n\r\nfunction getEvIsTouch(ev) {\r\n\treturn /^touch/.test(ev.type);\r\n}\r\n\r\n\r\nfunction preventSelection(el) {\r\n\tel.addClass('fc-unselectable')\r\n\t\t.on('selectstart', preventDefault);\r\n}\r\n\r\n\r\n// Stops a mouse/touch event from doing it's native browser action\r\nfunction preventDefault(ev) {\r\n\tev.preventDefault();\r\n}\r\n\r\n\r\n// attach a handler to get called when ANY scroll action happens on the page.\r\n// this was impossible to do with normal on/off because 'scroll' doesn't bubble.\r\n// http://stackoverflow.com/a/32954565/96342\r\n// returns `true` on success.\r\nfunction bindAnyScroll(handler) {\r\n\tif (window.addEventListener) {\r\n\t\twindow.addEventListener('scroll', handler, true); // useCapture=true\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n// undoes bindAnyScroll. must pass in the original function.\r\n// returns `true` on success.\r\nfunction unbindAnyScroll(handler) {\r\n\tif (window.removeEventListener) {\r\n\t\twindow.removeEventListener('scroll', handler, true); // useCapture=true\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n/* General Geometry Utils\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nFC.intersectRects = intersectRects;\r\n\r\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\r\nfunction intersectRects(rect1, rect2) {\r\n\tvar res = {\r\n\t\tleft: Math.max(rect1.left, rect2.left),\r\n\t\tright: Math.min(rect1.right, rect2.right),\r\n\t\ttop: Math.max(rect1.top, rect2.top),\r\n\t\tbottom: Math.min(rect1.bottom, rect2.bottom)\r\n\t};\r\n\r\n\tif (res.left < res.right && res.top < res.bottom) {\r\n\t\treturn res;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n// Returns a new point that will have been moved to reside within the given rectangle\r\nfunction constrainPoint(point, rect) {\r\n\treturn {\r\n\t\tleft: Math.min(Math.max(point.left, rect.left), rect.right),\r\n\t\ttop: Math.min(Math.max(point.top, rect.top), rect.bottom)\r\n\t};\r\n}\r\n\r\n\r\n// Returns a point that is the center of the given rectangle\r\nfunction getRectCenter(rect) {\r\n\treturn {\r\n\t\tleft: (rect.left + rect.right) / 2,\r\n\t\ttop: (rect.top + rect.bottom) / 2\r\n\t};\r\n}\r\n\r\n\r\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\r\nfunction diffPoints(point1, point2) {\r\n\treturn {\r\n\t\tleft: point1.left - point2.left,\r\n\t\ttop: point1.top - point2.top\r\n\t};\r\n}\r\n\r\n\r\n/* Object Ordering by Field\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nFC.parseFieldSpecs = parseFieldSpecs;\r\nFC.compareByFieldSpecs = compareByFieldSpecs;\r\nFC.compareByFieldSpec = compareByFieldSpec;\r\nFC.flexibleCompare = flexibleCompare;\r\n\r\n\r\nfunction parseFieldSpecs(input) {\r\n\tvar specs = [];\r\n\tvar tokens = [];\r\n\tvar i, token;\r\n\r\n\tif (typeof input === 'string') {\r\n\t\ttokens = input.split(/\\s*,\\s*/);\r\n\t}\r\n\telse if (typeof input === 'function') {\r\n\t\ttokens = [ input ];\r\n\t}\r\n\telse if ($.isArray(input)) {\r\n\t\ttokens = input;\r\n\t}\r\n\r\n\tfor (i = 0; i < tokens.length; i++) {\r\n\t\ttoken = tokens[i];\r\n\r\n\t\tif (typeof token === 'string') {\r\n\t\t\tspecs.push(\r\n\t\t\t\ttoken.charAt(0) == '-' ?\r\n\t\t\t\t\t{ field: token.substring(1), order: -1 } :\r\n\t\t\t\t\t{ field: token, order: 1 }\r\n\t\t\t);\r\n\t\t}\r\n\t\telse if (typeof token === 'function') {\r\n\t\t\tspecs.push({ func: token });\r\n\t\t}\r\n\t}\r\n\r\n\treturn specs;\r\n}\r\n\r\n\r\nfunction compareByFieldSpecs(obj1, obj2, fieldSpecs) {\r\n\tvar i;\r\n\tvar cmp;\r\n\r\n\tfor (i = 0; i < fieldSpecs.length; i++) {\r\n\t\tcmp = compareByFieldSpec(obj1, obj2, fieldSpecs[i]);\r\n\t\tif (cmp) {\r\n\t\t\treturn cmp;\r\n\t\t}\r\n\t}\r\n\r\n\treturn 0;\r\n}\r\n\r\n\r\nfunction compareByFieldSpec(obj1, obj2, fieldSpec) {\r\n\tif (fieldSpec.func) {\r\n\t\treturn fieldSpec.func(obj1, obj2);\r\n\t}\r\n\treturn flexibleCompare(obj1[fieldSpec.field], obj2[fieldSpec.field]) *\r\n\t\t(fieldSpec.order || 1);\r\n}\r\n\r\n\r\nfunction flexibleCompare(a, b) {\r\n\tif (!a && !b) {\r\n\t\treturn 0;\r\n\t}\r\n\tif (b == null) {\r\n\t\treturn -1;\r\n\t}\r\n\tif (a == null) {\r\n\t\treturn 1;\r\n\t}\r\n\tif ($.type(a) === 'string' || $.type(b) === 'string') {\r\n\t\treturn String(a).localeCompare(String(b));\r\n\t}\r\n\treturn a - b;\r\n}\r\n\r\n\r\n/* FullCalendar-specific Misc Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n// Computes the intersection of the two ranges. Will return fresh date clones in a range.\r\n// Returns undefined if no intersection.\r\n// Expects all dates to be normalized to the same timezone beforehand.\r\n// TODO: move to date section?\r\nfunction intersectRanges(subjectRange, constraintRange) {\r\n\tvar subjectStart = subjectRange.start;\r\n\tvar subjectEnd = subjectRange.end;\r\n\tvar constraintStart = constraintRange.start;\r\n\tvar constraintEnd = constraintRange.end;\r\n\tvar segStart, segEnd;\r\n\tvar isStart, isEnd;\r\n\r\n\tif (subjectEnd > constraintStart && subjectStart < constraintEnd) { // in bounds at all?\r\n\r\n\t\tif (subjectStart >= constraintStart) {\r\n\t\t\tsegStart = subjectStart.clone();\r\n\t\t\tisStart = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsegStart = constraintStart.clone();\r\n\t\t\tisStart =  false;\r\n\t\t}\r\n\r\n\t\tif (subjectEnd <= constraintEnd) {\r\n\t\t\tsegEnd = subjectEnd.clone();\r\n\t\t\tisEnd = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsegEnd = constraintEnd.clone();\r\n\t\t\tisEnd = false;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart: segStart,\r\n\t\t\tend: segEnd,\r\n\t\t\tisStart: isStart,\r\n\t\t\tisEnd: isEnd\r\n\t\t};\r\n\t}\r\n}\r\n\r\n\r\n/* Date Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nFC.computeIntervalUnit = computeIntervalUnit;\r\nFC.divideRangeByDuration = divideRangeByDuration;\r\nFC.divideDurationByDuration = divideDurationByDuration;\r\nFC.multiplyDuration = multiplyDuration;\r\nFC.durationHasTime = durationHasTime;\r\n\r\nvar dayIDs = [ 'sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat' ];\r\nvar intervalUnits = [ 'year', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond' ];\r\n\r\n\r\n// Diffs the two moments into a Duration where full-days are recorded first, then the remaining time.\r\n// Moments will have their timezones normalized.\r\nfunction diffDayTime(a, b) {\r\n\treturn moment.duration({\r\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days'),\r\n\t\tms: a.time() - b.time() // time-of-day from day start. disregards timezone\r\n\t});\r\n}\r\n\r\n\r\n// Diffs the two moments via their start-of-day (regardless of timezone). Produces whole-day durations.\r\nfunction diffDay(a, b) {\r\n\treturn moment.duration({\r\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days')\r\n\t});\r\n}\r\n\r\n\r\n// Diffs two moments, producing a duration, made of a whole-unit-increment of the given unit. Uses rounding.\r\nfunction diffByUnit(a, b, unit) {\r\n\treturn moment.duration(\r\n\t\tMath.round(a.diff(b, unit, true)), // returnFloat=true\r\n\t\tunit\r\n\t);\r\n}\r\n\r\n\r\n// Computes the unit name of the largest whole-unit period of time.\r\n// For example, 48 hours will be \"days\" whereas 49 hours will be \"hours\".\r\n// Accepts start/end, a range object, or an original duration object.\r\nfunction computeIntervalUnit(start, end) {\r\n\tvar i, unit;\r\n\tvar val;\r\n\r\n\tfor (i = 0; i < intervalUnits.length; i++) {\r\n\t\tunit = intervalUnits[i];\r\n\t\tval = computeRangeAs(unit, start, end);\r\n\r\n\t\tif (val >= 1 && isInt(val)) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn unit; // will be \"milliseconds\" if nothing else matches\r\n}\r\n\r\n\r\n// Computes the number of units (like \"hours\") in the given range.\r\n// Range can be a {start,end} object, separate start/end args, or a Duration.\r\n// Results are based on Moment's .as() and .diff() methods, so results can depend on internal handling\r\n// of month-diffing logic (which tends to vary from version to version).\r\nfunction computeRangeAs(unit, start, end) {\r\n\r\n\tif (end != null) { // given start, end\r\n\t\treturn end.diff(start, unit, true);\r\n\t}\r\n\telse if (moment.isDuration(start)) { // given duration\r\n\t\treturn start.as(unit);\r\n\t}\r\n\telse { // given { start, end } range object\r\n\t\treturn start.end.diff(start.start, unit, true);\r\n\t}\r\n}\r\n\r\n\r\n// Intelligently divides a range (specified by a start/end params) by a duration\r\nfunction divideRangeByDuration(start, end, dur) {\r\n\tvar months;\r\n\r\n\tif (durationHasTime(dur)) {\r\n\t\treturn (end - start) / dur;\r\n\t}\r\n\tmonths = dur.asMonths();\r\n\tif (Math.abs(months) >= 1 && isInt(months)) {\r\n\t\treturn end.diff(start, 'months', true) / months;\r\n\t}\r\n\treturn end.diff(start, 'days', true) / dur.asDays();\r\n}\r\n\r\n\r\n// Intelligently divides one duration by another\r\nfunction divideDurationByDuration(dur1, dur2) {\r\n\tvar months1, months2;\r\n\r\n\tif (durationHasTime(dur1) || durationHasTime(dur2)) {\r\n\t\treturn dur1 / dur2;\r\n\t}\r\n\tmonths1 = dur1.asMonths();\r\n\tmonths2 = dur2.asMonths();\r\n\tif (\r\n\t\tMath.abs(months1) >= 1 && isInt(months1) &&\r\n\t\tMath.abs(months2) >= 1 && isInt(months2)\r\n\t) {\r\n\t\treturn months1 / months2;\r\n\t}\r\n\treturn dur1.asDays() / dur2.asDays();\r\n}\r\n\r\n\r\n// Intelligently multiplies a duration by a number\r\nfunction multiplyDuration(dur, n) {\r\n\tvar months;\r\n\r\n\tif (durationHasTime(dur)) {\r\n\t\treturn moment.duration(dur * n);\r\n\t}\r\n\tmonths = dur.asMonths();\r\n\tif (Math.abs(months) >= 1 && isInt(months)) {\r\n\t\treturn moment.duration({ months: months * n });\r\n\t}\r\n\treturn moment.duration({ days: dur.asDays() * n });\r\n}\r\n\r\n\r\n// Returns a boolean about whether the given duration has any time parts (hours/minutes/seconds/ms)\r\nfunction durationHasTime(dur) {\r\n\treturn Boolean(dur.hours() || dur.minutes() || dur.seconds() || dur.milliseconds());\r\n}\r\n\r\n\r\nfunction isNativeDate(input) {\r\n\treturn  Object.prototype.toString.call(input) === '[object Date]' || input instanceof Date;\r\n}\r\n\r\n\r\n// Returns a boolean about whether the given input is a time string, like \"06:40:00\" or \"06:00\"\r\nfunction isTimeString(str) {\r\n\treturn /^\\d+\\:\\d+(?:\\:\\d+\\.?(?:\\d{3})?)?$/.test(str);\r\n}\r\n\r\n\r\n/* Logging and Debug\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nFC.log = function() {\r\n\tvar console = window.console;\r\n\r\n\tif (console && console.log) {\r\n\t\treturn console.log.apply(console, arguments);\r\n\t}\r\n};\r\n\r\nFC.warn = function() {\r\n\tvar console = window.console;\r\n\r\n\tif (console && console.warn) {\r\n\t\treturn console.warn.apply(console, arguments);\r\n\t}\r\n\telse {\r\n\t\treturn FC.log.apply(FC, arguments);\r\n\t}\r\n};\r\n\r\n\r\n/* General Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nvar hasOwnPropMethod = {}.hasOwnProperty;\r\n\r\n\r\n// Merges an array of objects into a single object.\r\n// The second argument allows for an array of property names who's object values will be merged together.\r\nfunction mergeProps(propObjs, complexProps) {\r\n\tvar dest = {};\r\n\tvar i, name;\r\n\tvar complexObjs;\r\n\tvar j, val;\r\n\tvar props;\r\n\r\n\tif (complexProps) {\r\n\t\tfor (i = 0; i < complexProps.length; i++) {\r\n\t\t\tname = complexProps[i];\r\n\t\t\tcomplexObjs = [];\r\n\r\n\t\t\t// collect the trailing object values, stopping when a non-object is discovered\r\n\t\t\tfor (j = propObjs.length - 1; j >= 0; j--) {\r\n\t\t\t\tval = propObjs[j][name];\r\n\r\n\t\t\t\tif (typeof val === 'object') {\r\n\t\t\t\t\tcomplexObjs.unshift(val);\r\n\t\t\t\t}\r\n\t\t\t\telse if (val !== undefined) {\r\n\t\t\t\t\tdest[name] = val; // if there were no objects, this value will be used\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// if the trailing values were objects, use the merged value\r\n\t\t\tif (complexObjs.length) {\r\n\t\t\t\tdest[name] = mergeProps(complexObjs);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// copy values into the destination, going from last to first\r\n\tfor (i = propObjs.length - 1; i >= 0; i--) {\r\n\t\tprops = propObjs[i];\r\n\r\n\t\tfor (name in props) {\r\n\t\t\tif (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\r\n\t\t\t\tdest[name] = props[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn dest;\r\n}\r\n\r\n\r\n// Create an object that has the given prototype. Just like Object.create\r\nfunction createObject(proto) {\r\n\tvar f = function() {};\r\n\tf.prototype = proto;\r\n\treturn new f();\r\n}\r\n\r\n\r\nfunction copyOwnProps(src, dest) {\r\n\tfor (var name in src) {\r\n\t\tif (hasOwnProp(src, name)) {\r\n\t\t\tdest[name] = src[name];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction hasOwnProp(obj, name) {\r\n\treturn hasOwnPropMethod.call(obj, name);\r\n}\r\n\r\n\r\n// Is the given value a non-object non-function value?\r\nfunction isAtomic(val) {\r\n\treturn /undefined|null|boolean|number|string/.test($.type(val));\r\n}\r\n\r\n\r\nfunction applyAll(functions, thisObj, args) {\r\n\tif ($.isFunction(functions)) {\r\n\t\tfunctions = [ functions ];\r\n\t}\r\n\tif (functions) {\r\n\t\tvar i;\r\n\t\tvar ret;\r\n\t\tfor (i=0; i<functions.length; i++) {\r\n\t\t\tret = functions[i].apply(thisObj, args) || ret;\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n}\r\n\r\n\r\nfunction firstDefined() {\r\n\tfor (var i=0; i<arguments.length; i++) {\r\n\t\tif (arguments[i] !== undefined) {\r\n\t\t\treturn arguments[i];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction htmlEscape(s) {\r\n\treturn (s + '').replace(/&/g, '&amp;')\r\n\t\t.replace(/</g, '&lt;')\r\n\t\t.replace(/>/g, '&gt;')\r\n\t\t.replace(/'/g, '&#039;')\r\n\t\t.replace(/\"/g, '&quot;')\r\n\t\t.replace(/\\n/g, '<br />');\r\n}\r\n\r\n\r\nfunction stripHtmlEntities(text) {\r\n\treturn text.replace(/&.*?;/g, '');\r\n}\r\n\r\n\r\n// Given a hash of CSS properties, returns a string of CSS.\r\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\r\nfunction cssToStr(cssProps) {\r\n\tvar statements = [];\r\n\r\n\t$.each(cssProps, function(name, val) {\r\n\t\tif (val != null) {\r\n\t\t\tstatements.push(name + ':' + val);\r\n\t\t}\r\n\t});\r\n\r\n\treturn statements.join(';');\r\n}\r\n\r\n\r\n// Given an object hash of HTML attribute names to values,\r\n// generates a string that can be injected between < > in HTML\r\nfunction attrsToStr(attrs) {\r\n\tvar parts = [];\r\n\r\n\t$.each(attrs, function(name, val) {\r\n\t\tif (val != null) {\r\n\t\t\tparts.push(name + '=\"' + htmlEscape(val) + '\"');\r\n\t\t}\r\n\t});\r\n\r\n\treturn parts.join(' ');\r\n}\r\n\r\n\r\nfunction capitaliseFirstLetter(str) {\r\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n\r\nfunction compareNumbers(a, b) { // for .sort()\r\n\treturn a - b;\r\n}\r\n\r\n\r\nfunction isInt(n) {\r\n\treturn n % 1 === 0;\r\n}\r\n\r\n\r\n// Returns a method bound to the given object context.\r\n// Just like one of the jQuery.proxy signatures, but without the undesired behavior of treating the same method with\r\n// different contexts as identical when binding/unbinding events.\r\nfunction proxy(obj, methodName) {\r\n\tvar method = obj[methodName];\r\n\r\n\treturn function() {\r\n\t\treturn method.apply(obj, arguments);\r\n\t};\r\n}\r\n\r\n\r\n// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\r\nfunction debounce(func, wait, immediate) {\r\n\tvar timeout, args, context, timestamp, result;\r\n\r\n\tvar later = function() {\r\n\t\tvar last = +new Date() - timestamp;\r\n\t\tif (last < wait) {\r\n\t\t\ttimeout = setTimeout(later, wait - last);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttimeout = null;\r\n\t\t\tif (!immediate) {\r\n\t\t\t\tresult = func.apply(context, args);\r\n\t\t\t\tcontext = args = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn function() {\r\n\t\tcontext = this;\r\n\t\targs = arguments;\r\n\t\ttimestamp = +new Date();\r\n\t\tvar callNow = immediate && !timeout;\r\n\t\tif (!timeout) {\r\n\t\t\ttimeout = setTimeout(later, wait);\r\n\t\t}\r\n\t\tif (callNow) {\r\n\t\t\tresult = func.apply(context, args);\r\n\t\t\tcontext = args = null;\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\n\r\n// HACK around jQuery's now A+ promises: execute callback synchronously if already resolved.\r\n// thenFunc shouldn't accept args.\r\n// similar to whenResources in Scheduler plugin.\r\nfunction syncThen(promise, thenFunc) {\r\n\t// not a promise, or an already-resolved promise?\r\n\tif (!promise || !promise.then || promise.state() === 'resolved') {\r\n\t\treturn $.when(thenFunc()); // resolve immediately\r\n\t}\r\n\telse if (thenFunc) {\r\n\t\treturn promise.then(thenFunc);\r\n\t}\r\n}\r\n\r\n;;\r\n\r\n/*\r\nGENERAL NOTE on moments throughout the *entire rest* of the codebase:\r\nAll moments are assumed to be ambiguously-zoned unless otherwise noted,\r\nwith the NOTABLE EXCEOPTION of start/end dates that live on *Event Objects*.\r\nAmbiguously-TIMED moments are assumed to be ambiguously-zoned by nature.\r\n*/\r\n\r\nvar ambigDateOfMonthRegex = /^\\s*\\d{4}-\\d\\d$/;\r\nvar ambigTimeOrZoneRegex =\r\n\t/^\\s*\\d{4}-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?)?$/;\r\nvar newMomentProto = moment.fn; // where we will attach our new methods\r\nvar oldMomentProto = $.extend({}, newMomentProto); // copy of original moment methods\r\n\r\n// tell momentjs to transfer these properties upon clone\r\nvar momentProperties = moment.momentProperties;\r\nmomentProperties.push('_fullCalendar');\r\nmomentProperties.push('_ambigTime');\r\nmomentProperties.push('_ambigZone');\r\n\r\n\r\n// Creating\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n// Creates a new moment, similar to the vanilla moment(...) constructor, but with\r\n// extra features (ambiguous time, enhanced formatting). When given an existing moment,\r\n// it will function as a clone (and retain the zone of the moment). Anything else will\r\n// result in a moment in the local zone.\r\nFC.moment = function() {\r\n\treturn makeMoment(arguments);\r\n};\r\n\r\n// Sames as FC.moment, but forces the resulting moment to be in the UTC timezone.\r\nFC.moment.utc = function() {\r\n\tvar mom = makeMoment(arguments, true);\r\n\r\n\t// Force it into UTC because makeMoment doesn't guarantee it\r\n\t// (if given a pre-existing moment for example)\r\n\tif (mom.hasTime()) { // don't give ambiguously-timed moments a UTC zone\r\n\t\tmom.utc();\r\n\t}\r\n\r\n\treturn mom;\r\n};\r\n\r\n// Same as FC.moment, but when given an ISO8601 string, the timezone offset is preserved.\r\n// ISO8601 strings with no timezone offset will become ambiguously zoned.\r\nFC.moment.parseZone = function() {\r\n\treturn makeMoment(arguments, true, true);\r\n};\r\n\r\n// Builds an enhanced moment from args. When given an existing moment, it clones. When given a\r\n// native Date, or called with no arguments (the current time), the resulting moment will be local.\r\n// Anything else needs to be \"parsed\" (a string or an array), and will be affected by:\r\n//    parseAsUTC - if there is no zone information, should we parse the input in UTC?\r\n//    parseZone - if there is zone information, should we force the zone of the moment?\r\nfunction makeMoment(args, parseAsUTC, parseZone) {\r\n\tvar input = args[0];\r\n\tvar isSingleString = args.length == 1 && typeof input === 'string';\r\n\tvar isAmbigTime;\r\n\tvar isAmbigZone;\r\n\tvar ambigMatch;\r\n\tvar mom;\r\n\r\n\tif (moment.isMoment(input) || isNativeDate(input) || input === undefined) {\r\n\t\tmom = moment.apply(null, args);\r\n\t}\r\n\telse { // \"parsing\" is required\r\n\t\tisAmbigTime = false;\r\n\t\tisAmbigZone = false;\r\n\r\n\t\tif (isSingleString) {\r\n\t\t\tif (ambigDateOfMonthRegex.test(input)) {\r\n\t\t\t\t// accept strings like '2014-05', but convert to the first of the month\r\n\t\t\t\tinput += '-01';\r\n\t\t\t\targs = [ input ]; // for when we pass it on to moment's constructor\r\n\t\t\t\tisAmbigTime = true;\r\n\t\t\t\tisAmbigZone = true;\r\n\t\t\t}\r\n\t\t\telse if ((ambigMatch = ambigTimeOrZoneRegex.exec(input))) {\r\n\t\t\t\tisAmbigTime = !ambigMatch[5]; // no time part?\r\n\t\t\t\tisAmbigZone = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ($.isArray(input)) {\r\n\t\t\t// arrays have no timezone information, so assume ambiguous zone\r\n\t\t\tisAmbigZone = true;\r\n\t\t}\r\n\t\t// otherwise, probably a string with a format\r\n\r\n\t\tif (parseAsUTC || isAmbigTime) {\r\n\t\t\tmom = moment.utc.apply(moment, args);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmom = moment.apply(null, args);\r\n\t\t}\r\n\r\n\t\tif (isAmbigTime) {\r\n\t\t\tmom._ambigTime = true;\r\n\t\t\tmom._ambigZone = true; // ambiguous time always means ambiguous zone\r\n\t\t}\r\n\t\telse if (parseZone) { // let's record the inputted zone somehow\r\n\t\t\tif (isAmbigZone) {\r\n\t\t\t\tmom._ambigZone = true;\r\n\t\t\t}\r\n\t\t\telse if (isSingleString) {\r\n\t\t\t\tmom.utcOffset(input); // if not a valid zone, will assign UTC\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmom._fullCalendar = true; // flag for extended functionality\r\n\r\n\treturn mom;\r\n}\r\n\r\n\r\n// Week Number\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n\r\n// Returns the week number, considering the locale's custom week number calcuation\r\n// `weeks` is an alias for `week`\r\nnewMomentProto.week = newMomentProto.weeks = function(input) {\r\n\tvar weekCalc = this._locale._fullCalendar_weekCalc;\r\n\r\n\tif (input == null && typeof weekCalc === 'function') { // custom function only works for getter\r\n\t\treturn weekCalc(this);\r\n\t}\r\n\telse if (weekCalc === 'ISO') {\r\n\t\treturn oldMomentProto.isoWeek.apply(this, arguments); // ISO getter/setter\r\n\t}\r\n\r\n\treturn oldMomentProto.week.apply(this, arguments); // local getter/setter\r\n};\r\n\r\n\r\n// Time-of-day\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n// GETTER\r\n// Returns a Duration with the hours/minutes/seconds/ms values of the moment.\r\n// If the moment has an ambiguous time, a duration of 00:00 will be returned.\r\n//\r\n// SETTER\r\n// You can supply a Duration, a Moment, or a Duration-like argument.\r\n// When setting the time, and the moment has an ambiguous time, it then becomes unambiguous.\r\nnewMomentProto.time = function(time) {\r\n\r\n\t// Fallback to the original method (if there is one) if this moment wasn't created via FullCalendar.\r\n\t// `time` is a generic enough method name where this precaution is necessary to avoid collisions w/ other plugins.\r\n\tif (!this._fullCalendar) {\r\n\t\treturn oldMomentProto.time.apply(this, arguments);\r\n\t}\r\n\r\n\tif (time == null) { // getter\r\n\t\treturn moment.duration({\r\n\t\t\thours: this.hours(),\r\n\t\t\tminutes: this.minutes(),\r\n\t\t\tseconds: this.seconds(),\r\n\t\t\tmilliseconds: this.milliseconds()\r\n\t\t});\r\n\t}\r\n\telse { // setter\r\n\r\n\t\tthis._ambigTime = false; // mark that the moment now has a time\r\n\r\n\t\tif (!moment.isDuration(time) && !moment.isMoment(time)) {\r\n\t\t\ttime = moment.duration(time);\r\n\t\t}\r\n\r\n\t\t// The day value should cause overflow (so 24 hours becomes 00:00:00 of next day).\r\n\t\t// Only for Duration times, not Moment times.\r\n\t\tvar dayHours = 0;\r\n\t\tif (moment.isDuration(time)) {\r\n\t\t\tdayHours = Math.floor(time.asDays()) * 24;\r\n\t\t}\r\n\r\n\t\t// We need to set the individual fields.\r\n\t\t// Can't use startOf('day') then add duration. In case of DST at start of day.\r\n\t\treturn this.hours(dayHours + time.hours())\r\n\t\t\t.minutes(time.minutes())\r\n\t\t\t.seconds(time.seconds())\r\n\t\t\t.milliseconds(time.milliseconds());\r\n\t}\r\n};\r\n\r\n// Converts the moment to UTC, stripping out its time-of-day and timezone offset,\r\n// but preserving its YMD. A moment with a stripped time will display no time\r\n// nor timezone offset when .format() is called.\r\nnewMomentProto.stripTime = function() {\r\n\r\n\tif (!this._ambigTime) {\r\n\r\n\t\tthis.utc(true); // keepLocalTime=true (for keeping *date* value)\r\n\r\n\t\t// set time to zero\r\n\t\tthis.set({\r\n\t\t\thours: 0,\r\n\t\t\tminutes: 0,\r\n\t\t\tseconds: 0,\r\n\t\t\tms: 0\r\n\t\t});\r\n\r\n\t\t// Mark the time as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\r\n\t\t// which clears all ambig flags.\r\n\t\tthis._ambigTime = true;\r\n\t\tthis._ambigZone = true; // if ambiguous time, also ambiguous timezone offset\r\n\t}\r\n\r\n\treturn this; // for chaining\r\n};\r\n\r\n// Returns if the moment has a non-ambiguous time (boolean)\r\nnewMomentProto.hasTime = function() {\r\n\treturn !this._ambigTime;\r\n};\r\n\r\n\r\n// Timezone\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n// Converts the moment to UTC, stripping out its timezone offset, but preserving its\r\n// YMD and time-of-day. A moment with a stripped timezone offset will display no\r\n// timezone offset when .format() is called.\r\nnewMomentProto.stripZone = function() {\r\n\tvar wasAmbigTime;\r\n\r\n\tif (!this._ambigZone) {\r\n\r\n\t\twasAmbigTime = this._ambigTime;\r\n\r\n\t\tthis.utc(true); // keepLocalTime=true (for keeping date and time values)\r\n\r\n\t\t// the above call to .utc()/.utcOffset() unfortunately might clear the ambig flags, so restore\r\n\t\tthis._ambigTime = wasAmbigTime || false;\r\n\r\n\t\t// Mark the zone as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\r\n\t\t// which clears the ambig flags.\r\n\t\tthis._ambigZone = true;\r\n\t}\r\n\r\n\treturn this; // for chaining\r\n};\r\n\r\n// Returns of the moment has a non-ambiguous timezone offset (boolean)\r\nnewMomentProto.hasZone = function() {\r\n\treturn !this._ambigZone;\r\n};\r\n\r\n\r\n// implicitly marks a zone\r\nnewMomentProto.local = function(keepLocalTime) {\r\n\r\n\t// for when converting from ambiguously-zoned to local,\r\n\t// keep the time values when converting from UTC -> local\r\n\toldMomentProto.local.call(this, this._ambigZone || keepLocalTime);\r\n\r\n\t// ensure non-ambiguous\r\n\t// this probably already happened via local() -> utcOffset(), but don't rely on Moment's internals\r\n\tthis._ambigTime = false;\r\n\tthis._ambigZone = false;\r\n\r\n\treturn this; // for chaining\r\n};\r\n\r\n\r\n// implicitly marks a zone\r\nnewMomentProto.utc = function(keepLocalTime) {\r\n\r\n\toldMomentProto.utc.call(this, keepLocalTime);\r\n\r\n\t// ensure non-ambiguous\r\n\t// this probably already happened via utc() -> utcOffset(), but don't rely on Moment's internals\r\n\tthis._ambigTime = false;\r\n\tthis._ambigZone = false;\r\n\r\n\treturn this;\r\n};\r\n\r\n\r\n// implicitly marks a zone (will probably get called upon .utc() and .local())\r\nnewMomentProto.utcOffset = function(tzo) {\r\n\r\n\tif (tzo != null) { // setter\r\n\t\t// these assignments needs to happen before the original zone method is called.\r\n\t\t// I forget why, something to do with a browser crash.\r\n\t\tthis._ambigTime = false;\r\n\t\tthis._ambigZone = false;\r\n\t}\r\n\r\n\treturn oldMomentProto.utcOffset.apply(this, arguments);\r\n};\r\n\r\n\r\n// Formatting\r\n// -------------------------------------------------------------------------------------------------\r\n\r\nnewMomentProto.format = function() {\r\n\tif (this._fullCalendar && arguments[0]) { // an enhanced moment? and a format string provided?\r\n\t\treturn formatDate(this, arguments[0]); // our extended formatting\r\n\t}\r\n\tif (this._ambigTime) {\r\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD');\r\n\t}\r\n\tif (this._ambigZone) {\r\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD[T]HH:mm:ss');\r\n\t}\r\n\treturn oldMomentProto.format.apply(this, arguments);\r\n};\r\n\r\nnewMomentProto.toISOString = function() {\r\n\tif (this._ambigTime) {\r\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD');\r\n\t}\r\n\tif (this._ambigZone) {\r\n\t\treturn oldMomentFormat(this, 'YYYY-MM-DD[T]HH:mm:ss');\r\n\t}\r\n\treturn oldMomentProto.toISOString.apply(this, arguments);\r\n};\r\n\r\n;;\r\n\r\n// Single Date Formatting\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n\r\n// call this if you want Moment's original format method to be used\r\nfunction oldMomentFormat(mom, formatStr) {\r\n\treturn oldMomentProto.format.call(mom, formatStr); // oldMomentProto defined in moment-ext.js\r\n}\r\n\r\n\r\n// Formats `date` with a Moment formatting string, but allow our non-zero areas and\r\n// additional token.\r\nfunction formatDate(date, formatStr) {\r\n\treturn formatDateWithChunks(date, getFormatStringChunks(formatStr));\r\n}\r\n\r\n\r\nfunction formatDateWithChunks(date, chunks) {\r\n\tvar s = '';\r\n\tvar i;\r\n\r\n\tfor (i=0; i<chunks.length; i++) {\r\n\t\ts += formatDateWithChunk(date, chunks[i]);\r\n\t}\r\n\r\n\treturn s;\r\n}\r\n\r\n\r\n// addition formatting tokens we want recognized\r\nvar tokenOverrides = {\r\n\tt: function(date) { // \"a\" or \"p\"\r\n\t\treturn oldMomentFormat(date, 'a').charAt(0);\r\n\t},\r\n\tT: function(date) { // \"A\" or \"P\"\r\n\t\treturn oldMomentFormat(date, 'A').charAt(0);\r\n\t}\r\n};\r\n\r\n\r\nfunction formatDateWithChunk(date, chunk) {\r\n\tvar token;\r\n\tvar maybeStr;\r\n\r\n\tif (typeof chunk === 'string') { // a literal string\r\n\t\treturn chunk;\r\n\t}\r\n\telse if ((token = chunk.token)) { // a token, like \"YYYY\"\r\n\t\tif (tokenOverrides[token]) {\r\n\t\t\treturn tokenOverrides[token](date); // use our custom token\r\n\t\t}\r\n\t\treturn oldMomentFormat(date, token);\r\n\t}\r\n\telse if (chunk.maybe) { // a grouping of other chunks that must be non-zero\r\n\t\tmaybeStr = formatDateWithChunks(date, chunk.maybe);\r\n\t\tif (maybeStr.match(/[1-9]/)) {\r\n\t\t\treturn maybeStr;\r\n\t\t}\r\n\t}\r\n\r\n\treturn '';\r\n}\r\n\r\n\r\n// Date Range Formatting\r\n// -------------------------------------------------------------------------------------------------\r\n// TODO: make it work with timezone offset\r\n\r\n// Using a formatting string meant for a single date, generate a range string, like\r\n// \"Sep 2 - 9 2013\", that intelligently inserts a separator where the dates differ.\r\n// If the dates are the same as far as the format string is concerned, just return a single\r\n// rendering of one date, without any separator.\r\nfunction formatRange(date1, date2, formatStr, separator, isRTL) {\r\n\tvar localeData;\r\n\r\n\tdate1 = FC.moment.parseZone(date1);\r\n\tdate2 = FC.moment.parseZone(date2);\r\n\r\n\tlocaleData = date1.localeData();\r\n\r\n\t// Expand localized format strings, like \"LL\" -> \"MMMM D YYYY\"\r\n\tformatStr = localeData.longDateFormat(formatStr) || formatStr;\r\n\t// BTW, this is not important for `formatDate` because it is impossible to put custom tokens\r\n\t// or non-zero areas in Moment's localized format strings.\r\n\r\n\tseparator = separator || ' - ';\r\n\r\n\treturn formatRangeWithChunks(\r\n\t\tdate1,\r\n\t\tdate2,\r\n\t\tgetFormatStringChunks(formatStr),\r\n\t\tseparator,\r\n\t\tisRTL\r\n\t);\r\n}\r\nFC.formatRange = formatRange; // expose\r\n\r\n\r\nfunction formatRangeWithChunks(date1, date2, chunks, separator, isRTL) {\r\n\tvar unzonedDate1 = date1.clone().stripZone(); // for formatSimilarChunk\r\n\tvar unzonedDate2 = date2.clone().stripZone(); // \"\r\n\tvar chunkStr; // the rendering of the chunk\r\n\tvar leftI;\r\n\tvar leftStr = '';\r\n\tvar rightI;\r\n\tvar rightStr = '';\r\n\tvar middleI;\r\n\tvar middleStr1 = '';\r\n\tvar middleStr2 = '';\r\n\tvar middleStr = '';\r\n\r\n\t// Start at the leftmost side of the formatting string and continue until you hit a token\r\n\t// that is not the same between dates.\r\n\tfor (leftI=0; leftI<chunks.length; leftI++) {\r\n\t\tchunkStr = formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2, chunks[leftI]);\r\n\t\tif (chunkStr === false) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tleftStr += chunkStr;\r\n\t}\r\n\r\n\t// Similarly, start at the rightmost side of the formatting string and move left\r\n\tfor (rightI=chunks.length-1; rightI>leftI; rightI--) {\r\n\t\tchunkStr = formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2,  chunks[rightI]);\r\n\t\tif (chunkStr === false) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\trightStr = chunkStr + rightStr;\r\n\t}\r\n\r\n\t// The area in the middle is different for both of the dates.\r\n\t// Collect them distinctly so we can jam them together later.\r\n\tfor (middleI=leftI; middleI<=rightI; middleI++) {\r\n\t\tmiddleStr1 += formatDateWithChunk(date1, chunks[middleI]);\r\n\t\tmiddleStr2 += formatDateWithChunk(date2, chunks[middleI]);\r\n\t}\r\n\r\n\tif (middleStr1 || middleStr2) {\r\n\t\tif (isRTL) {\r\n\t\t\tmiddleStr = middleStr2 + separator + middleStr1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmiddleStr = middleStr1 + separator + middleStr2;\r\n\t\t}\r\n\t}\r\n\r\n\treturn leftStr + middleStr + rightStr;\r\n}\r\n\r\n\r\nvar similarUnitMap = {\r\n\tY: 'year',\r\n\tM: 'month',\r\n\tD: 'day', // day of month\r\n\td: 'day', // day of week\r\n\t// prevents a separator between anything time-related...\r\n\tA: 'second', // AM/PM\r\n\ta: 'second', // am/pm\r\n\tT: 'second', // A/P\r\n\tt: 'second', // a/p\r\n\tH: 'second', // hour (24)\r\n\th: 'second', // hour (12)\r\n\tm: 'second', // minute\r\n\ts: 'second' // second\r\n};\r\n// TODO: week maybe?\r\n\r\n\r\n// Given a formatting chunk, and given that both dates are similar in the regard the\r\n// formatting chunk is concerned, format date1 against `chunk`. Otherwise, return `false`.\r\nfunction formatSimilarChunk(date1, date2, unzonedDate1, unzonedDate2, chunk) {\r\n\tvar token;\r\n\tvar unit;\r\n\r\n\tif (typeof chunk === 'string') { // a literal string\r\n\t\treturn chunk;\r\n\t}\r\n\telse if ((token = chunk.token)) {\r\n\t\tunit = similarUnitMap[token.charAt(0)];\r\n\r\n\t\t// are the dates the same for this unit of measurement?\r\n\t\t// use the unzoned dates for this calculation because unreliable when near DST (bug #2396)\r\n\t\tif (unit && unzonedDate1.isSame(unzonedDate2, unit)) {\r\n\t\t\treturn oldMomentFormat(date1, token); // would be the same if we used `date2`\r\n\t\t\t// BTW, don't support custom tokens\r\n\t\t}\r\n\t}\r\n\r\n\treturn false; // the chunk is NOT the same for the two dates\r\n\t// BTW, don't support splitting on non-zero areas\r\n}\r\n\r\n\r\n// Chunking Utils\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n\r\nvar formatStringChunkCache = {};\r\n\r\n\r\nfunction getFormatStringChunks(formatStr) {\r\n\tif (formatStr in formatStringChunkCache) {\r\n\t\treturn formatStringChunkCache[formatStr];\r\n\t}\r\n\treturn (formatStringChunkCache[formatStr] = chunkFormatString(formatStr));\r\n}\r\n\r\n\r\n// Break the formatting string into an array of chunks\r\nfunction chunkFormatString(formatStr) {\r\n\tvar chunks = [];\r\n\tvar chunker = /\\[([^\\]]*)\\]|\\(([^\\)]*)\\)|(LTS|LT|(\\w)\\4*o?)|([^\\w\\[\\(]+)/g; // TODO: more descrimination\r\n\tvar match;\r\n\r\n\twhile ((match = chunker.exec(formatStr))) {\r\n\t\tif (match[1]) { // a literal string inside [ ... ]\r\n\t\t\tchunks.push(match[1]);\r\n\t\t}\r\n\t\telse if (match[2]) { // non-zero formatting inside ( ... )\r\n\t\t\tchunks.push({ maybe: chunkFormatString(match[2]) });\r\n\t\t}\r\n\t\telse if (match[3]) { // a formatting token\r\n\t\t\tchunks.push({ token: match[3] });\r\n\t\t}\r\n\t\telse if (match[5]) { // an unenclosed literal string\r\n\t\t\tchunks.push(match[5]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn chunks;\r\n}\r\n\r\n\r\n// Misc Utils\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n\r\n// granularity only goes up until day\r\n// TODO: unify with similarUnitMap\r\nvar tokenGranularities = {\r\n\tY: { value: 1, unit: 'year' },\r\n\tM: { value: 2, unit: 'month' },\r\n\tW: { value: 3, unit: 'week' },\r\n\tw: { value: 3, unit: 'week' },\r\n\tD: { value: 4, unit: 'day' }, // day of month\r\n\td: { value: 4, unit: 'day' } // day of week\r\n};\r\n\r\n// returns a unit string, either 'year', 'month', 'day', or null\r\n// for the most granular formatting token in the string.\r\nFC.queryMostGranularFormatUnit = function(formatStr) {\r\n\tvar chunks = getFormatStringChunks(formatStr);\r\n\tvar i, chunk;\r\n\tvar candidate;\r\n\tvar best;\r\n\r\n\tfor (i = 0; i < chunks.length; i++) {\r\n\t\tchunk = chunks[i];\r\n\t\tif (chunk.token) {\r\n\t\t\tcandidate = tokenGranularities[chunk.token.charAt(0)];\r\n\t\t\tif (candidate) {\r\n\t\t\t\tif (!best || candidate.value > best.value) {\r\n\t\t\t\t\tbest = candidate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (best) {\r\n\t\treturn best.unit;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\n;;\r\n\r\nFC.Class = Class; // export\r\n\r\n// Class that all other classes will inherit from\r\nfunction Class() { }\r\n\r\n\r\n// Called on a class to create a subclass.\r\n// Last argument contains instance methods. Any argument before the last are considered mixins.\r\nClass.extend = function() {\r\n\tvar len = arguments.length;\r\n\tvar i;\r\n\tvar members;\r\n\r\n\tfor (i = 0; i < len; i++) {\r\n\t\tmembers = arguments[i];\r\n\t\tif (i < len - 1) { // not the last argument?\r\n\t\t\tmixIntoClass(this, members);\r\n\t\t}\r\n\t}\r\n\r\n\treturn extendClass(this, members || {}); // members will be undefined if no arguments\r\n};\r\n\r\n\r\n// Adds new member variables/methods to the class's prototype.\r\n// Can be called with another class, or a plain object hash containing new members.\r\nClass.mixin = function(members) {\r\n\tmixIntoClass(this, members);\r\n};\r\n\r\n\r\nfunction extendClass(superClass, members) {\r\n\tvar subClass;\r\n\r\n\t// ensure a constructor for the subclass, forwarding all arguments to the super-constructor if it doesn't exist\r\n\tif (hasOwnProp(members, 'constructor')) {\r\n\t\tsubClass = members.constructor;\r\n\t}\r\n\tif (typeof subClass !== 'function') {\r\n\t\tsubClass = members.constructor = function() {\r\n\t\t\tsuperClass.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t// build the base prototype for the subclass, which is an new object chained to the superclass's prototype\r\n\tsubClass.prototype = createObject(superClass.prototype);\r\n\r\n\t// copy each member variable/method onto the the subclass's prototype\r\n\tcopyOwnProps(members, subClass.prototype);\r\n\r\n\t// copy over all class variables/methods to the subclass, such as `extend` and `mixin`\r\n\tcopyOwnProps(superClass, subClass);\r\n\r\n\treturn subClass;\r\n}\r\n\r\n\r\nfunction mixIntoClass(theClass, members) {\r\n\tcopyOwnProps(members, theClass.prototype);\r\n}\r\n;;\r\n\r\nvar EmitterMixin = FC.EmitterMixin = {\r\n\r\n\t// jQuery-ification via $(this) allows a non-DOM object to have\r\n\t// the same event handling capabilities (including namespaces).\r\n\r\n\r\n\ton: function(types, handler) {\r\n\r\n\t\t// handlers are always called with an \"event\" object as their first param.\r\n\t\t// sneak the `this` context and arguments into the extra parameter object\r\n\t\t// and forward them on to the original handler.\r\n\t\tvar intercept = function(ev, extra) {\r\n\t\t\treturn handler.apply(\r\n\t\t\t\textra.context || this,\r\n\t\t\t\textra.args || []\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\t// mimick jQuery's internal \"proxy\" system (risky, I know)\r\n\t\t// causing all functions with the same .guid to appear to be the same.\r\n\t\t// https://github.com/jquery/jquery/blob/2.2.4/src/core.js#L448\r\n\t\t// this is needed for calling .off with the original non-intercept handler.\r\n\t\tif (!handler.guid) {\r\n\t\t\thandler.guid = $.guid++;\r\n\t\t}\r\n\t\tintercept.guid = handler.guid;\r\n\r\n\t\t$(this).on(types, intercept);\r\n\r\n\t\treturn this; // for chaining\r\n\t},\r\n\r\n\r\n\toff: function(types, handler) {\r\n\t\t$(this).off(types, handler);\r\n\r\n\t\treturn this; // for chaining\r\n\t},\r\n\r\n\r\n\ttrigger: function(types) {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1); // arguments after the first\r\n\r\n\t\t// pass in \"extra\" info to the intercept\r\n\t\t$(this).triggerHandler(types, { args: args });\r\n\r\n\t\treturn this; // for chaining\r\n\t},\r\n\r\n\r\n\ttriggerWith: function(types, context, args) {\r\n\r\n\t\t// `triggerHandler` is less reliant on the DOM compared to `trigger`.\r\n\t\t// pass in \"extra\" info to the intercept.\r\n\t\t$(this).triggerHandler(types, { context: context, args: args });\r\n\r\n\t\treturn this; // for chaining\r\n\t}\r\n\r\n};\r\n\r\n;;\r\n\r\n/*\r\nUtility methods for easily listening to events on another object,\r\nand more importantly, easily unlistening from them.\r\n*/\r\nvar ListenerMixin = FC.ListenerMixin = (function() {\r\n\tvar guid = 0;\r\n\tvar ListenerMixin = {\r\n\r\n\t\tlistenerId: null,\r\n\r\n\t\t/*\r\n\t\tGiven an `other` object that has on/off methods, bind the given `callback` to an event by the given name.\r\n\t\tThe `callback` will be called with the `this` context of the object that .listenTo is being called on.\r\n\t\tCan be called:\r\n\t\t\t.listenTo(other, eventName, callback)\r\n\t\tOR\r\n\t\t\t.listenTo(other, {\r\n\t\t\t\teventName1: callback1,\r\n\t\t\t\teventName2: callback2\r\n\t\t\t})\r\n\t\t*/\r\n\t\tlistenTo: function(other, arg, callback) {\r\n\t\t\tif (typeof arg === 'object') { // given dictionary of callbacks\r\n\t\t\t\tfor (var eventName in arg) {\r\n\t\t\t\t\tif (arg.hasOwnProperty(eventName)) {\r\n\t\t\t\t\t\tthis.listenTo(other, eventName, arg[eventName]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (typeof arg === 'string') {\r\n\t\t\t\tother.on(\r\n\t\t\t\t\targ + '.' + this.getListenerNamespace(), // use event namespacing to identify this object\r\n\t\t\t\t\t$.proxy(callback, this) // always use `this` context\r\n\t\t\t\t\t\t// the usually-undesired jQuery guid behavior doesn't matter,\r\n\t\t\t\t\t\t// because we always unbind via namespace\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\tCauses the current object to stop listening to events on the `other` object.\r\n\t\t`eventName` is optional. If omitted, will stop listening to ALL events on `other`.\r\n\t\t*/\r\n\t\tstopListeningTo: function(other, eventName) {\r\n\t\t\tother.off((eventName || '') + '.' + this.getListenerNamespace());\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\tReturns a string, unique to this object, to be used for event namespacing\r\n\t\t*/\r\n\t\tgetListenerNamespace: function() {\r\n\t\t\tif (this.listenerId == null) {\r\n\t\t\t\tthis.listenerId = guid++;\r\n\t\t\t}\r\n\t\t\treturn '_listener' + this.listenerId;\r\n\t\t}\r\n\r\n\t};\r\n\treturn ListenerMixin;\r\n})();\r\n;;\r\n\r\n// simple class for toggle a `isIgnoringMouse` flag on delay\r\n// initMouseIgnoring must first be called, with a millisecond delay setting.\r\nvar MouseIgnorerMixin = {\r\n\r\n\tisIgnoringMouse: false, // bool\r\n\tdelayUnignoreMouse: null, // method\r\n\r\n\r\n\tinitMouseIgnoring: function(delay) {\r\n\t\tthis.delayUnignoreMouse = debounce(proxy(this, 'unignoreMouse'), delay || 1000);\r\n\t},\r\n\r\n\r\n\t// temporarily ignore mouse actions on segments\r\n\ttempIgnoreMouse: function() {\r\n\t\tthis.isIgnoringMouse = true;\r\n\t\tthis.delayUnignoreMouse();\r\n\t},\r\n\r\n\r\n\t// delayUnignoreMouse eventually calls this\r\n\tunignoreMouse: function() {\r\n\t\tthis.isIgnoringMouse = false;\r\n\t}\r\n\r\n};\r\n\r\n;;\r\n\r\n/* A rectangular panel that is absolutely positioned over other content\r\n------------------------------------------------------------------------------------------------------------------------\r\nOptions:\r\n\t- className (string)\r\n\t- content (HTML string or jQuery element set)\r\n\t- parentEl\r\n\t- top\r\n\t- left\r\n\t- right (the x coord of where the right edge should be. not a \"CSS\" right)\r\n\t- autoHide (boolean)\r\n\t- show (callback)\r\n\t- hide (callback)\r\n*/\r\n\r\nvar Popover = Class.extend(ListenerMixin, {\r\n\r\n\tisHidden: true,\r\n\toptions: null,\r\n\tel: null, // the container element for the popover. generated by this object\r\n\tmargin: 10, // the space required between the popover and the edges of the scroll container\r\n\r\n\r\n\tconstructor: function(options) {\r\n\t\tthis.options = options || {};\r\n\t},\r\n\r\n\r\n\t// Shows the popover on the specified position. Renders it if not already\r\n\tshow: function() {\r\n\t\tif (this.isHidden) {\r\n\t\t\tif (!this.el) {\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t\tthis.el.show();\r\n\t\t\tthis.position();\r\n\t\t\tthis.isHidden = false;\r\n\t\t\tthis.trigger('show');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Hides the popover, through CSS, but does not remove it from the DOM\r\n\thide: function() {\r\n\t\tif (!this.isHidden) {\r\n\t\t\tthis.el.hide();\r\n\t\t\tthis.isHidden = true;\r\n\t\t\tthis.trigger('hide');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Creates `this.el` and renders content inside of it\r\n\trender: function() {\r\n\t\tvar _this = this;\r\n\t\tvar options = this.options;\r\n\r\n\t\tthis.el = $('<div class=\"fc-popover\"/>')\r\n\t\t\t.addClass(options.className || '')\r\n\t\t\t.css({\r\n\t\t\t\t// position initially to the top left to avoid creating scrollbars\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t})\r\n\t\t\t.append(options.content)\r\n\t\t\t.appendTo(options.parentEl);\r\n\r\n\t\t// when a click happens on anything inside with a 'fc-close' className, hide the popover\r\n\t\tthis.el.on('click', '.fc-close', function() {\r\n\t\t\t_this.hide();\r\n\t\t});\r\n\r\n\t\tif (options.autoHide) {\r\n\t\t\tthis.listenTo($(document), 'mousedown', this.documentMousedown);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Triggered when the user clicks *anywhere* in the document, for the autoHide feature\r\n\tdocumentMousedown: function(ev) {\r\n\t\t// only hide the popover if the click happened outside the popover\r\n\t\tif (this.el && !$(ev.target).closest(this.el).length) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Hides and unregisters any handlers\r\n\tremoveElement: function() {\r\n\t\tthis.hide();\r\n\r\n\t\tif (this.el) {\r\n\t\t\tthis.el.remove();\r\n\t\t\tthis.el = null;\r\n\t\t}\r\n\r\n\t\tthis.stopListeningTo($(document), 'mousedown');\r\n\t},\r\n\r\n\r\n\t// Positions the popover optimally, using the top/left/right options\r\n\tposition: function() {\r\n\t\tvar options = this.options;\r\n\t\tvar origin = this.el.offsetParent().offset();\r\n\t\tvar width = this.el.outerWidth();\r\n\t\tvar height = this.el.outerHeight();\r\n\t\tvar windowEl = $(window);\r\n\t\tvar viewportEl = getScrollParent(this.el);\r\n\t\tvar viewportTop;\r\n\t\tvar viewportLeft;\r\n\t\tvar viewportOffset;\r\n\t\tvar top; // the \"position\" (not \"offset\") values for the popover\r\n\t\tvar left; //\r\n\r\n\t\t// compute top and left\r\n\t\ttop = options.top || 0;\r\n\t\tif (options.left !== undefined) {\r\n\t\t\tleft = options.left;\r\n\t\t}\r\n\t\telse if (options.right !== undefined) {\r\n\t\t\tleft = options.right - width; // derive the left value from the right value\r\n\t\t}\r\n\t\telse {\r\n\t\t\tleft = 0;\r\n\t\t}\r\n\r\n\t\tif (viewportEl.is(window) || viewportEl.is(document)) { // normalize getScrollParent's result\r\n\t\t\tviewportEl = windowEl;\r\n\t\t\tviewportTop = 0; // the window is always at the top left\r\n\t\t\tviewportLeft = 0; // (and .offset() won't work if called here)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tviewportOffset = viewportEl.offset();\r\n\t\t\tviewportTop = viewportOffset.top;\r\n\t\t\tviewportLeft = viewportOffset.left;\r\n\t\t}\r\n\r\n\t\t// if the window is scrolled, it causes the visible area to be further down\r\n\t\tviewportTop += windowEl.scrollTop();\r\n\t\tviewportLeft += windowEl.scrollLeft();\r\n\r\n\t\t// constrain to the view port. if constrained by two edges, give precedence to top/left\r\n\t\tif (options.viewportConstrain !== false) {\r\n\t\t\ttop = Math.min(top, viewportTop + viewportEl.outerHeight() - height - this.margin);\r\n\t\t\ttop = Math.max(top, viewportTop + this.margin);\r\n\t\t\tleft = Math.min(left, viewportLeft + viewportEl.outerWidth() - width - this.margin);\r\n\t\t\tleft = Math.max(left, viewportLeft + this.margin);\r\n\t\t}\r\n\r\n\t\tthis.el.css({\r\n\t\t\ttop: top - origin.top,\r\n\t\t\tleft: left - origin.left\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Triggers a callback. Calls a function in the option hash of the same name.\r\n\t// Arguments beyond the first `name` are forwarded on.\r\n\t// TODO: better code reuse for this. Repeat code\r\n\ttrigger: function(name) {\r\n\t\tif (this.options[name]) {\r\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/*\r\nA cache for the left/right/top/bottom/width/height values for one or more elements.\r\nWorks with both offset (from topleft document) and position (from offsetParent).\r\n\r\noptions:\r\n- els\r\n- isHorizontal\r\n- isVertical\r\n*/\r\nvar CoordCache = FC.CoordCache = Class.extend({\r\n\r\n\tels: null, // jQuery set (assumed to be siblings)\r\n\tforcedOffsetParentEl: null, // options can override the natural offsetParent\r\n\torigin: null, // {left,top} position of offsetParent of els\r\n\tboundingRect: null, // constrain cordinates to this rectangle. {left,right,top,bottom} or null\r\n\tisHorizontal: false, // whether to query for left/right/width\r\n\tisVertical: false, // whether to query for top/bottom/height\r\n\r\n\t// arrays of coordinates (offsets from topleft of document)\r\n\tlefts: null,\r\n\trights: null,\r\n\ttops: null,\r\n\tbottoms: null,\r\n\r\n\r\n\tconstructor: function(options) {\r\n\t\tthis.els = $(options.els);\r\n\t\tthis.isHorizontal = options.isHorizontal;\r\n\t\tthis.isVertical = options.isVertical;\r\n\t\tthis.forcedOffsetParentEl = options.offsetParent ? $(options.offsetParent) : null;\r\n\t},\r\n\r\n\r\n\t// Queries the els for coordinates and stores them.\r\n\t// Call this method before using and of the get* methods below.\r\n\tbuild: function() {\r\n\t\tvar offsetParentEl = this.forcedOffsetParentEl || this.els.eq(0).offsetParent();\r\n\r\n\t\tthis.origin = offsetParentEl.offset();\r\n\t\tthis.boundingRect = this.queryBoundingRect();\r\n\r\n\t\tif (this.isHorizontal) {\r\n\t\t\tthis.buildElHorizontals();\r\n\t\t}\r\n\t\tif (this.isVertical) {\r\n\t\t\tthis.buildElVerticals();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Destroys all internal data about coordinates, freeing memory\r\n\tclear: function() {\r\n\t\tthis.origin = null;\r\n\t\tthis.boundingRect = null;\r\n\t\tthis.lefts = null;\r\n\t\tthis.rights = null;\r\n\t\tthis.tops = null;\r\n\t\tthis.bottoms = null;\r\n\t},\r\n\r\n\r\n\t// When called, if coord caches aren't built, builds them\r\n\tensureBuilt: function() {\r\n\t\tif (!this.origin) {\r\n\t\t\tthis.build();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Populates the left/right internal coordinate arrays\r\n\tbuildElHorizontals: function() {\r\n\t\tvar lefts = [];\r\n\t\tvar rights = [];\r\n\r\n\t\tthis.els.each(function(i, node) {\r\n\t\t\tvar el = $(node);\r\n\t\t\tvar left = el.offset().left;\r\n\t\t\tvar width = el.outerWidth();\r\n\r\n\t\t\tlefts.push(left);\r\n\t\t\trights.push(left + width);\r\n\t\t});\r\n\r\n\t\tthis.lefts = lefts;\r\n\t\tthis.rights = rights;\r\n\t},\r\n\r\n\r\n\t// Populates the top/bottom internal coordinate arrays\r\n\tbuildElVerticals: function() {\r\n\t\tvar tops = [];\r\n\t\tvar bottoms = [];\r\n\r\n\t\tthis.els.each(function(i, node) {\r\n\t\t\tvar el = $(node);\r\n\t\t\tvar top = el.offset().top;\r\n\t\t\tvar height = el.outerHeight();\r\n\r\n\t\t\ttops.push(top);\r\n\t\t\tbottoms.push(top + height);\r\n\t\t});\r\n\r\n\t\tthis.tops = tops;\r\n\t\tthis.bottoms = bottoms;\r\n\t},\r\n\r\n\r\n\t// Given a left offset (from document left), returns the index of the el that it horizontally intersects.\r\n\t// If no intersection is made, returns undefined.\r\n\tgetHorizontalIndex: function(leftOffset) {\r\n\t\tthis.ensureBuilt();\r\n\r\n\t\tvar lefts = this.lefts;\r\n\t\tvar rights = this.rights;\r\n\t\tvar len = lefts.length;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tif (leftOffset >= lefts[i] && leftOffset < rights[i]) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Given a top offset (from document top), returns the index of the el that it vertically intersects.\r\n\t// If no intersection is made, returns undefined.\r\n\tgetVerticalIndex: function(topOffset) {\r\n\t\tthis.ensureBuilt();\r\n\r\n\t\tvar tops = this.tops;\r\n\t\tvar bottoms = this.bottoms;\r\n\t\tvar len = tops.length;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tif (topOffset >= tops[i] && topOffset < bottoms[i]) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Gets the left offset (from document left) of the element at the given index\r\n\tgetLeftOffset: function(leftIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.lefts[leftIndex];\r\n\t},\r\n\r\n\r\n\t// Gets the left position (from offsetParent left) of the element at the given index\r\n\tgetLeftPosition: function(leftIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.lefts[leftIndex] - this.origin.left;\r\n\t},\r\n\r\n\r\n\t// Gets the right offset (from document left) of the element at the given index.\r\n\t// This value is NOT relative to the document's right edge, like the CSS concept of \"right\" would be.\r\n\tgetRightOffset: function(leftIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.rights[leftIndex];\r\n\t},\r\n\r\n\r\n\t// Gets the right position (from offsetParent left) of the element at the given index.\r\n\t// This value is NOT relative to the offsetParent's right edge, like the CSS concept of \"right\" would be.\r\n\tgetRightPosition: function(leftIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.rights[leftIndex] - this.origin.left;\r\n\t},\r\n\r\n\r\n\t// Gets the width of the element at the given index\r\n\tgetWidth: function(leftIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.rights[leftIndex] - this.lefts[leftIndex];\r\n\t},\r\n\r\n\r\n\t// Gets the top offset (from document top) of the element at the given index\r\n\tgetTopOffset: function(topIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.tops[topIndex];\r\n\t},\r\n\r\n\r\n\t// Gets the top position (from offsetParent top) of the element at the given position\r\n\tgetTopPosition: function(topIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.tops[topIndex] - this.origin.top;\r\n\t},\r\n\r\n\t// Gets the bottom offset (from the document top) of the element at the given index.\r\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\r\n\tgetBottomOffset: function(topIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.bottoms[topIndex];\r\n\t},\r\n\r\n\r\n\t// Gets the bottom position (from the offsetParent top) of the element at the given index.\r\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\r\n\tgetBottomPosition: function(topIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.bottoms[topIndex] - this.origin.top;\r\n\t},\r\n\r\n\r\n\t// Gets the height of the element at the given index\r\n\tgetHeight: function(topIndex) {\r\n\t\tthis.ensureBuilt();\r\n\t\treturn this.bottoms[topIndex] - this.tops[topIndex];\r\n\t},\r\n\r\n\r\n\t// Bounding Rect\r\n\t// TODO: decouple this from CoordCache\r\n\r\n\t// Compute and return what the elements' bounding rectangle is, from the user's perspective.\r\n\t// Right now, only returns a rectangle if constrained by an overflow:scroll element.\r\n\tqueryBoundingRect: function() {\r\n\t\tvar scrollParentEl = getScrollParent(this.els.eq(0));\r\n\r\n\t\tif (!scrollParentEl.is(document)) {\r\n\t\t\treturn getClientRect(scrollParentEl);\r\n\t\t}\r\n\t},\r\n\r\n\tisPointInBounds: function(leftOffset, topOffset) {\r\n\t\treturn this.isLeftInBounds(leftOffset) && this.isTopInBounds(topOffset);\r\n\t},\r\n\r\n\tisLeftInBounds: function(leftOffset) {\r\n\t\treturn !this.boundingRect || (leftOffset >= this.boundingRect.left && leftOffset < this.boundingRect.right);\r\n\t},\r\n\r\n\tisTopInBounds: function(topOffset) {\r\n\t\treturn !this.boundingRect || (topOffset >= this.boundingRect.top && topOffset < this.boundingRect.bottom);\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/* Tracks a drag's mouse movement, firing various handlers\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// TODO: use Emitter\r\n\r\nvar DragListener = FC.DragListener = Class.extend(ListenerMixin, MouseIgnorerMixin, {\r\n\r\n\toptions: null,\r\n\tsubjectEl: null,\r\n\r\n\t// coordinates of the initial mousedown\r\n\toriginX: null,\r\n\toriginY: null,\r\n\r\n\t// the wrapping element that scrolls, or MIGHT scroll if there's overflow.\r\n\t// TODO: do this for wrappers that have overflow:hidden as well.\r\n\tscrollEl: null,\r\n\r\n\tisInteracting: false,\r\n\tisDistanceSurpassed: false,\r\n\tisDelayEnded: false,\r\n\tisDragging: false,\r\n\tisTouch: false,\r\n\r\n\tdelay: null,\r\n\tdelayTimeoutId: null,\r\n\tminDistance: null,\r\n\r\n\thandleTouchScrollProxy: null, // calls handleTouchScroll, always bound to `this`\r\n\r\n\r\n\tconstructor: function(options) {\r\n\t\tthis.options = options || {};\r\n\t\tthis.handleTouchScrollProxy = proxy(this, 'handleTouchScroll');\r\n\t\tthis.initMouseIgnoring(500);\r\n\t},\r\n\r\n\r\n\t// Interaction (high-level)\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\tstartInteraction: function(ev, extraOptions) {\r\n\t\tvar isTouch = getEvIsTouch(ev);\r\n\r\n\t\tif (ev.type === 'mousedown') {\r\n\t\t\tif (this.isIgnoringMouse) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (!isPrimaryMouseButton(ev)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tev.preventDefault(); // prevents native selection in most browsers\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.isInteracting) {\r\n\r\n\t\t\t// process options\r\n\t\t\textraOptions = extraOptions || {};\r\n\t\t\tthis.delay = firstDefined(extraOptions.delay, this.options.delay, 0);\r\n\t\t\tthis.minDistance = firstDefined(extraOptions.distance, this.options.distance, 0);\r\n\t\t\tthis.subjectEl = this.options.subjectEl;\r\n\r\n\t\t\tthis.isInteracting = true;\r\n\t\t\tthis.isTouch = isTouch;\r\n\t\t\tthis.isDelayEnded = false;\r\n\t\t\tthis.isDistanceSurpassed = false;\r\n\r\n\t\t\tthis.originX = getEvX(ev);\r\n\t\t\tthis.originY = getEvY(ev);\r\n\t\t\tthis.scrollEl = getScrollParent($(ev.target));\r\n\r\n\t\t\tthis.bindHandlers();\r\n\t\t\tthis.initAutoScroll();\r\n\t\t\tthis.handleInteractionStart(ev);\r\n\t\t\tthis.startDelay(ev);\r\n\r\n\t\t\tif (!this.minDistance) {\r\n\t\t\t\tthis.handleDistanceSurpassed(ev);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleInteractionStart: function(ev) {\r\n\t\tthis.trigger('interactionStart', ev);\r\n\t},\r\n\r\n\r\n\tendInteraction: function(ev, isCancelled) {\r\n\t\tif (this.isInteracting) {\r\n\t\t\tthis.endDrag(ev);\r\n\r\n\t\t\tif (this.delayTimeoutId) {\r\n\t\t\t\tclearTimeout(this.delayTimeoutId);\r\n\t\t\t\tthis.delayTimeoutId = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.destroyAutoScroll();\r\n\t\t\tthis.unbindHandlers();\r\n\r\n\t\t\tthis.isInteracting = false;\r\n\t\t\tthis.handleInteractionEnd(ev, isCancelled);\r\n\r\n\t\t\t// a touchstart+touchend on the same element will result in the following addition simulated events:\r\n\t\t\t// mouseover + mouseout + click\r\n\t\t\t// let's ignore these bogus events\r\n\t\t\tif (this.isTouch) {\r\n\t\t\t\tthis.tempIgnoreMouse();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleInteractionEnd: function(ev, isCancelled) {\r\n\t\tthis.trigger('interactionEnd', ev, isCancelled || false);\r\n\t},\r\n\r\n\r\n\t// Binding To DOM\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\tbindHandlers: function() {\r\n\t\tvar _this = this;\r\n\t\tvar touchStartIgnores = 1;\r\n\r\n\t\tif (this.isTouch) {\r\n\t\t\tthis.listenTo($(document), {\r\n\t\t\t\ttouchmove: this.handleTouchMove,\r\n\t\t\t\ttouchend: this.endInteraction,\r\n\t\t\t\ttouchcancel: this.endInteraction,\r\n\r\n\t\t\t\t// Sometimes touchend doesn't fire\r\n\t\t\t\t// (can't figure out why. touchcancel doesn't fire either. has to do with scrolling?)\r\n\t\t\t\t// If another touchstart happens, we know it's bogus, so cancel the drag.\r\n\t\t\t\t// touchend will continue to be broken until user does a shorttap/scroll, but this is best we can do.\r\n\t\t\t\ttouchstart: function(ev) {\r\n\t\t\t\t\tif (touchStartIgnores) { // bindHandlers is called from within a touchstart,\r\n\t\t\t\t\t\ttouchStartIgnores--; // and we don't want this to fire immediately, so ignore.\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t_this.endInteraction(ev, true); // isCancelled=true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// listen to ALL scroll actions on the page\r\n\t\t\tif (\r\n\t\t\t\t!bindAnyScroll(this.handleTouchScrollProxy) && // hopefully this works and short-circuits the rest\r\n\t\t\t\tthis.scrollEl // otherwise, attach a single handler to this\r\n\t\t\t) {\r\n\t\t\t\tthis.listenTo(this.scrollEl, 'scroll', this.handleTouchScroll);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.listenTo($(document), {\r\n\t\t\t\tmousemove: this.handleMouseMove,\r\n\t\t\t\tmouseup: this.endInteraction\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.listenTo($(document), {\r\n\t\t\tselectstart: preventDefault, // don't allow selection while dragging\r\n\t\t\tcontextmenu: preventDefault // long taps would open menu on Chrome dev tools\r\n\t\t});\r\n\t},\r\n\r\n\r\n\tunbindHandlers: function() {\r\n\t\tthis.stopListeningTo($(document));\r\n\r\n\t\t// unbind scroll listening\r\n\t\tunbindAnyScroll(this.handleTouchScrollProxy);\r\n\t\tif (this.scrollEl) {\r\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll');\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Drag (high-level)\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\t// extraOptions ignored if drag already started\r\n\tstartDrag: function(ev, extraOptions) {\r\n\t\tthis.startInteraction(ev, extraOptions); // ensure interaction began\r\n\r\n\t\tif (!this.isDragging) {\r\n\t\t\tthis.isDragging = true;\r\n\t\t\tthis.handleDragStart(ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleDragStart: function(ev) {\r\n\t\tthis.trigger('dragStart', ev);\r\n\t},\r\n\r\n\r\n\thandleMove: function(ev) {\r\n\t\tvar dx = getEvX(ev) - this.originX;\r\n\t\tvar dy = getEvY(ev) - this.originY;\r\n\t\tvar minDistance = this.minDistance;\r\n\t\tvar distanceSq; // current distance from the origin, squared\r\n\r\n\t\tif (!this.isDistanceSurpassed) {\r\n\t\t\tdistanceSq = dx * dx + dy * dy;\r\n\t\t\tif (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\r\n\t\t\t\tthis.handleDistanceSurpassed(ev);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis.handleDrag(dx, dy, ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called while the mouse is being moved and when we know a legitimate drag is taking place\r\n\thandleDrag: function(dx, dy, ev) {\r\n\t\tthis.trigger('drag', dx, dy, ev);\r\n\t\tthis.updateAutoScroll(ev); // will possibly cause scrolling\r\n\t},\r\n\r\n\r\n\tendDrag: function(ev) {\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis.isDragging = false;\r\n\t\t\tthis.handleDragEnd(ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleDragEnd: function(ev) {\r\n\t\tthis.trigger('dragEnd', ev);\r\n\t},\r\n\r\n\r\n\t// Delay\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\tstartDelay: function(initialEv) {\r\n\t\tvar _this = this;\r\n\r\n\t\tif (this.delay) {\r\n\t\t\tthis.delayTimeoutId = setTimeout(function() {\r\n\t\t\t\t_this.handleDelayEnd(initialEv);\r\n\t\t\t}, this.delay);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.handleDelayEnd(initialEv);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleDelayEnd: function(initialEv) {\r\n\t\tthis.isDelayEnded = true;\r\n\r\n\t\tif (this.isDistanceSurpassed) {\r\n\t\t\tthis.startDrag(initialEv);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Distance\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\thandleDistanceSurpassed: function(ev) {\r\n\t\tthis.isDistanceSurpassed = true;\r\n\r\n\t\tif (this.isDelayEnded) {\r\n\t\t\tthis.startDrag(ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Mouse / Touch\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\thandleTouchMove: function(ev) {\r\n\t\t// prevent inertia and touchmove-scrolling while dragging\r\n\t\tif (this.isDragging) {\r\n\t\t\tev.preventDefault();\r\n\t\t}\r\n\r\n\t\tthis.handleMove(ev);\r\n\t},\r\n\r\n\r\n\thandleMouseMove: function(ev) {\r\n\t\tthis.handleMove(ev);\r\n\t},\r\n\r\n\r\n\t// Scrolling (unrelated to auto-scroll)\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\thandleTouchScroll: function(ev) {\r\n\t\t// if the drag is being initiated by touch, but a scroll happens before\r\n\t\t// the drag-initiating delay is over, cancel the drag\r\n\t\tif (!this.isDragging) {\r\n\t\t\tthis.endInteraction(ev, true); // isCancelled=true\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Utils\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\t// Triggers a callback. Calls a function in the option hash of the same name.\r\n\t// Arguments beyond the first `name` are forwarded on.\r\n\ttrigger: function(name) {\r\n\t\tif (this.options[name]) {\r\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t}\r\n\t\t// makes _methods callable by event name. TODO: kill this\r\n\t\tif (this['_' + name]) {\r\n\t\t\tthis['_' + name].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t}\r\n\t}\r\n\r\n\r\n});\r\n\r\n;;\r\n/*\r\nthis.scrollEl is set in DragListener\r\n*/\r\nDragListener.mixin({\r\n\r\n\tisAutoScroll: false,\r\n\r\n\tscrollBounds: null, // { top, bottom, left, right }\r\n\tscrollTopVel: null, // pixels per second\r\n\tscrollLeftVel: null, // pixels per second\r\n\tscrollIntervalId: null, // ID of setTimeout for scrolling animation loop\r\n\r\n\t// defaults\r\n\tscrollSensitivity: 30, // pixels from edge for scrolling to start\r\n\tscrollSpeed: 200, // pixels per second, at maximum speed\r\n\tscrollIntervalMs: 50, // millisecond wait between scroll increment\r\n\r\n\r\n\tinitAutoScroll: function() {\r\n\t\tvar scrollEl = this.scrollEl;\r\n\r\n\t\tthis.isAutoScroll =\r\n\t\t\tthis.options.scroll &&\r\n\t\t\tscrollEl &&\r\n\t\t\t!scrollEl.is(window) &&\r\n\t\t\t!scrollEl.is(document);\r\n\r\n\t\tif (this.isAutoScroll) {\r\n\t\t\t// debounce makes sure rapid calls don't happen\r\n\t\t\tthis.listenTo(scrollEl, 'scroll', debounce(this.handleDebouncedScroll, 100));\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdestroyAutoScroll: function() {\r\n\t\tthis.endAutoScroll(); // kill any animation loop\r\n\r\n\t\t// remove the scroll handler if there is a scrollEl\r\n\t\tif (this.isAutoScroll) {\r\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll'); // will probably get removed by unbindHandlers too :(\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Computes and stores the bounding rectangle of scrollEl\r\n\tcomputeScrollBounds: function() {\r\n\t\tif (this.isAutoScroll) {\r\n\t\t\tthis.scrollBounds = getOuterRect(this.scrollEl);\r\n\t\t\t// TODO: use getClientRect in future. but prevents auto scrolling when on top of scrollbars\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called when the dragging is in progress and scrolling should be updated\r\n\tupdateAutoScroll: function(ev) {\r\n\t\tvar sensitivity = this.scrollSensitivity;\r\n\t\tvar bounds = this.scrollBounds;\r\n\t\tvar topCloseness, bottomCloseness;\r\n\t\tvar leftCloseness, rightCloseness;\r\n\t\tvar topVel = 0;\r\n\t\tvar leftVel = 0;\r\n\r\n\t\tif (bounds) { // only scroll if scrollEl exists\r\n\r\n\t\t\t// compute closeness to edges. valid range is from 0.0 - 1.0\r\n\t\t\ttopCloseness = (sensitivity - (getEvY(ev) - bounds.top)) / sensitivity;\r\n\t\t\tbottomCloseness = (sensitivity - (bounds.bottom - getEvY(ev))) / sensitivity;\r\n\t\t\tleftCloseness = (sensitivity - (getEvX(ev) - bounds.left)) / sensitivity;\r\n\t\t\trightCloseness = (sensitivity - (bounds.right - getEvX(ev))) / sensitivity;\r\n\r\n\t\t\t// translate vertical closeness into velocity.\r\n\t\t\t// mouse must be completely in bounds for velocity to happen.\r\n\t\t\tif (topCloseness >= 0 && topCloseness <= 1) {\r\n\t\t\t\ttopVel = topCloseness * this.scrollSpeed * -1; // negative. for scrolling up\r\n\t\t\t}\r\n\t\t\telse if (bottomCloseness >= 0 && bottomCloseness <= 1) {\r\n\t\t\t\ttopVel = bottomCloseness * this.scrollSpeed;\r\n\t\t\t}\r\n\r\n\t\t\t// translate horizontal closeness into velocity\r\n\t\t\tif (leftCloseness >= 0 && leftCloseness <= 1) {\r\n\t\t\t\tleftVel = leftCloseness * this.scrollSpeed * -1; // negative. for scrolling left\r\n\t\t\t}\r\n\t\t\telse if (rightCloseness >= 0 && rightCloseness <= 1) {\r\n\t\t\t\tleftVel = rightCloseness * this.scrollSpeed;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setScrollVel(topVel, leftVel);\r\n\t},\r\n\r\n\r\n\t// Sets the speed-of-scrolling for the scrollEl\r\n\tsetScrollVel: function(topVel, leftVel) {\r\n\r\n\t\tthis.scrollTopVel = topVel;\r\n\t\tthis.scrollLeftVel = leftVel;\r\n\r\n\t\tthis.constrainScrollVel(); // massages into realistic values\r\n\r\n\t\t// if there is non-zero velocity, and an animation loop hasn't already started, then START\r\n\t\tif ((this.scrollTopVel || this.scrollLeftVel) && !this.scrollIntervalId) {\r\n\t\t\tthis.scrollIntervalId = setInterval(\r\n\t\t\t\tproxy(this, 'scrollIntervalFunc'), // scope to `this`\r\n\t\t\t\tthis.scrollIntervalMs\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Forces scrollTopVel and scrollLeftVel to be zero if scrolling has already gone all the way\r\n\tconstrainScrollVel: function() {\r\n\t\tvar el = this.scrollEl;\r\n\r\n\t\tif (this.scrollTopVel < 0) { // scrolling up?\r\n\t\t\tif (el.scrollTop() <= 0) { // already scrolled all the way up?\r\n\t\t\t\tthis.scrollTopVel = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this.scrollTopVel > 0) { // scrolling down?\r\n\t\t\tif (el.scrollTop() + el[0].clientHeight >= el[0].scrollHeight) { // already scrolled all the way down?\r\n\t\t\t\tthis.scrollTopVel = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.scrollLeftVel < 0) { // scrolling left?\r\n\t\t\tif (el.scrollLeft() <= 0) { // already scrolled all the left?\r\n\t\t\t\tthis.scrollLeftVel = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this.scrollLeftVel > 0) { // scrolling right?\r\n\t\t\tif (el.scrollLeft() + el[0].clientWidth >= el[0].scrollWidth) { // already scrolled all the way right?\r\n\t\t\t\tthis.scrollLeftVel = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// This function gets called during every iteration of the scrolling animation loop\r\n\tscrollIntervalFunc: function() {\r\n\t\tvar el = this.scrollEl;\r\n\t\tvar frac = this.scrollIntervalMs / 1000; // considering animation frequency, what the vel should be mult'd by\r\n\r\n\t\t// change the value of scrollEl's scroll\r\n\t\tif (this.scrollTopVel) {\r\n\t\t\tel.scrollTop(el.scrollTop() + this.scrollTopVel * frac);\r\n\t\t}\r\n\t\tif (this.scrollLeftVel) {\r\n\t\t\tel.scrollLeft(el.scrollLeft() + this.scrollLeftVel * frac);\r\n\t\t}\r\n\r\n\t\tthis.constrainScrollVel(); // since the scroll values changed, recompute the velocities\r\n\r\n\t\t// if scrolled all the way, which causes the vels to be zero, stop the animation loop\r\n\t\tif (!this.scrollTopVel && !this.scrollLeftVel) {\r\n\t\t\tthis.endAutoScroll();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Kills any existing scrolling animation loop\r\n\tendAutoScroll: function() {\r\n\t\tif (this.scrollIntervalId) {\r\n\t\t\tclearInterval(this.scrollIntervalId);\r\n\t\t\tthis.scrollIntervalId = null;\r\n\r\n\t\t\tthis.handleScrollEnd();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Get called when the scrollEl is scrolled (NOTE: this is delayed via debounce)\r\n\thandleDebouncedScroll: function() {\r\n\t\t// recompute all coordinates, but *only* if this is *not* part of our scrolling animation\r\n\t\tif (!this.scrollIntervalId) {\r\n\t\t\tthis.handleScrollEnd();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\r\n\thandleScrollEnd: function() {\r\n\t}\r\n\r\n});\r\n;;\r\n\r\n/* Tracks mouse movements over a component and raises events about which hit the mouse is over.\r\n------------------------------------------------------------------------------------------------------------------------\r\noptions:\r\n- subjectEl\r\n- subjectCenter\r\n*/\r\n\r\nvar HitDragListener = DragListener.extend({\r\n\r\n\tcomponent: null, // converts coordinates to hits\r\n\t\t// methods: prepareHits, releaseHits, queryHit\r\n\r\n\torigHit: null, // the hit the mouse was over when listening started\r\n\thit: null, // the hit the mouse is over\r\n\tcoordAdjust: null, // delta that will be added to the mouse coordinates when computing collisions\r\n\r\n\r\n\tconstructor: function(component, options) {\r\n\t\tDragListener.call(this, options); // call the super-constructor\r\n\r\n\t\tthis.component = component;\r\n\t},\r\n\r\n\r\n\t// Called when drag listening starts (but a real drag has not necessarily began).\r\n\t// ev might be undefined if dragging was started manually.\r\n\thandleInteractionStart: function(ev) {\r\n\t\tvar subjectEl = this.subjectEl;\r\n\t\tvar subjectRect;\r\n\t\tvar origPoint;\r\n\t\tvar point;\r\n\r\n\t\tthis.computeCoords();\r\n\r\n\t\tif (ev) {\r\n\t\t\torigPoint = { left: getEvX(ev), top: getEvY(ev) };\r\n\t\t\tpoint = origPoint;\r\n\r\n\t\t\t// constrain the point to bounds of the element being dragged\r\n\t\t\tif (subjectEl) {\r\n\t\t\t\tsubjectRect = getOuterRect(subjectEl); // used for centering as well\r\n\t\t\t\tpoint = constrainPoint(point, subjectRect);\r\n\t\t\t}\r\n\r\n\t\t\tthis.origHit = this.queryHit(point.left, point.top);\r\n\r\n\t\t\t// treat the center of the subject as the collision point?\r\n\t\t\tif (subjectEl && this.options.subjectCenter) {\r\n\r\n\t\t\t\t// only consider the area the subject overlaps the hit. best for large subjects.\r\n\t\t\t\t// TODO: skip this if hit didn't supply left/right/top/bottom\r\n\t\t\t\tif (this.origHit) {\r\n\t\t\t\t\tsubjectRect = intersectRects(this.origHit, subjectRect) ||\r\n\t\t\t\t\t\tsubjectRect; // in case there is no intersection\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpoint = getRectCenter(subjectRect);\r\n\t\t\t}\r\n\r\n\t\t\tthis.coordAdjust = diffPoints(point, origPoint); // point - origPoint\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.origHit = null;\r\n\t\t\tthis.coordAdjust = null;\r\n\t\t}\r\n\r\n\t\t// call the super-method. do it after origHit has been computed\r\n\t\tDragListener.prototype.handleInteractionStart.apply(this, arguments);\r\n\t},\r\n\r\n\r\n\t// Recomputes the drag-critical positions of elements\r\n\tcomputeCoords: function() {\r\n\t\tthis.component.prepareHits();\r\n\t\tthis.computeScrollBounds(); // why is this here??????\r\n\t},\r\n\r\n\r\n\t// Called when the actual drag has started\r\n\thandleDragStart: function(ev) {\r\n\t\tvar hit;\r\n\r\n\t\tDragListener.prototype.handleDragStart.apply(this, arguments); // call the super-method\r\n\r\n\t\t// might be different from this.origHit if the min-distance is large\r\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\r\n\r\n\t\t// report the initial hit the mouse is over\r\n\t\t// especially important if no min-distance and drag starts immediately\r\n\t\tif (hit) {\r\n\t\t\tthis.handleHitOver(hit);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called when the drag moves\r\n\thandleDrag: function(dx, dy, ev) {\r\n\t\tvar hit;\r\n\r\n\t\tDragListener.prototype.handleDrag.apply(this, arguments); // call the super-method\r\n\r\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\r\n\r\n\t\tif (!isHitsEqual(hit, this.hit)) { // a different hit than before?\r\n\t\t\tif (this.hit) {\r\n\t\t\t\tthis.handleHitOut();\r\n\t\t\t}\r\n\t\t\tif (hit) {\r\n\t\t\t\tthis.handleHitOver(hit);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called when dragging has been stopped\r\n\thandleDragEnd: function() {\r\n\t\tthis.handleHitDone();\r\n\t\tDragListener.prototype.handleDragEnd.apply(this, arguments); // call the super-method\r\n\t},\r\n\r\n\r\n\t// Called when a the mouse has just moved over a new hit\r\n\thandleHitOver: function(hit) {\r\n\t\tvar isOrig = isHitsEqual(hit, this.origHit);\r\n\r\n\t\tthis.hit = hit;\r\n\r\n\t\tthis.trigger('hitOver', this.hit, isOrig, this.origHit);\r\n\t},\r\n\r\n\r\n\t// Called when the mouse has just moved out of a hit\r\n\thandleHitOut: function() {\r\n\t\tif (this.hit) {\r\n\t\t\tthis.trigger('hitOut', this.hit);\r\n\t\t\tthis.handleHitDone();\r\n\t\t\tthis.hit = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called after a hitOut. Also called before a dragStop\r\n\thandleHitDone: function() {\r\n\t\tif (this.hit) {\r\n\t\t\tthis.trigger('hitDone', this.hit);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called when the interaction ends, whether there was a real drag or not\r\n\thandleInteractionEnd: function() {\r\n\t\tDragListener.prototype.handleInteractionEnd.apply(this, arguments); // call the super-method\r\n\r\n\t\tthis.origHit = null;\r\n\t\tthis.hit = null;\r\n\r\n\t\tthis.component.releaseHits();\r\n\t},\r\n\r\n\r\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\r\n\thandleScrollEnd: function() {\r\n\t\tDragListener.prototype.handleScrollEnd.apply(this, arguments); // call the super-method\r\n\r\n\t\tthis.computeCoords(); // hits' absolute positions will be in new places. recompute\r\n\t},\r\n\r\n\r\n\t// Gets the hit underneath the coordinates for the given mouse event\r\n\tqueryHit: function(left, top) {\r\n\r\n\t\tif (this.coordAdjust) {\r\n\t\t\tleft += this.coordAdjust.left;\r\n\t\t\ttop += this.coordAdjust.top;\r\n\t\t}\r\n\r\n\t\treturn this.component.queryHit(left, top);\r\n\t}\r\n\r\n});\r\n\r\n\r\n// Returns `true` if the hits are identically equal. `false` otherwise. Must be from the same component.\r\n// Two null values will be considered equal, as two \"out of the component\" states are the same.\r\nfunction isHitsEqual(hit0, hit1) {\r\n\r\n\tif (!hit0 && !hit1) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tif (hit0 && hit1) {\r\n\t\treturn hit0.component === hit1.component &&\r\n\t\t\tisHitPropsWithin(hit0, hit1) &&\r\n\t\t\tisHitPropsWithin(hit1, hit0); // ensures all props are identical\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n\r\n// Returns true if all of subHit's non-standard properties are within superHit\r\nfunction isHitPropsWithin(subHit, superHit) {\r\n\tfor (var propName in subHit) {\r\n\t\tif (!/^(component|left|right|top|bottom)$/.test(propName)) {\r\n\t\t\tif (subHit[propName] !== superHit[propName]) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\n;;\r\n\r\n/* Creates a clone of an element and lets it track the mouse as it moves\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nvar MouseFollower = Class.extend(ListenerMixin, {\r\n\r\n\toptions: null,\r\n\r\n\tsourceEl: null, // the element that will be cloned and made to look like it is dragging\r\n\tel: null, // the clone of `sourceEl` that will track the mouse\r\n\tparentEl: null, // the element that `el` (the clone) will be attached to\r\n\r\n\t// the initial position of el, relative to the offset parent. made to match the initial offset of sourceEl\r\n\ttop0: null,\r\n\tleft0: null,\r\n\r\n\t// the absolute coordinates of the initiating touch/mouse action\r\n\ty0: null,\r\n\tx0: null,\r\n\r\n\t// the number of pixels the mouse has moved from its initial position\r\n\ttopDelta: null,\r\n\tleftDelta: null,\r\n\r\n\tisFollowing: false,\r\n\tisHidden: false,\r\n\tisAnimating: false, // doing the revert animation?\r\n\r\n\tconstructor: function(sourceEl, options) {\r\n\t\tthis.options = options = options || {};\r\n\t\tthis.sourceEl = sourceEl;\r\n\t\tthis.parentEl = options.parentEl ? $(options.parentEl) : sourceEl.parent(); // default to sourceEl's parent\r\n\t},\r\n\r\n\r\n\t// Causes the element to start following the mouse\r\n\tstart: function(ev) {\r\n\t\tif (!this.isFollowing) {\r\n\t\t\tthis.isFollowing = true;\r\n\r\n\t\t\tthis.y0 = getEvY(ev);\r\n\t\t\tthis.x0 = getEvX(ev);\r\n\t\t\tthis.topDelta = 0;\r\n\t\t\tthis.leftDelta = 0;\r\n\r\n\t\t\tif (!this.isHidden) {\r\n\t\t\t\tthis.updatePosition();\r\n\t\t\t}\r\n\r\n\t\t\tif (getEvIsTouch(ev)) {\r\n\t\t\t\tthis.listenTo($(document), 'touchmove', this.handleMove);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.listenTo($(document), 'mousemove', this.handleMove);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Causes the element to stop following the mouse. If shouldRevert is true, will animate back to original position.\r\n\t// `callback` gets invoked when the animation is complete. If no animation, it is invoked immediately.\r\n\tstop: function(shouldRevert, callback) {\r\n\t\tvar _this = this;\r\n\t\tvar revertDuration = this.options.revertDuration;\r\n\r\n\t\tfunction complete() { // might be called by .animate(), which might change `this` context\r\n\t\t\t_this.isAnimating = false;\r\n\t\t\t_this.removeElement();\r\n\r\n\t\t\t_this.top0 = _this.left0 = null; // reset state for future updatePosition calls\r\n\r\n\t\t\tif (callback) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isFollowing && !this.isAnimating) { // disallow more than one stop animation at a time\r\n\t\t\tthis.isFollowing = false;\r\n\r\n\t\t\tthis.stopListeningTo($(document));\r\n\r\n\t\t\tif (shouldRevert && revertDuration && !this.isHidden) { // do a revert animation?\r\n\t\t\t\tthis.isAnimating = true;\r\n\t\t\t\tthis.el.animate({\r\n\t\t\t\t\ttop: this.top0,\r\n\t\t\t\t\tleft: this.left0\r\n\t\t\t\t}, {\r\n\t\t\t\t\tduration: revertDuration,\r\n\t\t\t\t\tcomplete: complete\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcomplete();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Gets the tracking element. Create it if necessary\r\n\tgetEl: function() {\r\n\t\tvar el = this.el;\r\n\r\n\t\tif (!el) {\r\n\t\t\tel = this.el = this.sourceEl.clone()\r\n\t\t\t\t.addClass(this.options.additionalClass || '')\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tvisibility: '', // in case original element was hidden (commonly through hideEvents())\r\n\t\t\t\t\tdisplay: this.isHidden ? 'none' : '', // for when initially hidden\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\tright: 'auto', // erase and set width instead\r\n\t\t\t\t\tbottom: 'auto', // erase and set height instead\r\n\t\t\t\t\twidth: this.sourceEl.width(), // explicit height in case there was a 'right' value\r\n\t\t\t\t\theight: this.sourceEl.height(), // explicit width in case there was a 'bottom' value\r\n\t\t\t\t\topacity: this.options.opacity || '',\r\n\t\t\t\t\tzIndex: this.options.zIndex\r\n\t\t\t\t});\r\n\r\n\t\t\t// we don't want long taps or any mouse interaction causing selection/menus.\r\n\t\t\t// would use preventSelection(), but that prevents selectstart, causing problems.\r\n\t\t\tel.addClass('fc-unselectable');\r\n\r\n\t\t\tel.appendTo(this.parentEl);\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t},\r\n\r\n\r\n\t// Removes the tracking element if it has already been created\r\n\tremoveElement: function() {\r\n\t\tif (this.el) {\r\n\t\t\tthis.el.remove();\r\n\t\t\tthis.el = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Update the CSS position of the tracking element\r\n\tupdatePosition: function() {\r\n\t\tvar sourceOffset;\r\n\t\tvar origin;\r\n\r\n\t\tthis.getEl(); // ensure this.el\r\n\r\n\t\t// make sure origin info was computed\r\n\t\tif (this.top0 === null) {\r\n\t\t\tsourceOffset = this.sourceEl.offset();\r\n\t\t\torigin = this.el.offsetParent().offset();\r\n\t\t\tthis.top0 = sourceOffset.top - origin.top;\r\n\t\t\tthis.left0 = sourceOffset.left - origin.left;\r\n\t\t}\r\n\r\n\t\tthis.el.css({\r\n\t\t\ttop: this.top0 + this.topDelta,\r\n\t\t\tleft: this.left0 + this.leftDelta\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Gets called when the user moves the mouse\r\n\thandleMove: function(ev) {\r\n\t\tthis.topDelta = getEvY(ev) - this.y0;\r\n\t\tthis.leftDelta = getEvX(ev) - this.x0;\r\n\r\n\t\tif (!this.isHidden) {\r\n\t\t\tthis.updatePosition();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Temporarily makes the tracking element invisible. Can be called before following starts\r\n\thide: function() {\r\n\t\tif (!this.isHidden) {\r\n\t\t\tthis.isHidden = true;\r\n\t\t\tif (this.el) {\r\n\t\t\t\tthis.el.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Show the tracking element after it has been temporarily hidden\r\n\tshow: function() {\r\n\t\tif (this.isHidden) {\r\n\t\t\tthis.isHidden = false;\r\n\t\t\tthis.updatePosition();\r\n\t\t\tthis.getEl().show();\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/* An abstract class comprised of a \"grid\" of areas that each represent a specific datetime\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nvar Grid = FC.Grid = Class.extend(ListenerMixin, MouseIgnorerMixin, {\r\n\r\n\t// self-config, overridable by subclasses\r\n\thasDayInteractions: true, // can user click/select ranges of time?\r\n\r\n\tview: null, // a View object\r\n\tisRTL: null, // shortcut to the view's isRTL option\r\n\r\n\tstart: null,\r\n\tend: null,\r\n\r\n\tel: null, // the containing element\r\n\telsByFill: null, // a hash of jQuery element sets used for rendering each fill. Keyed by fill name.\r\n\r\n\t// derived from options\r\n\teventTimeFormat: null,\r\n\tdisplayEventTime: null,\r\n\tdisplayEventEnd: null,\r\n\r\n\tminResizeDuration: null, // TODO: hack. set by subclasses. minumum event resize duration\r\n\r\n\t// if defined, holds the unit identified (ex: \"year\" or \"month\") that determines the level of granularity\r\n\t// of the date areas. if not defined, assumes to be day and time granularity.\r\n\t// TODO: port isTimeScale into same system?\r\n\tlargeUnit: null,\r\n\r\n\tdayDragListener: null,\r\n\tsegDragListener: null,\r\n\tsegResizeListener: null,\r\n\texternalDragListener: null,\r\n\r\n\r\n\tconstructor: function(view) {\r\n\t\tthis.view = view;\r\n\t\tthis.isRTL = view.opt('isRTL');\r\n\t\tthis.elsByFill = {};\r\n\r\n\t\tthis.dayDragListener = this.buildDayDragListener();\r\n\t\tthis.initMouseIgnoring();\r\n\t},\r\n\r\n\r\n\t/* Options\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Generates the format string used for event time text, if not explicitly defined by 'timeFormat'\r\n\tcomputeEventTimeFormat: function() {\r\n\t\treturn this.view.opt('smallTimeFormat');\r\n\t},\r\n\r\n\r\n\t// Determines whether events should have their end times displayed, if not explicitly defined by 'displayEventTime'.\r\n\t// Only applies to non-all-day events.\r\n\tcomputeDisplayEventTime: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t// Determines whether events should have their end times displayed, if not explicitly defined by 'displayEventEnd'\r\n\tcomputeDisplayEventEnd: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* Dates\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Tells the grid about what period of time to display.\r\n\t// Any date-related internal data should be generated.\r\n\tsetRange: function(range) {\r\n\t\tthis.start = range.start.clone();\r\n\t\tthis.end = range.end.clone();\r\n\r\n\t\tthis.rangeUpdated();\r\n\t\tthis.processRangeOptions();\r\n\t},\r\n\r\n\r\n\t// Called when internal variables that rely on the range should be updated\r\n\trangeUpdated: function() {\r\n\t},\r\n\r\n\r\n\t// Updates values that rely on options and also relate to range\r\n\tprocessRangeOptions: function() {\r\n\t\tvar view = this.view;\r\n\t\tvar displayEventTime;\r\n\t\tvar displayEventEnd;\r\n\r\n\t\tthis.eventTimeFormat =\r\n\t\t\tview.opt('eventTimeFormat') ||\r\n\t\t\tview.opt('timeFormat') || // deprecated\r\n\t\t\tthis.computeEventTimeFormat();\r\n\r\n\t\tdisplayEventTime = view.opt('displayEventTime');\r\n\t\tif (displayEventTime == null) {\r\n\t\t\tdisplayEventTime = this.computeDisplayEventTime(); // might be based off of range\r\n\t\t}\r\n\r\n\t\tdisplayEventEnd = view.opt('displayEventEnd');\r\n\t\tif (displayEventEnd == null) {\r\n\t\t\tdisplayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\r\n\t\t}\r\n\r\n\t\tthis.displayEventTime = displayEventTime;\r\n\t\tthis.displayEventEnd = displayEventEnd;\r\n\t},\r\n\r\n\r\n\t// Converts a span (has unzoned start/end and any other grid-specific location information)\r\n\t// into an array of segments (pieces of events whose format is decided by the grid).\r\n\tspanToSegs: function(span) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Diffs the two dates, returning a duration, based on granularity of the grid\r\n\t// TODO: port isTimeScale into this system?\r\n\tdiffDates: function(a, b) {\r\n\t\tif (this.largeUnit) {\r\n\t\t\treturn diffByUnit(a, b, this.largeUnit);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn diffDayTime(a, b);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Hit Area\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Called before one or more queryHit calls might happen. Should prepare any cached coordinates for queryHit\r\n\tprepareHits: function() {\r\n\t},\r\n\r\n\r\n\t// Called when queryHit calls have subsided. Good place to clear any coordinate caches.\r\n\treleaseHits: function() {\r\n\t},\r\n\r\n\r\n\t// Given coordinates from the topleft of the document, return data about the date-related area underneath.\r\n\t// Can return an object with arbitrary properties (although top/right/left/bottom are encouraged).\r\n\t// Must have a `grid` property, a reference to this current grid. TODO: avoid this\r\n\t// The returned object will be processed by getHitSpan and getHitEl.\r\n\tqueryHit: function(leftOffset, topOffset) {\r\n\t},\r\n\r\n\r\n\t// Given position-level information about a date-related area within the grid,\r\n\t// should return an object with at least a start/end date. Can provide other information as well.\r\n\tgetHitSpan: function(hit) {\r\n\t},\r\n\r\n\r\n\t// Given position-level information about a date-related area within the grid,\r\n\t// should return a jQuery element that best represents it. passed to dayClick callback.\r\n\tgetHitEl: function(hit) {\r\n\t},\r\n\r\n\r\n\t/* Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Sets the container element that the grid should render inside of.\r\n\t// Does other DOM-related initializations.\r\n\tsetElement: function(el) {\r\n\t\tthis.el = el;\r\n\r\n\t\tif (this.hasDayInteractions) {\r\n\t\t\tpreventSelection(el);\r\n\r\n\t\t\tthis.bindDayHandler('touchstart', this.dayTouchStart);\r\n\t\t\tthis.bindDayHandler('mousedown', this.dayMousedown);\r\n\t\t}\r\n\r\n\t\t// attach event-element-related handlers. in Grid.events\r\n\t\t// same garbage collection note as above.\r\n\t\tthis.bindSegHandlers();\r\n\r\n\t\tthis.bindGlobalHandlers();\r\n\t},\r\n\r\n\r\n\tbindDayHandler: function(name, handler) {\r\n\t\tvar _this = this;\r\n\r\n\t\t// attach a handler to the grid's root element.\r\n\t\t// jQuery will take care of unregistering them when removeElement gets called.\r\n\t\tthis.el.on(name, function(ev) {\r\n\t\t\tif (\r\n\t\t\t\t!$(ev.target).is(\r\n\t\t\t\t\t_this.segSelector + ',' + // directly on an event element\r\n\t\t\t\t\t_this.segSelector + ' *,' + // within an event element\r\n\t\t\t\t\t'.fc-more,' + // a \"more..\" link\r\n\t\t\t\t\t'a[data-goto]' // a clickable nav link\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\treturn handler.call(_this, ev);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Removes the grid's container element from the DOM. Undoes any other DOM-related attachments.\r\n\t// DOES NOT remove any content beforehand (doesn't clear events or call unrenderDates), unlike View\r\n\tremoveElement: function() {\r\n\t\tthis.unbindGlobalHandlers();\r\n\t\tthis.clearDragListeners();\r\n\r\n\t\tthis.el.remove();\r\n\r\n\t\t// NOTE: we don't null-out this.el for the same reasons we don't do it within View::removeElement\r\n\t},\r\n\r\n\r\n\t// Renders the basic structure of grid view before any content is rendered\r\n\trenderSkeleton: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Renders the grid's date-related content (like areas that represent days/times).\r\n\t// Assumes setRange has already been called and the skeleton has already been rendered.\r\n\trenderDates: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Unrenders the grid's date-related content\r\n\tunrenderDates: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t/* Handlers\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Binds DOM handlers to elements that reside outside the grid, such as the document\r\n\tbindGlobalHandlers: function() {\r\n\t\tthis.listenTo($(document), {\r\n\t\t\tdragstart: this.externalDragStart, // jqui\r\n\t\t\tsortstart: this.externalDragStart // jqui\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Unbinds DOM handlers from elements that reside outside the grid\r\n\tunbindGlobalHandlers: function() {\r\n\t\tthis.stopListeningTo($(document));\r\n\t},\r\n\r\n\r\n\t// Process a mousedown on an element that represents a day. For day clicking and selecting.\r\n\tdayMousedown: function(ev) {\r\n\t\tif (!this.isIgnoringMouse) {\r\n\t\t\tthis.dayDragListener.startInteraction(ev, {\r\n\t\t\t\t//distance: 5, // needs more work if we want dayClick to fire correctly\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tdayTouchStart: function(ev) {\r\n\t\tvar view = this.view;\r\n\r\n\t\t// HACK to prevent a user's clickaway for unselecting a range or an event\r\n\t\t// from causing a dayClick.\r\n\t\tif (view.isSelected || view.selectedEvent) {\r\n\t\t\tthis.tempIgnoreMouse();\r\n\t\t}\r\n\r\n\t\tthis.dayDragListener.startInteraction(ev, {\r\n\t\t\tdelay: this.view.opt('longPressDelay')\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Creates a listener that tracks the user's drag across day elements.\r\n\t// For day clicking and selecting.\r\n\tbuildDayDragListener: function() {\r\n\t\tvar _this = this;\r\n\t\tvar view = this.view;\r\n\t\tvar isSelectable = view.opt('selectable');\r\n\t\tvar dayClickHit; // null if invalid dayClick\r\n\t\tvar selectionSpan; // null if invalid selection\r\n\r\n\t\t// this listener tracks a mousedown on a day element, and a subsequent drag.\r\n\t\t// if the drag ends on the same day, it is a 'dayClick'.\r\n\t\t// if 'selectable' is enabled, this listener also detects selections.\r\n\t\tvar dragListener = new HitDragListener(this, {\r\n\t\t\tscroll: view.opt('dragScroll'),\r\n\t\t\tinteractionStart: function() {\r\n\t\t\t\tdayClickHit = dragListener.origHit; // for dayClick, where no dragging happens\r\n\t\t\t\tselectionSpan = null;\r\n\t\t\t},\r\n\t\t\tdragStart: function() {\r\n\t\t\t\tview.unselect(); // since we could be rendering a new selection, we want to clear any old one\r\n\t\t\t},\r\n\t\t\thitOver: function(hit, isOrig, origHit) {\r\n\t\t\t\tif (origHit) { // click needs to have started on a hit\r\n\r\n\t\t\t\t\t// if user dragged to another cell at any point, it can no longer be a dayClick\r\n\t\t\t\t\tif (!isOrig) {\r\n\t\t\t\t\t\tdayClickHit = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isSelectable) {\r\n\t\t\t\t\t\tselectionSpan = _this.computeSelection(\r\n\t\t\t\t\t\t\t_this.getHitSpan(origHit),\r\n\t\t\t\t\t\t\t_this.getHitSpan(hit)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif (selectionSpan) {\r\n\t\t\t\t\t\t\t_this.renderSelection(selectionSpan);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (selectionSpan === false) {\r\n\t\t\t\t\t\t\tdisableCursor();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\r\n\t\t\t\tdayClickHit = null;\r\n\t\t\t\tselectionSpan = null;\r\n\t\t\t\t_this.unrenderSelection();\r\n\t\t\t},\r\n\t\t\thitDone: function() { // called after a hitOut OR before a dragEnd\r\n\t\t\t\tenableCursor();\r\n\t\t\t},\r\n\t\t\tinteractionEnd: function(ev, isCancelled) {\r\n\t\t\t\tif (!isCancelled) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tdayClickHit &&\r\n\t\t\t\t\t\t!_this.isIgnoringMouse // see hack in dayTouchStart\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tview.triggerDayClick(\r\n\t\t\t\t\t\t\t_this.getHitSpan(dayClickHit),\r\n\t\t\t\t\t\t\t_this.getHitEl(dayClickHit),\r\n\t\t\t\t\t\t\tev\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (selectionSpan) {\r\n\t\t\t\t\t\t// the selection will already have been rendered. just report it\r\n\t\t\t\t\t\tview.reportSelection(selectionSpan, ev);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn dragListener;\r\n\t},\r\n\r\n\r\n\t// Kills all in-progress dragging.\r\n\t// Useful for when public API methods that result in re-rendering are invoked during a drag.\r\n\t// Also useful for when touch devices misbehave and don't fire their touchend.\r\n\tclearDragListeners: function() {\r\n\t\tthis.dayDragListener.endInteraction();\r\n\r\n\t\tif (this.segDragListener) {\r\n\t\t\tthis.segDragListener.endInteraction(); // will clear this.segDragListener\r\n\t\t}\r\n\t\tif (this.segResizeListener) {\r\n\t\t\tthis.segResizeListener.endInteraction(); // will clear this.segResizeListener\r\n\t\t}\r\n\t\tif (this.externalDragListener) {\r\n\t\t\tthis.externalDragListener.endInteraction(); // will clear this.externalDragListener\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Event Helper\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\t// TODO: should probably move this to Grid.events, like we did event dragging / resizing\r\n\r\n\r\n\t// Renders a mock event at the given event location, which contains zoned start/end properties.\r\n\t// Returns all mock event elements.\r\n\trenderEventLocationHelper: function(eventLocation, sourceSeg) {\r\n\t\tvar fakeEvent = this.fabricateHelperEvent(eventLocation, sourceSeg);\r\n\r\n\t\treturn this.renderHelper(fakeEvent, sourceSeg); // do the actual rendering\r\n\t},\r\n\r\n\r\n\t// Builds a fake event given zoned event date properties and a segment is should be inspired from.\r\n\t// The range's end can be null, in which case the mock event that is rendered will have a null end time.\r\n\t// `sourceSeg` is the internal segment object involved in the drag. If null, something external is dragging.\r\n\tfabricateHelperEvent: function(eventLocation, sourceSeg) {\r\n\t\tvar fakeEvent = sourceSeg ? createObject(sourceSeg.event) : {}; // mask the original event object if possible\r\n\r\n\t\tfakeEvent.start = eventLocation.start.clone();\r\n\t\tfakeEvent.end = eventLocation.end ? eventLocation.end.clone() : null;\r\n\t\tfakeEvent.allDay = null; // force it to be freshly computed by normalizeEventDates\r\n\t\tthis.view.calendar.normalizeEventDates(fakeEvent);\r\n\r\n\t\t// this extra className will be useful for differentiating real events from mock events in CSS\r\n\t\tfakeEvent.className = (fakeEvent.className || []).concat('fc-helper');\r\n\r\n\t\t// if something external is being dragged in, don't render a resizer\r\n\t\tif (!sourceSeg) {\r\n\t\t\tfakeEvent.editable = false;\r\n\t\t}\r\n\r\n\t\treturn fakeEvent;\r\n\t},\r\n\r\n\r\n\t// Renders a mock event. Given zoned event date properties.\r\n\t// Must return all mock event elements.\r\n\trenderHelper: function(eventLocation, sourceSeg) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Unrenders a mock event\r\n\tunrenderHelper: function() {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t/* Selection\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of a selection. Will highlight by default but can be overridden by subclasses.\r\n\t// Given a span (unzoned start/end and other misc data)\r\n\trenderSelection: function(span) {\r\n\t\tthis.renderHighlight(span);\r\n\t},\r\n\r\n\r\n\t// Unrenders any visual indications of a selection. Will unrender a highlight by default.\r\n\tunrenderSelection: function() {\r\n\t\tthis.unrenderHighlight();\r\n\t},\r\n\r\n\r\n\t// Given the first and last date-spans of a selection, returns another date-span object.\r\n\t// Subclasses can override and provide additional data in the span object. Will be passed to renderSelection().\r\n\t// Will return false if the selection is invalid and this should be indicated to the user.\r\n\t// Will return null/undefined if a selection invalid but no error should be reported.\r\n\tcomputeSelection: function(span0, span1) {\r\n\t\tvar span = this.computeSelectionSpan(span0, span1);\r\n\r\n\t\tif (span && !this.view.calendar.isSelectionSpanAllowed(span)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn span;\r\n\t},\r\n\r\n\r\n\t// Given two spans, must return the combination of the two.\r\n\t// TODO: do this separation of concerns (combining VS validation) for event dnd/resize too.\r\n\tcomputeSelectionSpan: function(span0, span1) {\r\n\t\tvar dates = [ span0.start, span0.end, span1.start, span1.end ];\r\n\r\n\t\tdates.sort(compareNumbers); // sorts chronologically. works with Moments\r\n\r\n\t\treturn { start: dates[0].clone(), end: dates[3].clone() };\r\n\t},\r\n\r\n\r\n\t/* Highlight\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders an emphasis on the given date range. Given a span (unzoned start/end and other misc data)\r\n\trenderHighlight: function(span) {\r\n\t\tthis.renderFill('highlight', this.spanToSegs(span));\r\n\t},\r\n\r\n\r\n\t// Unrenders the emphasis on a date range\r\n\tunrenderHighlight: function() {\r\n\t\tthis.unrenderFill('highlight');\r\n\t},\r\n\r\n\r\n\t// Generates an array of classNames for rendering the highlight. Used by the fill system.\r\n\thighlightSegClasses: function() {\r\n\t\treturn [ 'fc-highlight' ];\r\n\t},\r\n\r\n\r\n\t/* Business Hours\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderBusinessHours: function() {\r\n\t},\r\n\r\n\r\n\tunrenderBusinessHours: function() {\r\n\t},\r\n\r\n\r\n\t/* Now Indicator\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tgetNowIndicatorUnit: function() {\r\n\t},\r\n\r\n\r\n\trenderNowIndicator: function(date) {\r\n\t},\r\n\r\n\r\n\tunrenderNowIndicator: function() {\r\n\t},\r\n\r\n\r\n\t/* Fill System (highlight, background events, business hours)\r\n\t--------------------------------------------------------------------------------------------------------------------\r\n\tTODO: remove this system. like we did in TimeGrid\r\n\t*/\r\n\r\n\r\n\t// Renders a set of rectangles over the given segments of time.\r\n\t// MUST RETURN a subset of segs, the segs that were actually rendered.\r\n\t// Responsible for populating this.elsByFill. TODO: better API for expressing this requirement\r\n\trenderFill: function(type, segs) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Unrenders a specific type of fill that is currently rendered on the grid\r\n\tunrenderFill: function(type) {\r\n\t\tvar el = this.elsByFill[type];\r\n\r\n\t\tif (el) {\r\n\t\t\tel.remove();\r\n\t\t\tdelete this.elsByFill[type];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\r\n\t// Only returns segments that successfully rendered.\r\n\t// To be harnessed by renderFill (implemented by subclasses).\r\n\t// Analagous to renderFgSegEls.\r\n\trenderFillSegEls: function(type, segs) {\r\n\t\tvar _this = this;\r\n\t\tvar segElMethod = this[type + 'SegEl'];\r\n\t\tvar html = '';\r\n\t\tvar renderedSegs = [];\r\n\t\tvar i;\r\n\r\n\t\tif (segs.length) {\r\n\r\n\t\t\t// build a large concatenation of segment HTML\r\n\t\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\t\thtml += this.fillSegHtml(type, segs[i]);\r\n\t\t\t}\r\n\r\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\r\n\t\t\t// Then, compute the 'el' for each segment.\r\n\t\t\t$(html).each(function(i, node) {\r\n\t\t\t\tvar seg = segs[i];\r\n\t\t\t\tvar el = $(node);\r\n\r\n\t\t\t\t// allow custom filter methods per-type\r\n\t\t\t\tif (segElMethod) {\r\n\t\t\t\t\tel = segElMethod.call(_this, seg, el);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el) { // custom filters did not cancel the render\r\n\t\t\t\t\tel = $(el); // allow custom filter to return raw DOM node\r\n\r\n\t\t\t\t\t// correct element type? (would be bad if a non-TD were inserted into a table for example)\r\n\t\t\t\t\tif (el.is(_this.fillSegTag)) {\r\n\t\t\t\t\t\tseg.el = el;\r\n\t\t\t\t\t\trenderedSegs.push(seg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn renderedSegs;\r\n\t},\r\n\r\n\r\n\tfillSegTag: 'div', // subclasses can override\r\n\r\n\r\n\t// Builds the HTML needed for one fill segment. Generic enough to work with different types.\r\n\tfillSegHtml: function(type, seg) {\r\n\r\n\t\t// custom hooks per-type\r\n\t\tvar classesMethod = this[type + 'SegClasses'];\r\n\t\tvar cssMethod = this[type + 'SegCss'];\r\n\r\n\t\tvar classes = classesMethod ? classesMethod.call(this, seg) : [];\r\n\t\tvar css = cssToStr(cssMethod ? cssMethod.call(this, seg) : {});\r\n\r\n\t\treturn '<' + this.fillSegTag +\r\n\t\t\t(classes.length ? ' class=\"' + classes.join(' ') + '\"' : '') +\r\n\t\t\t(css ? ' style=\"' + css + '\"' : '') +\r\n\t\t\t' />';\r\n\t},\r\n\r\n\r\n\r\n\t/* Generic rendering utilities for subclasses\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes HTML classNames for a single-day element\r\n\tgetDayClasses: function(date) {\r\n\t\tvar view = this.view;\r\n\t\tvar today = view.calendar.getNow();\r\n\t\tvar classes = [ 'fc-' + dayIDs[date.day()] ];\r\n\r\n\t\tif (\r\n\t\t\tview.intervalDuration.as('months') == 1 &&\r\n\t\t\tdate.month() != view.intervalStart.month()\r\n\t\t) {\r\n\t\t\tclasses.push('fc-other-month');\r\n\t\t}\r\n\r\n\t\tif (date.isSame(today, 'day')) {\r\n\t\t\tclasses.push(\r\n\t\t\t\t'fc-today',\r\n\t\t\t\tview.highlightStateClass\r\n\t\t\t);\r\n\t\t}\r\n\t\telse if (date < today) {\r\n\t\t\tclasses.push('fc-past');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tclasses.push('fc-future');\r\n\t\t}\r\n\r\n\t\treturn classes;\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/* Event-rendering and event-interaction methods for the abstract Grid class\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nGrid.mixin({\r\n\r\n\t// self-config, overridable by subclasses\r\n\tsegSelector: '.fc-event-container > *', // what constitutes an event element?\r\n\r\n\tmousedOverSeg: null, // the segment object the user's mouse is over. null if over nothing\r\n\tisDraggingSeg: false, // is a segment being dragged? boolean\r\n\tisResizingSeg: false, // is a segment being resized? boolean\r\n\tisDraggingExternal: false, // jqui-dragging an external element? boolean\r\n\tsegs: null, // the *event* segments currently rendered in the grid. TODO: rename to `eventSegs`\r\n\r\n\r\n\t// Renders the given events onto the grid\r\n\trenderEvents: function(events) {\r\n\t\tvar bgEvents = [];\r\n\t\tvar fgEvents = [];\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < events.length; i++) {\r\n\t\t\t(isBgEvent(events[i]) ? bgEvents : fgEvents).push(events[i]);\r\n\t\t}\r\n\r\n\t\tthis.segs = [].concat( // record all segs\r\n\t\t\tthis.renderBgEvents(bgEvents),\r\n\t\t\tthis.renderFgEvents(fgEvents)\r\n\t\t);\r\n\t},\r\n\r\n\r\n\trenderBgEvents: function(events) {\r\n\t\tvar segs = this.eventsToSegs(events);\r\n\r\n\t\t// renderBgSegs might return a subset of segs, segs that were actually rendered\r\n\t\treturn this.renderBgSegs(segs) || segs;\r\n\t},\r\n\r\n\r\n\trenderFgEvents: function(events) {\r\n\t\tvar segs = this.eventsToSegs(events);\r\n\r\n\t\t// renderFgSegs might return a subset of segs, segs that were actually rendered\r\n\t\treturn this.renderFgSegs(segs) || segs;\r\n\t},\r\n\r\n\r\n\t// Unrenders all events currently rendered on the grid\r\n\tunrenderEvents: function() {\r\n\t\tthis.handleSegMouseout(); // trigger an eventMouseout if user's mouse is over an event\r\n\t\tthis.clearDragListeners();\r\n\r\n\t\tthis.unrenderFgSegs();\r\n\t\tthis.unrenderBgSegs();\r\n\r\n\t\tthis.segs = null;\r\n\t},\r\n\r\n\r\n\t// Retrieves all rendered segment objects currently rendered on the grid\r\n\tgetEventSegs: function() {\r\n\t\treturn this.segs || [];\r\n\t},\r\n\r\n\r\n\t/* Foreground Segment Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders foreground event segments onto the grid. May return a subset of segs that were rendered.\r\n\trenderFgSegs: function(segs) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Unrenders all currently rendered foreground segments\r\n\tunrenderFgSegs: function() {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Renders and assigns an `el` property for each foreground event segment.\r\n\t// Only returns segments that successfully rendered.\r\n\t// A utility that subclasses may use.\r\n\trenderFgSegEls: function(segs, disableResizing) {\r\n\t\tvar view = this.view;\r\n\t\tvar html = '';\r\n\t\tvar renderedSegs = [];\r\n\t\tvar i;\r\n\r\n\t\tif (segs.length) { // don't build an empty html string\r\n\r\n\t\t\t// build a large concatenation of event segment HTML\r\n\t\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\t\thtml += this.fgSegHtml(segs[i], disableResizing);\r\n\t\t\t}\r\n\r\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\r\n\t\t\t// Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\r\n\t\t\t$(html).each(function(i, node) {\r\n\t\t\t\tvar seg = segs[i];\r\n\t\t\t\tvar el = view.resolveEventEl(seg.event, $(node));\r\n\r\n\t\t\t\tif (el) {\r\n\t\t\t\t\tel.data('fc-seg', seg); // used by handlers\r\n\t\t\t\t\tseg.el = el;\r\n\t\t\t\t\trenderedSegs.push(seg);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn renderedSegs;\r\n\t},\r\n\r\n\r\n\t// Generates the HTML for the default rendering of a foreground event segment. Used by renderFgSegEls()\r\n\tfgSegHtml: function(seg, disableResizing) {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t/* Background Segment Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders the given background event segments onto the grid.\r\n\t// Returns a subset of the segs that were actually rendered.\r\n\trenderBgSegs: function(segs) {\r\n\t\treturn this.renderFill('bgEvent', segs);\r\n\t},\r\n\r\n\r\n\t// Unrenders all the currently rendered background event segments\r\n\tunrenderBgSegs: function() {\r\n\t\tthis.unrenderFill('bgEvent');\r\n\t},\r\n\r\n\r\n\t// Renders a background event element, given the default rendering. Called by the fill system.\r\n\tbgEventSegEl: function(seg, el) {\r\n\t\treturn this.view.resolveEventEl(seg.event, el); // will filter through eventRender\r\n\t},\r\n\r\n\r\n\t// Generates an array of classNames to be used for the default rendering of a background event.\r\n\t// Called by fillSegHtml.\r\n\tbgEventSegClasses: function(seg) {\r\n\t\tvar event = seg.event;\r\n\t\tvar source = event.source || {};\r\n\r\n\t\treturn [ 'fc-bgevent' ].concat(\r\n\t\t\tevent.className,\r\n\t\t\tsource.className || []\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Generates a semicolon-separated CSS string to be used for the default rendering of a background event.\r\n\t// Called by fillSegHtml.\r\n\tbgEventSegCss: function(seg) {\r\n\t\treturn {\r\n\t\t\t'background-color': this.getSegSkinCss(seg)['background-color']\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t// Generates an array of classNames to be used for the rendering business hours overlay. Called by the fill system.\r\n\t// Called by fillSegHtml.\r\n\tbusinessHoursSegClasses: function(seg) {\r\n\t\treturn [ 'fc-nonbusiness', 'fc-bgevent' ];\r\n\t},\r\n\r\n\r\n\t/* Business Hours\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Compute business hour segs for the grid's current date range.\r\n\t// Caller must ask if whole-day business hours are needed.\r\n\tbuildBusinessHourSegs: function(wholeDay) {\r\n\t\tvar events = this.view.calendar.getCurrentBusinessHourEvents(wholeDay);\r\n\r\n\t\t// HACK. Eventually refactor business hours \"events\" system.\r\n\t\t// If no events are given, but businessHours is activated, this means the entire visible range should be\r\n\t\t// marked as *not* business-hours, via inverse-background rendering.\r\n\t\tif (\r\n\t\t\t!events.length &&\r\n\t\t\tthis.view.calendar.options.businessHours // don't access view option. doesn't update with dynamic options\r\n\t\t) {\r\n\t\t\tevents = [\r\n\t\t\t\t$.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, {\r\n\t\t\t\t\tstart: this.view.end, // guaranteed out-of-range\r\n\t\t\t\t\tend: this.view.end,   // \"\r\n\t\t\t\t\tdow: null\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn this.eventsToSegs(events);\r\n\t},\r\n\r\n\r\n\t/* Handlers\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Attaches event-element-related handlers for *all* rendered event segments of the view.\r\n\tbindSegHandlers: function() {\r\n\t\tthis.bindSegHandlersToEl(this.el);\r\n\t},\r\n\r\n\r\n\t// Attaches event-element-related handlers to an arbitrary container element. leverages bubbling.\r\n\tbindSegHandlersToEl: function(el) {\r\n\t\tthis.bindSegHandlerToEl(el, 'touchstart', this.handleSegTouchStart);\r\n\t\tthis.bindSegHandlerToEl(el, 'touchend', this.handleSegTouchEnd);\r\n\t\tthis.bindSegHandlerToEl(el, 'mouseenter', this.handleSegMouseover);\r\n\t\tthis.bindSegHandlerToEl(el, 'mouseleave', this.handleSegMouseout);\r\n\t\tthis.bindSegHandlerToEl(el, 'mousedown', this.handleSegMousedown);\r\n\t\tthis.bindSegHandlerToEl(el, 'click', this.handleSegClick);\r\n\t},\r\n\r\n\r\n\t// Executes a handler for any a user-interaction on a segment.\r\n\t// Handler gets called with (seg, ev), and with the `this` context of the Grid\r\n\tbindSegHandlerToEl: function(el, name, handler) {\r\n\t\tvar _this = this;\r\n\r\n\t\tel.on(name, this.segSelector, function(ev) {\r\n\t\t\tvar seg = $(this).data('fc-seg'); // grab segment data. put there by View::renderEvents\r\n\r\n\t\t\t// only call the handlers if there is not a drag/resize in progress\r\n\t\t\tif (seg && !_this.isDraggingSeg && !_this.isResizingSeg) {\r\n\t\t\t\treturn handler.call(_this, seg, ev); // context will be the Grid\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\r\n\thandleSegClick: function(seg, ev) {\r\n\t\tvar res = this.view.trigger('eventClick', seg.el[0], seg.event, ev); // can return `false` to cancel\r\n\t\tif (res === false) {\r\n\t\t\tev.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Updates internal state and triggers handlers for when an event element is moused over\r\n\thandleSegMouseover: function(seg, ev) {\r\n\t\tif (\r\n\t\t\t!this.isIgnoringMouse &&\r\n\t\t\t!this.mousedOverSeg\r\n\t\t) {\r\n\t\t\tthis.mousedOverSeg = seg;\r\n\t\t\tif (this.view.isEventResizable(seg.event)) {\r\n\t\t\t\tseg.el.addClass('fc-allow-mouse-resize');\r\n\t\t\t}\r\n\t\t\tthis.view.trigger('eventMouseover', seg.el[0], seg.event, ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Updates internal state and triggers handlers for when an event element is moused out.\r\n\t// Can be given no arguments, in which case it will mouseout the segment that was previously moused over.\r\n\thandleSegMouseout: function(seg, ev) {\r\n\t\tev = ev || {}; // if given no args, make a mock mouse event\r\n\r\n\t\tif (this.mousedOverSeg) {\r\n\t\t\tseg = seg || this.mousedOverSeg; // if given no args, use the currently moused-over segment\r\n\t\t\tthis.mousedOverSeg = null;\r\n\t\t\tif (this.view.isEventResizable(seg.event)) {\r\n\t\t\t\tseg.el.removeClass('fc-allow-mouse-resize');\r\n\t\t\t}\r\n\t\t\tthis.view.trigger('eventMouseout', seg.el[0], seg.event, ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleSegMousedown: function(seg, ev) {\r\n\t\tvar isResizing = this.startSegResize(seg, ev, { distance: 5 });\r\n\r\n\t\tif (!isResizing && this.view.isEventDraggable(seg.event)) {\r\n\t\t\tthis.buildSegDragListener(seg)\r\n\t\t\t\t.startInteraction(ev, {\r\n\t\t\t\t\tdistance: 5\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\r\n\thandleSegTouchStart: function(seg, ev) {\r\n\t\tvar view = this.view;\r\n\t\tvar event = seg.event;\r\n\t\tvar isSelected = view.isEventSelected(event);\r\n\t\tvar isDraggable = view.isEventDraggable(event);\r\n\t\tvar isResizable = view.isEventResizable(event);\r\n\t\tvar isResizing = false;\r\n\t\tvar dragListener;\r\n\r\n\t\tif (isSelected && isResizable) {\r\n\t\t\t// only allow resizing of the event is selected\r\n\t\t\tisResizing = this.startSegResize(seg, ev);\r\n\t\t}\r\n\r\n\t\tif (!isResizing && (isDraggable || isResizable)) { // allowed to be selected?\r\n\r\n\t\t\tdragListener = isDraggable ?\r\n\t\t\t\tthis.buildSegDragListener(seg) :\r\n\t\t\t\tthis.buildSegSelectListener(seg); // seg isn't draggable, but still needs to be selected\r\n\r\n\t\t\tdragListener.startInteraction(ev, { // won't start if already started\r\n\t\t\t\tdelay: isSelected ? 0 : this.view.opt('longPressDelay') // do delay if not already selected\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// a long tap simulates a mouseover. ignore this bogus mouseover.\r\n\t\tthis.tempIgnoreMouse();\r\n\t},\r\n\r\n\r\n\thandleSegTouchEnd: function(seg, ev) {\r\n\t\t// touchstart+touchend = click, which simulates a mouseover.\r\n\t\t// ignore this bogus mouseover.\r\n\t\tthis.tempIgnoreMouse();\r\n\t},\r\n\r\n\r\n\t// returns boolean whether resizing actually started or not.\r\n\t// assumes the seg allows resizing.\r\n\t// `dragOptions` are optional.\r\n\tstartSegResize: function(seg, ev, dragOptions) {\r\n\t\tif ($(ev.target).is('.fc-resizer')) {\r\n\t\t\tthis.buildSegResizeListener(seg, $(ev.target).is('.fc-start-resizer'))\r\n\t\t\t\t.startInteraction(ev, dragOptions);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\r\n\r\n\t/* Event Dragging\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Builds a listener that will track user-dragging on an event segment.\r\n\t// Generic enough to work with any type of Grid.\r\n\t// Has side effect of setting/unsetting `segDragListener`\r\n\tbuildSegDragListener: function(seg) {\r\n\t\tvar _this = this;\r\n\t\tvar view = this.view;\r\n\t\tvar calendar = view.calendar;\r\n\t\tvar el = seg.el;\r\n\t\tvar event = seg.event;\r\n\t\tvar isDragging;\r\n\t\tvar mouseFollower; // A clone of the original element that will move with the mouse\r\n\t\tvar dropLocation; // zoned event date properties\r\n\r\n\t\tif (this.segDragListener) {\r\n\t\t\treturn this.segDragListener;\r\n\t\t}\r\n\r\n\t\t// Tracks mouse movement over the *view's* coordinate map. Allows dragging and dropping between subcomponents\r\n\t\t// of the view.\r\n\t\tvar dragListener = this.segDragListener = new HitDragListener(view, {\r\n\t\t\tscroll: view.opt('dragScroll'),\r\n\t\t\tsubjectEl: el,\r\n\t\t\tsubjectCenter: true,\r\n\t\t\tinteractionStart: function(ev) {\r\n\t\t\t\tseg.component = _this; // for renderDrag\r\n\t\t\t\tisDragging = false;\r\n\t\t\t\tmouseFollower = new MouseFollower(seg.el, {\r\n\t\t\t\t\tadditionalClass: 'fc-dragging',\r\n\t\t\t\t\tparentEl: view.el,\r\n\t\t\t\t\topacity: dragListener.isTouch ? null : view.opt('dragOpacity'),\r\n\t\t\t\t\trevertDuration: view.opt('dragRevertDuration'),\r\n\t\t\t\t\tzIndex: 2 // one above the .fc-view\r\n\t\t\t\t});\r\n\t\t\t\tmouseFollower.hide(); // don't show until we know this is a real drag\r\n\t\t\t\tmouseFollower.start(ev);\r\n\t\t\t},\r\n\t\t\tdragStart: function(ev) {\r\n\t\t\t\tif (dragListener.isTouch && !view.isEventSelected(event)) {\r\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\r\n\t\t\t\t\tview.selectEvent(event);\r\n\t\t\t\t}\r\n\t\t\t\tisDragging = true;\r\n\t\t\t\t_this.handleSegMouseout(seg, ev); // ensure a mouseout on the manipulated event has been reported\r\n\t\t\t\t_this.segDragStart(seg, ev);\r\n\t\t\t\tview.hideEvent(event); // hide all event segments. our mouseFollower will take over\r\n\t\t\t},\r\n\t\t\thitOver: function(hit, isOrig, origHit) {\r\n\t\t\t\tvar dragHelperEls;\r\n\r\n\t\t\t\t// starting hit could be forced (DayGrid.limit)\r\n\t\t\t\tif (seg.hit) {\r\n\t\t\t\t\torigHit = seg.hit;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// since we are querying the parent view, might not belong to this grid\r\n\t\t\t\tdropLocation = _this.computeEventDrop(\r\n\t\t\t\t\torigHit.component.getHitSpan(origHit),\r\n\t\t\t\t\thit.component.getHitSpan(hit),\r\n\t\t\t\t\tevent\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (dropLocation && !calendar.isEventSpanAllowed(_this.eventToSpan(dropLocation), event)) {\r\n\t\t\t\t\tdisableCursor();\r\n\t\t\t\t\tdropLocation = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if a valid drop location, have the subclass render a visual indication\r\n\t\t\t\tif (dropLocation && (dragHelperEls = view.renderDrag(dropLocation, seg))) {\r\n\r\n\t\t\t\t\tdragHelperEls.addClass('fc-dragging');\r\n\t\t\t\t\tif (!dragListener.isTouch) {\r\n\t\t\t\t\t\t_this.applyDragOpacity(dragHelperEls);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmouseFollower.hide(); // if the subclass is already using a mock event \"helper\", hide our own\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tmouseFollower.show(); // otherwise, have the helper follow the mouse (no snapping)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isOrig) {\r\n\t\t\t\t\tdropLocation = null; // needs to have moved hits to be a valid drop\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\r\n\t\t\t\tview.unrenderDrag(); // unrender whatever was done in renderDrag\r\n\t\t\t\tmouseFollower.show(); // show in case we are moving out of all hits\r\n\t\t\t\tdropLocation = null;\r\n\t\t\t},\r\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\r\n\t\t\t\tenableCursor();\r\n\t\t\t},\r\n\t\t\tinteractionEnd: function(ev) {\r\n\t\t\t\tdelete seg.component; // prevent side effects\r\n\r\n\t\t\t\t// do revert animation if hasn't changed. calls a callback when finished (whether animation or not)\r\n\t\t\t\tmouseFollower.stop(!dropLocation, function() {\r\n\t\t\t\t\tif (isDragging) {\r\n\t\t\t\t\t\tview.unrenderDrag();\r\n\t\t\t\t\t\tview.showEvent(event);\r\n\t\t\t\t\t\t_this.segDragStop(seg, ev);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dropLocation) {\r\n\t\t\t\t\t\tview.reportEventDrop(event, dropLocation, this.largeUnit, el, ev);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t_this.segDragListener = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn dragListener;\r\n\t},\r\n\r\n\r\n\t// seg isn't draggable, but let's use a generic DragListener\r\n\t// simply for the delay, so it can be selected.\r\n\t// Has side effect of setting/unsetting `segDragListener`\r\n\tbuildSegSelectListener: function(seg) {\r\n\t\tvar _this = this;\r\n\t\tvar view = this.view;\r\n\t\tvar event = seg.event;\r\n\r\n\t\tif (this.segDragListener) {\r\n\t\t\treturn this.segDragListener;\r\n\t\t}\r\n\r\n\t\tvar dragListener = this.segDragListener = new DragListener({\r\n\t\t\tdragStart: function(ev) {\r\n\t\t\t\tif (dragListener.isTouch && !view.isEventSelected(event)) {\r\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\r\n\t\t\t\t\tview.selectEvent(event);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinteractionEnd: function(ev) {\r\n\t\t\t\t_this.segDragListener = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn dragListener;\r\n\t},\r\n\r\n\r\n\t// Called before event segment dragging starts\r\n\tsegDragStart: function(seg, ev) {\r\n\t\tthis.isDraggingSeg = true;\r\n\t\tthis.view.trigger('eventDragStart', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\r\n\t},\r\n\r\n\r\n\t// Called after event segment dragging stops\r\n\tsegDragStop: function(seg, ev) {\r\n\t\tthis.isDraggingSeg = false;\r\n\t\tthis.view.trigger('eventDragStop', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\r\n\t},\r\n\r\n\r\n\t// Given the spans an event drag began, and the span event was dropped, calculates the new zoned start/end/allDay\r\n\t// values for the event. Subclasses may override and set additional properties to be used by renderDrag.\r\n\t// A falsy returned value indicates an invalid drop.\r\n\t// DOES NOT consider overlap/constraint.\r\n\tcomputeEventDrop: function(startSpan, endSpan, event) {\r\n\t\tvar calendar = this.view.calendar;\r\n\t\tvar dragStart = startSpan.start;\r\n\t\tvar dragEnd = endSpan.start;\r\n\t\tvar delta;\r\n\t\tvar dropLocation; // zoned event date properties\r\n\r\n\t\tif (dragStart.hasTime() === dragEnd.hasTime()) {\r\n\t\t\tdelta = this.diffDates(dragEnd, dragStart);\r\n\r\n\t\t\t// if an all-day event was in a timed area and it was dragged to a different time,\r\n\t\t\t// guarantee an end and adjust start/end to have times\r\n\t\t\tif (event.allDay && durationHasTime(delta)) {\r\n\t\t\t\tdropLocation = {\r\n\t\t\t\t\tstart: event.start.clone(),\r\n\t\t\t\t\tend: calendar.getEventEnd(event), // will be an ambig day\r\n\t\t\t\t\tallDay: false // for normalizeEventTimes\r\n\t\t\t\t};\r\n\t\t\t\tcalendar.normalizeEventTimes(dropLocation);\r\n\t\t\t}\r\n\t\t\t// othewise, work off existing values\r\n\t\t\telse {\r\n\t\t\t\tdropLocation = pluckEventDateProps(event);\r\n\t\t\t}\r\n\r\n\t\t\tdropLocation.start.add(delta);\r\n\t\t\tif (dropLocation.end) {\r\n\t\t\t\tdropLocation.end.add(delta);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// if switching from day <-> timed, start should be reset to the dropped date, and the end cleared\r\n\t\t\tdropLocation = {\r\n\t\t\t\tstart: dragEnd.clone(),\r\n\t\t\t\tend: null, // end should be cleared\r\n\t\t\t\tallDay: !dragEnd.hasTime()\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn dropLocation;\r\n\t},\r\n\r\n\r\n\t// Utility for apply dragOpacity to a jQuery set\r\n\tapplyDragOpacity: function(els) {\r\n\t\tvar opacity = this.view.opt('dragOpacity');\r\n\r\n\t\tif (opacity != null) {\r\n\t\t\tels.css('opacity', opacity);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* External Element Dragging\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Called when a jQuery UI drag is initiated anywhere in the DOM\r\n\texternalDragStart: function(ev, ui) {\r\n\t\tvar view = this.view;\r\n\t\tvar el;\r\n\t\tvar accept;\r\n\r\n\t\tif (view.opt('droppable')) { // only listen if this setting is on\r\n\t\t\tel = $((ui ? ui.item : null) || ev.target);\r\n\r\n\t\t\t// Test that the dragged element passes the dropAccept selector or filter function.\r\n\t\t\t// FYI, the default is \"*\" (matches all)\r\n\t\t\taccept = view.opt('dropAccept');\r\n\t\t\tif ($.isFunction(accept) ? accept.call(el[0], el) : el.is(accept)) {\r\n\t\t\t\tif (!this.isDraggingExternal) { // prevent double-listening if fired twice\r\n\t\t\t\t\tthis.listenToExternalDrag(el, ev, ui);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Called when a jQuery UI drag starts and it needs to be monitored for dropping\r\n\tlistenToExternalDrag: function(el, ev, ui) {\r\n\t\tvar _this = this;\r\n\t\tvar calendar = this.view.calendar;\r\n\t\tvar meta = getDraggedElMeta(el); // extra data about event drop, including possible event to create\r\n\t\tvar dropLocation; // a null value signals an unsuccessful drag\r\n\r\n\t\t// listener that tracks mouse movement over date-associated pixel regions\r\n\t\tvar dragListener = _this.externalDragListener = new HitDragListener(this, {\r\n\t\t\tinteractionStart: function() {\r\n\t\t\t\t_this.isDraggingExternal = true;\r\n\t\t\t},\r\n\t\t\thitOver: function(hit) {\r\n\t\t\t\tdropLocation = _this.computeExternalDrop(\r\n\t\t\t\t\thit.component.getHitSpan(hit), // since we are querying the parent view, might not belong to this grid\r\n\t\t\t\t\tmeta\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( // invalid hit?\r\n\t\t\t\t\tdropLocation &&\r\n\t\t\t\t\t!calendar.isExternalSpanAllowed(_this.eventToSpan(dropLocation), dropLocation, meta.eventProps)\r\n\t\t\t\t) {\r\n\t\t\t\t\tdisableCursor();\r\n\t\t\t\t\tdropLocation = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dropLocation) {\r\n\t\t\t\t\t_this.renderDrag(dropLocation); // called without a seg parameter\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thitOut: function() {\r\n\t\t\t\tdropLocation = null; // signal unsuccessful\r\n\t\t\t},\r\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\r\n\t\t\t\tenableCursor();\r\n\t\t\t\t_this.unrenderDrag();\r\n\t\t\t},\r\n\t\t\tinteractionEnd: function(ev) {\r\n\t\t\t\tif (dropLocation) { // element was dropped on a valid hit\r\n\t\t\t\t\t_this.view.reportExternalDrop(meta, dropLocation, el, ev, ui);\r\n\t\t\t\t}\r\n\t\t\t\t_this.isDraggingExternal = false;\r\n\t\t\t\t_this.externalDragListener = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdragListener.startDrag(ev); // start listening immediately\r\n\t},\r\n\r\n\r\n\t// Given a hit to be dropped upon, and misc data associated with the jqui drag (guaranteed to be a plain object),\r\n\t// returns the zoned start/end dates for the event that would result from the hypothetical drop. end might be null.\r\n\t// Returning a null value signals an invalid drop hit.\r\n\t// DOES NOT consider overlap/constraint.\r\n\tcomputeExternalDrop: function(span, meta) {\r\n\t\tvar calendar = this.view.calendar;\r\n\t\tvar dropLocation = {\r\n\t\t\tstart: calendar.applyTimezone(span.start), // simulate a zoned event start date\r\n\t\t\tend: null\r\n\t\t};\r\n\r\n\t\t// if dropped on an all-day span, and element's metadata specified a time, set it\r\n\t\tif (meta.startTime && !dropLocation.start.hasTime()) {\r\n\t\t\tdropLocation.start.time(meta.startTime);\r\n\t\t}\r\n\r\n\t\tif (meta.duration) {\r\n\t\t\tdropLocation.end = dropLocation.start.clone().add(meta.duration);\r\n\t\t}\r\n\r\n\t\treturn dropLocation;\r\n\t},\r\n\r\n\r\n\r\n\t/* Drag Rendering (for both events and an external elements)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of an event or external element being dragged.\r\n\t// `dropLocation` contains hypothetical start/end/allDay values the event would have if dropped. end can be null.\r\n\t// `seg` is the internal segment object that is being dragged. If dragging an external element, `seg` is null.\r\n\t// A truthy returned value indicates this method has rendered a helper element.\r\n\t// Must return elements used for any mock events.\r\n\trenderDrag: function(dropLocation, seg) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indication of an event or external element being dragged\r\n\tunrenderDrag: function() {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t/* Resizing\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Creates a listener that tracks the user as they resize an event segment.\r\n\t// Generic enough to work with any type of Grid.\r\n\tbuildSegResizeListener: function(seg, isStart) {\r\n\t\tvar _this = this;\r\n\t\tvar view = this.view;\r\n\t\tvar calendar = view.calendar;\r\n\t\tvar el = seg.el;\r\n\t\tvar event = seg.event;\r\n\t\tvar eventEnd = calendar.getEventEnd(event);\r\n\t\tvar isDragging;\r\n\t\tvar resizeLocation; // zoned event date properties. falsy if invalid resize\r\n\r\n\t\t// Tracks mouse movement over the *grid's* coordinate map\r\n\t\tvar dragListener = this.segResizeListener = new HitDragListener(this, {\r\n\t\t\tscroll: view.opt('dragScroll'),\r\n\t\t\tsubjectEl: el,\r\n\t\t\tinteractionStart: function() {\r\n\t\t\t\tisDragging = false;\r\n\t\t\t},\r\n\t\t\tdragStart: function(ev) {\r\n\t\t\t\tisDragging = true;\r\n\t\t\t\t_this.handleSegMouseout(seg, ev); // ensure a mouseout on the manipulated event has been reported\r\n\t\t\t\t_this.segResizeStart(seg, ev);\r\n\t\t\t},\r\n\t\t\thitOver: function(hit, isOrig, origHit) {\r\n\t\t\t\tvar origHitSpan = _this.getHitSpan(origHit);\r\n\t\t\t\tvar hitSpan = _this.getHitSpan(hit);\r\n\r\n\t\t\t\tresizeLocation = isStart ?\r\n\t\t\t\t\t_this.computeEventStartResize(origHitSpan, hitSpan, event) :\r\n\t\t\t\t\t_this.computeEventEndResize(origHitSpan, hitSpan, event);\r\n\r\n\t\t\t\tif (resizeLocation) {\r\n\t\t\t\t\tif (!calendar.isEventSpanAllowed(_this.eventToSpan(resizeLocation), event)) {\r\n\t\t\t\t\t\tdisableCursor();\r\n\t\t\t\t\t\tresizeLocation = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// no change? (FYI, event dates might have zones)\r\n\t\t\t\t\telse if (\r\n\t\t\t\t\t\tresizeLocation.start.isSame(event.start.clone().stripZone()) &&\r\n\t\t\t\t\t\tresizeLocation.end.isSame(eventEnd.clone().stripZone())\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tresizeLocation = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (resizeLocation) {\r\n\t\t\t\t\tview.hideEvent(event);\r\n\t\t\t\t\t_this.renderEventResize(resizeLocation, seg);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\r\n\t\t\t\tresizeLocation = null;\r\n\t\t\t},\r\n\t\t\thitDone: function() { // resets the rendering to show the original event\r\n\t\t\t\t_this.unrenderEventResize();\r\n\t\t\t\tview.showEvent(event);\r\n\t\t\t\tenableCursor();\r\n\t\t\t},\r\n\t\t\tinteractionEnd: function(ev) {\r\n\t\t\t\tif (isDragging) {\r\n\t\t\t\t\t_this.segResizeStop(seg, ev);\r\n\t\t\t\t}\r\n\t\t\t\tif (resizeLocation) { // valid date to resize to?\r\n\t\t\t\t\tview.reportEventResize(event, resizeLocation, this.largeUnit, el, ev);\r\n\t\t\t\t}\r\n\t\t\t\t_this.segResizeListener = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn dragListener;\r\n\t},\r\n\r\n\r\n\t// Called before event segment resizing starts\r\n\tsegResizeStart: function(seg, ev) {\r\n\t\tthis.isResizingSeg = true;\r\n\t\tthis.view.trigger('eventResizeStart', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\r\n\t},\r\n\r\n\r\n\t// Called after event segment resizing stops\r\n\tsegResizeStop: function(seg, ev) {\r\n\t\tthis.isResizingSeg = false;\r\n\t\tthis.view.trigger('eventResizeStop', seg.el[0], seg.event, ev, {}); // last argument is jqui dummy\r\n\t},\r\n\r\n\r\n\t// Returns new date-information for an event segment being resized from its start\r\n\tcomputeEventStartResize: function(startSpan, endSpan, event) {\r\n\t\treturn this.computeEventResize('start', startSpan, endSpan, event);\r\n\t},\r\n\r\n\r\n\t// Returns new date-information for an event segment being resized from its end\r\n\tcomputeEventEndResize: function(startSpan, endSpan, event) {\r\n\t\treturn this.computeEventResize('end', startSpan, endSpan, event);\r\n\t},\r\n\r\n\r\n\t// Returns new zoned date information for an event segment being resized from its start OR end\r\n\t// `type` is either 'start' or 'end'.\r\n\t// DOES NOT consider overlap/constraint.\r\n\tcomputeEventResize: function(type, startSpan, endSpan, event) {\r\n\t\tvar calendar = this.view.calendar;\r\n\t\tvar delta = this.diffDates(endSpan[type], startSpan[type]);\r\n\t\tvar resizeLocation; // zoned event date properties\r\n\t\tvar defaultDuration;\r\n\r\n\t\t// build original values to work from, guaranteeing a start and end\r\n\t\tresizeLocation = {\r\n\t\t\tstart: event.start.clone(),\r\n\t\t\tend: calendar.getEventEnd(event),\r\n\t\t\tallDay: event.allDay\r\n\t\t};\r\n\r\n\t\t// if an all-day event was in a timed area and was resized to a time, adjust start/end to have times\r\n\t\tif (resizeLocation.allDay && durationHasTime(delta)) {\r\n\t\t\tresizeLocation.allDay = false;\r\n\t\t\tcalendar.normalizeEventTimes(resizeLocation);\r\n\t\t}\r\n\r\n\t\tresizeLocation[type].add(delta); // apply delta to start or end\r\n\r\n\t\t// if the event was compressed too small, find a new reasonable duration for it\r\n\t\tif (!resizeLocation.start.isBefore(resizeLocation.end)) {\r\n\r\n\t\t\tdefaultDuration =\r\n\t\t\t\tthis.minResizeDuration || // TODO: hack\r\n\t\t\t\t(event.allDay ?\r\n\t\t\t\t\tcalendar.defaultAllDayEventDuration :\r\n\t\t\t\t\tcalendar.defaultTimedEventDuration);\r\n\r\n\t\t\tif (type == 'start') { // resizing the start?\r\n\t\t\t\tresizeLocation.start = resizeLocation.end.clone().subtract(defaultDuration);\r\n\t\t\t}\r\n\t\t\telse { // resizing the end?\r\n\t\t\t\tresizeLocation.end = resizeLocation.start.clone().add(defaultDuration);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn resizeLocation;\r\n\t},\r\n\r\n\r\n\t// Renders a visual indication of an event being resized.\r\n\t// `range` has the updated dates of the event. `seg` is the original segment object involved in the drag.\r\n\t// Must return elements used for any mock events.\r\n\trenderEventResize: function(range, seg) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indication of an event being resized.\r\n\tunrenderEventResize: function() {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t/* Rendering Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Compute the text that should be displayed on an event's element.\r\n\t// `range` can be the Event object itself, or something range-like, with at least a `start`.\r\n\t// If event times are disabled, or the event has no time, will return a blank string.\r\n\t// If not specified, formatStr will default to the eventTimeFormat setting,\r\n\t// and displayEnd will default to the displayEventEnd setting.\r\n\tgetEventTimeText: function(range, formatStr, displayEnd) {\r\n\r\n\t\tif (formatStr == null) {\r\n\t\t\tformatStr = this.eventTimeFormat;\r\n\t\t}\r\n\r\n\t\tif (displayEnd == null) {\r\n\t\t\tdisplayEnd = this.displayEventEnd;\r\n\t\t}\r\n\r\n\t\tif (this.displayEventTime && range.start.hasTime()) {\r\n\t\t\tif (displayEnd && range.end) {\r\n\t\t\t\treturn this.view.formatRange(range, formatStr);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn range.start.format(formatStr);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t},\r\n\r\n\r\n\t// Generic utility for generating the HTML classNames for an event segment's element\r\n\tgetSegClasses: function(seg, isDraggable, isResizable) {\r\n\t\tvar view = this.view;\r\n\t\tvar classes = [\r\n\t\t\t'fc-event',\r\n\t\t\tseg.isStart ? 'fc-start' : 'fc-not-start',\r\n\t\t\tseg.isEnd ? 'fc-end' : 'fc-not-end'\r\n\t\t].concat(this.getSegCustomClasses(seg));\r\n\r\n\t\tif (isDraggable) {\r\n\t\t\tclasses.push('fc-draggable');\r\n\t\t}\r\n\t\tif (isResizable) {\r\n\t\t\tclasses.push('fc-resizable');\r\n\t\t}\r\n\r\n\t\t// event is currently selected? attach a className.\r\n\t\tif (view.isEventSelected(seg.event)) {\r\n\t\t\tclasses.push('fc-selected');\r\n\t\t}\r\n\r\n\t\treturn classes;\r\n\t},\r\n\r\n\r\n\t// List of classes that were defined by the caller of the API in some way\r\n\tgetSegCustomClasses: function(seg) {\r\n\t\tvar event = seg.event;\r\n\r\n\t\treturn [].concat(\r\n\t\t\tevent.className, // guaranteed to be an array\r\n\t\t\tevent.source ? event.source.className : []\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Utility for generating event skin-related CSS properties\r\n\tgetSegSkinCss: function(seg) {\r\n\t\treturn {\r\n\t\t\t'background-color': this.getSegBackgroundColor(seg),\r\n\t\t\t'border-color': this.getSegBorderColor(seg),\r\n\t\t\tcolor: this.getSegTextColor(seg)\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t// Queries for caller-specified color, then falls back to default\r\n\tgetSegBackgroundColor: function(seg) {\r\n\t\treturn seg.event.backgroundColor ||\r\n\t\t\tseg.event.color ||\r\n\t\t\tthis.getSegDefaultBackgroundColor(seg);\r\n\t},\r\n\r\n\r\n\tgetSegDefaultBackgroundColor: function(seg) {\r\n\t\tvar source = seg.event.source || {};\r\n\r\n\t\treturn source.backgroundColor ||\r\n\t\t\tsource.color ||\r\n\t\t\tthis.view.opt('eventBackgroundColor') ||\r\n\t\t\tthis.view.opt('eventColor');\r\n\t},\r\n\r\n\r\n\t// Queries for caller-specified color, then falls back to default\r\n\tgetSegBorderColor: function(seg) {\r\n\t\treturn seg.event.borderColor ||\r\n\t\t\tseg.event.color ||\r\n\t\t\tthis.getSegDefaultBorderColor(seg);\r\n\t},\r\n\r\n\r\n\tgetSegDefaultBorderColor: function(seg) {\r\n\t\tvar source = seg.event.source || {};\r\n\r\n\t\treturn source.borderColor ||\r\n\t\t\tsource.color ||\r\n\t\t\tthis.view.opt('eventBorderColor') ||\r\n\t\t\tthis.view.opt('eventColor');\r\n\t},\r\n\r\n\r\n\t// Queries for caller-specified color, then falls back to default\r\n\tgetSegTextColor: function(seg) {\r\n\t\treturn seg.event.textColor ||\r\n\t\t\tthis.getSegDefaultTextColor(seg);\r\n\t},\r\n\r\n\r\n\tgetSegDefaultTextColor: function(seg) {\r\n\t\tvar source = seg.event.source || {};\r\n\r\n\t\treturn source.textColor ||\r\n\t\t\tthis.view.opt('eventTextColor');\r\n\t},\r\n\r\n\r\n\t/* Converting events -> eventRange -> eventSpan -> eventSegs\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Generates an array of segments for the given single event\r\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\r\n\teventToSegs: function(event) {\r\n\t\treturn this.eventsToSegs([ event ]);\r\n\t},\r\n\r\n\r\n\teventToSpan: function(event) {\r\n\t\treturn this.eventToSpans(event)[0];\r\n\t},\r\n\r\n\r\n\t// Generates spans (always unzoned) for the given event.\r\n\t// Does not do any inverting for inverse-background events.\r\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\r\n\teventToSpans: function(event) {\r\n\t\tvar range = this.eventToRange(event);\r\n\t\treturn this.eventRangeToSpans(range, event);\r\n\t},\r\n\r\n\r\n\r\n\t// Converts an array of event objects into an array of event segment objects.\r\n\t// A custom `segSliceFunc` may be given for arbitrarily slicing up events.\r\n\t// Doesn't guarantee an order for the resulting array.\r\n\teventsToSegs: function(allEvents, segSliceFunc) {\r\n\t\tvar _this = this;\r\n\t\tvar eventsById = groupEventsById(allEvents);\r\n\t\tvar segs = [];\r\n\r\n\t\t$.each(eventsById, function(id, events) {\r\n\t\t\tvar ranges = [];\r\n\t\t\tvar i;\r\n\r\n\t\t\tfor (i = 0; i < events.length; i++) {\r\n\t\t\t\tranges.push(_this.eventToRange(events[i]));\r\n\t\t\t}\r\n\r\n\t\t\t// inverse-background events (utilize only the first event in calculations)\r\n\t\t\tif (isInverseBgEvent(events[0])) {\r\n\t\t\t\tranges = _this.invertRanges(ranges);\r\n\r\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\r\n\t\t\t\t\tsegs.push.apply(segs, // append to\r\n\t\t\t\t\t\t_this.eventRangeToSegs(ranges[i], events[0], segSliceFunc));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// normal event ranges\r\n\t\t\telse {\r\n\t\t\t\tfor (i = 0; i < ranges.length; i++) {\r\n\t\t\t\t\tsegs.push.apply(segs, // append to\r\n\t\t\t\t\t\t_this.eventRangeToSegs(ranges[i], events[i], segSliceFunc));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Generates the unzoned start/end dates an event appears to occupy\r\n\t// Can accept an event \"location\" as well (which only has start/end and no allDay)\r\n\teventToRange: function(event) {\r\n\t\tvar calendar = this.view.calendar;\r\n\t\tvar start = event.start.clone().stripZone();\r\n\t\tvar end = (\r\n\t\t\t\tevent.end ?\r\n\t\t\t\t\tevent.end.clone() :\r\n\t\t\t\t\t// derive the end from the start and allDay. compute allDay if necessary\r\n\t\t\t\t\tcalendar.getDefaultEventEnd(\r\n\t\t\t\t\t\tevent.allDay != null ?\r\n\t\t\t\t\t\t\tevent.allDay :\r\n\t\t\t\t\t\t\t!event.start.hasTime(),\r\n\t\t\t\t\t\tevent.start\r\n\t\t\t\t\t)\r\n\t\t\t).stripZone();\r\n\r\n\t\t// hack: dynamic locale change forgets to upate stored event localed\r\n\t\tcalendar.localizeMoment(start);\r\n\t\tcalendar.localizeMoment(end);\r\n\r\n\t\treturn { start: start, end: end };\r\n\t},\r\n\r\n\r\n\t// Given an event's range (unzoned start/end), and the event itself,\r\n\t// slice into segments (using the segSliceFunc function if specified)\r\n\teventRangeToSegs: function(range, event, segSliceFunc) {\r\n\t\tvar spans = this.eventRangeToSpans(range, event);\r\n\t\tvar segs = [];\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < spans.length; i++) {\r\n\t\t\tsegs.push.apply(segs, // append to\r\n\t\t\t\tthis.eventSpanToSegs(spans[i], event, segSliceFunc));\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Given an event's unzoned date range, return an array of \"span\" objects.\r\n\t// Subclasses can override.\r\n\teventRangeToSpans: function(range, event) {\r\n\t\treturn [ $.extend({}, range) ]; // copy into a single-item array\r\n\t},\r\n\r\n\r\n\t// Given an event's span (unzoned start/end and other misc data), and the event itself,\r\n\t// slices into segments and attaches event-derived properties to them.\r\n\teventSpanToSegs: function(span, event, segSliceFunc) {\r\n\t\tvar segs = segSliceFunc ? segSliceFunc(span) : this.spanToSegs(span);\r\n\t\tvar i, seg;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tseg.event = event;\r\n\t\t\tseg.eventStartMS = +span.start; // TODO: not the best name after making spans unzoned\r\n\t\t\tseg.eventDurationMS = span.end - span.start;\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Produces a new array of range objects that will cover all the time NOT covered by the given ranges.\r\n\t// SIDE EFFECT: will mutate the given array and will use its date references.\r\n\tinvertRanges: function(ranges) {\r\n\t\tvar view = this.view;\r\n\t\tvar viewStart = view.start.clone(); // need a copy\r\n\t\tvar viewEnd = view.end.clone(); // need a copy\r\n\t\tvar inverseRanges = [];\r\n\t\tvar start = viewStart; // the end of the previous range. the start of the new range\r\n\t\tvar i, range;\r\n\r\n\t\t// ranges need to be in order. required for our date-walking algorithm\r\n\t\tranges.sort(compareRanges);\r\n\r\n\t\tfor (i = 0; i < ranges.length; i++) {\r\n\t\t\trange = ranges[i];\r\n\r\n\t\t\t// add the span of time before the event (if there is any)\r\n\t\t\tif (range.start > start) { // compare millisecond time (skip any ambig logic)\r\n\t\t\t\tinverseRanges.push({\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\tend: range.start\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tstart = range.end;\r\n\t\t}\r\n\r\n\t\t// add the span of time after the last event (if there is any)\r\n\t\tif (start < viewEnd) { // compare millisecond time (skip any ambig logic)\r\n\t\t\tinverseRanges.push({\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: viewEnd\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn inverseRanges;\r\n\t},\r\n\r\n\r\n\tsortEventSegs: function(segs) {\r\n\t\tsegs.sort(proxy(this, 'compareEventSegs'));\r\n\t},\r\n\r\n\r\n\t// A cmp function for determining which segments should take visual priority\r\n\tcompareEventSegs: function(seg1, seg2) {\r\n\t\treturn seg1.eventStartMS - seg2.eventStartMS || // earlier events go first\r\n\t\t\tseg2.eventDurationMS - seg1.eventDurationMS || // tie? longer events go first\r\n\t\t\tseg2.event.allDay - seg1.event.allDay || // tie? put all-day events first (booleans cast to 0/1)\r\n\t\t\tcompareByFieldSpecs(seg1.event, seg2.event, this.view.eventOrderSpecs);\r\n\t}\r\n\r\n});\r\n\r\n\r\n/* Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\nfunction pluckEventDateProps(event) {\r\n\treturn {\r\n\t\tstart: event.start.clone(),\r\n\t\tend: event.end ? event.end.clone() : null,\r\n\t\tallDay: event.allDay // keep it the same\r\n\t};\r\n}\r\nFC.pluckEventDateProps = pluckEventDateProps;\r\n\r\n\r\nfunction isBgEvent(event) { // returns true if background OR inverse-background\r\n\tvar rendering = getEventRendering(event);\r\n\treturn rendering === 'background' || rendering === 'inverse-background';\r\n}\r\nFC.isBgEvent = isBgEvent; // export\r\n\r\n\r\nfunction isInverseBgEvent(event) {\r\n\treturn getEventRendering(event) === 'inverse-background';\r\n}\r\n\r\n\r\nfunction getEventRendering(event) {\r\n\treturn firstDefined((event.source || {}).rendering, event.rendering);\r\n}\r\n\r\n\r\nfunction groupEventsById(events) {\r\n\tvar eventsById = {};\r\n\tvar i, event;\r\n\r\n\tfor (i = 0; i < events.length; i++) {\r\n\t\tevent = events[i];\r\n\t\t(eventsById[event._id] || (eventsById[event._id] = [])).push(event);\r\n\t}\r\n\r\n\treturn eventsById;\r\n}\r\n\r\n\r\n// A cmp function for determining which non-inverted \"ranges\" (see above) happen earlier\r\nfunction compareRanges(range1, range2) {\r\n\treturn range1.start - range2.start; // earlier ranges go first\r\n}\r\n\r\n\r\n/* External-Dragging-Element Data\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n// Require all HTML5 data-* attributes used by FullCalendar to have this prefix.\r\n// A value of '' will query attributes like data-event. A value of 'fc' will query attributes like data-fc-event.\r\nFC.dataAttrPrefix = '';\r\n\r\n// Given a jQuery element that might represent a dragged FullCalendar event, returns an intermediate data structure\r\n// to be used for Event Object creation.\r\n// A defined `.eventProps`, even when empty, indicates that an event should be created.\r\nfunction getDraggedElMeta(el) {\r\n\tvar prefix = FC.dataAttrPrefix;\r\n\tvar eventProps; // properties for creating the event, not related to date/time\r\n\tvar startTime; // a Duration\r\n\tvar duration;\r\n\tvar stick;\r\n\r\n\tif (prefix) { prefix += '-'; }\r\n\teventProps = el.data(prefix + 'event') || null;\r\n\r\n\tif (eventProps) {\r\n\t\tif (typeof eventProps === 'object') {\r\n\t\t\teventProps = $.extend({}, eventProps); // make a copy\r\n\t\t}\r\n\t\telse { // something like 1 or true. still signal event creation\r\n\t\t\teventProps = {};\r\n\t\t}\r\n\r\n\t\t// pluck special-cased date/time properties\r\n\t\tstartTime = eventProps.start;\r\n\t\tif (startTime == null) { startTime = eventProps.time; } // accept 'time' as well\r\n\t\tduration = eventProps.duration;\r\n\t\tstick = eventProps.stick;\r\n\t\tdelete eventProps.start;\r\n\t\tdelete eventProps.time;\r\n\t\tdelete eventProps.duration;\r\n\t\tdelete eventProps.stick;\r\n\t}\r\n\r\n\t// fallback to standalone attribute values for each of the date/time properties\r\n\tif (startTime == null) { startTime = el.data(prefix + 'start'); }\r\n\tif (startTime == null) { startTime = el.data(prefix + 'time'); } // accept 'time' as well\r\n\tif (duration == null) { duration = el.data(prefix + 'duration'); }\r\n\tif (stick == null) { stick = el.data(prefix + 'stick'); }\r\n\r\n\t// massage into correct data types\r\n\tstartTime = startTime != null ? moment.duration(startTime) : null;\r\n\tduration = duration != null ? moment.duration(duration) : null;\r\n\tstick = Boolean(stick);\r\n\r\n\treturn { eventProps: eventProps, startTime: startTime, duration: duration, stick: stick };\r\n}\r\n\r\n\r\n;;\r\n\r\n/*\r\nA set of rendering and date-related methods for a visual component comprised of one or more rows of day columns.\r\nPrerequisite: the object being mixed into needs to be a *Grid*\r\n*/\r\nvar DayTableMixin = FC.DayTableMixin = {\r\n\r\n\tbreakOnWeeks: false, // should create a new row for each week?\r\n\tdayDates: null, // whole-day dates for each column. left to right\r\n\tdayIndices: null, // for each day from start, the offset\r\n\tdaysPerRow: null,\r\n\trowCnt: null,\r\n\tcolCnt: null,\r\n\tcolHeadFormat: null,\r\n\r\n\r\n\t// Populates internal variables used for date calculation and rendering\r\n\tupdateDayTable: function() {\r\n\t\tvar view = this.view;\r\n\t\tvar date = this.start.clone();\r\n\t\tvar dayIndex = -1;\r\n\t\tvar dayIndices = [];\r\n\t\tvar dayDates = [];\r\n\t\tvar daysPerRow;\r\n\t\tvar firstDay;\r\n\t\tvar rowCnt;\r\n\r\n\t\twhile (date.isBefore(this.end)) { // loop each day from start to end\r\n\t\t\tif (view.isHiddenDay(date)) {\r\n\t\t\t\tdayIndices.push(dayIndex + 0.5); // mark that it's between indices\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdayIndex++;\r\n\t\t\t\tdayIndices.push(dayIndex);\r\n\t\t\t\tdayDates.push(date.clone());\r\n\t\t\t}\r\n\t\t\tdate.add(1, 'days');\r\n\t\t}\r\n\r\n\t\tif (this.breakOnWeeks) {\r\n\t\t\t// count columns until the day-of-week repeats\r\n\t\t\tfirstDay = dayDates[0].day();\r\n\t\t\tfor (daysPerRow = 1; daysPerRow < dayDates.length; daysPerRow++) {\r\n\t\t\t\tif (dayDates[daysPerRow].day() == firstDay) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trowCnt = Math.ceil(dayDates.length / daysPerRow);\r\n\t\t}\r\n\t\telse {\r\n\t\t\trowCnt = 1;\r\n\t\t\tdaysPerRow = dayDates.length;\r\n\t\t}\r\n\r\n\t\tthis.dayDates = dayDates;\r\n\t\tthis.dayIndices = dayIndices;\r\n\t\tthis.daysPerRow = daysPerRow;\r\n\t\tthis.rowCnt = rowCnt;\r\n\t\t\r\n\t\tthis.updateDayTableCols();\r\n\t},\r\n\r\n\r\n\t// Computes and assigned the colCnt property and updates any options that may be computed from it\r\n\tupdateDayTableCols: function() {\r\n\t\tthis.colCnt = this.computeColCnt();\r\n\t\tthis.colHeadFormat = this.view.opt('columnFormat') || this.computeColHeadFormat();\r\n\t},\r\n\r\n\r\n\t// Determines how many columns there should be in the table\r\n\tcomputeColCnt: function() {\r\n\t\treturn this.daysPerRow;\r\n\t},\r\n\r\n\r\n\t// Computes the ambiguously-timed moment for the given cell\r\n\tgetCellDate: function(row, col) {\r\n\t\treturn this.dayDates[\r\n\t\t\t\tthis.getCellDayIndex(row, col)\r\n\t\t\t].clone();\r\n\t},\r\n\r\n\r\n\t// Computes the ambiguously-timed date range for the given cell\r\n\tgetCellRange: function(row, col) {\r\n\t\tvar start = this.getCellDate(row, col);\r\n\t\tvar end = start.clone().add(1, 'days');\r\n\r\n\t\treturn { start: start, end: end };\r\n\t},\r\n\r\n\r\n\t// Returns the number of day cells, chronologically, from the first of the grid (0-based)\r\n\tgetCellDayIndex: function(row, col) {\r\n\t\treturn row * this.daysPerRow + this.getColDayIndex(col);\r\n\t},\r\n\r\n\r\n\t// Returns the numner of day cells, chronologically, from the first cell in *any given row*\r\n\tgetColDayIndex: function(col) {\r\n\t\tif (this.isRTL) {\r\n\t\t\treturn this.colCnt - 1 - col;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn col;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Given a date, returns its chronolocial cell-index from the first cell of the grid.\r\n\t// If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\r\n\t// If before the first offset, returns a negative number.\r\n\t// If after the last offset, returns an offset past the last cell offset.\r\n\t// Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\r\n\tgetDateDayIndex: function(date) {\r\n\t\tvar dayIndices = this.dayIndices;\r\n\t\tvar dayOffset = date.diff(this.start, 'days');\r\n\r\n\t\tif (dayOffset < 0) {\r\n\t\t\treturn dayIndices[0] - 1;\r\n\t\t}\r\n\t\telse if (dayOffset >= dayIndices.length) {\r\n\t\t\treturn dayIndices[dayIndices.length - 1] + 1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn dayIndices[dayOffset];\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Options\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes a default column header formatting string if `colFormat` is not explicitly defined\r\n\tcomputeColHeadFormat: function() {\r\n\t\t// if more than one week row, or if there are a lot of columns with not much space,\r\n\t\t// put just the day numbers will be in each cell\r\n\t\tif (this.rowCnt > 1 || this.colCnt > 10) {\r\n\t\t\treturn 'ddd'; // \"Sat\"\r\n\t\t}\r\n\t\t// multiple days, so full single date string WON'T be in title text\r\n\t\telse if (this.colCnt > 1) {\r\n\t\t\treturn this.view.opt('dayOfMonthFormat'); // \"Sat 12/10\"\r\n\t\t}\r\n\t\t// single day, so full single date string will probably be in title text\r\n\t\telse {\r\n\t\t\treturn 'dddd'; // \"Saturday\"\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Slicing\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Slices up a date range into a segment for every week-row it intersects with\r\n\tsliceRangeByRow: function(range) {\r\n\t\tvar daysPerRow = this.daysPerRow;\r\n\t\tvar normalRange = this.view.computeDayRange(range); // make whole-day range, considering nextDayThreshold\r\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\r\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\r\n\t\tvar segs = [];\r\n\t\tvar row;\r\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\r\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\r\n\r\n\t\tfor (row = 0; row < this.rowCnt; row++) {\r\n\t\t\trowFirst = row * daysPerRow;\r\n\t\t\trowLast = rowFirst + daysPerRow - 1;\r\n\r\n\t\t\t// intersect segment's offset range with the row's\r\n\t\t\tsegFirst = Math.max(rangeFirst, rowFirst);\r\n\t\t\tsegLast = Math.min(rangeLast, rowLast);\r\n\r\n\t\t\t// deal with in-between indices\r\n\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\r\n\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\r\n\r\n\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\r\n\t\t\t\tsegs.push({\r\n\t\t\t\t\trow: row,\r\n\r\n\t\t\t\t\t// normalize to start of row\r\n\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\r\n\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\r\n\r\n\t\t\t\t\t// must be matching integers to be the segment's start/end\r\n\t\t\t\t\tisStart: segFirst === rangeFirst,\r\n\t\t\t\t\tisEnd: segLast === rangeLast\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Slices up a date range into a segment for every day-cell it intersects with.\r\n\t// TODO: make more DRY with sliceRangeByRow somehow.\r\n\tsliceRangeByDay: function(range) {\r\n\t\tvar daysPerRow = this.daysPerRow;\r\n\t\tvar normalRange = this.view.computeDayRange(range); // make whole-day range, considering nextDayThreshold\r\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\r\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\r\n\t\tvar segs = [];\r\n\t\tvar row;\r\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\r\n\t\tvar i;\r\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\r\n\r\n\t\tfor (row = 0; row < this.rowCnt; row++) {\r\n\t\t\trowFirst = row * daysPerRow;\r\n\t\t\trowLast = rowFirst + daysPerRow - 1;\r\n\r\n\t\t\tfor (i = rowFirst; i <= rowLast; i++) {\r\n\r\n\t\t\t\t// intersect segment's offset range with the row's\r\n\t\t\t\tsegFirst = Math.max(rangeFirst, i);\r\n\t\t\t\tsegLast = Math.min(rangeLast, i);\r\n\r\n\t\t\t\t// deal with in-between indices\r\n\t\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\r\n\t\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\r\n\r\n\t\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\r\n\t\t\t\t\tsegs.push({\r\n\t\t\t\t\t\trow: row,\r\n\r\n\t\t\t\t\t\t// normalize to start of row\r\n\t\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\r\n\t\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\r\n\r\n\t\t\t\t\t\t// must be matching integers to be the segment's start/end\r\n\t\t\t\t\t\tisStart: segFirst === rangeFirst,\r\n\t\t\t\t\t\tisEnd: segLast === rangeLast\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t/* Header Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderHeadHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn '' +\r\n\t\t\t'<div class=\"fc-row ' + view.widgetHeaderClass + '\">' +\r\n\t\t\t\t'<table>' +\r\n\t\t\t\t\t'<thead>' +\r\n\t\t\t\t\t\tthis.renderHeadTrHtml() +\r\n\t\t\t\t\t'</thead>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t'</div>';\r\n\t},\r\n\r\n\r\n\trenderHeadIntroHtml: function() {\r\n\t\treturn this.renderIntroHtml(); // fall back to generic\r\n\t},\r\n\r\n\r\n\trenderHeadTrHtml: function() {\r\n\t\treturn '' +\r\n\t\t\t'<tr>' +\r\n\t\t\t\t(this.isRTL ? '' : this.renderHeadIntroHtml()) +\r\n\t\t\t\tthis.renderHeadDateCellsHtml() +\r\n\t\t\t\t(this.isRTL ? this.renderHeadIntroHtml() : '') +\r\n\t\t\t'</tr>';\r\n\t},\r\n\r\n\r\n\trenderHeadDateCellsHtml: function() {\r\n\t\tvar htmls = [];\r\n\t\tvar col, date;\r\n\r\n\t\tfor (col = 0; col < this.colCnt; col++) {\r\n\t\t\tdate = this.getCellDate(0, col);\r\n\t\t\thtmls.push(this.renderHeadDateCellHtml(date));\r\n\t\t}\r\n\r\n\t\treturn htmls.join('');\r\n\t},\r\n\r\n\r\n\t// TODO: when internalApiVersion, accept an object for HTML attributes\r\n\t// (colspan should be no different)\r\n\trenderHeadDateCellHtml: function(date, colspan, otherAttrs) {\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn '' +\r\n\t\t\t'<th class=\"fc-day-header ' + view.widgetHeaderClass + ' fc-' + dayIDs[date.day()] + '\"' +\r\n\t\t\t\t(this.rowCnt === 1 ?\r\n\t\t\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' :\r\n\t\t\t\t\t'') +\r\n\t\t\t\t(colspan > 1 ?\r\n\t\t\t\t\t' colspan=\"' + colspan + '\"' :\r\n\t\t\t\t\t'') +\r\n\t\t\t\t(otherAttrs ?\r\n\t\t\t\t\t' ' + otherAttrs :\r\n\t\t\t\t\t'') +\r\n\t\t\t\t'>' +\r\n\t\t\t\t// don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\r\n\t\t\t\tview.buildGotoAnchorHtml(\r\n\t\t\t\t\t{ date: date, forceOff: this.rowCnt > 1 || this.colCnt === 1 },\r\n\t\t\t\t\thtmlEscape(date.format(this.colHeadFormat)) // inner HTML\r\n\t\t\t\t) +\r\n\t\t\t'</th>';\r\n\t},\r\n\r\n\r\n\t/* Background Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderBgTrHtml: function(row) {\r\n\t\treturn '' +\r\n\t\t\t'<tr>' +\r\n\t\t\t\t(this.isRTL ? '' : this.renderBgIntroHtml(row)) +\r\n\t\t\t\tthis.renderBgCellsHtml(row) +\r\n\t\t\t\t(this.isRTL ? this.renderBgIntroHtml(row) : '') +\r\n\t\t\t'</tr>';\r\n\t},\r\n\r\n\r\n\trenderBgIntroHtml: function(row) {\r\n\t\treturn this.renderIntroHtml(); // fall back to generic\r\n\t},\r\n\r\n\r\n\trenderBgCellsHtml: function(row) {\r\n\t\tvar htmls = [];\r\n\t\tvar col, date;\r\n\r\n\t\tfor (col = 0; col < this.colCnt; col++) {\r\n\t\t\tdate = this.getCellDate(row, col);\r\n\t\t\thtmls.push(this.renderBgCellHtml(date));\r\n\t\t}\r\n\r\n\t\treturn htmls.join('');\r\n\t},\r\n\r\n\r\n\trenderBgCellHtml: function(date, otherAttrs) {\r\n\t\tvar view = this.view;\r\n\t\tvar classes = this.getDayClasses(date);\r\n\r\n\t\tclasses.unshift('fc-day', view.widgetContentClass);\r\n\r\n\t\treturn '<td class=\"' + classes.join(' ') + '\"' +\r\n\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' + // if date has a time, won't format it\r\n\t\t\t(otherAttrs ?\r\n\t\t\t\t' ' + otherAttrs :\r\n\t\t\t\t'') +\r\n\t\t\t'></td>';\r\n\t},\r\n\r\n\r\n\t/* Generic\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Generates the default HTML intro for any row. User classes should override\r\n\trenderIntroHtml: function() {\r\n\t},\r\n\r\n\r\n\t// TODO: a generic method for dealing with <tr>, RTL, intro\r\n\t// when increment internalApiVersion\r\n\t// wrapTr (scheduler)\r\n\r\n\r\n\t/* Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Applies the generic \"intro\" and \"outro\" HTML to the given cells.\r\n\t// Intro means the leftmost cell when the calendar is LTR and the rightmost cell when RTL. Vice-versa for outro.\r\n\tbookendCells: function(trEl) {\r\n\t\tvar introHtml = this.renderIntroHtml();\r\n\r\n\t\tif (introHtml) {\r\n\t\t\tif (this.isRTL) {\r\n\t\t\t\ttrEl.append(introHtml);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttrEl.prepend(introHtml);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\n;;\r\n\r\n/* A component that renders a grid of whole-days that runs horizontally. There can be multiple rows, one per week.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nvar DayGrid = FC.DayGrid = Grid.extend(DayTableMixin, {\r\n\r\n\tnumbersVisible: false, // should render a row for day/week numbers? set by outside view. TODO: make internal\r\n\tbottomCoordPadding: 0, // hack for extending the hit area for the last row of the coordinate grid\r\n\r\n\trowEls: null, // set of fake row elements\r\n\tcellEls: null, // set of whole-day elements comprising the row's background\r\n\thelperEls: null, // set of cell skeleton elements for rendering the mock event \"helper\"\r\n\r\n\trowCoordCache: null,\r\n\tcolCoordCache: null,\r\n\r\n\r\n\t// Renders the rows and columns into the component's `this.el`, which should already be assigned.\r\n\t// isRigid determins whether the individual rows should ignore the contents and be a constant height.\r\n\t// Relies on the view's colCnt and rowCnt. In the future, this component should probably be self-sufficient.\r\n\trenderDates: function(isRigid) {\r\n\t\tvar view = this.view;\r\n\t\tvar rowCnt = this.rowCnt;\r\n\t\tvar colCnt = this.colCnt;\r\n\t\tvar html = '';\r\n\t\tvar row;\r\n\t\tvar col;\r\n\r\n\t\tfor (row = 0; row < rowCnt; row++) {\r\n\t\t\thtml += this.renderDayRowHtml(row, isRigid);\r\n\t\t}\r\n\t\tthis.el.html(html);\r\n\r\n\t\tthis.rowEls = this.el.find('.fc-row');\r\n\t\tthis.cellEls = this.el.find('.fc-day');\r\n\r\n\t\tthis.rowCoordCache = new CoordCache({\r\n\t\t\tels: this.rowEls,\r\n\t\t\tisVertical: true\r\n\t\t});\r\n\t\tthis.colCoordCache = new CoordCache({\r\n\t\t\tels: this.cellEls.slice(0, this.colCnt), // only the first row\r\n\t\t\tisHorizontal: true\r\n\t\t});\r\n\r\n\t\t// trigger dayRender with each cell's element\r\n\t\tfor (row = 0; row < rowCnt; row++) {\r\n\t\t\tfor (col = 0; col < colCnt; col++) {\r\n\t\t\t\tview.trigger(\r\n\t\t\t\t\t'dayRender',\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tthis.getCellDate(row, col),\r\n\t\t\t\t\tthis.getCellEl(row, col)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tunrenderDates: function() {\r\n\t\tthis.removeSegPopover();\r\n\t},\r\n\r\n\r\n\trenderBusinessHours: function() {\r\n\t\tvar segs = this.buildBusinessHourSegs(true); // wholeDay=true\r\n\t\tthis.renderFill('businessHours', segs, 'bgevent');\r\n\t},\r\n\r\n\r\n\tunrenderBusinessHours: function() {\r\n\t\tthis.unrenderFill('businessHours');\r\n\t},\r\n\r\n\r\n\t// Generates the HTML for a single row, which is a div that wraps a table.\r\n\t// `row` is the row number.\r\n\trenderDayRowHtml: function(row, isRigid) {\r\n\t\tvar view = this.view;\r\n\t\tvar classes = [ 'fc-row', 'fc-week', view.widgetContentClass ];\r\n\r\n\t\tif (isRigid) {\r\n\t\t\tclasses.push('fc-rigid');\r\n\t\t}\r\n\r\n\t\treturn '' +\r\n\t\t\t'<div class=\"' + classes.join(' ') + '\">' +\r\n\t\t\t\t'<div class=\"fc-bg\">' +\r\n\t\t\t\t\t'<table>' +\r\n\t\t\t\t\t\tthis.renderBgTrHtml(row) +\r\n\t\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"fc-content-skeleton\">' +\r\n\t\t\t\t\t'<table>' +\r\n\t\t\t\t\t\t(this.numbersVisible ?\r\n\t\t\t\t\t\t\t'<thead>' +\r\n\t\t\t\t\t\t\t\tthis.renderNumberTrHtml(row) +\r\n\t\t\t\t\t\t\t'</thead>' :\r\n\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t'</div>';\r\n\t},\r\n\r\n\r\n\t/* Grid Number Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderNumberTrHtml: function(row) {\r\n\t\treturn '' +\r\n\t\t\t'<tr>' +\r\n\t\t\t\t(this.isRTL ? '' : this.renderNumberIntroHtml(row)) +\r\n\t\t\t\tthis.renderNumberCellsHtml(row) +\r\n\t\t\t\t(this.isRTL ? this.renderNumberIntroHtml(row) : '') +\r\n\t\t\t'</tr>';\r\n\t},\r\n\r\n\r\n\trenderNumberIntroHtml: function(row) {\r\n\t\treturn this.renderIntroHtml();\r\n\t},\r\n\r\n\r\n\trenderNumberCellsHtml: function(row) {\r\n\t\tvar htmls = [];\r\n\t\tvar col, date;\r\n\r\n\t\tfor (col = 0; col < this.colCnt; col++) {\r\n\t\t\tdate = this.getCellDate(row, col);\r\n\t\t\thtmls.push(this.renderNumberCellHtml(date));\r\n\t\t}\r\n\r\n\t\treturn htmls.join('');\r\n\t},\r\n\r\n\r\n\t// Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\r\n\t// The number row will only exist if either day numbers or week numbers are turned on.\r\n\trenderNumberCellHtml: function(date) {\r\n\t\tvar html = '';\r\n\t\tvar classes;\r\n\t\tvar weekCalcFirstDoW;\r\n\r\n\t\tif (!this.view.dayNumbersVisible && !this.view.cellWeekNumbersVisible) {\r\n\t\t\t// no numbers in day cell (week number must be along the side)\r\n\t\t\treturn '<td/>'; //  will create an empty space above events :(\r\n\t\t}\r\n\r\n\t\tclasses = this.getDayClasses(date);\r\n\t\tclasses.unshift('fc-day-top');\r\n\r\n\t\tif (this.view.cellWeekNumbersVisible) {\r\n\t\t\t// To determine the day of week number change under ISO, we cannot\r\n\t\t\t// rely on moment.js methods such as firstDayOfWeek() or weekday(),\r\n\t\t\t// because they rely on the locale's dow (possibly overridden by\r\n\t\t\t// our firstDay option), which may not be Monday. We cannot change\r\n\t\t\t// dow, because that would affect the calendar start day as well.\r\n\t\t\tif (date._locale._fullCalendar_weekCalc === 'ISO') {\r\n\t\t\t\tweekCalcFirstDoW = 1;  // Monday by ISO 8601 definition\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tweekCalcFirstDoW = date._locale.firstDayOfWeek();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += '<td class=\"' + classes.join(' ') + '\" data-date=\"' + date.format() + '\">';\r\n\r\n\t\tif (this.view.cellWeekNumbersVisible && (date.day() == weekCalcFirstDoW)) {\r\n\t\t\thtml += this.view.buildGotoAnchorHtml(\r\n\t\t\t\t{ date: date, type: 'week' },\r\n\t\t\t\t{ 'class': 'fc-week-number' },\r\n\t\t\t\tdate.format('w') // inner HTML\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.view.dayNumbersVisible) {\r\n\t\t\thtml += this.view.buildGotoAnchorHtml(\r\n\t\t\t\tdate,\r\n\t\t\t\t{ 'class': 'fc-day-number' },\r\n\t\t\t\tdate.date() // inner HTML\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\thtml += '</td>';\r\n\r\n\t\treturn html;\r\n\t},\r\n\r\n\r\n\t/* Options\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\r\n\tcomputeEventTimeFormat: function() {\r\n\t\treturn this.view.opt('extraSmallTimeFormat'); // like \"6p\" or \"6:30p\"\r\n\t},\r\n\r\n\r\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\r\n\tcomputeDisplayEventEnd: function() {\r\n\t\treturn this.colCnt == 1; // we'll likely have space if there's only one day\r\n\t},\r\n\r\n\r\n\t/* Dates\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trangeUpdated: function() {\r\n\t\tthis.updateDayTable();\r\n\t},\r\n\r\n\r\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\r\n\tspanToSegs: function(span) {\r\n\t\tvar segs = this.sliceRangeByRow(span);\r\n\t\tvar i, seg;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tif (this.isRTL) {\r\n\t\t\t\tseg.leftCol = this.daysPerRow - 1 - seg.lastRowDayIndex;\r\n\t\t\t\tseg.rightCol = this.daysPerRow - 1 - seg.firstRowDayIndex;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tseg.leftCol = seg.firstRowDayIndex;\r\n\t\t\t\tseg.rightCol = seg.lastRowDayIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t/* Hit System\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tprepareHits: function() {\r\n\t\tthis.colCoordCache.build();\r\n\t\tthis.rowCoordCache.build();\r\n\t\tthis.rowCoordCache.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\r\n\t},\r\n\r\n\r\n\treleaseHits: function() {\r\n\t\tthis.colCoordCache.clear();\r\n\t\tthis.rowCoordCache.clear();\r\n\t},\r\n\r\n\r\n\tqueryHit: function(leftOffset, topOffset) {\r\n\t\tif (this.colCoordCache.isLeftInBounds(leftOffset) && this.rowCoordCache.isTopInBounds(topOffset)) {\r\n\t\t\tvar col = this.colCoordCache.getHorizontalIndex(leftOffset);\r\n\t\t\tvar row = this.rowCoordCache.getVerticalIndex(topOffset);\r\n\r\n\t\t\tif (row != null && col != null) {\r\n\t\t\t\treturn this.getCellHit(row, col);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetHitSpan: function(hit) {\r\n\t\treturn this.getCellRange(hit.row, hit.col);\r\n\t},\r\n\r\n\r\n\tgetHitEl: function(hit) {\r\n\t\treturn this.getCellEl(hit.row, hit.col);\r\n\t},\r\n\r\n\r\n\t/* Cell System\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\t// FYI: the first column is the leftmost column, regardless of date\r\n\r\n\r\n\tgetCellHit: function(row, col) {\r\n\t\treturn {\r\n\t\t\trow: row,\r\n\t\t\tcol: col,\r\n\t\t\tcomponent: this, // needed unfortunately :(\r\n\t\t\tleft: this.colCoordCache.getLeftOffset(col),\r\n\t\t\tright: this.colCoordCache.getRightOffset(col),\r\n\t\t\ttop: this.rowCoordCache.getTopOffset(row),\r\n\t\t\tbottom: this.rowCoordCache.getBottomOffset(row)\r\n\t\t};\r\n\t},\r\n\r\n\r\n\tgetCellEl: function(row, col) {\r\n\t\treturn this.cellEls.eq(row * this.colCnt + col);\r\n\t},\r\n\r\n\r\n\t/* Event Drag Visualization\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\t// TODO: move to DayGrid.event, similar to what we did with Grid's drag methods\r\n\r\n\r\n\t// Renders a visual indication of an event or external element being dragged.\r\n\t// `eventLocation` has zoned start and end (optional)\r\n\trenderDrag: function(eventLocation, seg) {\r\n\r\n\t\t// always render a highlight underneath\r\n\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\r\n\r\n\t\t// if a segment from the same calendar but another component is being dragged, render a helper event\r\n\t\tif (seg && seg.component !== this) {\r\n\t\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Unrenders any visual indication of a hovering event\r\n\tunrenderDrag: function() {\r\n\t\tthis.unrenderHighlight();\r\n\t\tthis.unrenderHelper();\r\n\t},\r\n\r\n\r\n\t/* Event Resize Visualization\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of an event being resized\r\n\trenderEventResize: function(eventLocation, seg) {\r\n\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\r\n\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indication of an event being resized\r\n\tunrenderEventResize: function() {\r\n\t\tthis.unrenderHighlight();\r\n\t\tthis.unrenderHelper();\r\n\t},\r\n\r\n\r\n\t/* Event Helper\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a mock \"helper\" event. `sourceSeg` is the associated internal segment object. It can be null.\r\n\trenderHelper: function(event, sourceSeg) {\r\n\t\tvar helperNodes = [];\r\n\t\tvar segs = this.eventToSegs(event);\r\n\t\tvar rowStructs;\r\n\r\n\t\tsegs = this.renderFgSegEls(segs); // assigns each seg's el and returns a subset of segs that were rendered\r\n\t\trowStructs = this.renderSegRows(segs);\r\n\r\n\t\t// inject each new event skeleton into each associated row\r\n\t\tthis.rowEls.each(function(row, rowNode) {\r\n\t\t\tvar rowEl = $(rowNode); // the .fc-row\r\n\t\t\tvar skeletonEl = $('<div class=\"fc-helper-skeleton\"><table/></div>'); // will be absolutely positioned\r\n\t\t\tvar skeletonTop;\r\n\r\n\t\t\t// If there is an original segment, match the top position. Otherwise, put it at the row's top level\r\n\t\t\tif (sourceSeg && sourceSeg.row === row) {\r\n\t\t\t\tskeletonTop = sourceSeg.el.position().top;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tskeletonTop = rowEl.find('.fc-content-skeleton tbody').position().top;\r\n\t\t\t}\r\n\r\n\t\t\tskeletonEl.css('top', skeletonTop)\r\n\t\t\t\t.find('table')\r\n\t\t\t\t\t.append(rowStructs[row].tbodyEl);\r\n\r\n\t\t\trowEl.append(skeletonEl);\r\n\t\t\thelperNodes.push(skeletonEl[0]);\r\n\t\t});\r\n\r\n\t\treturn ( // must return the elements rendered\r\n\t\t\tthis.helperEls = $(helperNodes) // array -> jQuery set\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Unrenders any visual indication of a mock helper event\r\n\tunrenderHelper: function() {\r\n\t\tif (this.helperEls) {\r\n\t\t\tthis.helperEls.remove();\r\n\t\t\tthis.helperEls = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Fill System (highlight, background events, business hours)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tfillSegTag: 'td', // override the default tag name\r\n\r\n\r\n\t// Renders a set of rectangles over the given segments of days.\r\n\t// Only returns segments that successfully rendered.\r\n\trenderFill: function(type, segs, className) {\r\n\t\tvar nodes = [];\r\n\t\tvar i, seg;\r\n\t\tvar skeletonEl;\r\n\r\n\t\tsegs = this.renderFillSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tskeletonEl = this.renderFillRow(type, seg, className);\r\n\t\t\tthis.rowEls.eq(seg.row).append(skeletonEl);\r\n\t\t\tnodes.push(skeletonEl[0]);\r\n\t\t}\r\n\r\n\t\tthis.elsByFill[type] = $(nodes);\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\r\n\trenderFillRow: function(type, seg, className) {\r\n\t\tvar colCnt = this.colCnt;\r\n\t\tvar startCol = seg.leftCol;\r\n\t\tvar endCol = seg.rightCol + 1;\r\n\t\tvar skeletonEl;\r\n\t\tvar trEl;\r\n\r\n\t\tclassName = className || type.toLowerCase();\r\n\r\n\t\tskeletonEl = $(\r\n\t\t\t'<div class=\"fc-' + className + '-skeleton\">' +\r\n\t\t\t\t'<table><tr/></table>' +\r\n\t\t\t'</div>'\r\n\t\t);\r\n\t\ttrEl = skeletonEl.find('tr');\r\n\r\n\t\tif (startCol > 0) {\r\n\t\t\ttrEl.append('<td colspan=\"' + startCol + '\"/>');\r\n\t\t}\r\n\r\n\t\ttrEl.append(\r\n\t\t\tseg.el.attr('colspan', endCol - startCol)\r\n\t\t);\r\n\r\n\t\tif (endCol < colCnt) {\r\n\t\t\ttrEl.append('<td colspan=\"' + (colCnt - endCol) + '\"/>');\r\n\t\t}\r\n\r\n\t\tthis.bookendCells(trEl);\r\n\r\n\t\treturn skeletonEl;\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/* Event-rendering methods for the DayGrid class\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nDayGrid.mixin({\r\n\r\n\trowStructs: null, // an array of objects, each holding information about a row's foreground event-rendering\r\n\r\n\r\n\t// Unrenders all events currently rendered on the grid\r\n\tunrenderEvents: function() {\r\n\t\tthis.removeSegPopover(); // removes the \"more..\" events popover\r\n\t\tGrid.prototype.unrenderEvents.apply(this, arguments); // calls the super-method\r\n\t},\r\n\r\n\r\n\t// Retrieves all rendered segment objects currently rendered on the grid\r\n\tgetEventSegs: function() {\r\n\t\treturn Grid.prototype.getEventSegs.call(this) // get the segments from the super-method\r\n\t\t\t.concat(this.popoverSegs || []); // append the segments from the \"more...\" popover\r\n\t},\r\n\r\n\r\n\t// Renders the given background event segments onto the grid\r\n\trenderBgSegs: function(segs) {\r\n\r\n\t\t// don't render timed background events\r\n\t\tvar allDaySegs = $.grep(segs, function(seg) {\r\n\t\t\treturn seg.event.allDay;\r\n\t\t});\r\n\r\n\t\treturn Grid.prototype.renderBgSegs.call(this, allDaySegs); // call the super-method\r\n\t},\r\n\r\n\r\n\t// Renders the given foreground event segments onto the grid\r\n\trenderFgSegs: function(segs) {\r\n\t\tvar rowStructs;\r\n\r\n\t\t// render an `.el` on each seg\r\n\t\t// returns a subset of the segs. segs that were actually rendered\r\n\t\tsegs = this.renderFgSegEls(segs);\r\n\r\n\t\trowStructs = this.rowStructs = this.renderSegRows(segs);\r\n\r\n\t\t// append to each row's content skeleton\r\n\t\tthis.rowEls.each(function(i, rowNode) {\r\n\t\t\t$(rowNode).find('.fc-content-skeleton > table').append(\r\n\t\t\t\trowStructs[i].tbodyEl\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn segs; // return only the segs that were actually rendered\r\n\t},\r\n\r\n\r\n\t// Unrenders all currently rendered foreground event segments\r\n\tunrenderFgSegs: function() {\r\n\t\tvar rowStructs = this.rowStructs || [];\r\n\t\tvar rowStruct;\r\n\r\n\t\twhile ((rowStruct = rowStructs.pop())) {\r\n\t\t\trowStruct.tbodyEl.remove();\r\n\t\t}\r\n\r\n\t\tthis.rowStructs = null;\r\n\t},\r\n\r\n\r\n\t// Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\r\n\t// Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\r\n\t// PRECONDITION: each segment shoud already have a rendered and assigned `.el`\r\n\trenderSegRows: function(segs) {\r\n\t\tvar rowStructs = [];\r\n\t\tvar segRows;\r\n\t\tvar row;\r\n\r\n\t\tsegRows = this.groupSegRows(segs); // group into nested arrays\r\n\r\n\t\t// iterate each row of segment groupings\r\n\t\tfor (row = 0; row < segRows.length; row++) {\r\n\t\t\trowStructs.push(\r\n\t\t\t\tthis.renderSegRow(row, segRows[row])\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn rowStructs;\r\n\t},\r\n\r\n\r\n\t// Builds the HTML to be used for the default element for an individual segment\r\n\tfgSegHtml: function(seg, disableResizing) {\r\n\t\tvar view = this.view;\r\n\t\tvar event = seg.event;\r\n\t\tvar isDraggable = view.isEventDraggable(event);\r\n\t\tvar isResizableFromStart = !disableResizing && event.allDay &&\r\n\t\t\tseg.isStart && view.isEventResizableFromStart(event);\r\n\t\tvar isResizableFromEnd = !disableResizing && event.allDay &&\r\n\t\t\tseg.isEnd && view.isEventResizableFromEnd(event);\r\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\r\n\t\tvar skinCss = cssToStr(this.getSegSkinCss(seg));\r\n\t\tvar timeHtml = '';\r\n\t\tvar timeText;\r\n\t\tvar titleHtml;\r\n\r\n\t\tclasses.unshift('fc-day-grid-event', 'fc-h-event');\r\n\r\n\t\t// Only display a timed events time if it is the starting segment\r\n\t\tif (seg.isStart) {\r\n\t\t\ttimeText = this.getEventTimeText(event);\r\n\t\t\tif (timeText) {\r\n\t\t\t\ttimeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttitleHtml =\r\n\t\t\t'<span class=\"fc-title\">' +\r\n\t\t\t\t(htmlEscape(event.title || '') || '&nbsp;') + // we always want one line of height\r\n\t\t\t'</span>';\r\n\t\t\r\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\r\n\t\t\t\t(event.url ?\r\n\t\t\t\t\t' href=\"' + htmlEscape(event.url) + '\"' :\r\n\t\t\t\t\t''\r\n\t\t\t\t\t) +\r\n\t\t\t\t(skinCss ?\r\n\t\t\t\t\t' style=\"' + skinCss + '\"' :\r\n\t\t\t\t\t''\r\n\t\t\t\t\t) +\r\n\t\t\t'>' +\r\n\t\t\t\t'<div class=\"fc-content\">' +\r\n\t\t\t\t\t(this.isRTL ?\r\n\t\t\t\t\t\ttitleHtml + ' ' + timeHtml : // put a natural space in between\r\n\t\t\t\t\t\ttimeHtml + ' ' + titleHtml   //\r\n\t\t\t\t\t\t) +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t(isResizableFromStart ?\r\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\r\n\t\t\t\t\t''\r\n\t\t\t\t\t) +\r\n\t\t\t\t(isResizableFromEnd ?\r\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\r\n\t\t\t\t\t''\r\n\t\t\t\t\t) +\r\n\t\t\t'</a>';\r\n\t},\r\n\r\n\r\n\t// Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\r\n\t// the segments. Returns object with a bunch of internal data about how the render was calculated.\r\n\t// NOTE: modifies rowSegs\r\n\trenderSegRow: function(row, rowSegs) {\r\n\t\tvar colCnt = this.colCnt;\r\n\t\tvar segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\r\n\t\tvar levelCnt = Math.max(1, segLevels.length); // ensure at least one level\r\n\t\tvar tbody = $('<tbody/>');\r\n\t\tvar segMatrix = []; // lookup for which segments are rendered into which level+col cells\r\n\t\tvar cellMatrix = []; // lookup for all <td> elements of the level+col matrix\r\n\t\tvar loneCellMatrix = []; // lookup for <td> elements that only take up a single column\r\n\t\tvar i, levelSegs;\r\n\t\tvar col;\r\n\t\tvar tr;\r\n\t\tvar j, seg;\r\n\t\tvar td;\r\n\r\n\t\t// populates empty cells from the current column (`col`) to `endCol`\r\n\t\tfunction emptyCellsUntil(endCol) {\r\n\t\t\twhile (col < endCol) {\r\n\t\t\t\t// try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\r\n\t\t\t\ttd = (loneCellMatrix[i - 1] || [])[col];\r\n\t\t\t\tif (td) {\r\n\t\t\t\t\ttd.attr(\r\n\t\t\t\t\t\t'rowspan',\r\n\t\t\t\t\t\tparseInt(td.attr('rowspan') || 1, 10) + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ttd = $('<td/>');\r\n\t\t\t\t\ttr.append(td);\r\n\t\t\t\t}\r\n\t\t\t\tcellMatrix[i][col] = td;\r\n\t\t\t\tloneCellMatrix[i][col] = td;\r\n\t\t\t\tcol++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < levelCnt; i++) { // iterate through all levels\r\n\t\t\tlevelSegs = segLevels[i];\r\n\t\t\tcol = 0;\r\n\t\t\ttr = $('<tr/>');\r\n\r\n\t\t\tsegMatrix.push([]);\r\n\t\t\tcellMatrix.push([]);\r\n\t\t\tloneCellMatrix.push([]);\r\n\r\n\t\t\t// levelCnt might be 1 even though there are no actual levels. protect against this.\r\n\t\t\t// this single empty row is useful for styling.\r\n\t\t\tif (levelSegs) {\r\n\t\t\t\tfor (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\r\n\t\t\t\t\tseg = levelSegs[j];\r\n\r\n\t\t\t\t\temptyCellsUntil(seg.leftCol);\r\n\r\n\t\t\t\t\t// create a container that occupies or more columns. append the event element.\r\n\t\t\t\t\ttd = $('<td class=\"fc-event-container\"/>').append(seg.el);\r\n\t\t\t\t\tif (seg.leftCol != seg.rightCol) {\r\n\t\t\t\t\t\ttd.attr('colspan', seg.rightCol - seg.leftCol + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse { // a single-column segment\r\n\t\t\t\t\t\tloneCellMatrix[i][col] = td;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhile (col <= seg.rightCol) {\r\n\t\t\t\t\t\tcellMatrix[i][col] = td;\r\n\t\t\t\t\t\tsegMatrix[i][col] = seg;\r\n\t\t\t\t\t\tcol++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttr.append(td);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\temptyCellsUntil(colCnt); // finish off the row\r\n\t\t\tthis.bookendCells(tr);\r\n\t\t\ttbody.append(tr);\r\n\t\t}\r\n\r\n\t\treturn { // a \"rowStruct\"\r\n\t\t\trow: row, // the row number\r\n\t\t\ttbodyEl: tbody,\r\n\t\t\tcellMatrix: cellMatrix,\r\n\t\t\tsegMatrix: segMatrix,\r\n\t\t\tsegLevels: segLevels,\r\n\t\t\tsegs: rowSegs\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t// Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\r\n\t// NOTE: modifies segs\r\n\tbuildSegLevels: function(segs) {\r\n\t\tvar levels = [];\r\n\t\tvar i, seg;\r\n\t\tvar j;\r\n\r\n\t\t// Give preference to elements with certain criteria, so they have\r\n\t\t// a chance to be closer to the top.\r\n\t\tthis.sortEventSegs(segs);\r\n\t\t\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\r\n\t\t\t// loop through levels, starting with the topmost, until the segment doesn't collide with other segments\r\n\t\t\tfor (j = 0; j < levels.length; j++) {\r\n\t\t\t\tif (!isDaySegCollision(seg, levels[j])) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// `j` now holds the desired subrow index\r\n\t\t\tseg.level = j;\r\n\r\n\t\t\t// create new level array if needed and append segment\r\n\t\t\t(levels[j] || (levels[j] = [])).push(seg);\r\n\t\t}\r\n\r\n\t\t// order segments left-to-right. very important if calendar is RTL\r\n\t\tfor (j = 0; j < levels.length; j++) {\r\n\t\t\tlevels[j].sort(compareDaySegCols);\r\n\t\t}\r\n\r\n\t\treturn levels;\r\n\t},\r\n\r\n\r\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\r\n\tgroupSegRows: function(segs) {\r\n\t\tvar segRows = [];\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < this.rowCnt; i++) {\r\n\t\t\tsegRows.push([]);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tsegRows[segs[i].row].push(segs[i]);\r\n\t\t}\r\n\r\n\t\treturn segRows;\r\n\t}\r\n\r\n});\r\n\r\n\r\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\r\nfunction isDaySegCollision(seg, otherSegs) {\r\n\tvar i, otherSeg;\r\n\r\n\tfor (i = 0; i < otherSegs.length; i++) {\r\n\t\totherSeg = otherSegs[i];\r\n\r\n\t\tif (\r\n\t\t\totherSeg.leftCol <= seg.rightCol &&\r\n\t\t\totherSeg.rightCol >= seg.leftCol\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\n\r\n// A cmp function for determining the leftmost event\r\nfunction compareDaySegCols(a, b) {\r\n\treturn a.leftCol - b.leftCol;\r\n}\r\n\r\n;;\r\n\r\n/* Methods relate to limiting the number events for a given day on a DayGrid\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// NOTE: all the segs being passed around in here are foreground segs\r\n\r\nDayGrid.mixin({\r\n\r\n\tsegPopover: null, // the Popover that holds events that can't fit in a cell. null when not visible\r\n\tpopoverSegs: null, // an array of segment objects that the segPopover holds. null when not visible\r\n\r\n\r\n\tremoveSegPopover: function() {\r\n\t\tif (this.segPopover) {\r\n\t\t\tthis.segPopover.hide(); // in handler, will call segPopover's removeElement\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\r\n\t// `levelLimit` can be false (don't limit), a number, or true (should be computed).\r\n\tlimitRows: function(levelLimit) {\r\n\t\tvar rowStructs = this.rowStructs || [];\r\n\t\tvar row; // row #\r\n\t\tvar rowLevelLimit;\r\n\r\n\t\tfor (row = 0; row < rowStructs.length; row++) {\r\n\t\t\tthis.unlimitRow(row);\r\n\r\n\t\t\tif (!levelLimit) {\r\n\t\t\t\trowLevelLimit = false;\r\n\t\t\t}\r\n\t\t\telse if (typeof levelLimit === 'number') {\r\n\t\t\t\trowLevelLimit = levelLimit;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\trowLevelLimit = this.computeRowLevelLimit(row);\r\n\t\t\t}\r\n\r\n\t\t\tif (rowLevelLimit !== false) {\r\n\t\t\t\tthis.limitRow(row, rowLevelLimit);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Computes the number of levels a row will accomodate without going outside its bounds.\r\n\t// Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\r\n\t// `row` is the row number.\r\n\tcomputeRowLevelLimit: function(row) {\r\n\t\tvar rowEl = this.rowEls.eq(row); // the containing \"fake\" row div\r\n\t\tvar rowHeight = rowEl.height(); // TODO: cache somehow?\r\n\t\tvar trEls = this.rowStructs[row].tbodyEl.children();\r\n\t\tvar i, trEl;\r\n\t\tvar trHeight;\r\n\r\n\t\tfunction iterInnerHeights(i, childNode) {\r\n\t\t\ttrHeight = Math.max(trHeight, $(childNode).outerHeight());\r\n\t\t}\r\n\r\n\t\t// Reveal one level <tr> at a time and stop when we find one out of bounds\r\n\t\tfor (i = 0; i < trEls.length; i++) {\r\n\t\t\ttrEl = trEls.eq(i).removeClass('fc-limited'); // reset to original state (reveal)\r\n\r\n\t\t\t// with rowspans>1 and IE8, trEl.outerHeight() would return the height of the largest cell,\r\n\t\t\t// so instead, find the tallest inner content element.\r\n\t\t\ttrHeight = 0;\r\n\t\t\ttrEl.find('> td > :first-child').each(iterInnerHeights);\r\n\r\n\t\t\tif (trEl.position().top + trHeight > rowHeight) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false; // should not limit at all\r\n\t},\r\n\r\n\r\n\t// Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\r\n\t// `row` is the row number.\r\n\t// `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\r\n\tlimitRow: function(row, levelLimit) {\r\n\t\tvar _this = this;\r\n\t\tvar rowStruct = this.rowStructs[row];\r\n\t\tvar moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\r\n\t\tvar col = 0; // col #, left-to-right (not chronologically)\r\n\t\tvar levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\r\n\t\tvar cellMatrix; // a matrix (by level, then column) of all <td> jQuery elements in the row\r\n\t\tvar limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\r\n\t\tvar i, seg;\r\n\t\tvar segsBelow; // array of segment objects below `seg` in the current `col`\r\n\t\tvar totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\r\n\t\tvar colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\r\n\t\tvar td, rowspan;\r\n\t\tvar segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\r\n\t\tvar j;\r\n\t\tvar moreTd, moreWrap, moreLink;\r\n\r\n\t\t// Iterates through empty level cells and places \"more\" links inside if need be\r\n\t\tfunction emptyCellsUntil(endCol) { // goes from current `col` to `endCol`\r\n\t\t\twhile (col < endCol) {\r\n\t\t\t\tsegsBelow = _this.getCellSegs(row, col, levelLimit);\r\n\t\t\t\tif (segsBelow.length) {\r\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][col];\r\n\t\t\t\t\tmoreLink = _this.renderMoreLink(row, col, segsBelow);\r\n\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\r\n\t\t\t\t\ttd.append(moreWrap);\r\n\t\t\t\t\tmoreNodes.push(moreWrap[0]);\r\n\t\t\t\t}\r\n\t\t\t\tcol++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\r\n\t\t\tlevelSegs = rowStruct.segLevels[levelLimit - 1];\r\n\t\t\tcellMatrix = rowStruct.cellMatrix;\r\n\r\n\t\t\tlimitedNodes = rowStruct.tbodyEl.children().slice(levelLimit) // get level <tr> elements past the limit\r\n\t\t\t\t.addClass('fc-limited').get(); // hide elements and get a simple DOM-nodes array\r\n\r\n\t\t\t// iterate though segments in the last allowable level\r\n\t\t\tfor (i = 0; i < levelSegs.length; i++) {\r\n\t\t\t\tseg = levelSegs[i];\r\n\t\t\t\temptyCellsUntil(seg.leftCol); // process empty cells before the segment\r\n\r\n\t\t\t\t// determine *all* segments below `seg` that occupy the same columns\r\n\t\t\t\tcolSegsBelow = [];\r\n\t\t\t\ttotalSegsBelow = 0;\r\n\t\t\t\twhile (col <= seg.rightCol) {\r\n\t\t\t\t\tsegsBelow = this.getCellSegs(row, col, levelLimit);\r\n\t\t\t\t\tcolSegsBelow.push(segsBelow);\r\n\t\t\t\t\ttotalSegsBelow += segsBelow.length;\r\n\t\t\t\t\tcol++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\r\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][seg.leftCol]; // the segment's parent cell\r\n\t\t\t\t\trowspan = td.attr('rowspan') || 1;\r\n\t\t\t\t\tsegMoreNodes = [];\r\n\r\n\t\t\t\t\t// make a replacement <td> for each column the segment occupies. will be one for each colspan\r\n\t\t\t\t\tfor (j = 0; j < colSegsBelow.length; j++) {\r\n\t\t\t\t\t\tmoreTd = $('<td class=\"fc-more-cell\"/>').attr('rowspan', rowspan);\r\n\t\t\t\t\t\tsegsBelow = colSegsBelow[j];\r\n\t\t\t\t\t\tmoreLink = this.renderMoreLink(\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\tseg.leftCol + j,\r\n\t\t\t\t\t\t\t[ seg ].concat(segsBelow) // count seg as hidden too\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\r\n\t\t\t\t\t\tmoreTd.append(moreWrap);\r\n\t\t\t\t\t\tsegMoreNodes.push(moreTd[0]);\r\n\t\t\t\t\t\tmoreNodes.push(moreTd[0]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttd.addClass('fc-limited').after($(segMoreNodes)); // hide original <td> and inject replacements\r\n\t\t\t\t\tlimitedNodes.push(td[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\temptyCellsUntil(this.colCnt); // finish off the level\r\n\t\t\trowStruct.moreEls = $(moreNodes); // for easy undoing later\r\n\t\t\trowStruct.limitedEls = $(limitedNodes); // for easy undoing later\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Reveals all levels and removes all \"more\"-related elements for a grid's row.\r\n\t// `row` is a row number.\r\n\tunlimitRow: function(row) {\r\n\t\tvar rowStruct = this.rowStructs[row];\r\n\r\n\t\tif (rowStruct.moreEls) {\r\n\t\t\trowStruct.moreEls.remove();\r\n\t\t\trowStruct.moreEls = null;\r\n\t\t}\r\n\r\n\t\tif (rowStruct.limitedEls) {\r\n\t\t\trowStruct.limitedEls.removeClass('fc-limited');\r\n\t\t\trowStruct.limitedEls = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Renders an <a> element that represents hidden event element for a cell.\r\n\t// Responsible for attaching click handler as well.\r\n\trenderMoreLink: function(row, col, hiddenSegs) {\r\n\t\tvar _this = this;\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn $('<a class=\"fc-more\"/>')\r\n\t\t\t.text(\r\n\t\t\t\tthis.getMoreLinkText(hiddenSegs.length)\r\n\t\t\t)\r\n\t\t\t.on('click', function(ev) {\r\n\t\t\t\tvar clickOption = view.opt('eventLimitClick');\r\n\t\t\t\tvar date = _this.getCellDate(row, col);\r\n\t\t\t\tvar moreEl = $(this);\r\n\t\t\t\tvar dayEl = _this.getCellEl(row, col);\r\n\t\t\t\tvar allSegs = _this.getCellSegs(row, col);\r\n\r\n\t\t\t\t// rescope the segments to be within the cell's date\r\n\t\t\t\tvar reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\r\n\t\t\t\tvar reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\r\n\r\n\t\t\t\tif (typeof clickOption === 'function') {\r\n\t\t\t\t\t// the returned value can be an atomic option\r\n\t\t\t\t\tclickOption = view.trigger('eventLimitClick', null, {\r\n\t\t\t\t\t\tdate: date,\r\n\t\t\t\t\t\tdayEl: dayEl,\r\n\t\t\t\t\t\tmoreEl: moreEl,\r\n\t\t\t\t\t\tsegs: reslicedAllSegs,\r\n\t\t\t\t\t\thiddenSegs: reslicedHiddenSegs\r\n\t\t\t\t\t}, ev);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (clickOption === 'popover') {\r\n\t\t\t\t\t_this.showSegPopover(row, col, moreEl, reslicedAllSegs);\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof clickOption === 'string') { // a view name\r\n\t\t\t\t\tview.calendar.zoomTo(date, clickOption);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t},\r\n\r\n\r\n\t// Reveals the popover that displays all events within a cell\r\n\tshowSegPopover: function(row, col, moreLink, segs) {\r\n\t\tvar _this = this;\r\n\t\tvar view = this.view;\r\n\t\tvar moreWrap = moreLink.parent(); // the <div> wrapper around the <a>\r\n\t\tvar topEl; // the element we want to match the top coordinate of\r\n\t\tvar options;\r\n\r\n\t\tif (this.rowCnt == 1) {\r\n\t\t\ttopEl = view.el; // will cause the popover to cover any sort of header\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttopEl = this.rowEls.eq(row); // will align with top of row\r\n\t\t}\r\n\r\n\t\toptions = {\r\n\t\t\tclassName: 'fc-more-popover',\r\n\t\t\tcontent: this.renderSegPopoverContent(row, col, segs),\r\n\t\t\tparentEl: this.view.el, // attach to root of view. guarantees outside of scrollbars.\r\n\t\t\ttop: topEl.offset().top,\r\n\t\t\tautoHide: true, // when the user clicks elsewhere, hide the popover\r\n\t\t\tviewportConstrain: view.opt('popoverViewportConstrain'),\r\n\t\t\thide: function() {\r\n\t\t\t\t// kill everything when the popover is hidden\r\n\t\t\t\t_this.segPopover.removeElement();\r\n\t\t\t\t_this.segPopover = null;\r\n\t\t\t\t_this.popoverSegs = null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Determine horizontal coordinate.\r\n\t\t// We use the moreWrap instead of the <td> to avoid border confusion.\r\n\t\tif (this.isRTL) {\r\n\t\t\toptions.right = moreWrap.offset().left + moreWrap.outerWidth() + 1; // +1 to be over cell border\r\n\t\t}\r\n\t\telse {\r\n\t\t\toptions.left = moreWrap.offset().left - 1; // -1 to be over cell border\r\n\t\t}\r\n\r\n\t\tthis.segPopover = new Popover(options);\r\n\t\tthis.segPopover.show();\r\n\r\n\t\t// the popover doesn't live within the grid's container element, and thus won't get the event\r\n\t\t// delegated-handlers for free. attach event-related handlers to the popover.\r\n\t\tthis.bindSegHandlersToEl(this.segPopover.el);\r\n\t},\r\n\r\n\r\n\t// Builds the inner DOM contents of the segment popover\r\n\trenderSegPopoverContent: function(row, col, segs) {\r\n\t\tvar view = this.view;\r\n\t\tvar isTheme = view.opt('theme');\r\n\t\tvar title = this.getCellDate(row, col).format(view.opt('dayPopoverFormat'));\r\n\t\tvar content = $(\r\n\t\t\t'<div class=\"fc-header ' + view.widgetHeaderClass + '\">' +\r\n\t\t\t\t'<span class=\"fc-close ' +\r\n\t\t\t\t\t(isTheme ? 'ui-icon ui-icon-closethick' : 'fc-icon fc-icon-x') +\r\n\t\t\t\t'\"></span>' +\r\n\t\t\t\t'<span class=\"fc-title\">' +\r\n\t\t\t\t\thtmlEscape(title) +\r\n\t\t\t\t'</span>' +\r\n\t\t\t\t'<div class=\"fc-clear\"/>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"fc-body ' + view.widgetContentClass + '\">' +\r\n\t\t\t\t'<div class=\"fc-event-container\"></div>' +\r\n\t\t\t'</div>'\r\n\t\t);\r\n\t\tvar segContainer = content.find('.fc-event-container');\r\n\t\tvar i;\r\n\r\n\t\t// render each seg's `el` and only return the visible segs\r\n\t\tsegs = this.renderFgSegEls(segs, true); // disableResizing=true\r\n\t\tthis.popoverSegs = segs;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\r\n\t\t\t// because segments in the popover are not part of a grid coordinate system, provide a hint to any\r\n\t\t\t// grids that want to do drag-n-drop about which cell it came from\r\n\t\t\tthis.prepareHits();\r\n\t\t\tsegs[i].hit = this.getCellHit(row, col);\r\n\t\t\tthis.releaseHits();\r\n\r\n\t\t\tsegContainer.append(segs[i].el);\r\n\t\t}\r\n\r\n\t\treturn content;\r\n\t},\r\n\r\n\r\n\t// Given the events within an array of segment objects, reslice them to be in a single day\r\n\tresliceDaySegs: function(segs, dayDate) {\r\n\r\n\t\t// build an array of the original events\r\n\t\tvar events = $.map(segs, function(seg) {\r\n\t\t\treturn seg.event;\r\n\t\t});\r\n\r\n\t\tvar dayStart = dayDate.clone();\r\n\t\tvar dayEnd = dayStart.clone().add(1, 'days');\r\n\t\tvar dayRange = { start: dayStart, end: dayEnd };\r\n\r\n\t\t// slice the events with a custom slicing function\r\n\t\tsegs = this.eventsToSegs(\r\n\t\t\tevents,\r\n\t\t\tfunction(range) {\r\n\t\t\t\tvar seg = intersectRanges(range, dayRange); // undefind if no intersection\r\n\t\t\t\treturn seg ? [ seg ] : []; // must return an array of segments\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t// force an order because eventsToSegs doesn't guarantee one\r\n\t\tthis.sortEventSegs(segs);\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Generates the text that should be inside a \"more\" link, given the number of events it represents\r\n\tgetMoreLinkText: function(num) {\r\n\t\tvar opt = this.view.opt('eventLimitText');\r\n\r\n\t\tif (typeof opt === 'function') {\r\n\t\t\treturn opt(num);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn '+' + num + ' ' + opt;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Returns segments within a given cell.\r\n\t// If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\r\n\tgetCellSegs: function(row, col, startLevel) {\r\n\t\tvar segMatrix = this.rowStructs[row].segMatrix;\r\n\t\tvar level = startLevel || 0;\r\n\t\tvar segs = [];\r\n\t\tvar seg;\r\n\r\n\t\twhile (level < segMatrix.length) {\r\n\t\t\tseg = segMatrix[level][col];\r\n\t\t\tif (seg) {\r\n\t\t\t\tsegs.push(seg);\r\n\t\t\t}\r\n\t\t\tlevel++;\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/* A component that renders one or more columns of vertical time slots\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// We mixin DayTable, even though there is only a single row of days\r\n\r\nvar TimeGrid = FC.TimeGrid = Grid.extend(DayTableMixin, {\r\n\r\n\tslotDuration: null, // duration of a \"slot\", a distinct time segment on given day, visualized by lines\r\n\tsnapDuration: null, // granularity of time for dragging and selecting\r\n\tsnapsPerSlot: null,\r\n\tminTime: null, // Duration object that denotes the first visible time of any given day\r\n\tmaxTime: null, // Duration object that denotes the exclusive visible end time of any given day\r\n\tlabelFormat: null, // formatting string for times running along vertical axis\r\n\tlabelInterval: null, // duration of how often a label should be displayed for a slot\r\n\r\n\tcolEls: null, // cells elements in the day-row background\r\n\tslatContainerEl: null, // div that wraps all the slat rows\r\n\tslatEls: null, // elements running horizontally across all columns\r\n\tnowIndicatorEls: null,\r\n\r\n\tcolCoordCache: null,\r\n\tslatCoordCache: null,\r\n\r\n\r\n\tconstructor: function() {\r\n\t\tGrid.apply(this, arguments); // call the super-constructor\r\n\r\n\t\tthis.processOptions();\r\n\t},\r\n\r\n\r\n\t// Renders the time grid into `this.el`, which should already be assigned.\r\n\t// Relies on the view's colCnt. In the future, this component should probably be self-sufficient.\r\n\trenderDates: function() {\r\n\t\tthis.el.html(this.renderHtml());\r\n\t\tthis.colEls = this.el.find('.fc-day');\r\n\t\tthis.slatContainerEl = this.el.find('.fc-slats');\r\n\t\tthis.slatEls = this.slatContainerEl.find('tr');\r\n\r\n\t\tthis.colCoordCache = new CoordCache({\r\n\t\t\tels: this.colEls,\r\n\t\t\tisHorizontal: true\r\n\t\t});\r\n\t\tthis.slatCoordCache = new CoordCache({\r\n\t\t\tels: this.slatEls,\r\n\t\t\tisVertical: true\r\n\t\t});\r\n\r\n\t\tthis.renderContentSkeleton();\r\n\t},\r\n\r\n\r\n\t// Renders the basic HTML skeleton for the grid\r\n\trenderHtml: function() {\r\n\t\treturn '' +\r\n\t\t\t'<div class=\"fc-bg\">' +\r\n\t\t\t\t'<table>' +\r\n\t\t\t\t\tthis.renderBgTrHtml(0) + // row=0\r\n\t\t\t\t'</table>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"fc-slats\">' +\r\n\t\t\t\t'<table>' +\r\n\t\t\t\t\tthis.renderSlatRowHtml() +\r\n\t\t\t\t'</table>' +\r\n\t\t\t'</div>';\r\n\t},\r\n\r\n\r\n\t// Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\r\n\trenderSlatRowHtml: function() {\r\n\t\tvar view = this.view;\r\n\t\tvar isRTL = this.isRTL;\r\n\t\tvar html = '';\r\n\t\tvar slotTime = moment.duration(+this.minTime); // wish there was .clone() for durations\r\n\t\tvar slotDate; // will be on the view's first day, but we only care about its time\r\n\t\tvar isLabeled;\r\n\t\tvar axisHtml;\r\n\r\n\t\t// Calculate the time for each slot\r\n\t\twhile (slotTime < this.maxTime) {\r\n\t\t\tslotDate = this.start.clone().time(slotTime);\r\n\t\t\tisLabeled = isInt(divideDurationByDuration(slotTime, this.labelInterval));\r\n\r\n\t\t\taxisHtml =\r\n\t\t\t\t'<td class=\"fc-axis fc-time ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '>' +\r\n\t\t\t\t\t(isLabeled ?\r\n\t\t\t\t\t\t'<span>' + // for matchCellWidths\r\n\t\t\t\t\t\t\thtmlEscape(slotDate.format(this.labelFormat)) +\r\n\t\t\t\t\t\t'</span>' :\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t\t) +\r\n\t\t\t\t'</td>';\r\n\r\n\t\t\thtml +=\r\n\t\t\t\t'<tr data-time=\"' + slotDate.format('HH:mm:ss') + '\"' +\r\n\t\t\t\t\t(isLabeled ? '' : ' class=\"fc-minor\"') +\r\n\t\t\t\t\t'>' +\r\n\t\t\t\t\t(!isRTL ? axisHtml : '') +\r\n\t\t\t\t\t'<td class=\"' + view.widgetContentClass + '\"/>' +\r\n\t\t\t\t\t(isRTL ? axisHtml : '') +\r\n\t\t\t\t\"</tr>\";\r\n\r\n\t\t\tslotTime.add(this.slotDuration);\r\n\t\t}\r\n\r\n\t\treturn html;\r\n\t},\r\n\r\n\r\n\t/* Options\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Parses various options into properties of this object\r\n\tprocessOptions: function() {\r\n\t\tvar view = this.view;\r\n\t\tvar slotDuration = view.opt('slotDuration');\r\n\t\tvar snapDuration = view.opt('snapDuration');\r\n\t\tvar input;\r\n\r\n\t\tslotDuration = moment.duration(slotDuration);\r\n\t\tsnapDuration = snapDuration ? moment.duration(snapDuration) : slotDuration;\r\n\r\n\t\tthis.slotDuration = slotDuration;\r\n\t\tthis.snapDuration = snapDuration;\r\n\t\tthis.snapsPerSlot = slotDuration / snapDuration; // TODO: ensure an integer multiple?\r\n\r\n\t\tthis.minResizeDuration = snapDuration; // hack\r\n\r\n\t\tthis.minTime = moment.duration(view.opt('minTime'));\r\n\t\tthis.maxTime = moment.duration(view.opt('maxTime'));\r\n\r\n\t\t// might be an array value (for TimelineView).\r\n\t\t// if so, getting the most granular entry (the last one probably).\r\n\t\tinput = view.opt('slotLabelFormat');\r\n\t\tif ($.isArray(input)) {\r\n\t\t\tinput = input[input.length - 1];\r\n\t\t}\r\n\r\n\t\tthis.labelFormat =\r\n\t\t\tinput ||\r\n\t\t\tview.opt('smallTimeFormat'); // the computed default\r\n\r\n\t\tinput = view.opt('slotLabelInterval');\r\n\t\tthis.labelInterval = input ?\r\n\t\t\tmoment.duration(input) :\r\n\t\t\tthis.computeLabelInterval(slotDuration);\r\n\t},\r\n\r\n\r\n\t// Computes an automatic value for slotLabelInterval\r\n\tcomputeLabelInterval: function(slotDuration) {\r\n\t\tvar i;\r\n\t\tvar labelInterval;\r\n\t\tvar slotsPerLabel;\r\n\r\n\t\t// find the smallest stock label interval that results in more than one slots-per-label\r\n\t\tfor (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\r\n\t\t\tlabelInterval = moment.duration(AGENDA_STOCK_SUB_DURATIONS[i]);\r\n\t\t\tslotsPerLabel = divideDurationByDuration(labelInterval, slotDuration);\r\n\t\t\tif (isInt(slotsPerLabel) && slotsPerLabel > 1) {\r\n\t\t\t\treturn labelInterval;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn moment.duration(slotDuration); // fall back. clone\r\n\t},\r\n\r\n\r\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\r\n\tcomputeEventTimeFormat: function() {\r\n\t\treturn this.view.opt('noMeridiemTimeFormat'); // like \"6:30\" (no AM/PM)\r\n\t},\r\n\r\n\r\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\r\n\tcomputeDisplayEventEnd: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* Hit System\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tprepareHits: function() {\r\n\t\tthis.colCoordCache.build();\r\n\t\tthis.slatCoordCache.build();\r\n\t},\r\n\r\n\r\n\treleaseHits: function() {\r\n\t\tthis.colCoordCache.clear();\r\n\t\t// NOTE: don't clear slatCoordCache because we rely on it for computeTimeTop\r\n\t},\r\n\r\n\r\n\tqueryHit: function(leftOffset, topOffset) {\r\n\t\tvar snapsPerSlot = this.snapsPerSlot;\r\n\t\tvar colCoordCache = this.colCoordCache;\r\n\t\tvar slatCoordCache = this.slatCoordCache;\r\n\r\n\t\tif (colCoordCache.isLeftInBounds(leftOffset) && slatCoordCache.isTopInBounds(topOffset)) {\r\n\t\t\tvar colIndex = colCoordCache.getHorizontalIndex(leftOffset);\r\n\t\t\tvar slatIndex = slatCoordCache.getVerticalIndex(topOffset);\r\n\r\n\t\t\tif (colIndex != null && slatIndex != null) {\r\n\t\t\t\tvar slatTop = slatCoordCache.getTopOffset(slatIndex);\r\n\t\t\t\tvar slatHeight = slatCoordCache.getHeight(slatIndex);\r\n\t\t\t\tvar partial = (topOffset - slatTop) / slatHeight; // floating point number between 0 and 1\r\n\t\t\t\tvar localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\r\n\t\t\t\tvar snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\r\n\t\t\t\tvar snapTop = slatTop + (localSnapIndex / snapsPerSlot) * slatHeight;\r\n\t\t\t\tvar snapBottom = slatTop + ((localSnapIndex + 1) / snapsPerSlot) * slatHeight;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcol: colIndex,\r\n\t\t\t\t\tsnap: snapIndex,\r\n\t\t\t\t\tcomponent: this, // needed unfortunately :(\r\n\t\t\t\t\tleft: colCoordCache.getLeftOffset(colIndex),\r\n\t\t\t\t\tright: colCoordCache.getRightOffset(colIndex),\r\n\t\t\t\t\ttop: snapTop,\r\n\t\t\t\t\tbottom: snapBottom\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetHitSpan: function(hit) {\r\n\t\tvar start = this.getCellDate(0, hit.col); // row=0\r\n\t\tvar time = this.computeSnapTime(hit.snap); // pass in the snap-index\r\n\t\tvar end;\r\n\r\n\t\tstart.time(time);\r\n\t\tend = start.clone().add(this.snapDuration);\r\n\r\n\t\treturn { start: start, end: end };\r\n\t},\r\n\r\n\r\n\tgetHitEl: function(hit) {\r\n\t\treturn this.colEls.eq(hit.col);\r\n\t},\r\n\r\n\r\n\t/* Dates\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trangeUpdated: function() {\r\n\t\tthis.updateDayTable();\r\n\t},\r\n\r\n\r\n\t// Given a row number of the grid, representing a \"snap\", returns a time (Duration) from its start-of-day\r\n\tcomputeSnapTime: function(snapIndex) {\r\n\t\treturn moment.duration(this.minTime + this.snapDuration * snapIndex);\r\n\t},\r\n\r\n\r\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\r\n\tspanToSegs: function(span) {\r\n\t\tvar segs = this.sliceRangeByTimes(span);\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tif (this.isRTL) {\r\n\t\t\t\tsegs[i].col = this.daysPerRow - 1 - segs[i].dayIndex;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsegs[i].col = segs[i].dayIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\tsliceRangeByTimes: function(range) {\r\n\t\tvar segs = [];\r\n\t\tvar seg;\r\n\t\tvar dayIndex;\r\n\t\tvar dayDate;\r\n\t\tvar dayRange;\r\n\r\n\t\tfor (dayIndex = 0; dayIndex < this.daysPerRow; dayIndex++) {\r\n\t\t\tdayDate = this.dayDates[dayIndex].clone(); // TODO: better API for this?\r\n\t\t\tdayRange = {\r\n\t\t\t\tstart: dayDate.clone().time(this.minTime),\r\n\t\t\t\tend: dayDate.clone().time(this.maxTime)\r\n\t\t\t};\r\n\t\t\tseg = intersectRanges(range, dayRange); // both will be ambig timezone\r\n\t\t\tif (seg) {\r\n\t\t\t\tseg.dayIndex = dayIndex;\r\n\t\t\t\tsegs.push(seg);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t/* Coordinates\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tupdateSize: function(isResize) { // NOT a standard Grid method\r\n\t\tthis.slatCoordCache.build();\r\n\r\n\t\tif (isResize) {\r\n\t\t\tthis.updateSegVerticals(\r\n\t\t\t\t[].concat(this.fgSegs || [], this.bgSegs || [], this.businessSegs || [])\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tgetTotalSlatHeight: function() {\r\n\t\treturn this.slatContainerEl.outerHeight();\r\n\t},\r\n\r\n\r\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given date.\r\n\t// A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\r\n\tcomputeDateTop: function(date, startOfDayDate) {\r\n\t\treturn this.computeTimeTop(\r\n\t\t\tmoment.duration(\r\n\t\t\t\tdate - startOfDayDate.clone().stripTime()\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\r\n\tcomputeTimeTop: function(time) {\r\n\t\tvar len = this.slatEls.length;\r\n\t\tvar slatCoverage = (time - this.minTime) / this.slotDuration; // floating-point value of # of slots covered\r\n\t\tvar slatIndex;\r\n\t\tvar slatRemainder;\r\n\r\n\t\t// compute a floating-point number for how many slats should be progressed through.\r\n\t\t// from 0 to number of slats (inclusive)\r\n\t\t// constrained because minTime/maxTime might be customized.\r\n\t\tslatCoverage = Math.max(0, slatCoverage);\r\n\t\tslatCoverage = Math.min(len, slatCoverage);\r\n\r\n\t\t// an integer index of the furthest whole slat\r\n\t\t// from 0 to number slats (*exclusive*, so len-1)\r\n\t\tslatIndex = Math.floor(slatCoverage);\r\n\t\tslatIndex = Math.min(slatIndex, len - 1);\r\n\r\n\t\t// how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\r\n\t\t// could be 1.0 if slatCoverage is covering *all* the slots\r\n\t\tslatRemainder = slatCoverage - slatIndex;\r\n\r\n\t\treturn this.slatCoordCache.getTopPosition(slatIndex) +\r\n\t\t\tthis.slatCoordCache.getHeight(slatIndex) * slatRemainder;\r\n\t},\r\n\r\n\r\n\r\n\t/* Event Drag Visualization\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of an event being dragged over the specified date(s).\r\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\r\n\trenderDrag: function(eventLocation, seg) {\r\n\r\n\t\tif (seg) { // if there is event information for this drag, render a helper event\r\n\r\n\t\t\t// returns mock event elements\r\n\t\t\t// signal that a helper has been rendered\r\n\t\t\treturn this.renderEventLocationHelper(eventLocation, seg);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// otherwise, just render a highlight\r\n\t\t\tthis.renderHighlight(this.eventToSpan(eventLocation));\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Unrenders any visual indication of an event being dragged\r\n\tunrenderDrag: function() {\r\n\t\tthis.unrenderHelper();\r\n\t\tthis.unrenderHighlight();\r\n\t},\r\n\r\n\r\n\t/* Event Resize Visualization\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of an event being resized\r\n\trenderEventResize: function(eventLocation, seg) {\r\n\t\treturn this.renderEventLocationHelper(eventLocation, seg); // returns mock event elements\r\n\t},\r\n\r\n\r\n\t// Unrenders any visual indication of an event being resized\r\n\tunrenderEventResize: function() {\r\n\t\tthis.unrenderHelper();\r\n\t},\r\n\r\n\r\n\t/* Event Helper\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a mock \"helper\" event. `sourceSeg` is the original segment object and might be null (an external drag)\r\n\trenderHelper: function(event, sourceSeg) {\r\n\t\treturn this.renderHelperSegs(this.eventToSegs(event), sourceSeg); // returns mock event elements\r\n\t},\r\n\r\n\r\n\t// Unrenders any mock helper event\r\n\tunrenderHelper: function() {\r\n\t\tthis.unrenderHelperSegs();\r\n\t},\r\n\r\n\r\n\t/* Business Hours\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderBusinessHours: function() {\r\n\t\tthis.renderBusinessSegs(\r\n\t\t\tthis.buildBusinessHourSegs()\r\n\t\t);\r\n\t},\r\n\r\n\r\n\tunrenderBusinessHours: function() {\r\n\t\tthis.unrenderBusinessSegs();\r\n\t},\r\n\r\n\r\n\t/* Now Indicator\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tgetNowIndicatorUnit: function() {\r\n\t\treturn 'minute'; // will refresh on the minute\r\n\t},\r\n\r\n\r\n\trenderNowIndicator: function(date) {\r\n\t\t// seg system might be overkill, but it handles scenario where line needs to be rendered\r\n\t\t//  more than once because of columns with the same date (resources columns for example)\r\n\t\tvar segs = this.spanToSegs({ start: date, end: date });\r\n\t\tvar top = this.computeDateTop(date, date);\r\n\t\tvar nodes = [];\r\n\t\tvar i;\r\n\r\n\t\t// render lines within the columns\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-line\"></div>')\r\n\t\t\t\t.css('top', top)\r\n\t\t\t\t.appendTo(this.colContainerEls.eq(segs[i].col))[0]);\r\n\t\t}\r\n\r\n\t\t// render an arrow over the axis\r\n\t\tif (segs.length > 0) { // is the current time in view?\r\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-arrow\"></div>')\r\n\t\t\t\t.css('top', top)\r\n\t\t\t\t.appendTo(this.el.find('.fc-content-skeleton'))[0]);\r\n\t\t}\r\n\r\n\t\tthis.nowIndicatorEls = $(nodes);\r\n\t},\r\n\r\n\r\n\tunrenderNowIndicator: function() {\r\n\t\tif (this.nowIndicatorEls) {\r\n\t\t\tthis.nowIndicatorEls.remove();\r\n\t\t\tthis.nowIndicatorEls = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Selection\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\r\n\trenderSelection: function(span) {\r\n\t\tif (this.view.opt('selectHelper')) { // this setting signals that a mock helper event should be rendered\r\n\r\n\t\t\t// normally acceps an eventLocation, span has a start/end, which is good enough\r\n\t\t\tthis.renderEventLocationHelper(span);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.renderHighlight(span);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Unrenders any visual indication of a selection\r\n\tunrenderSelection: function() {\r\n\t\tthis.unrenderHelper();\r\n\t\tthis.unrenderHighlight();\r\n\t},\r\n\r\n\r\n\t/* Highlight\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderHighlight: function(span) {\r\n\t\tthis.renderHighlightSegs(this.spanToSegs(span));\r\n\t},\r\n\r\n\r\n\tunrenderHighlight: function() {\r\n\t\tthis.unrenderHighlightSegs();\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/* Methods for rendering SEGMENTS, pieces of content that live on the view\r\n ( this file is no longer just for events )\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nTimeGrid.mixin({\r\n\r\n\tcolContainerEls: null, // containers for each column\r\n\r\n\t// inner-containers for each column where different types of segs live\r\n\tfgContainerEls: null,\r\n\tbgContainerEls: null,\r\n\thelperContainerEls: null,\r\n\thighlightContainerEls: null,\r\n\tbusinessContainerEls: null,\r\n\r\n\t// arrays of different types of displayed segments\r\n\tfgSegs: null,\r\n\tbgSegs: null,\r\n\thelperSegs: null,\r\n\thighlightSegs: null,\r\n\tbusinessSegs: null,\r\n\r\n\r\n\t// Renders the DOM that the view's content will live in\r\n\trenderContentSkeleton: function() {\r\n\t\tvar cellHtml = '';\r\n\t\tvar i;\r\n\t\tvar skeletonEl;\r\n\r\n\t\tfor (i = 0; i < this.colCnt; i++) {\r\n\t\t\tcellHtml +=\r\n\t\t\t\t'<td>' +\r\n\t\t\t\t\t'<div class=\"fc-content-col\">' +\r\n\t\t\t\t\t\t'<div class=\"fc-event-container fc-helper-container\"></div>' +\r\n\t\t\t\t\t\t'<div class=\"fc-event-container\"></div>' +\r\n\t\t\t\t\t\t'<div class=\"fc-highlight-container\"></div>' +\r\n\t\t\t\t\t\t'<div class=\"fc-bgevent-container\"></div>' +\r\n\t\t\t\t\t\t'<div class=\"fc-business-container\"></div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</td>';\r\n\t\t}\r\n\r\n\t\tskeletonEl = $(\r\n\t\t\t'<div class=\"fc-content-skeleton\">' +\r\n\t\t\t\t'<table>' +\r\n\t\t\t\t\t'<tr>' + cellHtml + '</tr>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t'</div>'\r\n\t\t);\r\n\r\n\t\tthis.colContainerEls = skeletonEl.find('.fc-content-col');\r\n\t\tthis.helperContainerEls = skeletonEl.find('.fc-helper-container');\r\n\t\tthis.fgContainerEls = skeletonEl.find('.fc-event-container:not(.fc-helper-container)');\r\n\t\tthis.bgContainerEls = skeletonEl.find('.fc-bgevent-container');\r\n\t\tthis.highlightContainerEls = skeletonEl.find('.fc-highlight-container');\r\n\t\tthis.businessContainerEls = skeletonEl.find('.fc-business-container');\r\n\r\n\t\tthis.bookendCells(skeletonEl.find('tr')); // TODO: do this on string level\r\n\t\tthis.el.append(skeletonEl);\r\n\t},\r\n\r\n\r\n\t/* Foreground Events\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderFgSegs: function(segs) {\r\n\t\tsegs = this.renderFgSegsIntoContainers(segs, this.fgContainerEls);\r\n\t\tthis.fgSegs = segs;\r\n\t\treturn segs; // needed for Grid::renderEvents\r\n\t},\r\n\r\n\r\n\tunrenderFgSegs: function() {\r\n\t\tthis.unrenderNamedSegs('fgSegs');\r\n\t},\r\n\r\n\r\n\t/* Foreground Helper Events\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderHelperSegs: function(segs, sourceSeg) {\r\n\t\tvar helperEls = [];\r\n\t\tvar i, seg;\r\n\t\tvar sourceEl;\r\n\r\n\t\tsegs = this.renderFgSegsIntoContainers(segs, this.helperContainerEls);\r\n\r\n\t\t// Try to make the segment that is in the same row as sourceSeg look the same\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tif (sourceSeg && sourceSeg.col === seg.col) {\r\n\t\t\t\tsourceEl = sourceSeg.el;\r\n\t\t\t\tseg.el.css({\r\n\t\t\t\t\tleft: sourceEl.css('left'),\r\n\t\t\t\t\tright: sourceEl.css('right'),\r\n\t\t\t\t\t'margin-left': sourceEl.css('margin-left'),\r\n\t\t\t\t\t'margin-right': sourceEl.css('margin-right')\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelperEls.push(seg.el[0]);\r\n\t\t}\r\n\r\n\t\tthis.helperSegs = segs;\r\n\r\n\t\treturn $(helperEls); // must return rendered helpers\r\n\t},\r\n\r\n\r\n\tunrenderHelperSegs: function() {\r\n\t\tthis.unrenderNamedSegs('helperSegs');\r\n\t},\r\n\r\n\r\n\t/* Background Events\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderBgSegs: function(segs) {\r\n\t\tsegs = this.renderFillSegEls('bgEvent', segs); // TODO: old fill system\r\n\t\tthis.updateSegVerticals(segs);\r\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.bgContainerEls);\r\n\t\tthis.bgSegs = segs;\r\n\t\treturn segs; // needed for Grid::renderEvents\r\n\t},\r\n\r\n\r\n\tunrenderBgSegs: function() {\r\n\t\tthis.unrenderNamedSegs('bgSegs');\r\n\t},\r\n\r\n\r\n\t/* Highlight\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderHighlightSegs: function(segs) {\r\n\t\tsegs = this.renderFillSegEls('highlight', segs); // TODO: old fill system\r\n\t\tthis.updateSegVerticals(segs);\r\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.highlightContainerEls);\r\n\t\tthis.highlightSegs = segs;\r\n\t},\r\n\r\n\r\n\tunrenderHighlightSegs: function() {\r\n\t\tthis.unrenderNamedSegs('highlightSegs');\r\n\t},\r\n\r\n\r\n\t/* Business Hours\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderBusinessSegs: function(segs) {\r\n\t\tsegs = this.renderFillSegEls('businessHours', segs); // TODO: old fill system\r\n\t\tthis.updateSegVerticals(segs);\r\n\t\tthis.attachSegsByCol(this.groupSegsByCol(segs), this.businessContainerEls);\r\n\t\tthis.businessSegs = segs;\r\n\t},\r\n\r\n\r\n\tunrenderBusinessSegs: function() {\r\n\t\tthis.unrenderNamedSegs('businessSegs');\r\n\t},\r\n\r\n\r\n\t/* Seg Rendering Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\r\n\tgroupSegsByCol: function(segs) {\r\n\t\tvar segsByCol = [];\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < this.colCnt; i++) {\r\n\t\t\tsegsByCol.push([]);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tsegsByCol[segs[i].col].push(segs[i]);\r\n\t\t}\r\n\r\n\t\treturn segsByCol;\r\n\t},\r\n\r\n\r\n\t// Given segments grouped by column, insert the segments' elements into a parallel array of container\r\n\t// elements, each living within a column.\r\n\tattachSegsByCol: function(segsByCol, containerEls) {\r\n\t\tvar col;\r\n\t\tvar segs;\r\n\t\tvar i;\r\n\r\n\t\tfor (col = 0; col < this.colCnt; col++) { // iterate each column grouping\r\n\t\t\tsegs = segsByCol[col];\r\n\r\n\t\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\t\tcontainerEls.eq(col).append(segs[i].el);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Given the name of a property of `this` object, assumed to be an array of segments,\r\n\t// loops through each segment and removes from DOM. Will null-out the property afterwards.\r\n\tunrenderNamedSegs: function(propName) {\r\n\t\tvar segs = this[propName];\r\n\t\tvar i;\r\n\r\n\t\tif (segs) {\r\n\t\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\t\tsegs[i].el.remove();\r\n\t\t\t}\r\n\t\t\tthis[propName] = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\r\n\t/* Foreground Event Rendering Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Given an array of foreground segments, render a DOM element for each, computes position,\r\n\t// and attaches to the column inner-container elements.\r\n\trenderFgSegsIntoContainers: function(segs, containerEls) {\r\n\t\tvar segsByCol;\r\n\t\tvar col;\r\n\r\n\t\tsegs = this.renderFgSegEls(segs); // will call fgSegHtml\r\n\t\tsegsByCol = this.groupSegsByCol(segs);\r\n\r\n\t\tfor (col = 0; col < this.colCnt; col++) {\r\n\t\t\tthis.updateFgSegCoords(segsByCol[col]);\r\n\t\t}\r\n\r\n\t\tthis.attachSegsByCol(segsByCol, containerEls);\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\r\n\t// Renders the HTML for a single event segment's default rendering\r\n\tfgSegHtml: function(seg, disableResizing) {\r\n\t\tvar view = this.view;\r\n\t\tvar event = seg.event;\r\n\t\tvar isDraggable = view.isEventDraggable(event);\r\n\t\tvar isResizableFromStart = !disableResizing && seg.isStart && view.isEventResizableFromStart(event);\r\n\t\tvar isResizableFromEnd = !disableResizing && seg.isEnd && view.isEventResizableFromEnd(event);\r\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\r\n\t\tvar skinCss = cssToStr(this.getSegSkinCss(seg));\r\n\t\tvar timeText;\r\n\t\tvar fullTimeText; // more verbose time text. for the print stylesheet\r\n\t\tvar startTimeText; // just the start time text\r\n\r\n\t\tclasses.unshift('fc-time-grid-event', 'fc-v-event');\r\n\r\n\t\tif (view.isMultiDayEvent(event)) { // if the event appears to span more than one day...\r\n\t\t\t// Don't display time text on segments that run entirely through a day.\r\n\t\t\t// That would appear as midnight-midnight and would look dumb.\r\n\t\t\t// Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\r\n\t\t\tif (seg.isStart || seg.isEnd) {\r\n\t\t\t\ttimeText = this.getEventTimeText(seg);\r\n\t\t\t\tfullTimeText = this.getEventTimeText(seg, 'LT');\r\n\t\t\t\tstartTimeText = this.getEventTimeText(seg, null, false); // displayEnd=false\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// Display the normal time text for the *event's* times\r\n\t\t\ttimeText = this.getEventTimeText(event);\r\n\t\t\tfullTimeText = this.getEventTimeText(event, 'LT');\r\n\t\t\tstartTimeText = this.getEventTimeText(event, null, false); // displayEnd=false\r\n\t\t}\r\n\r\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\r\n\t\t\t(event.url ?\r\n\t\t\t\t' href=\"' + htmlEscape(event.url) + '\"' :\r\n\t\t\t\t''\r\n\t\t\t\t) +\r\n\t\t\t(skinCss ?\r\n\t\t\t\t' style=\"' + skinCss + '\"' :\r\n\t\t\t\t''\r\n\t\t\t\t) +\r\n\t\t\t'>' +\r\n\t\t\t\t'<div class=\"fc-content\">' +\r\n\t\t\t\t\t(timeText ?\r\n\t\t\t\t\t\t'<div class=\"fc-time\"' +\r\n\t\t\t\t\t\t' data-start=\"' + htmlEscape(startTimeText) + '\"' +\r\n\t\t\t\t\t\t' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\r\n\t\t\t\t\t\t'>' +\r\n\t\t\t\t\t\t\t'<span>' + htmlEscape(timeText) + '</span>' +\r\n\t\t\t\t\t\t'</div>' :\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t\t) +\r\n\t\t\t\t\t(event.title ?\r\n\t\t\t\t\t\t'<div class=\"fc-title\">' +\r\n\t\t\t\t\t\t\thtmlEscape(event.title) +\r\n\t\t\t\t\t\t'</div>' :\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t\t) +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"fc-bg\"/>' +\r\n\t\t\t\t/* TODO: write CSS for this\r\n\t\t\t\t(isResizableFromStart ?\r\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\r\n\t\t\t\t\t''\r\n\t\t\t\t\t) +\r\n\t\t\t\t*/\r\n\t\t\t\t(isResizableFromEnd ?\r\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\r\n\t\t\t\t\t''\r\n\t\t\t\t\t) +\r\n\t\t\t'</a>';\r\n\t},\r\n\r\n\r\n\t/* Seg Position Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Refreshes the CSS top/bottom coordinates for each segment element.\r\n\t// Works when called after initial render, after a window resize/zoom for example.\r\n\tupdateSegVerticals: function(segs) {\r\n\t\tthis.computeSegVerticals(segs);\r\n\t\tthis.assignSegVerticals(segs);\r\n\t},\r\n\r\n\r\n\t// For each segment in an array, computes and assigns its top and bottom properties\r\n\tcomputeSegVerticals: function(segs) {\r\n\t\tvar i, seg;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tseg.top = this.computeDateTop(seg.start, seg.start);\r\n\t\t\tseg.bottom = this.computeDateTop(seg.end, seg.start);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Given segments that already have their top/bottom properties computed, applies those values to\r\n\t// the segments' elements.\r\n\tassignSegVerticals: function(segs) {\r\n\t\tvar i, seg;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tseg.el.css(this.generateSegVerticalCss(seg));\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Generates an object with CSS properties for the top/bottom coordinates of a segment element\r\n\tgenerateSegVerticalCss: function(seg) {\r\n\t\treturn {\r\n\t\t\ttop: seg.top,\r\n\t\t\tbottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t/* Foreground Event Positioning Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Given segments that are assumed to all live in the *same column*,\r\n\t// compute their verical/horizontal coordinates and assign to their elements.\r\n\tupdateFgSegCoords: function(segs) {\r\n\t\tthis.computeSegVerticals(segs); // horizontals relies on this\r\n\t\tthis.computeFgSegHorizontals(segs); // compute horizontal coordinates, z-index's, and reorder the array\r\n\t\tthis.assignSegVerticals(segs);\r\n\t\tthis.assignFgSegHorizontals(segs);\r\n\t},\r\n\r\n\r\n\t// Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\r\n\t// NOTE: Also reorders the given array by date!\r\n\tcomputeFgSegHorizontals: function(segs) {\r\n\t\tvar levels;\r\n\t\tvar level0;\r\n\t\tvar i;\r\n\r\n\t\tthis.sortEventSegs(segs); // order by certain criteria\r\n\t\tlevels = buildSlotSegLevels(segs);\r\n\t\tcomputeForwardSlotSegs(levels);\r\n\r\n\t\tif ((level0 = levels[0])) {\r\n\r\n\t\t\tfor (i = 0; i < level0.length; i++) {\r\n\t\t\t\tcomputeSlotSegPressures(level0[i]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < level0.length; i++) {\r\n\t\t\t\tthis.computeFgSegForwardBack(level0[i], 0, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\r\n\t// from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\r\n\t// seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\r\n\t//\r\n\t// The segment might be part of a \"series\", which means consecutive segments with the same pressure\r\n\t// who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\r\n\t// segments behind this one in the current series, and `seriesBackwardCoord` is the starting\r\n\t// coordinate of the first segment in the series.\r\n\tcomputeFgSegForwardBack: function(seg, seriesBackwardPressure, seriesBackwardCoord) {\r\n\t\tvar forwardSegs = seg.forwardSegs;\r\n\t\tvar i;\r\n\r\n\t\tif (seg.forwardCoord === undefined) { // not already computed\r\n\r\n\t\t\tif (!forwardSegs.length) {\r\n\r\n\t\t\t\t// if there are no forward segments, this segment should butt up against the edge\r\n\t\t\t\tseg.forwardCoord = 1;\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t// sort highest pressure first\r\n\t\t\t\tthis.sortForwardSegs(forwardSegs);\r\n\r\n\t\t\t\t// this segment's forwardCoord will be calculated from the backwardCoord of the\r\n\t\t\t\t// highest-pressure forward segment.\r\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\r\n\t\t\t\tseg.forwardCoord = forwardSegs[0].backwardCoord;\r\n\t\t\t}\r\n\r\n\t\t\t// calculate the backwardCoord from the forwardCoord. consider the series\r\n\t\t\tseg.backwardCoord = seg.forwardCoord -\r\n\t\t\t\t(seg.forwardCoord - seriesBackwardCoord) / // available width for series\r\n\t\t\t\t(seriesBackwardPressure + 1); // # of segments in the series\r\n\r\n\t\t\t// use this segment's coordinates to computed the coordinates of the less-pressurized\r\n\t\t\t// forward segments\r\n\t\t\tfor (i=0; i<forwardSegs.length; i++) {\r\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tsortForwardSegs: function(forwardSegs) {\r\n\t\tforwardSegs.sort(proxy(this, 'compareForwardSegs'));\r\n\t},\r\n\r\n\r\n\t// A cmp function for determining which forward segment to rely on more when computing coordinates.\r\n\tcompareForwardSegs: function(seg1, seg2) {\r\n\t\t// put higher-pressure first\r\n\t\treturn seg2.forwardPressure - seg1.forwardPressure ||\r\n\t\t\t// put segments that are closer to initial edge first (and favor ones with no coords yet)\r\n\t\t\t(seg1.backwardCoord || 0) - (seg2.backwardCoord || 0) ||\r\n\t\t\t// do normal sorting...\r\n\t\t\tthis.compareEventSegs(seg1, seg2);\r\n\t},\r\n\r\n\r\n\t// Given foreground event segments that have already had their position coordinates computed,\r\n\t// assigns position-related CSS values to their elements.\r\n\tassignFgSegHorizontals: function(segs) {\r\n\t\tvar i, seg;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\tseg.el.css(this.generateFgSegHorizontalCss(seg));\r\n\r\n\t\t\t// if the height is short, add a className for alternate styling\r\n\t\t\tif (seg.bottom - seg.top < 30) {\r\n\t\t\t\tseg.el.addClass('fc-short');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Generates an object with CSS properties/values that should be applied to an event segment element.\r\n\t// Contains important positioning-related properties that should be applied to any event element, customized or not.\r\n\tgenerateFgSegHorizontalCss: function(seg) {\r\n\t\tvar shouldOverlap = this.view.opt('slotEventOverlap');\r\n\t\tvar backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\r\n\t\tvar forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\r\n\t\tvar props = this.generateSegVerticalCss(seg); // get top/bottom first\r\n\t\tvar left; // amount of space from left edge, a fraction of the total width\r\n\t\tvar right; // amount of space from right edge, a fraction of the total width\r\n\r\n\t\tif (shouldOverlap) {\r\n\t\t\t// double the width, but don't go beyond the maximum forward coordinate (1.0)\r\n\t\t\tforwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\r\n\t\t}\r\n\r\n\t\tif (this.isRTL) {\r\n\t\t\tleft = 1 - forwardCoord;\r\n\t\t\tright = backwardCoord;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tleft = backwardCoord;\r\n\t\t\tright = 1 - forwardCoord;\r\n\t\t}\r\n\r\n\t\tprops.zIndex = seg.level + 1; // convert from 0-base to 1-based\r\n\t\tprops.left = left * 100 + '%';\r\n\t\tprops.right = right * 100 + '%';\r\n\r\n\t\tif (shouldOverlap && seg.forwardPressure) {\r\n\t\t\t// add padding to the edge so that forward stacked events don't cover the resizer's icon\r\n\t\t\tprops[this.isRTL ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\r\n\t\t}\r\n\r\n\t\treturn props;\r\n\t}\r\n\r\n});\r\n\r\n\r\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\r\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\r\nfunction buildSlotSegLevels(segs) {\r\n\tvar levels = [];\r\n\tvar i, seg;\r\n\tvar j;\r\n\r\n\tfor (i=0; i<segs.length; i++) {\r\n\t\tseg = segs[i];\r\n\r\n\t\t// go through all the levels and stop on the first level where there are no collisions\r\n\t\tfor (j=0; j<levels.length; j++) {\r\n\t\t\tif (!computeSlotSegCollisions(seg, levels[j]).length) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tseg.level = j;\r\n\r\n\t\t(levels[j] || (levels[j] = [])).push(seg);\r\n\t}\r\n\r\n\treturn levels;\r\n}\r\n\r\n\r\n// For every segment, figure out the other segments that are in subsequent\r\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\r\nfunction computeForwardSlotSegs(levels) {\r\n\tvar i, level;\r\n\tvar j, seg;\r\n\tvar k;\r\n\r\n\tfor (i=0; i<levels.length; i++) {\r\n\t\tlevel = levels[i];\r\n\r\n\t\tfor (j=0; j<level.length; j++) {\r\n\t\t\tseg = level[j];\r\n\r\n\t\t\tseg.forwardSegs = [];\r\n\t\t\tfor (k=i+1; k<levels.length; k++) {\r\n\t\t\t\tcomputeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\r\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\r\nfunction computeSlotSegPressures(seg) {\r\n\tvar forwardSegs = seg.forwardSegs;\r\n\tvar forwardPressure = 0;\r\n\tvar i, forwardSeg;\r\n\r\n\tif (seg.forwardPressure === undefined) { // not already computed\r\n\r\n\t\tfor (i=0; i<forwardSegs.length; i++) {\r\n\t\t\tforwardSeg = forwardSegs[i];\r\n\r\n\t\t\t// figure out the child's maximum forward path\r\n\t\t\tcomputeSlotSegPressures(forwardSeg);\r\n\r\n\t\t\t// either use the existing maximum, or use the child's forward pressure\r\n\t\t\t// plus one (for the forwardSeg itself)\r\n\t\t\tforwardPressure = Math.max(\r\n\t\t\t\tforwardPressure,\r\n\t\t\t\t1 + forwardSeg.forwardPressure\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tseg.forwardPressure = forwardPressure;\r\n\t}\r\n}\r\n\r\n\r\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\r\n// Append into an optionally-supplied `results` array and return.\r\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\r\n\tresults = results || [];\r\n\r\n\tfor (var i=0; i<otherSegs.length; i++) {\r\n\t\tif (isSlotSegCollision(seg, otherSegs[i])) {\r\n\t\t\tresults.push(otherSegs[i]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn results;\r\n}\r\n\r\n\r\n// Do these segments occupy the same vertical space?\r\nfunction isSlotSegCollision(seg1, seg2) {\r\n\treturn seg1.bottom > seg2.top && seg1.top < seg2.bottom;\r\n}\r\n\r\n;;\r\n\r\n/* An abstract class from which other views inherit from\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nvar View = FC.View = Class.extend(EmitterMixin, ListenerMixin, {\r\n\r\n\ttype: null, // subclass' view name (string)\r\n\tname: null, // deprecated. use `type` instead\r\n\ttitle: null, // the text that will be displayed in the header's title\r\n\r\n\tcalendar: null, // owner Calendar object\r\n\toptions: null, // hash containing all options. already merged with view-specific-options\r\n\tel: null, // the view's containing element. set by Calendar\r\n\r\n\tdisplaying: null, // a promise representing the state of rendering. null if no render requested\r\n\tisSkeletonRendered: false,\r\n\tisEventsRendered: false,\r\n\r\n\t// range the view is actually displaying (moments)\r\n\tstart: null,\r\n\tend: null, // exclusive\r\n\r\n\t// range the view is formally responsible for (moments)\r\n\t// may be different from start/end. for example, a month view might have 1st-31st, excluding padded dates\r\n\tintervalStart: null,\r\n\tintervalEnd: null, // exclusive\r\n\tintervalDuration: null,\r\n\tintervalUnit: null, // name of largest unit being displayed, like \"month\" or \"week\"\r\n\r\n\tisRTL: false,\r\n\tisSelected: false, // boolean whether a range of time is user-selected or not\r\n\tselectedEvent: null,\r\n\r\n\teventOrderSpecs: null, // criteria for ordering events when they have same date/time\r\n\r\n\t// classNames styled by jqui themes\r\n\twidgetHeaderClass: null,\r\n\twidgetContentClass: null,\r\n\thighlightStateClass: null,\r\n\r\n\t// for date utils, computed from options\r\n\tnextDayThreshold: null,\r\n\tisHiddenDayHash: null,\r\n\r\n\t// now indicator\r\n\tisNowIndicatorRendered: null,\r\n\tinitialNowDate: null, // result first getNow call\r\n\tinitialNowQueriedMs: null, // ms time the getNow was called\r\n\tnowIndicatorTimeoutID: null, // for refresh timing of now indicator\r\n\tnowIndicatorIntervalID: null, // \"\r\n\r\n\r\n\tconstructor: function(calendar, type, options, intervalDuration) {\r\n\r\n\t\tthis.calendar = calendar;\r\n\t\tthis.type = this.name = type; // .name is deprecated\r\n\t\tthis.options = options;\r\n\t\tthis.intervalDuration = intervalDuration || moment.duration(1, 'day');\r\n\r\n\t\tthis.nextDayThreshold = moment.duration(this.opt('nextDayThreshold'));\r\n\t\tthis.initThemingProps();\r\n\t\tthis.initHiddenDays();\r\n\t\tthis.isRTL = this.opt('isRTL');\r\n\r\n\t\tthis.eventOrderSpecs = parseFieldSpecs(this.opt('eventOrder'));\r\n\r\n\t\tthis.initialize();\r\n\t},\r\n\r\n\r\n\t// A good place for subclasses to initialize member variables\r\n\tinitialize: function() {\r\n\t\t// subclasses can implement\r\n\t},\r\n\r\n\r\n\t// Retrieves an option with the given name\r\n\topt: function(name) {\r\n\t\treturn this.options[name];\r\n\t},\r\n\r\n\r\n\t// Triggers handlers that are view-related. Modifies args before passing to calendar.\r\n\ttrigger: function(name, thisObj) { // arguments beyond thisObj are passed along\r\n\t\tvar calendar = this.calendar;\r\n\r\n\t\treturn calendar.trigger.apply(\r\n\t\t\tcalendar,\r\n\t\t\t[name, thisObj || this].concat(\r\n\t\t\t\tArray.prototype.slice.call(arguments, 2), // arguments beyond thisObj\r\n\t\t\t\t[ this ] // always make the last argument a reference to the view. TODO: deprecate\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t/* Dates\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Updates all internal dates to center around the given current unzoned date.\r\n\tsetDate: function(date) {\r\n\t\tthis.setRange(this.computeRange(date));\r\n\t},\r\n\r\n\r\n\t// Updates all internal dates for displaying the given unzoned range.\r\n\tsetRange: function(range) {\r\n\t\t$.extend(this, range); // assigns every property to this object's member variables\r\n\t\tthis.updateTitle();\r\n\t},\r\n\r\n\r\n\t// Given a single current unzoned date, produce information about what range to display.\r\n\t// Subclasses can override. Must return all properties.\r\n\tcomputeRange: function(date) {\r\n\t\tvar intervalUnit = computeIntervalUnit(this.intervalDuration);\r\n\t\tvar intervalStart = date.clone().startOf(intervalUnit);\r\n\t\tvar intervalEnd = intervalStart.clone().add(this.intervalDuration);\r\n\t\tvar start, end;\r\n\r\n\t\t// normalize the range's time-ambiguity\r\n\t\tif (/year|month|week|day/.test(intervalUnit)) { // whole-days?\r\n\t\t\tintervalStart.stripTime();\r\n\t\t\tintervalEnd.stripTime();\r\n\t\t}\r\n\t\telse { // needs to have a time?\r\n\t\t\tif (!intervalStart.hasTime()) {\r\n\t\t\t\tintervalStart = this.calendar.time(0); // give 00:00 time\r\n\t\t\t}\r\n\t\t\tif (!intervalEnd.hasTime()) {\r\n\t\t\t\tintervalEnd = this.calendar.time(0); // give 00:00 time\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tstart = intervalStart.clone();\r\n\t\tstart = this.skipHiddenDays(start);\r\n\t\tend = intervalEnd.clone();\r\n\t\tend = this.skipHiddenDays(end, -1, true); // exclusively move backwards\r\n\r\n\t\treturn {\r\n\t\t\tintervalUnit: intervalUnit,\r\n\t\t\tintervalStart: intervalStart,\r\n\t\t\tintervalEnd: intervalEnd,\r\n\t\t\tstart: start,\r\n\t\t\tend: end\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t// Computes the new date when the user hits the prev button, given the current date\r\n\tcomputePrevDate: function(date) {\r\n\t\treturn this.massageCurrentDate(\r\n\t\t\tdate.clone().startOf(this.intervalUnit).subtract(this.intervalDuration), -1\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Computes the new date when the user hits the next button, given the current date\r\n\tcomputeNextDate: function(date) {\r\n\t\treturn this.massageCurrentDate(\r\n\t\t\tdate.clone().startOf(this.intervalUnit).add(this.intervalDuration)\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Given an arbitrarily calculated current date of the calendar, returns a date that is ensured to be completely\r\n\t// visible. `direction` is optional and indicates which direction the current date was being\r\n\t// incremented or decremented (1 or -1).\r\n\tmassageCurrentDate: function(date, direction) {\r\n\t\tif (this.intervalDuration.as('days') <= 1) { // if the view displays a single day or smaller\r\n\t\t\tif (this.isHiddenDay(date)) {\r\n\t\t\t\tdate = this.skipHiddenDays(date, direction);\r\n\t\t\t\tdate.startOf('day');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn date;\r\n\t},\r\n\r\n\r\n\t/* Title and Date Formatting\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Sets the view's title property to the most updated computed value\r\n\tupdateTitle: function() {\r\n\t\tthis.title = this.computeTitle();\r\n\t},\r\n\r\n\r\n\t// Computes what the title at the top of the calendar should be for this view\r\n\tcomputeTitle: function() {\r\n\t\treturn this.formatRange(\r\n\t\t\t{\r\n\t\t\t\t// in case intervalStart/End has a time, make sure timezone is correct\r\n\t\t\t\tstart: this.calendar.applyTimezone(this.intervalStart),\r\n\t\t\t\tend: this.calendar.applyTimezone(this.intervalEnd)\r\n\t\t\t},\r\n\t\t\tthis.opt('titleFormat') || this.computeTitleFormat(),\r\n\t\t\tthis.opt('titleRangeSeparator')\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Generates the format string that should be used to generate the title for the current date range.\r\n\t// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\r\n\tcomputeTitleFormat: function() {\r\n\t\tif (this.intervalUnit == 'year') {\r\n\t\t\treturn 'YYYY';\r\n\t\t}\r\n\t\telse if (this.intervalUnit == 'month') {\r\n\t\t\treturn this.opt('monthYearFormat'); // like \"September 2014\"\r\n\t\t}\r\n\t\telse if (this.intervalDuration.as('days') > 1) {\r\n\t\t\treturn 'll'; // multi-day range. shorter, like \"Sep 9 - 10 2014\"\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn 'LL'; // one day. longer, like \"September 9 2014\"\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Utility for formatting a range. Accepts a range object, formatting string, and optional separator.\r\n\t// Displays all-day ranges naturally, with an inclusive end. Takes the current isRTL into account.\r\n\t// The timezones of the dates within `range` will be respected.\r\n\tformatRange: function(range, formatStr, separator) {\r\n\t\tvar end = range.end;\r\n\r\n\t\tif (!end.hasTime()) { // all-day?\r\n\t\t\tend = end.clone().subtract(1); // convert to inclusive. last ms of previous day\r\n\t\t}\r\n\r\n\t\treturn formatRange(range.start, end, formatStr, separator, this.opt('isRTL'));\r\n\t},\r\n\r\n\r\n\tgetAllDayHtml: function() {\r\n\t\treturn this.opt('allDayHtml') || htmlEscape(this.opt('allDayText'));\r\n\t},\r\n\r\n\r\n\t/* Navigation\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Generates HTML for an anchor to another view into the calendar.\r\n\t// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\r\n\t// `gotoOptions` can either be a moment input, or an object with the form:\r\n\t// { date, type, forceOff }\r\n\t// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\r\n\t// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\r\n\tbuildGotoAnchorHtml: function(gotoOptions, attrs, innerHtml) {\r\n\t\tvar date, type, forceOff;\r\n\t\tvar finalOptions;\r\n\r\n\t\tif ($.isPlainObject(gotoOptions)) {\r\n\t\t\tdate = gotoOptions.date;\r\n\t\t\ttype = gotoOptions.type;\r\n\t\t\tforceOff = gotoOptions.forceOff;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdate = gotoOptions; // a single moment input\r\n\t\t}\r\n\t\tdate = FC.moment(date); // if a string, parse it\r\n\r\n\t\tfinalOptions = { // for serialization into the link\r\n\t\t\tdate: date.format('YYYY-MM-DD'),\r\n\t\t\ttype: type || 'day'\r\n\t\t};\r\n\r\n\t\tif (typeof attrs === 'string') {\r\n\t\t\tinnerHtml = attrs;\r\n\t\t\tattrs = null;\r\n\t\t}\r\n\r\n\t\tattrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\r\n\t\tinnerHtml = innerHtml || '';\r\n\r\n\t\tif (!forceOff && this.opt('navLinks')) {\r\n\t\t\treturn '<a' + attrs +\r\n\t\t\t\t' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\r\n\t\t\t\tinnerHtml +\r\n\t\t\t\t'</a>';\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn '<span' + attrs + '>' +\r\n\t\t\t\tinnerHtml +\r\n\t\t\t\t'</span>';\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Sets the container element that the view should render inside of.\r\n\t// Does other DOM-related initializations.\r\n\tsetElement: function(el) {\r\n\t\tthis.el = el;\r\n\t\tthis.bindGlobalHandlers();\r\n\t},\r\n\r\n\r\n\t// Removes the view's container element from the DOM, clearing any content beforehand.\r\n\t// Undoes any other DOM-related attachments.\r\n\tremoveElement: function() {\r\n\t\tthis.clear(); // clears all content\r\n\r\n\t\t// clean up the skeleton\r\n\t\tif (this.isSkeletonRendered) {\r\n\t\t\tthis.unrenderSkeleton();\r\n\t\t\tthis.isSkeletonRendered = false;\r\n\t\t}\r\n\r\n\t\tthis.unbindGlobalHandlers();\r\n\r\n\t\tthis.el.remove();\r\n\r\n\t\t// NOTE: don't null-out this.el in case the View was destroyed within an API callback.\r\n\t\t// We don't null-out the View's other jQuery element references upon destroy,\r\n\t\t//  so we shouldn't kill this.el either.\r\n\t},\r\n\r\n\r\n\t// Does everything necessary to display the view centered around the given unzoned date.\r\n\t// Does every type of rendering EXCEPT rendering events.\r\n\t// Is asychronous and returns a promise.\r\n\tdisplay: function(date, explicitScrollState) {\r\n\t\tvar _this = this;\r\n\t\tvar prevScrollState = null;\r\n\r\n\t\tif (explicitScrollState != null && this.displaying) { // don't need prevScrollState if explicitScrollState\r\n\t\t\tprevScrollState = this.queryScroll();\r\n\t\t}\r\n\r\n\t\tthis.calendar.freezeContentHeight();\r\n\r\n\t\treturn syncThen(this.clear(), function() { // clear the content first\r\n\t\t\treturn (\r\n\t\t\t\t_this.displaying =\r\n\t\t\t\t\tsyncThen(_this.displayView(date), function() { // displayView might return a promise\r\n\r\n\t\t\t\t\t\t// caller of display() wants a specific scroll state?\r\n\t\t\t\t\t\tif (explicitScrollState != null) {\r\n\t\t\t\t\t\t\t// we make an assumption that this is NOT the initial render,\r\n\t\t\t\t\t\t\t// and thus don't need forceScroll (is inconveniently asynchronous)\r\n\t\t\t\t\t\t\t_this.setScroll(explicitScrollState);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t_this.forceScroll(_this.computeInitialScroll(prevScrollState));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_this.calendar.unfreezeContentHeight();\r\n\t\t\t\t\t\t_this.triggerRender();\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Does everything necessary to clear the content of the view.\r\n\t// Clears dates and events. Does not clear the skeleton.\r\n\t// Is asychronous and returns a promise.\r\n\tclear: function() {\r\n\t\tvar _this = this;\r\n\t\tvar displaying = this.displaying;\r\n\r\n\t\tif (displaying) { // previously displayed, or in the process of being displayed?\r\n\t\t\treturn syncThen(displaying, function() { // wait for the display to finish\r\n\t\t\t\t_this.displaying = null;\r\n\t\t\t\t_this.clearEvents();\r\n\t\t\t\treturn _this.clearView(); // might return a promise. chain it\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn $.when(); // an immediately-resolved promise\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Displays the view's non-event content, such as date-related content or anything required by events.\r\n\t// Renders the view's non-content skeleton if necessary.\r\n\t// Can be asynchronous and return a promise.\r\n\tdisplayView: function(date) {\r\n\t\tif (!this.isSkeletonRendered) {\r\n\t\t\tthis.renderSkeleton();\r\n\t\t\tthis.isSkeletonRendered = true;\r\n\t\t}\r\n\t\tif (date) {\r\n\t\t\tthis.setDate(date);\r\n\t\t}\r\n\t\tif (this.render) {\r\n\t\t\tthis.render(); // TODO: deprecate\r\n\t\t}\r\n\t\tthis.renderDates();\r\n\t\tthis.updateSize();\r\n\t\tthis.renderBusinessHours(); // might need coordinates, so should go after updateSize()\r\n\t\tthis.startNowIndicator();\r\n\t},\r\n\r\n\r\n\t// Unrenders the view content that was rendered in displayView.\r\n\t// Can be asynchronous and return a promise.\r\n\tclearView: function() {\r\n\t\tthis.unselect();\r\n\t\tthis.stopNowIndicator();\r\n\t\tthis.triggerUnrender();\r\n\t\tthis.unrenderBusinessHours();\r\n\t\tthis.unrenderDates();\r\n\t\tif (this.destroy) {\r\n\t\t\tthis.destroy(); // TODO: deprecate\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Renders the basic structure of the view before any content is rendered\r\n\trenderSkeleton: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Unrenders the basic structure of the view\r\n\tunrenderSkeleton: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Renders the view's date-related content.\r\n\t// Assumes setRange has already been called and the skeleton has already been rendered.\r\n\trenderDates: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Unrenders the view's date-related content\r\n\tunrenderDates: function() {\r\n\t\t// subclasses should override\r\n\t},\r\n\r\n\r\n\t// Signals that the view's content has been rendered\r\n\ttriggerRender: function() {\r\n\t\tthis.trigger('viewRender', this, this, this.el);\r\n\t},\r\n\r\n\r\n\t// Signals that the view's content is about to be unrendered\r\n\ttriggerUnrender: function() {\r\n\t\tthis.trigger('viewDestroy', this, this, this.el);\r\n\t},\r\n\r\n\r\n\t// Binds DOM handlers to elements that reside outside the view container, such as the document\r\n\tbindGlobalHandlers: function() {\r\n\t\tthis.listenTo($(document), 'mousedown', this.handleDocumentMousedown);\r\n\t\tthis.listenTo($(document), 'touchstart', this.processUnselect);\r\n\t},\r\n\r\n\r\n\t// Unbinds DOM handlers from elements that reside outside the view container\r\n\tunbindGlobalHandlers: function() {\r\n\t\tthis.stopListeningTo($(document));\r\n\t},\r\n\r\n\r\n\t// Initializes internal variables related to theming\r\n\tinitThemingProps: function() {\r\n\t\tvar tm = this.opt('theme') ? 'ui' : 'fc';\r\n\r\n\t\tthis.widgetHeaderClass = tm + '-widget-header';\r\n\t\tthis.widgetContentClass = tm + '-widget-content';\r\n\t\tthis.highlightStateClass = tm + '-state-highlight';\r\n\t},\r\n\r\n\r\n\t/* Business Hours\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders business-hours onto the view. Assumes updateSize has already been called.\r\n\trenderBusinessHours: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Unrenders previously-rendered business-hours\r\n\tunrenderBusinessHours: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t/* Now Indicator\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Immediately render the current time indicator and begins re-rendering it at an interval,\r\n\t// which is defined by this.getNowIndicatorUnit().\r\n\t// TODO: somehow do this for the current whole day's background too\r\n\tstartNowIndicator: function() {\r\n\t\tvar _this = this;\r\n\t\tvar unit;\r\n\t\tvar update;\r\n\t\tvar delay; // ms wait value\r\n\r\n\t\tif (this.opt('nowIndicator')) {\r\n\t\t\tunit = this.getNowIndicatorUnit();\r\n\t\t\tif (unit) {\r\n\t\t\t\tupdate = proxy(this, 'updateNowIndicator'); // bind to `this`\r\n\r\n\t\t\t\tthis.initialNowDate = this.calendar.getNow();\r\n\t\t\t\tthis.initialNowQueriedMs = +new Date();\r\n\t\t\t\tthis.renderNowIndicator(this.initialNowDate);\r\n\t\t\t\tthis.isNowIndicatorRendered = true;\r\n\r\n\t\t\t\t// wait until the beginning of the next interval\r\n\t\t\t\tdelay = this.initialNowDate.clone().startOf(unit).add(1, unit) - this.initialNowDate;\r\n\t\t\t\tthis.nowIndicatorTimeoutID = setTimeout(function() {\r\n\t\t\t\t\t_this.nowIndicatorTimeoutID = null;\r\n\t\t\t\t\tupdate();\r\n\t\t\t\t\tdelay = +moment.duration(1, unit);\r\n\t\t\t\t\tdelay = Math.max(100, delay); // prevent too frequent\r\n\t\t\t\t\t_this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\r\n\t\t\t\t}, delay);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// rerenders the now indicator, computing the new current time from the amount of time that has passed\r\n\t// since the initial getNow call.\r\n\tupdateNowIndicator: function() {\r\n\t\tif (this.isNowIndicatorRendered) {\r\n\t\t\tthis.unrenderNowIndicator();\r\n\t\t\tthis.renderNowIndicator(\r\n\t\t\t\tthis.initialNowDate.clone().add(new Date() - this.initialNowQueriedMs) // add ms\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Immediately unrenders the view's current time indicator and stops any re-rendering timers.\r\n\t// Won't cause side effects if indicator isn't rendered.\r\n\tstopNowIndicator: function() {\r\n\t\tif (this.isNowIndicatorRendered) {\r\n\r\n\t\t\tif (this.nowIndicatorTimeoutID) {\r\n\t\t\t\tclearTimeout(this.nowIndicatorTimeoutID);\r\n\t\t\t\tthis.nowIndicatorTimeoutID = null;\r\n\t\t\t}\r\n\t\t\tif (this.nowIndicatorIntervalID) {\r\n\t\t\t\tclearTimeout(this.nowIndicatorIntervalID);\r\n\t\t\t\tthis.nowIndicatorIntervalID = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.unrenderNowIndicator();\r\n\t\t\tthis.isNowIndicatorRendered = false;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Returns a string unit, like 'second' or 'minute' that defined how often the current time indicator\r\n\t// should be refreshed. If something falsy is returned, no time indicator is rendered at all.\r\n\tgetNowIndicatorUnit: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Renders a current time indicator at the given datetime\r\n\trenderNowIndicator: function(date) {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Undoes the rendering actions from renderNowIndicator\r\n\tunrenderNowIndicator: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t/* Dimensions\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Refreshes anything dependant upon sizing of the container element of the grid\r\n\tupdateSize: function(isResize) {\r\n\t\tvar scrollState;\r\n\r\n\t\tif (isResize) {\r\n\t\t\tscrollState = this.queryScroll();\r\n\t\t}\r\n\r\n\t\tthis.updateHeight(isResize);\r\n\t\tthis.updateWidth(isResize);\r\n\t\tthis.updateNowIndicator();\r\n\r\n\t\tif (isResize) {\r\n\t\t\tthis.setScroll(scrollState);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Refreshes the horizontal dimensions of the calendar\r\n\tupdateWidth: function(isResize) {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Refreshes the vertical dimensions of the calendar\r\n\tupdateHeight: function(isResize) {\r\n\t\tvar calendar = this.calendar; // we poll the calendar for height information\r\n\r\n\t\tthis.setHeight(\r\n\t\t\tcalendar.getSuggestedViewHeight(),\r\n\t\t\tcalendar.isHeightAuto()\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Updates the vertical dimensions of the calendar to the specified height.\r\n\t// if `isAuto` is set to true, height becomes merely a suggestion and the view should use its \"natural\" height.\r\n\tsetHeight: function(height, isAuto) {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t/* Scroller\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes the initial pre-configured scroll state prior to allowing the user to change it.\r\n\t// Given the scroll state from the previous rendering. If first time rendering, given null.\r\n\tcomputeInitialScroll: function(previousScrollState) {\r\n\t\treturn 0;\r\n\t},\r\n\r\n\r\n\t// Retrieves the view's current natural scroll state. Can return an arbitrary format.\r\n\tqueryScroll: function() {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Sets the view's scroll state. Will accept the same format computeInitialScroll and queryScroll produce.\r\n\tsetScroll: function(scrollState) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Sets the scroll state, making sure to overcome any predefined scroll value the browser has in mind\r\n\tforceScroll: function(scrollState) {\r\n\t\tvar _this = this;\r\n\r\n\t\tthis.setScroll(scrollState);\r\n\t\tsetTimeout(function() {\r\n\t\t\t_this.setScroll(scrollState);\r\n\t\t}, 0);\r\n\t},\r\n\r\n\r\n\t/* Event Elements / Segments\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Does everything necessary to display the given events onto the current view\r\n\tdisplayEvents: function(events) {\r\n\t\tvar scrollState = this.queryScroll();\r\n\r\n\t\tthis.clearEvents();\r\n\t\tthis.renderEvents(events);\r\n\t\tthis.isEventsRendered = true;\r\n\t\tthis.setScroll(scrollState);\r\n\t\tthis.triggerEventRender();\r\n\t},\r\n\r\n\r\n\t// Does everything necessary to clear the view's currently-rendered events\r\n\tclearEvents: function() {\r\n\t\tvar scrollState;\r\n\r\n\t\tif (this.isEventsRendered) {\r\n\r\n\t\t\t// TODO: optimize: if we know this is part of a displayEvents call, don't queryScroll/setScroll\r\n\t\t\tscrollState = this.queryScroll();\r\n\r\n\t\t\tthis.triggerEventUnrender();\r\n\t\t\tif (this.destroyEvents) {\r\n\t\t\t\tthis.destroyEvents(); // TODO: deprecate\r\n\t\t\t}\r\n\t\t\tthis.unrenderEvents();\r\n\t\t\tthis.setScroll(scrollState);\r\n\t\t\tthis.isEventsRendered = false;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Renders the events onto the view.\r\n\trenderEvents: function(events) {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Removes event elements from the view.\r\n\tunrenderEvents: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Signals that all events have been rendered\r\n\ttriggerEventRender: function() {\r\n\t\tthis.renderedEventSegEach(function(seg) {\r\n\t\t\tthis.trigger('eventAfterRender', seg.event, seg.event, seg.el);\r\n\t\t});\r\n\t\tthis.trigger('eventAfterAllRender');\r\n\t},\r\n\r\n\r\n\t// Signals that all event elements are about to be removed\r\n\ttriggerEventUnrender: function() {\r\n\t\tthis.renderedEventSegEach(function(seg) {\r\n\t\t\tthis.trigger('eventDestroy', seg.event, seg.event, seg.el);\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Given an event and the default element used for rendering, returns the element that should actually be used.\r\n\t// Basically runs events and elements through the eventRender hook.\r\n\tresolveEventEl: function(event, el) {\r\n\t\tvar custom = this.trigger('eventRender', event, event, el);\r\n\r\n\t\tif (custom === false) { // means don't render at all\r\n\t\t\tel = null;\r\n\t\t}\r\n\t\telse if (custom && custom !== true) {\r\n\t\t\tel = $(custom);\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t},\r\n\r\n\r\n\t// Hides all rendered event segments linked to the given event\r\n\tshowEvent: function(event) {\r\n\t\tthis.renderedEventSegEach(function(seg) {\r\n\t\t\tseg.el.css('visibility', '');\r\n\t\t}, event);\r\n\t},\r\n\r\n\r\n\t// Shows all rendered event segments linked to the given event\r\n\thideEvent: function(event) {\r\n\t\tthis.renderedEventSegEach(function(seg) {\r\n\t\t\tseg.el.css('visibility', 'hidden');\r\n\t\t}, event);\r\n\t},\r\n\r\n\r\n\t// Iterates through event segments that have been rendered (have an el). Goes through all by default.\r\n\t// If the optional `event` argument is specified, only iterates through segments linked to that event.\r\n\t// The `this` value of the callback function will be the view.\r\n\trenderedEventSegEach: function(func, event) {\r\n\t\tvar segs = this.getEventSegs();\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tif (!event || segs[i].event._id === event._id) {\r\n\t\t\t\tif (segs[i].el) {\r\n\t\t\t\t\tfunc.call(this, segs[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Retrieves all the rendered segment objects for the view\r\n\tgetEventSegs: function() {\r\n\t\t// subclasses must implement\r\n\t\treturn [];\r\n\t},\r\n\r\n\r\n\t/* Event Drag-n-Drop\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes if the given event is allowed to be dragged by the user\r\n\tisEventDraggable: function(event) {\r\n\t\treturn this.isEventStartEditable(event);\r\n\t},\r\n\r\n\r\n\tisEventStartEditable: function(event) {\r\n\t\treturn firstDefined(\r\n\t\t\tevent.startEditable,\r\n\t\t\t(event.source || {}).startEditable,\r\n\t\t\tthis.opt('eventStartEditable'),\r\n\t\t\tthis.isEventGenerallyEditable(event)\r\n\t\t);\r\n\t},\r\n\r\n\r\n\tisEventGenerallyEditable: function(event) {\r\n\t\treturn firstDefined(\r\n\t\t\tevent.editable,\r\n\t\t\t(event.source || {}).editable,\r\n\t\t\tthis.opt('editable')\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Must be called when an event in the view is dropped onto new location.\r\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\r\n\treportEventDrop: function(event, dropLocation, largeUnit, el, ev) {\r\n\t\tvar calendar = this.calendar;\r\n\t\tvar mutateResult = calendar.mutateEvent(event, dropLocation, largeUnit);\r\n\t\tvar undoFunc = function() {\r\n\t\t\tmutateResult.undo();\r\n\t\t\tcalendar.reportEventChange();\r\n\t\t};\r\n\r\n\t\tthis.triggerEventDrop(event, mutateResult.dateDelta, undoFunc, el, ev);\r\n\t\tcalendar.reportEventChange(); // will rerender events\r\n\t},\r\n\r\n\r\n\t// Triggers event-drop handlers that have subscribed via the API\r\n\ttriggerEventDrop: function(event, dateDelta, undoFunc, el, ev) {\r\n\t\tthis.trigger('eventDrop', el[0], event, dateDelta, undoFunc, ev, {}); // {} = jqui dummy\r\n\t},\r\n\r\n\r\n\t/* External Element Drag-n-Drop\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Must be called when an external element, via jQuery UI, has been dropped onto the calendar.\r\n\t// `meta` is the parsed data that has been embedded into the dragging event.\r\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\r\n\treportExternalDrop: function(meta, dropLocation, el, ev, ui) {\r\n\t\tvar eventProps = meta.eventProps;\r\n\t\tvar eventInput;\r\n\t\tvar event;\r\n\r\n\t\t// Try to build an event object and render it. TODO: decouple the two\r\n\t\tif (eventProps) {\r\n\t\t\teventInput = $.extend({}, eventProps, dropLocation);\r\n\t\t\tevent = this.calendar.renderEvent(eventInput, meta.stick)[0]; // renderEvent returns an array\r\n\t\t}\r\n\r\n\t\tthis.triggerExternalDrop(event, dropLocation, el, ev, ui);\r\n\t},\r\n\r\n\r\n\t// Triggers external-drop handlers that have subscribed via the API\r\n\ttriggerExternalDrop: function(event, dropLocation, el, ev, ui) {\r\n\r\n\t\t// trigger 'drop' regardless of whether element represents an event\r\n\t\tthis.trigger('drop', el[0], dropLocation.start, ev, ui);\r\n\r\n\t\tif (event) {\r\n\t\t\tthis.trigger('eventReceive', null, event); // signal an external event landed\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Drag-n-Drop Rendering (for both events and external elements)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of a event or external-element drag over the given drop zone.\r\n\t// If an external-element, seg will be `null`.\r\n\t// Must return elements used for any mock events.\r\n\trenderDrag: function(dropLocation, seg) {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indication of an event or external-element being dragged.\r\n\tunrenderDrag: function() {\r\n\t\t// subclasses must implement\r\n\t},\r\n\r\n\r\n\t/* Event Resizing\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes if the given event is allowed to be resized from its starting edge\r\n\tisEventResizableFromStart: function(event) {\r\n\t\treturn this.opt('eventResizableFromStart') && this.isEventResizable(event);\r\n\t},\r\n\r\n\r\n\t// Computes if the given event is allowed to be resized from its ending edge\r\n\tisEventResizableFromEnd: function(event) {\r\n\t\treturn this.isEventResizable(event);\r\n\t},\r\n\r\n\r\n\t// Computes if the given event is allowed to be resized by the user at all\r\n\tisEventResizable: function(event) {\r\n\t\tvar source = event.source || {};\r\n\r\n\t\treturn firstDefined(\r\n\t\t\tevent.durationEditable,\r\n\t\t\tsource.durationEditable,\r\n\t\t\tthis.opt('eventDurationEditable'),\r\n\t\t\tevent.editable,\r\n\t\t\tsource.editable,\r\n\t\t\tthis.opt('editable')\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Must be called when an event in the view has been resized to a new length\r\n\treportEventResize: function(event, resizeLocation, largeUnit, el, ev) {\r\n\t\tvar calendar = this.calendar;\r\n\t\tvar mutateResult = calendar.mutateEvent(event, resizeLocation, largeUnit);\r\n\t\tvar undoFunc = function() {\r\n\t\t\tmutateResult.undo();\r\n\t\t\tcalendar.reportEventChange();\r\n\t\t};\r\n\r\n\t\tthis.triggerEventResize(event, mutateResult.durationDelta, undoFunc, el, ev);\r\n\t\tcalendar.reportEventChange(); // will rerender events\r\n\t},\r\n\r\n\r\n\t// Triggers event-resize handlers that have subscribed via the API\r\n\ttriggerEventResize: function(event, durationDelta, undoFunc, el, ev) {\r\n\t\tthis.trigger('eventResize', el[0], event, durationDelta, undoFunc, ev, {}); // {} = jqui dummy\r\n\t},\r\n\r\n\r\n\t/* Selection (time range)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Selects a date span on the view. `start` and `end` are both Moments.\r\n\t// `ev` is the native mouse event that begin the interaction.\r\n\tselect: function(span, ev) {\r\n\t\tthis.unselect(ev);\r\n\t\tthis.renderSelection(span);\r\n\t\tthis.reportSelection(span, ev);\r\n\t},\r\n\r\n\r\n\t// Renders a visual indication of the selection\r\n\trenderSelection: function(span) {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t// Called when a new selection is made. Updates internal state and triggers handlers.\r\n\treportSelection: function(span, ev) {\r\n\t\tthis.isSelected = true;\r\n\t\tthis.triggerSelect(span, ev);\r\n\t},\r\n\r\n\r\n\t// Triggers handlers to 'select'\r\n\ttriggerSelect: function(span, ev) {\r\n\t\tthis.trigger(\r\n\t\t\t'select',\r\n\t\t\tnull,\r\n\t\t\tthis.calendar.applyTimezone(span.start), // convert to calendar's tz for external API\r\n\t\t\tthis.calendar.applyTimezone(span.end), // \"\r\n\t\t\tev\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Undoes a selection. updates in the internal state and triggers handlers.\r\n\t// `ev` is the native mouse event that began the interaction.\r\n\tunselect: function(ev) {\r\n\t\tif (this.isSelected) {\r\n\t\t\tthis.isSelected = false;\r\n\t\t\tif (this.destroySelection) {\r\n\t\t\t\tthis.destroySelection(); // TODO: deprecate\r\n\t\t\t}\r\n\t\t\tthis.unrenderSelection();\r\n\t\t\tthis.trigger('unselect', null, ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indication of selection\r\n\tunrenderSelection: function() {\r\n\t\t// subclasses should implement\r\n\t},\r\n\r\n\r\n\t/* Event Selection\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tselectEvent: function(event) {\r\n\t\tif (!this.selectedEvent || this.selectedEvent !== event) {\r\n\t\t\tthis.unselectEvent();\r\n\t\t\tthis.renderedEventSegEach(function(seg) {\r\n\t\t\t\tseg.el.addClass('fc-selected');\r\n\t\t\t}, event);\r\n\t\t\tthis.selectedEvent = event;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tunselectEvent: function() {\r\n\t\tif (this.selectedEvent) {\r\n\t\t\tthis.renderedEventSegEach(function(seg) {\r\n\t\t\t\tseg.el.removeClass('fc-selected');\r\n\t\t\t}, this.selectedEvent);\r\n\t\t\tthis.selectedEvent = null;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tisEventSelected: function(event) {\r\n\t\t// event references might change on refetchEvents(), while selectedEvent doesn't,\r\n\t\t// so compare IDs\r\n\t\treturn this.selectedEvent && this.selectedEvent._id === event._id;\r\n\t},\r\n\r\n\r\n\t/* Mouse / Touch Unselecting (time range & event unselection)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\t// TODO: move consistently to down/start or up/end?\r\n\t// TODO: don't kill previous selection if touch scrolling\r\n\r\n\r\n\thandleDocumentMousedown: function(ev) {\r\n\t\tif (isPrimaryMouseButton(ev)) {\r\n\t\t\tthis.processUnselect(ev);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tprocessUnselect: function(ev) {\r\n\t\tthis.processRangeUnselect(ev);\r\n\t\tthis.processEventUnselect(ev);\r\n\t},\r\n\r\n\r\n\tprocessRangeUnselect: function(ev) {\r\n\t\tvar ignore;\r\n\r\n\t\t// is there a time-range selection?\r\n\t\tif (this.isSelected && this.opt('unselectAuto')) {\r\n\t\t\t// only unselect if the clicked element is not identical to or inside of an 'unselectCancel' element\r\n\t\t\tignore = this.opt('unselectCancel');\r\n\t\t\tif (!ignore || !$(ev.target).closest(ignore).length) {\r\n\t\t\t\tthis.unselect(ev);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tprocessEventUnselect: function(ev) {\r\n\t\tif (this.selectedEvent) {\r\n\t\t\tif (!$(ev.target).closest('.fc-selected').length) {\r\n\t\t\t\tthis.unselectEvent();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Day Click\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Triggers handlers to 'dayClick'\r\n\t// Span has start/end of the clicked area. Only the start is useful.\r\n\ttriggerDayClick: function(span, dayEl, ev) {\r\n\t\tthis.trigger(\r\n\t\t\t'dayClick',\r\n\t\t\tdayEl,\r\n\t\t\tthis.calendar.applyTimezone(span.start), // convert to calendar's timezone for external API\r\n\t\t\tev\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t/* Date Utils\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Initializes internal variables related to calculating hidden days-of-week\r\n\tinitHiddenDays: function() {\r\n\t\tvar hiddenDays = this.opt('hiddenDays') || []; // array of day-of-week indices that are hidden\r\n\t\tvar isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\r\n\t\tvar dayCnt = 0;\r\n\t\tvar i;\r\n\r\n\t\tif (this.opt('weekends') === false) {\r\n\t\t\thiddenDays.push(0, 6); // 0=sunday, 6=saturday\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < 7; i++) {\r\n\t\t\tif (\r\n\t\t\t\t!(isHiddenDayHash[i] = $.inArray(i, hiddenDays) !== -1)\r\n\t\t\t) {\r\n\t\t\t\tdayCnt++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dayCnt) {\r\n\t\t\tthrow 'invalid hiddenDays'; // all days were hidden? bad.\r\n\t\t}\r\n\r\n\t\tthis.isHiddenDayHash = isHiddenDayHash;\r\n\t},\r\n\r\n\r\n\t// Is the current day hidden?\r\n\t// `day` is a day-of-week index (0-6), or a Moment\r\n\tisHiddenDay: function(day) {\r\n\t\tif (moment.isMoment(day)) {\r\n\t\t\tday = day.day();\r\n\t\t}\r\n\t\treturn this.isHiddenDayHash[day];\r\n\t},\r\n\r\n\r\n\t// Incrementing the current day until it is no longer a hidden day, returning a copy.\r\n\t// If the initial value of `date` is not a hidden day, don't do anything.\r\n\t// Pass `isExclusive` as `true` if you are dealing with an end date.\r\n\t// `inc` defaults to `1` (increment one day forward each time)\r\n\tskipHiddenDays: function(date, inc, isExclusive) {\r\n\t\tvar out = date.clone();\r\n\t\tinc = inc || 1;\r\n\t\twhile (\r\n\t\t\tthis.isHiddenDayHash[(out.day() + (isExclusive ? inc : 0) + 7) % 7]\r\n\t\t) {\r\n\t\t\tout.add(inc, 'days');\r\n\t\t}\r\n\t\treturn out;\r\n\t},\r\n\r\n\r\n\t// Returns the date range of the full days the given range visually appears to occupy.\r\n\t// Returns a new range object.\r\n\tcomputeDayRange: function(range) {\r\n\t\tvar startDay = range.start.clone().stripTime(); // the beginning of the day the range starts\r\n\t\tvar end = range.end;\r\n\t\tvar endDay = null;\r\n\t\tvar endTimeMS;\r\n\r\n\t\tif (end) {\r\n\t\t\tendDay = end.clone().stripTime(); // the beginning of the day the range exclusively ends\r\n\t\t\tendTimeMS = +end.time(); // # of milliseconds into `endDay`\r\n\r\n\t\t\t// If the end time is actually inclusively part of the next day and is equal to or\r\n\t\t\t// beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\r\n\t\t\t// Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\r\n\t\t\tif (endTimeMS && endTimeMS >= this.nextDayThreshold) {\r\n\t\t\t\tendDay.add(1, 'days');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If no end was specified, or if it is within `startDay` but not past nextDayThreshold,\r\n\t\t// assign the default duration of one day.\r\n\t\tif (!end || endDay <= startDay) {\r\n\t\t\tendDay = startDay.clone().add(1, 'days');\r\n\t\t}\r\n\r\n\t\treturn { start: startDay, end: endDay };\r\n\t},\r\n\r\n\r\n\t// Does the given event visually appear to occupy more than one day?\r\n\tisMultiDayEvent: function(event) {\r\n\t\tvar range = this.computeDayRange(event); // event is range-ish\r\n\r\n\t\treturn range.end.diff(range.start, 'days') > 1;\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\n/*\r\nEmbodies a div that has potential scrollbars\r\n*/\r\nvar Scroller = FC.Scroller = Class.extend({\r\n\r\n\tel: null, // the guaranteed outer element\r\n\tscrollEl: null, // the element with the scrollbars\r\n\toverflowX: null,\r\n\toverflowY: null,\r\n\r\n\r\n\tconstructor: function(options) {\r\n\t\toptions = options || {};\r\n\t\tthis.overflowX = options.overflowX || options.overflow || 'auto';\r\n\t\tthis.overflowY = options.overflowY || options.overflow || 'auto';\r\n\t},\r\n\r\n\r\n\trender: function() {\r\n\t\tthis.el = this.renderEl();\r\n\t\tthis.applyOverflow();\r\n\t},\r\n\r\n\r\n\trenderEl: function() {\r\n\t\treturn (this.scrollEl = $('<div class=\"fc-scroller\"></div>'));\r\n\t},\r\n\r\n\r\n\t// sets to natural height, unlocks overflow\r\n\tclear: function() {\r\n\t\tthis.setHeight('auto');\r\n\t\tthis.applyOverflow();\r\n\t},\r\n\r\n\r\n\tdestroy: function() {\r\n\t\tthis.el.remove();\r\n\t},\r\n\r\n\r\n\t// Overflow\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\tapplyOverflow: function() {\r\n\t\tthis.scrollEl.css({\r\n\t\t\t'overflow-x': this.overflowX,\r\n\t\t\t'overflow-y': this.overflowY\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\r\n\t// Useful for preserving scrollbar widths regardless of future resizes.\r\n\t// Can pass in scrollbarWidths for optimization.\r\n\tlockOverflow: function(scrollbarWidths) {\r\n\t\tvar overflowX = this.overflowX;\r\n\t\tvar overflowY = this.overflowY;\r\n\r\n\t\tscrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\r\n\r\n\t\tif (overflowX === 'auto') {\r\n\t\t\toverflowX = (\r\n\t\t\t\t\tscrollbarWidths.top || scrollbarWidths.bottom || // horizontal scrollbars?\r\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\r\n\t\t\t\t\tthis.scrollEl[0].scrollWidth - 1 > this.scrollEl[0].clientWidth\r\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\r\n\t\t\t\t) ? 'scroll' : 'hidden';\r\n\t\t}\r\n\r\n\t\tif (overflowY === 'auto') {\r\n\t\t\toverflowY = (\r\n\t\t\t\t\tscrollbarWidths.left || scrollbarWidths.right || // vertical scrollbars?\r\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\r\n\t\t\t\t\tthis.scrollEl[0].scrollHeight - 1 > this.scrollEl[0].clientHeight\r\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\r\n\t\t\t\t) ? 'scroll' : 'hidden';\r\n\t\t}\r\n\r\n\t\tthis.scrollEl.css({ 'overflow-x': overflowX, 'overflow-y': overflowY });\r\n\t},\r\n\r\n\r\n\t// Getters / Setters\r\n\t// -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n\tsetHeight: function(height) {\r\n\t\tthis.scrollEl.height(height);\r\n\t},\r\n\r\n\r\n\tgetScrollTop: function() {\r\n\t\treturn this.scrollEl.scrollTop();\r\n\t},\r\n\r\n\r\n\tsetScrollTop: function(top) {\r\n\t\tthis.scrollEl.scrollTop(top);\r\n\t},\r\n\r\n\r\n\tgetClientWidth: function() {\r\n\t\treturn this.scrollEl[0].clientWidth;\r\n\t},\r\n\r\n\r\n\tgetClientHeight: function() {\r\n\t\treturn this.scrollEl[0].clientHeight;\r\n\t},\r\n\r\n\r\n\tgetScrollbarWidths: function() {\r\n\t\treturn getScrollbarWidths(this.scrollEl);\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\nvar Calendar = FC.Calendar = Class.extend({\r\n\r\n\tdirDefaults: null, // option defaults related to LTR or RTL\r\n\tlocaleDefaults: null, // option defaults related to current locale\r\n\toverrides: null, // option overrides given to the fullCalendar constructor\r\n\tdynamicOverrides: null, // options set with dynamic setter method. higher precedence than view overrides.\r\n\toptions: null, // all defaults combined with overrides\r\n\tviewSpecCache: null, // cache of view definitions\r\n\tview: null, // current View object\r\n\theader: null,\r\n\tloadingLevel: 0, // number of simultaneous loading tasks\r\n\r\n\r\n\t// a lot of this class' OOP logic is scoped within this constructor function,\r\n\t// but in the future, write individual methods on the prototype.\r\n\tconstructor: Calendar_constructor,\r\n\r\n\r\n\t// Subclasses can override this for initialization logic after the constructor has been called\r\n\tinitialize: function() {\r\n\t},\r\n\r\n\r\n\t// Computes the flattened options hash for the calendar and assigns to `this.options`.\r\n\t// Assumes this.overrides and this.dynamicOverrides have already been initialized.\r\n\tpopulateOptionsHash: function() {\r\n\t\tvar locale, localeDefaults;\r\n\t\tvar isRTL, dirDefaults;\r\n\r\n\t\tlocale = firstDefined( // explicit locale option given?\r\n\t\t\tthis.dynamicOverrides.locale,\r\n\t\t\tthis.overrides.locale\r\n\t\t);\r\n\t\tlocaleDefaults = localeOptionHash[locale];\r\n\t\tif (!localeDefaults) { // explicit locale option not given or invalid?\r\n\t\t\tlocale = Calendar.defaults.locale;\r\n\t\t\tlocaleDefaults = localeOptionHash[locale] || {};\r\n\t\t}\r\n\r\n\t\tisRTL = firstDefined( // based on options computed so far, is direction RTL?\r\n\t\t\tthis.dynamicOverrides.isRTL,\r\n\t\t\tthis.overrides.isRTL,\r\n\t\t\tlocaleDefaults.isRTL,\r\n\t\t\tCalendar.defaults.isRTL\r\n\t\t);\r\n\t\tdirDefaults = isRTL ? Calendar.rtlDefaults : {};\r\n\r\n\t\tthis.dirDefaults = dirDefaults;\r\n\t\tthis.localeDefaults = localeDefaults;\r\n\t\tthis.options = mergeOptions([ // merge defaults and overrides. lowest to highest precedence\r\n\t\t\tCalendar.defaults, // global defaults\r\n\t\t\tdirDefaults,\r\n\t\t\tlocaleDefaults,\r\n\t\t\tthis.overrides,\r\n\t\t\tthis.dynamicOverrides\r\n\t\t]);\r\n\t\tpopulateInstanceComputableOptions(this.options); // fill in gaps with computed options\r\n\t},\r\n\r\n\r\n\t// Gets information about how to create a view. Will use a cache.\r\n\tgetViewSpec: function(viewType) {\r\n\t\tvar cache = this.viewSpecCache;\r\n\r\n\t\treturn cache[viewType] || (cache[viewType] = this.buildViewSpec(viewType));\r\n\t},\r\n\r\n\r\n\t// Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\r\n\t// Preference is given to views that have corresponding buttons.\r\n\tgetUnitViewSpec: function(unit) {\r\n\t\tvar viewTypes;\r\n\t\tvar i;\r\n\t\tvar spec;\r\n\r\n\t\tif ($.inArray(unit, intervalUnits) != -1) {\r\n\r\n\t\t\t// put views that have buttons first. there will be duplicates, but oh well\r\n\t\t\tviewTypes = this.header.getViewsWithButtons();\r\n\t\t\t$.each(FC.views, function(viewType) { // all views\r\n\t\t\t\tviewTypes.push(viewType);\r\n\t\t\t});\r\n\r\n\t\t\tfor (i = 0; i < viewTypes.length; i++) {\r\n\t\t\t\tspec = this.getViewSpec(viewTypes[i]);\r\n\t\t\t\tif (spec) {\r\n\t\t\t\t\tif (spec.singleUnit == unit) {\r\n\t\t\t\t\t\treturn spec;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Builds an object with information on how to create a given view\r\n\tbuildViewSpec: function(requestedViewType) {\r\n\t\tvar viewOverrides = this.overrides.views || {};\r\n\t\tvar specChain = []; // for the view. lowest to highest priority\r\n\t\tvar defaultsChain = []; // for the view. lowest to highest priority\r\n\t\tvar overridesChain = []; // for the view. lowest to highest priority\r\n\t\tvar viewType = requestedViewType;\r\n\t\tvar spec; // for the view\r\n\t\tvar overrides; // for the view\r\n\t\tvar duration;\r\n\t\tvar unit;\r\n\r\n\t\t// iterate from the specific view definition to a more general one until we hit an actual View class\r\n\t\twhile (viewType) {\r\n\t\t\tspec = fcViews[viewType];\r\n\t\t\toverrides = viewOverrides[viewType];\r\n\t\t\tviewType = null; // clear. might repopulate for another iteration\r\n\r\n\t\t\tif (typeof spec === 'function') { // TODO: deprecate\r\n\t\t\t\tspec = { 'class': spec };\r\n\t\t\t}\r\n\r\n\t\t\tif (spec) {\r\n\t\t\t\tspecChain.unshift(spec);\r\n\t\t\t\tdefaultsChain.unshift(spec.defaults || {});\r\n\t\t\t\tduration = duration || spec.duration;\r\n\t\t\t\tviewType = viewType || spec.type;\r\n\t\t\t}\r\n\r\n\t\t\tif (overrides) {\r\n\t\t\t\toverridesChain.unshift(overrides); // view-specific option hashes have options at zero-level\r\n\t\t\t\tduration = duration || overrides.duration;\r\n\t\t\t\tviewType = viewType || overrides.type;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tspec = mergeProps(specChain);\r\n\t\tspec.type = requestedViewType;\r\n\t\tif (!spec['class']) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tduration = moment.duration(duration);\r\n\t\t\tif (duration.valueOf()) { // valid?\r\n\t\t\t\tspec.duration = duration;\r\n\t\t\t\tunit = computeIntervalUnit(duration);\r\n\r\n\t\t\t\t// view is a single-unit duration, like \"week\" or \"day\"\r\n\t\t\t\t// incorporate options for this. lowest priority\r\n\t\t\t\tif (duration.as(unit) === 1) {\r\n\t\t\t\t\tspec.singleUnit = unit;\r\n\t\t\t\t\toverridesChain.unshift(viewOverrides[unit] || {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tspec.defaults = mergeOptions(defaultsChain);\r\n\t\tspec.overrides = mergeOptions(overridesChain);\r\n\r\n\t\tthis.buildViewSpecOptions(spec);\r\n\t\tthis.buildViewSpecButtonText(spec, requestedViewType);\r\n\r\n\t\treturn spec;\r\n\t},\r\n\r\n\r\n\t// Builds and assigns a view spec's options object from its already-assigned defaults and overrides\r\n\tbuildViewSpecOptions: function(spec) {\r\n\t\tspec.options = mergeOptions([ // lowest to highest priority\r\n\t\t\tCalendar.defaults, // global defaults\r\n\t\t\tspec.defaults, // view's defaults (from ViewSubclass.defaults)\r\n\t\t\tthis.dirDefaults,\r\n\t\t\tthis.localeDefaults, // locale and dir take precedence over view's defaults!\r\n\t\t\tthis.overrides, // calendar's overrides (options given to constructor)\r\n\t\t\tspec.overrides, // view's overrides (view-specific options)\r\n\t\t\tthis.dynamicOverrides // dynamically set via setter. highest precedence\r\n\t\t]);\r\n\t\tpopulateInstanceComputableOptions(spec.options);\r\n\t},\r\n\r\n\r\n\t// Computes and assigns a view spec's buttonText-related options\r\n\tbuildViewSpecButtonText: function(spec, requestedViewType) {\r\n\r\n\t\t// given an options object with a possible `buttonText` hash, lookup the buttonText for the\r\n\t\t// requested view, falling back to a generic unit entry like \"week\" or \"day\"\r\n\t\tfunction queryButtonText(options) {\r\n\t\t\tvar buttonText = options.buttonText || {};\r\n\t\t\treturn buttonText[requestedViewType] ||\r\n\t\t\t\t// view can decide to look up a certain key\r\n\t\t\t\t(spec.buttonTextKey ? buttonText[spec.buttonTextKey] : null) ||\r\n\t\t\t\t// a key like \"month\"\r\n\t\t\t\t(spec.singleUnit ? buttonText[spec.singleUnit] : null);\r\n\t\t}\r\n\r\n\t\t// highest to lowest priority\r\n\t\tspec.buttonTextOverride =\r\n\t\t\tqueryButtonText(this.dynamicOverrides) ||\r\n\t\t\tqueryButtonText(this.overrides) || // constructor-specified buttonText lookup hash takes precedence\r\n\t\t\tspec.overrides.buttonText; // `buttonText` for view-specific options is a string\r\n\r\n\t\t// highest to lowest priority. mirrors buildViewSpecOptions\r\n\t\tspec.buttonTextDefault =\r\n\t\t\tqueryButtonText(this.localeDefaults) ||\r\n\t\t\tqueryButtonText(this.dirDefaults) ||\r\n\t\t\tspec.defaults.buttonText || // a single string. from ViewSubclass.defaults\r\n\t\t\tqueryButtonText(Calendar.defaults) ||\r\n\t\t\t(spec.duration ? this.humanizeDuration(spec.duration) : null) || // like \"3 days\"\r\n\t\t\trequestedViewType; // fall back to given view name\r\n\t},\r\n\r\n\r\n\t// Given a view name for a custom view or a standard view, creates a ready-to-go View object\r\n\tinstantiateView: function(viewType) {\r\n\t\tvar spec = this.getViewSpec(viewType);\r\n\r\n\t\treturn new spec['class'](this, viewType, spec.options, spec.duration);\r\n\t},\r\n\r\n\r\n\t// Returns a boolean about whether the view is okay to instantiate at some point\r\n\tisValidViewType: function(viewType) {\r\n\t\treturn Boolean(this.getViewSpec(viewType));\r\n\t},\r\n\r\n\r\n\t// Should be called when any type of async data fetching begins\r\n\tpushLoading: function() {\r\n\t\tif (!(this.loadingLevel++)) {\r\n\t\t\tthis.trigger('loading', null, true, this.view);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Should be called when any type of async data fetching completes\r\n\tpopLoading: function() {\r\n\t\tif (!(--this.loadingLevel)) {\r\n\t\t\tthis.trigger('loading', null, false, this.view);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Given arguments to the select method in the API, returns a span (unzoned start/end and other info)\r\n\tbuildSelectSpan: function(zonedStartInput, zonedEndInput) {\r\n\t\tvar start = this.moment(zonedStartInput).stripZone();\r\n\t\tvar end;\r\n\r\n\t\tif (zonedEndInput) {\r\n\t\t\tend = this.moment(zonedEndInput).stripZone();\r\n\t\t}\r\n\t\telse if (start.hasTime()) {\r\n\t\t\tend = start.clone().add(this.defaultTimedEventDuration);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tend = start.clone().add(this.defaultAllDayEventDuration);\r\n\t\t}\r\n\r\n\t\treturn { start: start, end: end };\r\n\t}\r\n\r\n});\r\n\r\n\r\nCalendar.mixin(EmitterMixin);\r\n\r\n\r\nfunction Calendar_constructor(element, overrides) {\r\n\tvar t = this;\r\n\r\n\r\n\t// Exports\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\tt.render = render;\r\n\tt.destroy = destroy;\r\n\tt.refetchEvents = refetchEvents;\r\n\tt.refetchEventSources = refetchEventSources;\r\n\tt.reportEvents = reportEvents;\r\n\tt.reportEventChange = reportEventChange;\r\n\tt.rerenderEvents = renderEvents; // `renderEvents` serves as a rerender. an API method\r\n\tt.changeView = renderView; // `renderView` will switch to another view\r\n\tt.select = select;\r\n\tt.unselect = unselect;\r\n\tt.prev = prev;\r\n\tt.next = next;\r\n\tt.prevYear = prevYear;\r\n\tt.nextYear = nextYear;\r\n\tt.today = today;\r\n\tt.gotoDate = gotoDate;\r\n\tt.incrementDate = incrementDate;\r\n\tt.zoomTo = zoomTo;\r\n\tt.getDate = getDate;\r\n\tt.getCalendar = getCalendar;\r\n\tt.getView = getView;\r\n\tt.option = option; // getter/setter method\r\n\tt.trigger = trigger;\r\n\r\n\r\n\t// Options\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\tt.dynamicOverrides = {};\r\n\tt.viewSpecCache = {};\r\n\tt.optionHandlers = {}; // for Calendar.options.js\r\n\tt.overrides = $.extend({}, overrides); // make a copy\r\n\r\n\tt.populateOptionsHash(); // sets this.options\r\n\r\n\r\n\r\n\t// Locale-data Internals\r\n\t// -----------------------------------------------------------------------------------\r\n\t// Apply overrides to the current locale's data\r\n\r\n\tvar localeData;\r\n\r\n\t// Called immediately, and when any of the options change.\r\n\t// Happens before any internal objects rebuild or rerender, because this is very core.\r\n\tt.bindOptions([\r\n\t\t'locale', 'monthNames', 'monthNamesShort', 'dayNames', 'dayNamesShort', 'firstDay', 'weekNumberCalculation'\r\n\t], function(locale, monthNames, monthNamesShort, dayNames, dayNamesShort, firstDay, weekNumberCalculation) {\r\n\r\n\t\t// normalize\r\n\t\tif (weekNumberCalculation === 'iso') {\r\n\t\t\tweekNumberCalculation = 'ISO'; // normalize\r\n\t\t}\r\n\r\n\t\tlocaleData = createObject( // make a cheap copy\r\n\t\t\tgetMomentLocaleData(locale) // will fall back to en\r\n\t\t);\r\n\r\n\t\tif (monthNames) {\r\n\t\t\tlocaleData._months = monthNames;\r\n\t\t}\r\n\t\tif (monthNamesShort) {\r\n\t\t\tlocaleData._monthsShort = monthNamesShort;\r\n\t\t}\r\n\t\tif (dayNames) {\r\n\t\t\tlocaleData._weekdays = dayNames;\r\n\t\t}\r\n\t\tif (dayNamesShort) {\r\n\t\t\tlocaleData._weekdaysShort = dayNamesShort;\r\n\t\t}\r\n\r\n\t\tif (firstDay == null && weekNumberCalculation === 'ISO') {\r\n\t\t\tfirstDay = 1;\r\n\t\t}\r\n\t\tif (firstDay != null) {\r\n\t\t\tvar _week = createObject(localeData._week); // _week: { dow: # }\r\n\t\t\t_week.dow = firstDay;\r\n\t\t\tlocaleData._week = _week;\r\n\t\t}\r\n\r\n\t\tif ( // whitelist certain kinds of input\r\n\t\t\tweekNumberCalculation === 'ISO' ||\r\n\t\t\tweekNumberCalculation === 'local' ||\r\n\t\t\ttypeof weekNumberCalculation === 'function'\r\n\t\t) {\r\n\t\t\tlocaleData._fullCalendar_weekCalc = weekNumberCalculation; // moment-ext will know what to do with it\r\n\t\t}\r\n\r\n\t\t// If the internal current date object already exists, move to new locale.\r\n\t\t// We do NOT need to do this technique for event dates, because this happens when converting to \"segments\".\r\n\t\tif (date) {\r\n\t\t\tlocalizeMoment(date); // sets to localeData\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t// Calendar-specific Date Utilities\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\r\n\tt.defaultAllDayEventDuration = moment.duration(t.options.defaultAllDayEventDuration);\r\n\tt.defaultTimedEventDuration = moment.duration(t.options.defaultTimedEventDuration);\r\n\r\n\r\n\t// Builds a moment using the settings of the current calendar: timezone and locale.\r\n\t// Accepts anything the vanilla moment() constructor accepts.\r\n\tt.moment = function() {\r\n\t\tvar mom;\r\n\r\n\t\tif (t.options.timezone === 'local') {\r\n\t\t\tmom = FC.moment.apply(null, arguments);\r\n\r\n\t\t\t// Force the moment to be local, because FC.moment doesn't guarantee it.\r\n\t\t\tif (mom.hasTime()) { // don't give ambiguously-timed moments a local zone\r\n\t\t\t\tmom.local();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (t.options.timezone === 'UTC') {\r\n\t\t\tmom = FC.moment.utc.apply(null, arguments); // process as UTC\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmom = FC.moment.parseZone.apply(null, arguments); // let the input decide the zone\r\n\t\t}\r\n\r\n\t\tlocalizeMoment(mom);\r\n\r\n\t\treturn mom;\r\n\t};\r\n\r\n\r\n\t// Updates the given moment's locale settings to the current calendar locale settings.\r\n\tfunction localizeMoment(mom) {\r\n\t\tmom._locale = localeData;\r\n\t}\r\n\tt.localizeMoment = localizeMoment;\r\n\r\n\r\n\t// Returns a boolean about whether or not the calendar knows how to calculate\r\n\t// the timezone offset of arbitrary dates in the current timezone.\r\n\tt.getIsAmbigTimezone = function() {\r\n\t\treturn t.options.timezone !== 'local' && t.options.timezone !== 'UTC';\r\n\t};\r\n\r\n\r\n\t// Returns a copy of the given date in the current timezone. Has no effect on dates without times.\r\n\tt.applyTimezone = function(date) {\r\n\t\tif (!date.hasTime()) {\r\n\t\t\treturn date.clone();\r\n\t\t}\r\n\r\n\t\tvar zonedDate = t.moment(date.toArray());\r\n\t\tvar timeAdjust = date.time() - zonedDate.time();\r\n\t\tvar adjustedZonedDate;\r\n\r\n\t\t// Safari sometimes has problems with this coersion when near DST. Adjust if necessary. (bug #2396)\r\n\t\tif (timeAdjust) { // is the time result different than expected?\r\n\t\t\tadjustedZonedDate = zonedDate.clone().add(timeAdjust); // add milliseconds\r\n\t\t\tif (date.time() - adjustedZonedDate.time() === 0) { // does it match perfectly now?\r\n\t\t\t\tzonedDate = adjustedZonedDate;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn zonedDate;\r\n\t};\r\n\r\n\r\n\t// Returns a moment for the current date, as defined by the client's computer or from the `now` option.\r\n\t// Will return an moment with an ambiguous timezone.\r\n\tt.getNow = function() {\r\n\t\tvar now = t.options.now;\r\n\t\tif (typeof now === 'function') {\r\n\t\t\tnow = now();\r\n\t\t}\r\n\t\treturn t.moment(now).stripZone();\r\n\t};\r\n\r\n\r\n\t// Get an event's normalized end date. If not present, calculate it from the defaults.\r\n\tt.getEventEnd = function(event) {\r\n\t\tif (event.end) {\r\n\t\t\treturn event.end.clone();\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn t.getDefaultEventEnd(event.allDay, event.start);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// Given an event's allDay status and start date, return what its fallback end date should be.\r\n\t// TODO: rename to computeDefaultEventEnd\r\n\tt.getDefaultEventEnd = function(allDay, zonedStart) {\r\n\t\tvar end = zonedStart.clone();\r\n\r\n\t\tif (allDay) {\r\n\t\t\tend.stripTime().add(t.defaultAllDayEventDuration);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tend.add(t.defaultTimedEventDuration);\r\n\t\t}\r\n\r\n\t\tif (t.getIsAmbigTimezone()) {\r\n\t\t\tend.stripZone(); // we don't know what the tzo should be\r\n\t\t}\r\n\r\n\t\treturn end;\r\n\t};\r\n\r\n\r\n\t// Produces a human-readable string for the given duration.\r\n\t// Side-effect: changes the locale of the given duration.\r\n\tt.humanizeDuration = function(duration) {\r\n\t\treturn duration.locale(t.options.locale).humanize();\r\n\t};\r\n\r\n\r\n\t\r\n\t// Imports\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\r\n\tEventManager.call(t);\r\n\tvar isFetchNeeded = t.isFetchNeeded;\r\n\tvar fetchEvents = t.fetchEvents;\r\n\tvar fetchEventSources = t.fetchEventSources;\r\n\r\n\r\n\r\n\t// Locals\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\r\n\tvar _element = element[0];\r\n\tvar header;\r\n\tvar content;\r\n\tvar tm; // for making theme classes\r\n\tvar currentView; // NOTE: keep this in sync with this.view\r\n\tvar viewsByType = {}; // holds all instantiated view instances, current or not\r\n\tvar suggestedViewHeight;\r\n\tvar windowResizeProxy; // wraps the windowResize function\r\n\tvar ignoreWindowResize = 0;\r\n\tvar events = [];\r\n\tvar date; // unzoned\r\n\t\r\n\t\r\n\t\r\n\t// Main Rendering\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\r\n\t// compute the initial ambig-timezone date\r\n\tif (t.options.defaultDate != null) {\r\n\t\tdate = t.moment(t.options.defaultDate).stripZone();\r\n\t}\r\n\telse {\r\n\t\tdate = t.getNow(); // getNow already returns unzoned\r\n\t}\r\n\t\r\n\t\r\n\tfunction render() {\r\n\t\tif (!content) {\r\n\t\t\tinitialRender();\r\n\t\t}\r\n\t\telse if (elementVisible()) {\r\n\t\t\t// mainly for the public API\r\n\t\t\tcalcSize();\r\n\t\t\trenderView();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction initialRender() {\r\n\t\telement.addClass('fc');\r\n\r\n\t\t// event delegation for nav links\r\n\t\telement.on('click.fc', 'a[data-goto]', function(ev) {\r\n\t\t\tvar anchorEl = $(this);\r\n\t\t\tvar gotoOptions = anchorEl.data('goto'); // will automatically parse JSON\r\n\t\t\tvar date = t.moment(gotoOptions.date);\r\n\t\t\tvar viewType = gotoOptions.type;\r\n\r\n\t\t\t// property like \"navLinkDayClick\". might be a string or a function\r\n\t\t\tvar customAction = currentView.opt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\r\n\r\n\t\t\tif (typeof customAction === 'function') {\r\n\t\t\t\tcustomAction(date, ev);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (typeof customAction === 'string') {\r\n\t\t\t\t\tviewType = customAction;\r\n\t\t\t\t}\r\n\t\t\t\tzoomTo(date, viewType);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// called immediately, and upon option change\r\n\t\tt.bindOption('theme', function(theme) {\r\n\t\t\ttm = theme ? 'ui' : 'fc'; // affects a larger scope\r\n\t\t\telement.toggleClass('ui-widget', theme);\r\n\t\t\telement.toggleClass('fc-unthemed', !theme);\r\n\t\t});\r\n\r\n\t\t// called immediately, and upon option change.\r\n\t\t// HACK: locale often affects isRTL, so we explicitly listen to that too.\r\n\t\tt.bindOptions([ 'isRTL', 'locale' ], function(isRTL) {\r\n\t\t\telement.toggleClass('fc-ltr', !isRTL);\r\n\t\t\telement.toggleClass('fc-rtl', isRTL);\r\n\t\t});\r\n\r\n\t\tcontent = $(\"<div class='fc-view-container'/>\").prependTo(element);\r\n\r\n\t\theader = t.header = new Header(t);\r\n\t\trenderHeader();\r\n\r\n\t\trenderView(t.options.defaultView);\r\n\r\n\t\tif (t.options.handleWindowResize) {\r\n\t\t\twindowResizeProxy = debounce(windowResize, t.options.windowResizeDelay); // prevents rapid calls\r\n\t\t\t$(window).resize(windowResizeProxy);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// can be called repeatedly and Header will rerender\r\n\tfunction renderHeader() {\r\n\t\theader.render();\r\n\t\tif (header.el) {\r\n\t\t\telement.prepend(header.el);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction destroy() {\r\n\r\n\t\tif (currentView) {\r\n\t\t\tcurrentView.removeElement();\r\n\r\n\t\t\t// NOTE: don't null-out currentView/t.view in case API methods are called after destroy.\r\n\t\t\t// It is still the \"current\" view, just not rendered.\r\n\t\t}\r\n\r\n\t\theader.removeElement();\r\n\t\tcontent.remove();\r\n\t\telement.removeClass('fc fc-ltr fc-rtl fc-unthemed ui-widget');\r\n\r\n\t\telement.off('.fc'); // unbind nav link handlers\r\n\r\n\t\tif (windowResizeProxy) {\r\n\t\t\t$(window).unbind('resize', windowResizeProxy);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction elementVisible() {\r\n\t\treturn element.is(':visible');\r\n\t}\r\n\t\r\n\t\r\n\r\n\t// View Rendering\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\r\n\t// Renders a view because of a date change, view-type change, or for the first time.\r\n\t// If not given a viewType, keep the current view but render different dates.\r\n\t// Accepts an optional scroll state to restore to.\r\n\tfunction renderView(viewType, explicitScrollState) {\r\n\t\tignoreWindowResize++;\r\n\r\n\t\t// if viewType is changing, remove the old view's rendering\r\n\t\tif (currentView && viewType && currentView.type !== viewType) {\r\n\t\t\tfreezeContentHeight(); // prevent a scroll jump when view element is removed\r\n\t\t\tclearView();\r\n\t\t}\r\n\r\n\t\t// if viewType changed, or the view was never created, create a fresh view\r\n\t\tif (!currentView && viewType) {\r\n\t\t\tcurrentView = t.view =\r\n\t\t\t\tviewsByType[viewType] ||\r\n\t\t\t\t(viewsByType[viewType] = t.instantiateView(viewType));\r\n\r\n\t\t\tcurrentView.setElement(\r\n\t\t\t\t$(\"<div class='fc-view fc-\" + viewType + \"-view' />\").appendTo(content)\r\n\t\t\t);\r\n\t\t\theader.activateButton(viewType);\r\n\t\t}\r\n\r\n\t\tif (currentView) {\r\n\r\n\t\t\t// in case the view should render a period of time that is completely hidden\r\n\t\t\tdate = currentView.massageCurrentDate(date);\r\n\r\n\t\t\t// render or rerender the view\r\n\t\t\tif (\r\n\t\t\t\t!currentView.displaying ||\r\n\t\t\t\t!( // NOT within interval range signals an implicit date window change\r\n\t\t\t\t\tdate >= currentView.intervalStart &&\r\n\t\t\t\t\tdate < currentView.intervalEnd\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tif (elementVisible()) {\r\n\r\n\t\t\t\t\tcurrentView.display(date, explicitScrollState); // will call freezeContentHeight\r\n\t\t\t\t\tunfreezeContentHeight(); // immediately unfreeze regardless of whether display is async\r\n\r\n\t\t\t\t\t// need to do this after View::render, so dates are calculated\r\n\t\t\t\t\tupdateHeaderTitle();\r\n\t\t\t\t\tupdateTodayButton();\r\n\r\n\t\t\t\t\tgetAndRenderEvents();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tunfreezeContentHeight(); // undo any lone freezeContentHeight calls\r\n\t\tignoreWindowResize--;\r\n\t}\r\n\r\n\r\n\t// Unrenders the current view and reflects this change in the Header.\r\n\t// Unregsiters the `currentView`, but does not remove from viewByType hash.\r\n\tfunction clearView() {\r\n\t\theader.deactivateButton(currentView.type);\r\n\t\tcurrentView.removeElement();\r\n\t\tcurrentView = t.view = null;\r\n\t}\r\n\r\n\r\n\t// Destroys the view, including the view object. Then, re-instantiates it and renders it.\r\n\t// Maintains the same scroll state.\r\n\t// TODO: maintain any other user-manipulated state.\r\n\tfunction reinitView() {\r\n\t\tignoreWindowResize++;\r\n\t\tfreezeContentHeight();\r\n\r\n\t\tvar viewType = currentView.type;\r\n\t\tvar scrollState = currentView.queryScroll();\r\n\t\tclearView();\r\n\t\trenderView(viewType, scrollState);\r\n\r\n\t\tunfreezeContentHeight();\r\n\t\tignoreWindowResize--;\r\n\t}\r\n\r\n\t\r\n\r\n\t// Resizing\r\n\t// -----------------------------------------------------------------------------------\r\n\r\n\r\n\tt.getSuggestedViewHeight = function() {\r\n\t\tif (suggestedViewHeight === undefined) {\r\n\t\t\tcalcSize();\r\n\t\t}\r\n\t\treturn suggestedViewHeight;\r\n\t};\r\n\r\n\r\n\tt.isHeightAuto = function() {\r\n\t\treturn t.options.contentHeight === 'auto' || t.options.height === 'auto';\r\n\t};\r\n\t\r\n\t\r\n\tfunction updateSize(shouldRecalc) {\r\n\t\tif (elementVisible()) {\r\n\r\n\t\t\tif (shouldRecalc) {\r\n\t\t\t\t_calcSize();\r\n\t\t\t}\r\n\r\n\t\t\tignoreWindowResize++;\r\n\t\t\tcurrentView.updateSize(true); // isResize=true. will poll getSuggestedViewHeight() and isHeightAuto()\r\n\t\t\tignoreWindowResize--;\r\n\r\n\t\t\treturn true; // signal success\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction calcSize() {\r\n\t\tif (elementVisible()) {\r\n\t\t\t_calcSize();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction _calcSize() { // assumes elementVisible\r\n\t\tvar contentHeightInput = t.options.contentHeight;\r\n\t\tvar heightInput = t.options.height;\r\n\r\n\t\tif (typeof contentHeightInput === 'number') { // exists and not 'auto'\r\n\t\t\tsuggestedViewHeight = contentHeightInput;\r\n\t\t}\r\n\t\telse if (typeof contentHeightInput === 'function') { // exists and is a function\r\n\t\t\tsuggestedViewHeight = contentHeightInput();\r\n\t\t}\r\n\t\telse if (typeof heightInput === 'number') { // exists and not 'auto'\r\n\t\t\tsuggestedViewHeight = heightInput - queryHeaderHeight();\r\n\t\t}\r\n\t\telse if (typeof heightInput === 'function') { // exists and is a function\r\n\t\t\tsuggestedViewHeight = heightInput() - queryHeaderHeight();\r\n\t\t}\r\n\t\telse if (heightInput === 'parent') { // set to height of parent element\r\n\t\t\tsuggestedViewHeight = element.parent().height() - queryHeaderHeight();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsuggestedViewHeight = Math.round(content.width() / Math.max(t.options.aspectRatio, .5));\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction queryHeaderHeight() {\r\n\t\treturn header.el ? header.el.outerHeight(true) : 0; // includes margin\r\n\t}\r\n\t\r\n\t\r\n\tfunction windowResize(ev) {\r\n\t\tif (\r\n\t\t\t!ignoreWindowResize &&\r\n\t\t\tev.target === window && // so we don't process jqui \"resize\" events that have bubbled up\r\n\t\t\tcurrentView.start // view has already been rendered\r\n\t\t) {\r\n\t\t\tif (updateSize(true)) {\r\n\t\t\t\tcurrentView.trigger('windowResize', _element);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t/* Event Fetching/Rendering\r\n\t-----------------------------------------------------------------------------*/\r\n\t// TODO: going forward, most of this stuff should be directly handled by the view\r\n\r\n\r\n\tfunction refetchEvents() { // can be called as an API method\r\n\t\tfetchAndRenderEvents();\r\n\t}\r\n\r\n\r\n\t// TODO: move this into EventManager?\r\n\tfunction refetchEventSources(matchInputs) {\r\n\t\tfetchEventSources(t.getEventSourcesByMatchArray(matchInputs));\r\n\t}\r\n\r\n\r\n\tfunction renderEvents() { // destroys old events if previously rendered\r\n\t\tif (elementVisible()) {\r\n\t\t\tfreezeContentHeight();\r\n\t\t\tcurrentView.displayEvents(events);\r\n\t\t\tunfreezeContentHeight();\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\tfunction getAndRenderEvents() {\r\n\t\tif (!t.options.lazyFetching || isFetchNeeded(currentView.start, currentView.end)) {\r\n\t\t\tfetchAndRenderEvents();\r\n\t\t}\r\n\t\telse {\r\n\t\t\trenderEvents();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction fetchAndRenderEvents() {\r\n\t\tfetchEvents(currentView.start, currentView.end);\r\n\t\t\t// ... will call reportEvents\r\n\t\t\t// ... which will call renderEvents\r\n\t}\r\n\r\n\t\r\n\t// called when event data arrives\r\n\tfunction reportEvents(_events) {\r\n\t\tevents = _events;\r\n\t\trenderEvents();\r\n\t}\r\n\r\n\r\n\t// called when a single event's data has been changed\r\n\tfunction reportEventChange() {\r\n\t\trenderEvents();\r\n\t}\r\n\r\n\r\n\r\n\t/* Header Updating\r\n\t-----------------------------------------------------------------------------*/\r\n\r\n\r\n\tfunction updateHeaderTitle() {\r\n\t\theader.updateTitle(currentView.title);\r\n\t}\r\n\r\n\r\n\tfunction updateTodayButton() {\r\n\t\tvar now = t.getNow();\r\n\r\n\t\tif (now >= currentView.intervalStart && now < currentView.intervalEnd) {\r\n\t\t\theader.disableButton('today');\r\n\t\t}\r\n\t\telse {\r\n\t\t\theader.enableButton('today');\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\r\n\t/* Selection\r\n\t-----------------------------------------------------------------------------*/\r\n\t\r\n\r\n\t// this public method receives start/end dates in any format, with any timezone\r\n\tfunction select(zonedStartInput, zonedEndInput) {\r\n\t\tcurrentView.select(\r\n\t\t\tt.buildSelectSpan.apply(t, arguments)\r\n\t\t);\r\n\t}\r\n\t\r\n\r\n\tfunction unselect() { // safe to be called before renderView\r\n\t\tif (currentView) {\r\n\t\t\tcurrentView.unselect();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t/* Date\r\n\t-----------------------------------------------------------------------------*/\r\n\t\r\n\t\r\n\tfunction prev() {\r\n\t\tdate = currentView.computePrevDate(date);\r\n\t\trenderView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction next() {\r\n\t\tdate = currentView.computeNextDate(date);\r\n\t\trenderView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction prevYear() {\r\n\t\tdate.add(-1, 'years');\r\n\t\trenderView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction nextYear() {\r\n\t\tdate.add(1, 'years');\r\n\t\trenderView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction today() {\r\n\t\tdate = t.getNow();\r\n\t\trenderView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction gotoDate(zonedDateInput) {\r\n\t\tdate = t.moment(zonedDateInput).stripZone();\r\n\t\trenderView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction incrementDate(delta) {\r\n\t\tdate.add(moment.duration(delta));\r\n\t\trenderView();\r\n\t}\r\n\r\n\r\n\t// Forces navigation to a view for the given date.\r\n\t// `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\r\n\tfunction zoomTo(newDate, viewType) {\r\n\t\tvar spec;\r\n\r\n\t\tviewType = viewType || 'day'; // day is default zoom\r\n\t\tspec = t.getViewSpec(viewType) || t.getUnitViewSpec(viewType);\r\n\r\n\t\tdate = newDate.clone();\r\n\t\trenderView(spec ? spec.type : null);\r\n\t}\r\n\t\r\n\t\r\n\t// for external API\r\n\tfunction getDate() {\r\n\t\treturn t.applyTimezone(date); // infuse the calendar's timezone\r\n\t}\r\n\r\n\r\n\r\n\t/* Height \"Freezing\"\r\n\t-----------------------------------------------------------------------------*/\r\n\t// TODO: move this into the view\r\n\r\n\tt.freezeContentHeight = freezeContentHeight;\r\n\tt.unfreezeContentHeight = unfreezeContentHeight;\r\n\r\n\r\n\tfunction freezeContentHeight() {\r\n\t\tcontent.css({\r\n\t\t\twidth: '100%',\r\n\t\t\theight: content.height(),\r\n\t\t\toverflow: 'hidden'\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction unfreezeContentHeight() {\r\n\t\tcontent.css({\r\n\t\t\twidth: '',\r\n\t\t\theight: '',\r\n\t\t\toverflow: ''\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t/* Misc\r\n\t-----------------------------------------------------------------------------*/\r\n\t\r\n\r\n\tfunction getCalendar() {\r\n\t\treturn t;\r\n\t}\r\n\r\n\t\r\n\tfunction getView() {\r\n\t\treturn currentView;\r\n\t}\r\n\t\r\n\t\r\n\tfunction option(name, value) {\r\n\t\tvar newOptionHash;\r\n\r\n\t\tif (typeof name === 'string') {\r\n\t\t\tif (value === undefined) { // getter\r\n\t\t\t\treturn t.options[name];\r\n\t\t\t}\r\n\t\t\telse { // setter for individual option\r\n\t\t\t\tnewOptionHash = {};\r\n\t\t\t\tnewOptionHash[name] = value;\r\n\t\t\t\tsetOptions(newOptionHash);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof name === 'object') { // compound setter with object input\r\n\t\t\tsetOptions(name);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction setOptions(newOptionHash) {\r\n\t\tvar optionCnt = 0;\r\n\t\tvar optionName;\r\n\r\n\t\tfor (optionName in newOptionHash) {\r\n\t\t\tt.dynamicOverrides[optionName] = newOptionHash[optionName];\r\n\t\t}\r\n\r\n\t\tt.viewSpecCache = {}; // the dynamic override invalidates the options in this cache, so just clear it\r\n\t\tt.populateOptionsHash(); // this.options needs to be recomputed after the dynamic override\r\n\r\n\t\t// trigger handlers after this.options has been updated\r\n\t\tfor (optionName in newOptionHash) {\r\n\t\t\tt.triggerOptionHandlers(optionName); // recall bindOption/bindOptions\r\n\t\t\toptionCnt++;\r\n\t\t}\r\n\r\n\t\t// special-case handling of single option change.\r\n\t\t// if only one option change, `optionName` will be its name.\r\n\t\tif (optionCnt === 1) {\r\n\t\t\tif (optionName === 'height' || optionName === 'contentHeight' || optionName === 'aspectRatio') {\r\n\t\t\t\tupdateSize(true); // true = allow recalculation of height\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (optionName === 'defaultDate') {\r\n\t\t\t\treturn; // can't change date this way. use gotoDate instead\r\n\t\t\t}\r\n\t\t\telse if (optionName === 'businessHours') {\r\n\t\t\t\tif (currentView) {\r\n\t\t\t\t\tcurrentView.unrenderBusinessHours();\r\n\t\t\t\t\tcurrentView.renderBusinessHours();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (optionName === 'timezone') {\r\n\t\t\t\tt.rezoneArrayEventSources();\r\n\t\t\t\trefetchEvents();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// catch-all. rerender the header and rebuild/rerender the current view\r\n\t\trenderHeader();\r\n\t\tviewsByType = {}; // even non-current views will be affected by this option change. do before rerender\r\n\t\treinitView();\r\n\t}\r\n\t\r\n\t\r\n\tfunction trigger(name, thisObj) { // overrides the Emitter's trigger method :(\r\n\t\tvar args = Array.prototype.slice.call(arguments, 2);\r\n\r\n\t\tthisObj = thisObj || _element;\r\n\t\tthis.triggerWith(name, thisObj, args); // Emitter's method\r\n\r\n\t\tif (t.options[name]) {\r\n\t\t\treturn t.options[name].apply(thisObj, args);\r\n\t\t}\r\n\t}\r\n\r\n\tt.initialize();\r\n}\r\n\r\n;;\r\n/*\r\nOptions binding/triggering system.\r\n*/\r\nCalendar.mixin({\r\n\r\n\t// A map of option names to arrays of handler objects. Initialized to {} in Calendar.\r\n\t// Format for a handler object:\r\n\t// {\r\n\t//   func // callback function to be called upon change\r\n\t//   names // option names whose values should be given to func\r\n\t// }\r\n\toptionHandlers: null, \r\n\r\n\t// Calls handlerFunc immediately, and when the given option has changed.\r\n\t// handlerFunc will be given the option value.\r\n\tbindOption: function(optionName, handlerFunc) {\r\n\t\tthis.bindOptions([ optionName ], handlerFunc);\r\n\t},\r\n\r\n\t// Calls handlerFunc immediately, and when any of the given options change.\r\n\t// handlerFunc will be given each option value as ordered function arguments.\r\n\tbindOptions: function(optionNames, handlerFunc) {\r\n\t\tvar handlerObj = { func: handlerFunc, names: optionNames };\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < optionNames.length; i++) {\r\n\t\t\tthis.registerOptionHandlerObj(optionNames[i], handlerObj);\r\n\t\t}\r\n\r\n\t\tthis.triggerOptionHandlerObj(handlerObj);\r\n\t},\r\n\r\n\t// Puts the given handler object into the internal hash\r\n\tregisterOptionHandlerObj: function(optionName, handlerObj) {\r\n\t\t(this.optionHandlers[optionName] || (this.optionHandlers[optionName] = []))\r\n\t\t\t.push(handlerObj);\r\n\t},\r\n\r\n\t// Reports that the given option has changed, and calls all appropriate handlers.\r\n\ttriggerOptionHandlers: function(optionName) {\r\n\t\tvar handlerObjs = this.optionHandlers[optionName] || [];\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < handlerObjs.length; i++) {\r\n\t\t\tthis.triggerOptionHandlerObj(handlerObjs[i]);\r\n\t\t}\r\n\t},\r\n\r\n\t// Calls the callback for a specific handler object, passing in the appropriate arguments.\r\n\ttriggerOptionHandlerObj: function(handlerObj) {\r\n\t\tvar optionNames = handlerObj.names;\r\n\t\tvar optionValues = [];\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < optionNames.length; i++) {\r\n\t\t\toptionValues.push(this.options[optionNames[i]]);\r\n\t\t}\r\n\r\n\t\thandlerObj.func.apply(this, optionValues); // maintain the Calendar's `this` context\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\nCalendar.defaults = {\r\n\r\n\ttitleRangeSeparator: ' \\u2013 ', // en dash\r\n\tmonthYearFormat: 'MMMM YYYY', // required for en. other locales rely on datepicker computable option\r\n\r\n\tdefaultTimedEventDuration: '02:00:00',\r\n\tdefaultAllDayEventDuration: { days: 1 },\r\n\tforceEventDuration: false,\r\n\tnextDayThreshold: '09:00:00', // 9am\r\n\r\n\t// display\r\n\tdefaultView: 'month',\r\n\taspectRatio: 1.35,\r\n\theader: {\r\n\t\tleft: 'title',\r\n\t\tcenter: '',\r\n\t\tright: 'today prev,next'\r\n\t},\r\n\tweekends: true,\r\n\tweekNumbers: false,\r\n\r\n\tweekNumberTitle: 'W',\r\n\tweekNumberCalculation: 'local',\r\n\t\r\n\t//editable: false,\r\n\r\n\t//nowIndicator: false,\r\n\r\n\tscrollTime: '06:00:00',\r\n\t\r\n\t// event ajax\r\n\tlazyFetching: true,\r\n\tstartParam: 'start',\r\n\tendParam: 'end',\r\n\ttimezoneParam: 'timezone',\r\n\r\n\ttimezone: false,\r\n\r\n\t//allDayDefault: undefined,\r\n\r\n\t// locale\r\n\tisRTL: false,\r\n\tbuttonText: {\r\n\t\tprev: \"prev\",\r\n\t\tnext: \"next\",\r\n\t\tprevYear: \"prev year\",\r\n\t\tnextYear: \"next year\",\r\n\t\tyear: 'year', // TODO: locale files need to specify this\r\n\t\ttoday: 'today',\r\n\t\tmonth: 'month',\r\n\t\tweek: 'week',\r\n\t\tday: 'day'\r\n\t},\r\n\r\n\tbuttonIcons: {\r\n\t\tprev: 'left-single-arrow',\r\n\t\tnext: 'right-single-arrow',\r\n\t\tprevYear: 'left-double-arrow',\r\n\t\tnextYear: 'right-double-arrow'\r\n\t},\r\n\r\n\tallDayText: 'all-day',\r\n\t\r\n\t// jquery-ui theming\r\n\ttheme: false,\r\n\tthemeButtonIcons: {\r\n\t\tprev: 'circle-triangle-w',\r\n\t\tnext: 'circle-triangle-e',\r\n\t\tprevYear: 'seek-prev',\r\n\t\tnextYear: 'seek-next'\r\n\t},\r\n\r\n\t//eventResizableFromStart: false,\r\n\tdragOpacity: .75,\r\n\tdragRevertDuration: 500,\r\n\tdragScroll: true,\r\n\t\r\n\t//selectable: false,\r\n\tunselectAuto: true,\r\n\t\r\n\tdropAccept: '*',\r\n\r\n\teventOrder: 'title',\r\n\r\n\teventLimit: false,\r\n\teventLimitText: 'more',\r\n\teventLimitClick: 'popover',\r\n\tdayPopoverFormat: 'LL',\r\n\t\r\n\thandleWindowResize: true,\r\n\twindowResizeDelay: 100, // milliseconds before an updateSize happens\r\n\r\n\tlongPressDelay: 1000\r\n\t\r\n};\r\n\r\n\r\nCalendar.englishDefaults = { // used by locale.js\r\n\tdayPopoverFormat: 'dddd, MMMM D'\r\n};\r\n\r\n\r\nCalendar.rtlDefaults = { // right-to-left defaults\r\n\theader: { // TODO: smarter solution (first/center/last ?)\r\n\t\tleft: 'next,prev today',\r\n\t\tcenter: '',\r\n\t\tright: 'title'\r\n\t},\r\n\tbuttonIcons: {\r\n\t\tprev: 'right-single-arrow',\r\n\t\tnext: 'left-single-arrow',\r\n\t\tprevYear: 'right-double-arrow',\r\n\t\tnextYear: 'left-double-arrow'\r\n\t},\r\n\tthemeButtonIcons: {\r\n\t\tprev: 'circle-triangle-e',\r\n\t\tnext: 'circle-triangle-w',\r\n\t\tnextYear: 'seek-prev',\r\n\t\tprevYear: 'seek-next'\r\n\t}\r\n};\r\n\r\n;;\r\n\r\nvar localeOptionHash = FC.locales = {}; // initialize and expose\r\n\r\n\r\n// TODO: document the structure and ordering of a FullCalendar locale file\r\n\r\n\r\n// Initialize jQuery UI datepicker translations while using some of the translations\r\n// Will set this as the default locales for datepicker.\r\nFC.datepickerLocale = function(localeCode, dpLocaleCode, dpOptions) {\r\n\r\n\t// get the FullCalendar internal option hash for this locale. create if necessary\r\n\tvar fcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\r\n\r\n\t// transfer some simple options from datepicker to fc\r\n\tfcOptions.isRTL = dpOptions.isRTL;\r\n\tfcOptions.weekNumberTitle = dpOptions.weekHeader;\r\n\r\n\t// compute some more complex options from datepicker\r\n\t$.each(dpComputableOptions, function(name, func) {\r\n\t\tfcOptions[name] = func(dpOptions);\r\n\t});\r\n\r\n\t// is jQuery UI Datepicker is on the page?\r\n\tif ($.datepicker) {\r\n\r\n\t\t// Register the locale data.\r\n\t\t// FullCalendar and MomentJS use locale codes like \"pt-br\" but Datepicker\r\n\t\t// does it like \"pt-BR\" or if it doesn't have the locale, maybe just \"pt\".\r\n\t\t// Make an alias so the locale can be referenced either way.\r\n\t\t$.datepicker.regional[dpLocaleCode] =\r\n\t\t\t$.datepicker.regional[localeCode] = // alias\r\n\t\t\t\tdpOptions;\r\n\r\n\t\t// Alias 'en' to the default locale data. Do this every time.\r\n\t\t$.datepicker.regional.en = $.datepicker.regional[''];\r\n\r\n\t\t// Set as Datepicker's global defaults.\r\n\t\t$.datepicker.setDefaults(dpOptions);\r\n\t}\r\n};\r\n\r\n\r\n// Sets FullCalendar-specific translations. Will set the locales as the global default.\r\nFC.locale = function(localeCode, newFcOptions) {\r\n\tvar fcOptions;\r\n\tvar momOptions;\r\n\r\n\t// get the FullCalendar internal option hash for this locale. create if necessary\r\n\tfcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\r\n\r\n\t// provided new options for this locales? merge them in\r\n\tif (newFcOptions) {\r\n\t\tfcOptions = localeOptionHash[localeCode] = mergeOptions([ fcOptions, newFcOptions ]);\r\n\t}\r\n\r\n\t// compute locale options that weren't defined.\r\n\t// always do this. newFcOptions can be undefined when initializing from i18n file,\r\n\t// so no way to tell if this is an initialization or a default-setting.\r\n\tmomOptions = getMomentLocaleData(localeCode); // will fall back to en\r\n\t$.each(momComputableOptions, function(name, func) {\r\n\t\tif (fcOptions[name] == null) {\r\n\t\t\tfcOptions[name] = func(momOptions, fcOptions);\r\n\t\t}\r\n\t});\r\n\r\n\t// set it as the default locale for FullCalendar\r\n\tCalendar.defaults.locale = localeCode;\r\n};\r\n\r\n\r\n// NOTE: can't guarantee any of these computations will run because not every locale has datepicker\r\n// configs, so make sure there are English fallbacks for these in the defaults file.\r\nvar dpComputableOptions = {\r\n\r\n\tbuttonText: function(dpOptions) {\r\n\t\treturn {\r\n\t\t\t// the translations sometimes wrongly contain HTML entities\r\n\t\t\tprev: stripHtmlEntities(dpOptions.prevText),\r\n\t\t\tnext: stripHtmlEntities(dpOptions.nextText),\r\n\t\t\ttoday: stripHtmlEntities(dpOptions.currentText)\r\n\t\t};\r\n\t},\r\n\r\n\t// Produces format strings like \"MMMM YYYY\" -> \"September 2014\"\r\n\tmonthYearFormat: function(dpOptions) {\r\n\t\treturn dpOptions.showMonthAfterYear ?\r\n\t\t\t'YYYY[' + dpOptions.yearSuffix + '] MMMM' :\r\n\t\t\t'MMMM YYYY[' + dpOptions.yearSuffix + ']';\r\n\t}\r\n\r\n};\r\n\r\nvar momComputableOptions = {\r\n\r\n\t// Produces format strings like \"ddd M/D\" -> \"Fri 9/15\"\r\n\tdayOfMonthFormat: function(momOptions, fcOptions) {\r\n\t\tvar format = momOptions.longDateFormat('l'); // for the format like \"M/D/YYYY\"\r\n\r\n\t\t// strip the year off the edge, as well as other misc non-whitespace chars\r\n\t\tformat = format.replace(/^Y+[^\\w\\s]*|[^\\w\\s]*Y+$/g, '');\r\n\r\n\t\tif (fcOptions.isRTL) {\r\n\t\t\tformat += ' ddd'; // for RTL, add day-of-week to end\r\n\t\t}\r\n\t\telse {\r\n\t\t\tformat = 'ddd ' + format; // for LTR, add day-of-week to beginning\r\n\t\t}\r\n\t\treturn format;\r\n\t},\r\n\r\n\t// Produces format strings like \"h:mma\" -> \"6:00pm\"\r\n\tmediumTimeFormat: function(momOptions) { // can't be called `timeFormat` because collides with option\r\n\t\treturn momOptions.longDateFormat('LT')\r\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\r\n\t},\r\n\r\n\t// Produces format strings like \"h(:mm)a\" -> \"6pm\" / \"6:30pm\"\r\n\tsmallTimeFormat: function(momOptions) {\r\n\t\treturn momOptions.longDateFormat('LT')\r\n\t\t\t.replace(':mm', '(:mm)')\r\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\r\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\r\n\t},\r\n\r\n\t// Produces format strings like \"h(:mm)t\" -> \"6p\" / \"6:30p\"\r\n\textraSmallTimeFormat: function(momOptions) {\r\n\t\treturn momOptions.longDateFormat('LT')\r\n\t\t\t.replace(':mm', '(:mm)')\r\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\r\n\t\t\t.replace(/\\s*a$/i, 't'); // convert to AM/PM/am/pm to lowercase one-letter. remove any spaces beforehand\r\n\t},\r\n\r\n\t// Produces format strings like \"ha\" / \"H\" -> \"6pm\" / \"18\"\r\n\thourFormat: function(momOptions) {\r\n\t\treturn momOptions.longDateFormat('LT')\r\n\t\t\t.replace(':mm', '')\r\n\t\t\t.replace(/(\\Wmm)$/, '') // like above, but for foreign locales\r\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\r\n\t},\r\n\r\n\t// Produces format strings like \"h:mm\" -> \"6:30\" (with no AM/PM)\r\n\tnoMeridiemTimeFormat: function(momOptions) {\r\n\t\treturn momOptions.longDateFormat('LT')\r\n\t\t\t.replace(/\\s*a$/i, ''); // remove trailing AM/PM\r\n\t}\r\n\r\n};\r\n\r\n\r\n// options that should be computed off live calendar options (considers override options)\r\n// TODO: best place for this? related to locale?\r\n// TODO: flipping text based on isRTL is a bad idea because the CSS `direction` might want to handle it\r\nvar instanceComputableOptions = {\r\n\r\n\t// Produces format strings for results like \"Mo 16\"\r\n\tsmallDayDateFormat: function(options) {\r\n\t\treturn options.isRTL ?\r\n\t\t\t'D dd' :\r\n\t\t\t'dd D';\r\n\t},\r\n\r\n\t// Produces format strings for results like \"Wk 5\"\r\n\tweekFormat: function(options) {\r\n\t\treturn options.isRTL ?\r\n\t\t\t'w[ ' + options.weekNumberTitle + ']' :\r\n\t\t\t'[' + options.weekNumberTitle + ' ]w';\r\n\t},\r\n\r\n\t// Produces format strings for results like \"Wk5\"\r\n\tsmallWeekFormat: function(options) {\r\n\t\treturn options.isRTL ?\r\n\t\t\t'w[' + options.weekNumberTitle + ']' :\r\n\t\t\t'[' + options.weekNumberTitle + ']w';\r\n\t}\r\n\r\n};\r\n\r\nfunction populateInstanceComputableOptions(options) {\r\n\t$.each(instanceComputableOptions, function(name, func) {\r\n\t\tif (options[name] == null) {\r\n\t\t\toptions[name] = func(options);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\n// Returns moment's internal locale data. If doesn't exist, returns English.\r\nfunction getMomentLocaleData(localeCode) {\r\n\treturn moment.localeData(localeCode) || moment.localeData('en');\r\n}\r\n\r\n\r\n// Initialize English by forcing computation of moment-derived options.\r\n// Also, sets it as the default.\r\nFC.locale('en', Calendar.englishDefaults);\r\n\r\n;;\r\n\r\n/* Top toolbar area with buttons and title\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// TODO: rename all header-related things to \"toolbar\"\r\n\r\nfunction Header(calendar) {\r\n\tvar t = this;\r\n\t\r\n\t// exports\r\n\tt.render = render;\r\n\tt.removeElement = removeElement;\r\n\tt.updateTitle = updateTitle;\r\n\tt.activateButton = activateButton;\r\n\tt.deactivateButton = deactivateButton;\r\n\tt.disableButton = disableButton;\r\n\tt.enableButton = enableButton;\r\n\tt.getViewsWithButtons = getViewsWithButtons;\r\n\tt.el = null; // mirrors local `el`\r\n\t\r\n\t// locals\r\n\tvar el;\r\n\tvar viewsWithButtons = [];\r\n\tvar tm;\r\n\r\n\r\n\t// can be called repeatedly and will rerender\r\n\tfunction render() {\r\n\t\tvar options = calendar.options;\r\n\t\tvar sections = options.header;\r\n\r\n\t\ttm = options.theme ? 'ui' : 'fc';\r\n\r\n\t\tif (sections) {\r\n\t\t\tif (!el) {\r\n\t\t\t\tel = this.el = $(\"<div class='fc-toolbar'/>\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tel.empty();\r\n\t\t\t}\r\n\t\t\tel.append(renderSection('left'))\r\n\t\t\t\t.append(renderSection('right'))\r\n\t\t\t\t.append(renderSection('center'))\r\n\t\t\t\t.append('<div class=\"fc-clear\"/>');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tremoveElement();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction removeElement() {\r\n\t\tif (el) {\r\n\t\t\tel.remove();\r\n\t\t\tel = t.el = null;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction renderSection(position) {\r\n\t\tvar sectionEl = $('<div class=\"fc-' + position + '\"/>');\r\n\t\tvar options = calendar.options;\r\n\t\tvar buttonStr = options.header[position];\r\n\r\n\t\tif (buttonStr) {\r\n\t\t\t$.each(buttonStr.split(' '), function(i) {\r\n\t\t\t\tvar groupChildren = $();\r\n\t\t\t\tvar isOnlyButtons = true;\r\n\t\t\t\tvar groupEl;\r\n\r\n\t\t\t\t$.each(this.split(','), function(j, buttonName) {\r\n\t\t\t\t\tvar customButtonProps;\r\n\t\t\t\t\tvar viewSpec;\r\n\t\t\t\t\tvar buttonClick;\r\n\t\t\t\t\tvar overrideText; // text explicitly set by calendar's constructor options. overcomes icons\r\n\t\t\t\t\tvar defaultText;\r\n\t\t\t\t\tvar themeIcon;\r\n\t\t\t\t\tvar normalIcon;\r\n\t\t\t\t\tvar innerHtml;\r\n\t\t\t\t\tvar classes;\r\n\t\t\t\t\tvar button; // the element\r\n\r\n\t\t\t\t\tif (buttonName == 'title') {\r\n\t\t\t\t\t\tgroupChildren = groupChildren.add($('<h2>&nbsp;</h2>')); // we always want it to take up height\r\n\t\t\t\t\t\tisOnlyButtons = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif ((customButtonProps = (options.customButtons || {})[buttonName])) {\r\n\t\t\t\t\t\t\tbuttonClick = function(ev) {\r\n\t\t\t\t\t\t\t\tif (customButtonProps.click) {\r\n\t\t\t\t\t\t\t\t\tcustomButtonProps.click.call(button[0], ev);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\toverrideText = ''; // icons will override text\r\n\t\t\t\t\t\t\tdefaultText = customButtonProps.text;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if ((viewSpec = calendar.getViewSpec(buttonName))) {\r\n\t\t\t\t\t\t\tbuttonClick = function() {\r\n\t\t\t\t\t\t\t\tcalendar.changeView(buttonName);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tviewsWithButtons.push(buttonName);\r\n\t\t\t\t\t\t\toverrideText = viewSpec.buttonTextOverride;\r\n\t\t\t\t\t\t\tdefaultText = viewSpec.buttonTextDefault;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (calendar[buttonName]) { // a calendar method\r\n\t\t\t\t\t\t\tbuttonClick = function() {\r\n\t\t\t\t\t\t\t\tcalendar[buttonName]();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\toverrideText = (calendar.overrides.buttonText || {})[buttonName];\r\n\t\t\t\t\t\t\tdefaultText = options.buttonText[buttonName]; // everything else is considered default\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (buttonClick) {\r\n\r\n\t\t\t\t\t\t\tthemeIcon =\r\n\t\t\t\t\t\t\t\tcustomButtonProps ?\r\n\t\t\t\t\t\t\t\t\tcustomButtonProps.themeIcon :\r\n\t\t\t\t\t\t\t\t\toptions.themeButtonIcons[buttonName];\r\n\r\n\t\t\t\t\t\t\tnormalIcon =\r\n\t\t\t\t\t\t\t\tcustomButtonProps ?\r\n\t\t\t\t\t\t\t\t\tcustomButtonProps.icon :\r\n\t\t\t\t\t\t\t\t\toptions.buttonIcons[buttonName];\r\n\r\n\t\t\t\t\t\t\tif (overrideText) {\r\n\t\t\t\t\t\t\t\tinnerHtml = htmlEscape(overrideText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (themeIcon && options.theme) {\r\n\t\t\t\t\t\t\t\tinnerHtml = \"<span class='ui-icon ui-icon-\" + themeIcon + \"'></span>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (normalIcon && !options.theme) {\r\n\t\t\t\t\t\t\t\tinnerHtml = \"<span class='fc-icon fc-icon-\" + normalIcon + \"'></span>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tinnerHtml = htmlEscape(defaultText);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tclasses = [\r\n\t\t\t\t\t\t\t\t'fc-' + buttonName + '-button',\r\n\t\t\t\t\t\t\t\ttm + '-button',\r\n\t\t\t\t\t\t\t\ttm + '-state-default'\r\n\t\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\t\tbutton = $( // type=\"button\" so that it doesn't submit a form\r\n\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"' + classes.join(' ') + '\">' +\r\n\t\t\t\t\t\t\t\t\tinnerHtml +\r\n\t\t\t\t\t\t\t\t'</button>'\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.click(function(ev) {\r\n\t\t\t\t\t\t\t\t\t// don't process clicks for disabled buttons\r\n\t\t\t\t\t\t\t\t\tif (!button.hasClass(tm + '-state-disabled')) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tbuttonClick(ev);\r\n\r\n\t\t\t\t\t\t\t\t\t\t// after the click action, if the button becomes the \"active\" tab, or disabled,\r\n\t\t\t\t\t\t\t\t\t\t// it should never have a hover class, so remove it now.\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\tbutton.hasClass(tm + '-state-active') ||\r\n\t\t\t\t\t\t\t\t\t\t\tbutton.hasClass(tm + '-state-disabled')\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tbutton.removeClass(tm + '-state-hover');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.mousedown(function() {\r\n\t\t\t\t\t\t\t\t\t// the *down* effect (mouse pressed in).\r\n\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\r\n\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-active')\r\n\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-disabled')\r\n\t\t\t\t\t\t\t\t\t\t.addClass(tm + '-state-down');\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.mouseup(function() {\r\n\t\t\t\t\t\t\t\t\t// undo the *down* effect\r\n\t\t\t\t\t\t\t\t\tbutton.removeClass(tm + '-state-down');\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.hover(\r\n\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\t// the *hover* effect.\r\n\t\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\r\n\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-active')\r\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + tm + '-state-disabled')\r\n\t\t\t\t\t\t\t\t\t\t\t.addClass(tm + '-state-hover');\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\t// undo the *hover* effect\r\n\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(tm + '-state-hover')\r\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(tm + '-state-down'); // if mouseleave happens before mouseup\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tgroupChildren = groupChildren.add(button);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (isOnlyButtons) {\r\n\t\t\t\t\tgroupChildren\r\n\t\t\t\t\t\t.first().addClass(tm + '-corner-left').end()\r\n\t\t\t\t\t\t.last().addClass(tm + '-corner-right').end();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (groupChildren.length > 1) {\r\n\t\t\t\t\tgroupEl = $('<div/>');\r\n\t\t\t\t\tif (isOnlyButtons) {\r\n\t\t\t\t\t\tgroupEl.addClass('fc-button-group');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgroupEl.append(groupChildren);\r\n\t\t\t\t\tsectionEl.append(groupEl);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsectionEl.append(groupChildren); // 1 or 0 children\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn sectionEl;\r\n\t}\r\n\t\r\n\t\r\n\tfunction updateTitle(text) {\r\n\t\tif (el) {\r\n\t\t\tel.find('h2').text(text);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction activateButton(buttonName) {\r\n\t\tif (el) {\r\n\t\t\tel.find('.fc-' + buttonName + '-button')\r\n\t\t\t\t.addClass(tm + '-state-active');\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction deactivateButton(buttonName) {\r\n\t\tif (el) {\r\n\t\t\tel.find('.fc-' + buttonName + '-button')\r\n\t\t\t\t.removeClass(tm + '-state-active');\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction disableButton(buttonName) {\r\n\t\tif (el) {\r\n\t\t\tel.find('.fc-' + buttonName + '-button')\r\n\t\t\t\t.prop('disabled', true)\r\n\t\t\t\t.addClass(tm + '-state-disabled');\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction enableButton(buttonName) {\r\n\t\tif (el) {\r\n\t\t\tel.find('.fc-' + buttonName + '-button')\r\n\t\t\t\t.prop('disabled', false)\r\n\t\t\t\t.removeClass(tm + '-state-disabled');\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction getViewsWithButtons() {\r\n\t\treturn viewsWithButtons;\r\n\t}\r\n\r\n}\r\n\r\n;;\r\n\r\nFC.sourceNormalizers = [];\r\nFC.sourceFetchers = [];\r\n\r\nvar ajaxDefaults = {\r\n\tdataType: 'json',\r\n\tcache: false\r\n};\r\n\r\nvar eventGUID = 1;\r\n\r\n\r\nfunction EventManager() { // assumed to be a calendar\r\n\tvar t = this;\r\n\t\r\n\t\r\n\t// exports\r\n\tt.isFetchNeeded = isFetchNeeded;\r\n\tt.fetchEvents = fetchEvents;\r\n\tt.fetchEventSources = fetchEventSources;\r\n\tt.getEventSources = getEventSources;\r\n\tt.getEventSourceById = getEventSourceById;\r\n\tt.getEventSourcesByMatchArray = getEventSourcesByMatchArray;\r\n\tt.getEventSourcesByMatch = getEventSourcesByMatch;\r\n\tt.addEventSource = addEventSource;\r\n\tt.removeEventSource = removeEventSource;\r\n\tt.removeEventSources = removeEventSources;\r\n\tt.updateEvent = updateEvent;\r\n\tt.renderEvent = renderEvent;\r\n\tt.removeEvents = removeEvents;\r\n\tt.clientEvents = clientEvents;\r\n\tt.mutateEvent = mutateEvent;\r\n\tt.normalizeEventDates = normalizeEventDates;\r\n\tt.normalizeEventTimes = normalizeEventTimes;\r\n\t\r\n\t\r\n\t// imports\r\n\tvar reportEvents = t.reportEvents;\r\n\t\r\n\t\r\n\t// locals\r\n\tvar stickySource = { events: [] };\r\n\tvar sources = [ stickySource ];\r\n\tvar rangeStart, rangeEnd;\r\n\tvar pendingSourceCnt = 0; // outstanding fetch requests, max one per source\r\n\tvar cache = []; // holds events that have already been expanded\r\n\r\n\r\n\t$.each(\r\n\t\t(t.options.events ? [ t.options.events ] : []).concat(t.options.eventSources || []),\r\n\t\tfunction(i, sourceInput) {\r\n\t\t\tvar source = buildEventSource(sourceInput);\r\n\t\t\tif (source) {\r\n\t\t\t\tsources.push(source);\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\t\r\n\t\r\n\t\r\n\t/* Fetching\r\n\t-----------------------------------------------------------------------------*/\r\n\r\n\r\n\t// start and end are assumed to be unzoned\r\n\tfunction isFetchNeeded(start, end) {\r\n\t\treturn !rangeStart || // nothing has been fetched yet?\r\n\t\t\tstart < rangeStart || end > rangeEnd; // is part of the new range outside of the old range?\r\n\t}\r\n\t\r\n\t\r\n\tfunction fetchEvents(start, end) {\r\n\t\trangeStart = start;\r\n\t\trangeEnd = end;\r\n\t\tfetchEventSources(sources, 'reset');\r\n\t}\r\n\r\n\r\n\t// expects an array of event source objects (the originals, not copies)\r\n\t// `specialFetchType` is an optimization parameter that affects purging of the event cache.\r\n\tfunction fetchEventSources(specificSources, specialFetchType) {\r\n\t\tvar i, source;\r\n\r\n\t\tif (specialFetchType === 'reset') {\r\n\t\t\tcache = [];\r\n\t\t}\r\n\t\telse if (specialFetchType !== 'add') {\r\n\t\t\tcache = excludeEventsBySources(cache, specificSources);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < specificSources.length; i++) {\r\n\t\t\tsource = specificSources[i];\r\n\r\n\t\t\t// already-pending sources have already been accounted for in pendingSourceCnt\r\n\t\t\tif (source._status !== 'pending') {\r\n\t\t\t\tpendingSourceCnt++;\r\n\t\t\t}\r\n\r\n\t\t\tsource._fetchId = (source._fetchId || 0) + 1;\r\n\t\t\tsource._status = 'pending';\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < specificSources.length; i++) {\r\n\t\t\tsource = specificSources[i];\r\n\r\n\t\t\ttryFetchEventSource(source, source._fetchId);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// fetches an event source and processes its result ONLY if it is still the current fetch.\r\n\t// caller is responsible for incrementing pendingSourceCnt first.\r\n\tfunction tryFetchEventSource(source, fetchId) {\r\n\t\t_fetchEventSource(source, function(eventInputs) {\r\n\t\t\tvar isArraySource = $.isArray(source.events);\r\n\t\t\tvar i, eventInput;\r\n\t\t\tvar abstractEvent;\r\n\r\n\t\t\tif (\r\n\t\t\t\t// is this the source's most recent fetch?\r\n\t\t\t\t// if not, rely on an upcoming fetch of this source to decrement pendingSourceCnt\r\n\t\t\t\tfetchId === source._fetchId &&\r\n\t\t\t\t// event source no longer valid?\r\n\t\t\t\tsource._status !== 'rejected'\r\n\t\t\t) {\r\n\t\t\t\tsource._status = 'resolved';\r\n\r\n\t\t\t\tif (eventInputs) {\r\n\t\t\t\t\tfor (i = 0; i < eventInputs.length; i++) {\r\n\t\t\t\t\t\teventInput = eventInputs[i];\r\n\r\n\t\t\t\t\t\tif (isArraySource) { // array sources have already been convert to Event Objects\r\n\t\t\t\t\t\t\tabstractEvent = eventInput;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tabstractEvent = buildEventFromInput(eventInput, source);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (abstractEvent) { // not false (an invalid event)\r\n\t\t\t\t\t\t\tcache.push.apply(\r\n\t\t\t\t\t\t\t\tcache,\r\n\t\t\t\t\t\t\t\texpandEvent(abstractEvent) // add individual expanded events to the cache\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdecrementPendingSourceCnt();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction rejectEventSource(source) {\r\n\t\tvar wasPending = source._status === 'pending';\r\n\r\n\t\tsource._status = 'rejected';\r\n\r\n\t\tif (wasPending) {\r\n\t\t\tdecrementPendingSourceCnt();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction decrementPendingSourceCnt() {\r\n\t\tpendingSourceCnt--;\r\n\t\tif (!pendingSourceCnt) {\r\n\t\t\treportEvents(cache);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tfunction _fetchEventSource(source, callback) {\r\n\t\tvar i;\r\n\t\tvar fetchers = FC.sourceFetchers;\r\n\t\tvar res;\r\n\r\n\t\tfor (i=0; i<fetchers.length; i++) {\r\n\t\t\tres = fetchers[i].call(\r\n\t\t\t\tt, // this, the Calendar object\r\n\t\t\t\tsource,\r\n\t\t\t\trangeStart.clone(),\r\n\t\t\t\trangeEnd.clone(),\r\n\t\t\t\tt.options.timezone,\r\n\t\t\t\tcallback\r\n\t\t\t);\r\n\r\n\t\t\tif (res === true) {\r\n\t\t\t\t// the fetcher is in charge. made its own async request\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (typeof res == 'object') {\r\n\t\t\t\t// the fetcher returned a new source. process it\r\n\t\t\t\t_fetchEventSource(res, callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar events = source.events;\r\n\t\tif (events) {\r\n\t\t\tif ($.isFunction(events)) {\r\n\t\t\t\tt.pushLoading();\r\n\t\t\t\tevents.call(\r\n\t\t\t\t\tt, // this, the Calendar object\r\n\t\t\t\t\trangeStart.clone(),\r\n\t\t\t\t\trangeEnd.clone(),\r\n\t\t\t\t\tt.options.timezone,\r\n\t\t\t\t\tfunction(events) {\r\n\t\t\t\t\t\tcallback(events);\r\n\t\t\t\t\t\tt.popLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse if ($.isArray(events)) {\r\n\t\t\t\tcallback(events);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tvar url = source.url;\r\n\t\t\tif (url) {\r\n\t\t\t\tvar success = source.success;\r\n\t\t\t\tvar error = source.error;\r\n\t\t\t\tvar complete = source.complete;\r\n\r\n\t\t\t\t// retrieve any outbound GET/POST $.ajax data from the options\r\n\t\t\t\tvar customData;\r\n\t\t\t\tif ($.isFunction(source.data)) {\r\n\t\t\t\t\t// supplied as a function that returns a key/value object\r\n\t\t\t\t\tcustomData = source.data();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// supplied as a straight key/value object\r\n\t\t\t\t\tcustomData = source.data;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// use a copy of the custom data so we can modify the parameters\r\n\t\t\t\t// and not affect the passed-in object.\r\n\t\t\t\tvar data = $.extend({}, customData || {});\r\n\r\n\t\t\t\tvar startParam = firstDefined(source.startParam, t.options.startParam);\r\n\t\t\t\tvar endParam = firstDefined(source.endParam, t.options.endParam);\r\n\t\t\t\tvar timezoneParam = firstDefined(source.timezoneParam, t.options.timezoneParam);\r\n\r\n\t\t\t\tif (startParam) {\r\n\t\t\t\t\tdata[startParam] = rangeStart.format();\r\n\t\t\t\t}\r\n\t\t\t\tif (endParam) {\r\n\t\t\t\t\tdata[endParam] = rangeEnd.format();\r\n\t\t\t\t}\r\n\t\t\t\tif (t.options.timezone && t.options.timezone != 'local') {\r\n\t\t\t\t\tdata[timezoneParam] = t.options.timezone;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.pushLoading();\r\n\t\t\t\t$.ajax($.extend({}, ajaxDefaults, source, {\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: function(events) {\r\n\t\t\t\t\t\tevents = events || [];\r\n\t\t\t\t\t\tvar res = applyAll(success, this, arguments);\r\n\t\t\t\t\t\tif ($.isArray(res)) {\r\n\t\t\t\t\t\t\tevents = res;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcallback(events);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\tapplyAll(error, this, arguments);\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\tapplyAll(complete, this, arguments);\r\n\t\t\t\t\t\tt.popLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t}else{\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t/* Sources\r\n\t-----------------------------------------------------------------------------*/\r\n\r\n\r\n\tfunction addEventSource(sourceInput) {\r\n\t\tvar source = buildEventSource(sourceInput);\r\n\t\tif (source) {\r\n\t\t\tsources.push(source);\r\n\t\t\tfetchEventSources([ source ], 'add'); // will eventually call reportEvents\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction buildEventSource(sourceInput) { // will return undefined if invalid source\r\n\t\tvar normalizers = FC.sourceNormalizers;\r\n\t\tvar source;\r\n\t\tvar i;\r\n\r\n\t\tif ($.isFunction(sourceInput) || $.isArray(sourceInput)) {\r\n\t\t\tsource = { events: sourceInput };\r\n\t\t}\r\n\t\telse if (typeof sourceInput === 'string') {\r\n\t\t\tsource = { url: sourceInput };\r\n\t\t}\r\n\t\telse if (typeof sourceInput === 'object') {\r\n\t\t\tsource = $.extend({}, sourceInput); // shallow copy\r\n\t\t}\r\n\r\n\t\tif (source) {\r\n\r\n\t\t\t// TODO: repeat code, same code for event classNames\r\n\t\t\tif (source.className) {\r\n\t\t\t\tif (typeof source.className === 'string') {\r\n\t\t\t\t\tsource.className = source.className.split(/\\s+/);\r\n\t\t\t\t}\r\n\t\t\t\t// otherwise, assumed to be an array\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsource.className = [];\r\n\t\t\t}\r\n\r\n\t\t\t// for array sources, we convert to standard Event Objects up front\r\n\t\t\tif ($.isArray(source.events)) {\r\n\t\t\t\tsource.origArray = source.events; // for removeEventSource\r\n\t\t\t\tsource.events = $.map(source.events, function(eventInput) {\r\n\t\t\t\t\treturn buildEventFromInput(eventInput, source);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfor (i=0; i<normalizers.length; i++) {\r\n\t\t\t\tnormalizers[i].call(t, source);\r\n\t\t\t}\r\n\r\n\t\t\treturn source;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction removeEventSource(matchInput) {\r\n\t\tremoveSpecificEventSources(\r\n\t\t\tgetEventSourcesByMatch(matchInput)\r\n\t\t);\r\n\t}\r\n\r\n\r\n\t// if called with no arguments, removes all.\r\n\tfunction removeEventSources(matchInputs) {\r\n\t\tif (matchInputs == null) {\r\n\t\t\tremoveSpecificEventSources(sources, true); // isAll=true\r\n\t\t}\r\n\t\telse {\r\n\t\t\tremoveSpecificEventSources(\r\n\t\t\t\tgetEventSourcesByMatchArray(matchInputs)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction removeSpecificEventSources(targetSources, isAll) {\r\n\t\tvar i;\r\n\r\n\t\t// cancel pending requests\r\n\t\tfor (i = 0; i < targetSources.length; i++) {\r\n\t\t\trejectEventSource(targetSources[i]);\r\n\t\t}\r\n\r\n\t\tif (isAll) { // an optimization\r\n\t\t\tsources = [];\r\n\t\t\tcache = [];\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// remove from persisted source list\r\n\t\t\tsources = $.grep(sources, function(source) {\r\n\t\t\t\tfor (i = 0; i < targetSources.length; i++) {\r\n\t\t\t\t\tif (source === targetSources[i]) {\r\n\t\t\t\t\t\treturn false; // exclude\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true; // include\r\n\t\t\t});\r\n\r\n\t\t\tcache = excludeEventsBySources(cache, targetSources);\r\n\t\t}\r\n\r\n\t\treportEvents(cache);\r\n\t}\r\n\r\n\r\n\tfunction getEventSources() {\r\n\t\treturn sources.slice(1); // returns a shallow copy of sources with stickySource removed\r\n\t}\r\n\r\n\r\n\tfunction getEventSourceById(id) {\r\n\t\treturn $.grep(sources, function(source) {\r\n\t\t\treturn source.id && source.id === id;\r\n\t\t})[0];\r\n\t}\r\n\r\n\r\n\t// like getEventSourcesByMatch, but accepts multple match criteria (like multiple IDs)\r\n\tfunction getEventSourcesByMatchArray(matchInputs) {\r\n\r\n\t\t// coerce into an array\r\n\t\tif (!matchInputs) {\r\n\t\t\tmatchInputs = [];\r\n\t\t}\r\n\t\telse if (!$.isArray(matchInputs)) {\r\n\t\t\tmatchInputs = [ matchInputs ];\r\n\t\t}\r\n\r\n\t\tvar matchingSources = [];\r\n\t\tvar i;\r\n\r\n\t\t// resolve raw inputs to real event source objects\r\n\t\tfor (i = 0; i < matchInputs.length; i++) {\r\n\t\t\tmatchingSources.push.apply( // append\r\n\t\t\t\tmatchingSources,\r\n\t\t\t\tgetEventSourcesByMatch(matchInputs[i])\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn matchingSources;\r\n\t}\r\n\r\n\r\n\t// matchInput can either by a real event source object, an ID, or the function/URL for the source.\r\n\t// returns an array of matching source objects.\r\n\tfunction getEventSourcesByMatch(matchInput) {\r\n\t\tvar i, source;\r\n\r\n\t\t// given an proper event source object\r\n\t\tfor (i = 0; i < sources.length; i++) {\r\n\t\t\tsource = sources[i];\r\n\t\t\tif (source === matchInput) {\r\n\t\t\t\treturn [ source ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// an ID match\r\n\t\tsource = getEventSourceById(matchInput);\r\n\t\tif (source) {\r\n\t\t\treturn [ source ];\r\n\t\t}\r\n\r\n\t\treturn $.grep(sources, function(source) {\r\n\t\t\treturn isSourcesEquivalent(matchInput, source);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction isSourcesEquivalent(source1, source2) {\r\n\t\treturn source1 && source2 && getSourcePrimitive(source1) == getSourcePrimitive(source2);\r\n\t}\r\n\r\n\r\n\tfunction getSourcePrimitive(source) {\r\n\t\treturn (\r\n\t\t\t(typeof source === 'object') ? // a normalized event source?\r\n\t\t\t\t(source.origArray || source.googleCalendarId || source.url || source.events) : // get the primitive\r\n\t\t\t\tnull\r\n\t\t) ||\r\n\t\tsource; // the given argument *is* the primitive\r\n\t}\r\n\r\n\r\n\t// util\r\n\t// returns a filtered array without events that are part of any of the given sources\r\n\tfunction excludeEventsBySources(specificEvents, specificSources) {\r\n\t\treturn $.grep(specificEvents, function(event) {\r\n\t\t\tfor (var i = 0; i < specificSources.length; i++) {\r\n\t\t\t\tif (event.source === specificSources[i]) {\r\n\t\t\t\t\treturn false; // exclude\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true; // keep\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t/* Manipulation\r\n\t-----------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Only ever called from the externally-facing API\r\n\tfunction updateEvent(event) {\r\n\r\n\t\t// massage start/end values, even if date string values\r\n\t\tevent.start = t.moment(event.start);\r\n\t\tif (event.end) {\r\n\t\t\tevent.end = t.moment(event.end);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tevent.end = null;\r\n\t\t}\r\n\r\n\t\tmutateEvent(event, getMiscEventProps(event)); // will handle start/end/allDay normalization\r\n\t\treportEvents(cache); // reports event modifications (so we can redraw)\r\n\t}\r\n\r\n\r\n\t// Returns a hash of misc event properties that should be copied over to related events.\r\n\tfunction getMiscEventProps(event) {\r\n\t\tvar props = {};\r\n\r\n\t\t$.each(event, function(name, val) {\r\n\t\t\tif (isMiscEventPropName(name)) {\r\n\t\t\t\tif (val !== undefined && isAtomic(val)) { // a defined non-object\r\n\t\t\t\t\tprops[name] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn props;\r\n\t}\r\n\r\n\t// non-date-related, non-id-related, non-secret\r\n\tfunction isMiscEventPropName(name) {\r\n\t\treturn !/^_|^(id|allDay|start|end)$/.test(name);\r\n\t}\r\n\r\n\t\r\n\t// returns the expanded events that were created\r\n\tfunction renderEvent(eventInput, stick) {\r\n\t\tvar abstractEvent = buildEventFromInput(eventInput);\r\n\t\tvar events;\r\n\t\tvar i, event;\r\n\r\n\t\tif (abstractEvent) { // not false (a valid input)\r\n\t\t\tevents = expandEvent(abstractEvent);\r\n\r\n\t\t\tfor (i = 0; i < events.length; i++) {\r\n\t\t\t\tevent = events[i];\r\n\r\n\t\t\t\tif (!event.source) {\r\n\t\t\t\t\tif (stick) {\r\n\t\t\t\t\t\tstickySource.events.push(event);\r\n\t\t\t\t\t\tevent.source = stickySource;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcache.push(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treportEvents(cache);\r\n\r\n\t\t\treturn events;\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t}\r\n\t\r\n\t\r\n\tfunction removeEvents(filter) {\r\n\t\tvar eventID;\r\n\t\tvar i;\r\n\r\n\t\tif (filter == null) { // null or undefined. remove all events\r\n\t\t\tfilter = function() { return true; }; // will always match\r\n\t\t}\r\n\t\telse if (!$.isFunction(filter)) { // an event ID\r\n\t\t\teventID = filter + '';\r\n\t\t\tfilter = function(event) {\r\n\t\t\t\treturn event._id == eventID;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// Purge event(s) from our local cache\r\n\t\tcache = $.grep(cache, filter, true); // inverse=true\r\n\r\n\t\t// Remove events from array sources.\r\n\t\t// This works because they have been converted to official Event Objects up front.\r\n\t\t// (and as a result, event._id has been calculated).\r\n\t\tfor (i=0; i<sources.length; i++) {\r\n\t\t\tif ($.isArray(sources[i].events)) {\r\n\t\t\t\tsources[i].events = $.grep(sources[i].events, filter, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treportEvents(cache);\r\n\t}\r\n\r\n\t\r\n\tfunction clientEvents(filter) {\r\n\t\tif ($.isFunction(filter)) {\r\n\t\t\treturn $.grep(cache, filter);\r\n\t\t}\r\n\t\telse if (filter != null) { // not null, not undefined. an event ID\r\n\t\t\tfilter += '';\r\n\t\t\treturn $.grep(cache, function(e) {\r\n\t\t\t\treturn e._id == filter;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn cache; // else, return all\r\n\t}\r\n\r\n\r\n\t// Makes sure all array event sources have their internal event objects\r\n\t// converted over to the Calendar's current timezone.\r\n\tt.rezoneArrayEventSources = function() {\r\n\t\tvar i;\r\n\t\tvar events;\r\n\t\tvar j;\r\n\r\n\t\tfor (i = 0; i < sources.length; i++) {\r\n\t\t\tevents = sources[i].events;\r\n\t\t\tif ($.isArray(events)) {\r\n\r\n\t\t\t\tfor (j = 0; j < events.length; j++) {\r\n\t\t\t\t\trezoneEventDates(events[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction rezoneEventDates(event) {\r\n\t\tevent.start = t.moment(event.start);\r\n\t\tif (event.end) {\r\n\t\t\tevent.end = t.moment(event.end);\r\n\t\t}\r\n\t\tbackupEventDates(event);\r\n\t}\r\n\t\r\n\t\r\n\t/* Event Normalization\r\n\t-----------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Given a raw object with key/value properties, returns an \"abstract\" Event object.\r\n\t// An \"abstract\" event is an event that, if recurring, will not have been expanded yet.\r\n\t// Will return `false` when input is invalid.\r\n\t// `source` is optional\r\n\tfunction buildEventFromInput(input, source) {\r\n\t\tvar out = {};\r\n\t\tvar start, end;\r\n\t\tvar allDay;\r\n\r\n\t\tif (t.options.eventDataTransform) {\r\n\t\t\tinput = t.options.eventDataTransform(input);\r\n\t\t}\r\n\t\tif (source && source.eventDataTransform) {\r\n\t\t\tinput = source.eventDataTransform(input);\r\n\t\t}\r\n\r\n\t\t// Copy all properties over to the resulting object.\r\n\t\t// The special-case properties will be copied over afterwards.\r\n\t\t$.extend(out, input);\r\n\r\n\t\tif (source) {\r\n\t\t\tout.source = source;\r\n\t\t}\r\n\r\n\t\tout._id = input._id || (input.id === undefined ? '_fc' + eventGUID++ : input.id + '');\r\n\r\n\t\tif (input.className) {\r\n\t\t\tif (typeof input.className == 'string') {\r\n\t\t\t\tout.className = input.className.split(/\\s+/);\r\n\t\t\t}\r\n\t\t\telse { // assumed to be an array\r\n\t\t\t\tout.className = input.className;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tout.className = [];\r\n\t\t}\r\n\r\n\t\tstart = input.start || input.date; // \"date\" is an alias for \"start\"\r\n\t\tend = input.end;\r\n\r\n\t\t// parse as a time (Duration) if applicable\r\n\t\tif (isTimeString(start)) {\r\n\t\t\tstart = moment.duration(start);\r\n\t\t}\r\n\t\tif (isTimeString(end)) {\r\n\t\t\tend = moment.duration(end);\r\n\t\t}\r\n\r\n\t\tif (input.dow || moment.isDuration(start) || moment.isDuration(end)) {\r\n\r\n\t\t\t// the event is \"abstract\" (recurring) so don't calculate exact start/end dates just yet\r\n\t\t\tout.start = start ? moment.duration(start) : null; // will be a Duration or null\r\n\t\t\tout.end = end ? moment.duration(end) : null; // will be a Duration or null\r\n\t\t\tout._recurring = true; // our internal marker\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tif (start) {\r\n\t\t\t\tstart = t.moment(start);\r\n\t\t\t\tif (!start.isValid()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (end) {\r\n\t\t\t\tend = t.moment(end);\r\n\t\t\t\tif (!end.isValid()) {\r\n\t\t\t\t\tend = null; // let defaults take over\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tallDay = input.allDay;\r\n\t\t\tif (allDay === undefined) { // still undefined? fallback to default\r\n\t\t\t\tallDay = firstDefined(\r\n\t\t\t\t\tsource ? source.allDayDefault : undefined,\r\n\t\t\t\t\tt.options.allDayDefault\r\n\t\t\t\t);\r\n\t\t\t\t// still undefined? normalizeEventDates will calculate it\r\n\t\t\t}\r\n\r\n\t\t\tassignDatesToEvent(start, end, allDay, out);\r\n\t\t}\r\n\r\n\t\tt.normalizeEvent(out); // hook for external use. a prototype method\r\n\r\n\t\treturn out;\r\n\t}\r\n\tt.buildEventFromInput = buildEventFromInput;\r\n\r\n\r\n\t// Normalizes and assigns the given dates to the given partially-formed event object.\r\n\t// NOTE: mutates the given start/end moments. does not make a copy.\r\n\tfunction assignDatesToEvent(start, end, allDay, event) {\r\n\t\tevent.start = start;\r\n\t\tevent.end = end;\r\n\t\tevent.allDay = allDay;\r\n\t\tnormalizeEventDates(event);\r\n\t\tbackupEventDates(event);\r\n\t}\r\n\r\n\r\n\t// Ensures proper values for allDay/start/end. Accepts an Event object, or a plain object with event-ish properties.\r\n\t// NOTE: Will modify the given object.\r\n\tfunction normalizeEventDates(eventProps) {\r\n\r\n\t\tnormalizeEventTimes(eventProps);\r\n\r\n\t\tif (eventProps.end && !eventProps.end.isAfter(eventProps.start)) {\r\n\t\t\teventProps.end = null;\r\n\t\t}\r\n\r\n\t\tif (!eventProps.end) {\r\n\t\t\tif (t.options.forceEventDuration) {\r\n\t\t\t\teventProps.end = t.getDefaultEventEnd(eventProps.allDay, eventProps.start);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\teventProps.end = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// Ensures the allDay property exists and the timeliness of the start/end dates are consistent\r\n\tfunction normalizeEventTimes(eventProps) {\r\n\t\tif (eventProps.allDay == null) {\r\n\t\t\teventProps.allDay = !(eventProps.start.hasTime() || (eventProps.end && eventProps.end.hasTime()));\r\n\t\t}\r\n\r\n\t\tif (eventProps.allDay) {\r\n\t\t\teventProps.start.stripTime();\r\n\t\t\tif (eventProps.end) {\r\n\t\t\t\t// TODO: consider nextDayThreshold here? If so, will require a lot of testing and adjustment\r\n\t\t\t\teventProps.end.stripTime();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!eventProps.start.hasTime()) {\r\n\t\t\t\teventProps.start = t.applyTimezone(eventProps.start.time(0)); // will assign a 00:00 time\r\n\t\t\t}\r\n\t\t\tif (eventProps.end && !eventProps.end.hasTime()) {\r\n\t\t\t\teventProps.end = t.applyTimezone(eventProps.end.time(0)); // will assign a 00:00 time\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// If the given event is a recurring event, break it down into an array of individual instances.\r\n\t// If not a recurring event, return an array with the single original event.\r\n\t// If given a falsy input (probably because of a failed buildEventFromInput call), returns an empty array.\r\n\t// HACK: can override the recurring window by providing custom rangeStart/rangeEnd (for businessHours).\r\n\tfunction expandEvent(abstractEvent, _rangeStart, _rangeEnd) {\r\n\t\tvar events = [];\r\n\t\tvar dowHash;\r\n\t\tvar dow;\r\n\t\tvar i;\r\n\t\tvar date;\r\n\t\tvar startTime, endTime;\r\n\t\tvar start, end;\r\n\t\tvar event;\r\n\r\n\t\t_rangeStart = _rangeStart || rangeStart;\r\n\t\t_rangeEnd = _rangeEnd || rangeEnd;\r\n\r\n\t\tif (abstractEvent) {\r\n\t\t\tif (abstractEvent._recurring) {\r\n\r\n\t\t\t\t// make a boolean hash as to whether the event occurs on each day-of-week\r\n\t\t\t\tif ((dow = abstractEvent.dow)) {\r\n\t\t\t\t\tdowHash = {};\r\n\t\t\t\t\tfor (i = 0; i < dow.length; i++) {\r\n\t\t\t\t\t\tdowHash[dow[i]] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// iterate through every day in the current range\r\n\t\t\t\tdate = _rangeStart.clone().stripTime(); // holds the date of the current day\r\n\t\t\t\twhile (date.isBefore(_rangeEnd)) {\r\n\r\n\t\t\t\t\tif (!dowHash || dowHash[date.day()]) { // if everyday, or this particular day-of-week\r\n\r\n\t\t\t\t\t\tstartTime = abstractEvent.start; // the stored start and end properties are times (Durations)\r\n\t\t\t\t\t\tendTime = abstractEvent.end; // \"\r\n\t\t\t\t\t\tstart = date.clone();\r\n\t\t\t\t\t\tend = null;\r\n\r\n\t\t\t\t\t\tif (startTime) {\r\n\t\t\t\t\t\t\tstart = start.time(startTime);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (endTime) {\r\n\t\t\t\t\t\t\tend = date.clone().time(endTime);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tevent = $.extend({}, abstractEvent); // make a copy of the original\r\n\t\t\t\t\t\tassignDatesToEvent(\r\n\t\t\t\t\t\t\tstart, end,\r\n\t\t\t\t\t\t\t!startTime && !endTime, // allDay?\r\n\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tevents.push(event);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdate.add(1, 'days');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tevents.push(abstractEvent); // return the original event. will be a one-item array\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t}\r\n\tt.expandEvent = expandEvent;\r\n\r\n\r\n\r\n\t/* Event Modification Math\r\n\t-----------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Modifies an event and all related events by applying the given properties.\r\n\t// Special date-diffing logic is used for manipulation of dates.\r\n\t// If `props` does not contain start/end dates, the updated values are assumed to be the event's current start/end.\r\n\t// All date comparisons are done against the event's pristine _start and _end dates.\r\n\t// Returns an object with delta information and a function to undo all operations.\r\n\t// For making computations in a granularity greater than day/time, specify largeUnit.\r\n\t// NOTE: The given `newProps` might be mutated for normalization purposes.\r\n\tfunction mutateEvent(event, newProps, largeUnit) {\r\n\t\tvar miscProps = {};\r\n\t\tvar oldProps;\r\n\t\tvar clearEnd;\r\n\t\tvar startDelta;\r\n\t\tvar endDelta;\r\n\t\tvar durationDelta;\r\n\t\tvar undoFunc;\r\n\r\n\t\t// diffs the dates in the appropriate way, returning a duration\r\n\t\tfunction diffDates(date1, date0) { // date1 - date0\r\n\t\t\tif (largeUnit) {\r\n\t\t\t\treturn diffByUnit(date1, date0, largeUnit);\r\n\t\t\t}\r\n\t\t\telse if (newProps.allDay) {\r\n\t\t\t\treturn diffDay(date1, date0);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn diffDayTime(date1, date0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnewProps = newProps || {};\r\n\r\n\t\t// normalize new date-related properties\r\n\t\tif (!newProps.start) {\r\n\t\t\tnewProps.start = event.start.clone();\r\n\t\t}\r\n\t\tif (newProps.end === undefined) {\r\n\t\t\tnewProps.end = event.end ? event.end.clone() : null;\r\n\t\t}\r\n\t\tif (newProps.allDay == null) { // is null or undefined?\r\n\t\t\tnewProps.allDay = event.allDay;\r\n\t\t}\r\n\t\tnormalizeEventDates(newProps);\r\n\r\n\t\t// create normalized versions of the original props to compare against\r\n\t\t// need a real end value, for diffing\r\n\t\toldProps = {\r\n\t\t\tstart: event._start.clone(),\r\n\t\t\tend: event._end ? event._end.clone() : t.getDefaultEventEnd(event._allDay, event._start),\r\n\t\t\tallDay: newProps.allDay // normalize the dates in the same regard as the new properties\r\n\t\t};\r\n\t\tnormalizeEventDates(oldProps);\r\n\r\n\t\t// need to clear the end date if explicitly changed to null\r\n\t\tclearEnd = event._end !== null && newProps.end === null;\r\n\r\n\t\t// compute the delta for moving the start date\r\n\t\tstartDelta = diffDates(newProps.start, oldProps.start);\r\n\r\n\t\t// compute the delta for moving the end date\r\n\t\tif (newProps.end) {\r\n\t\t\tendDelta = diffDates(newProps.end, oldProps.end);\r\n\t\t\tdurationDelta = endDelta.subtract(startDelta);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdurationDelta = null;\r\n\t\t}\r\n\r\n\t\t// gather all non-date-related properties\r\n\t\t$.each(newProps, function(name, val) {\r\n\t\t\tif (isMiscEventPropName(name)) {\r\n\t\t\t\tif (val !== undefined) {\r\n\t\t\t\t\tmiscProps[name] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// apply the operations to the event and all related events\r\n\t\tundoFunc = mutateEvents(\r\n\t\t\tclientEvents(event._id), // get events with this ID\r\n\t\t\tclearEnd,\r\n\t\t\tnewProps.allDay,\r\n\t\t\tstartDelta,\r\n\t\t\tdurationDelta,\r\n\t\t\tmiscProps\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tdateDelta: startDelta,\r\n\t\t\tdurationDelta: durationDelta,\r\n\t\t\tundo: undoFunc\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t// Modifies an array of events in the following ways (operations are in order):\r\n\t// - clear the event's `end`\r\n\t// - convert the event to allDay\r\n\t// - add `dateDelta` to the start and end\r\n\t// - add `durationDelta` to the event's duration\r\n\t// - assign `miscProps` to the event\r\n\t//\r\n\t// Returns a function that can be called to undo all the operations.\r\n\t//\r\n\t// TODO: don't use so many closures. possible memory issues when lots of events with same ID.\r\n\t//\r\n\tfunction mutateEvents(events, clearEnd, allDay, dateDelta, durationDelta, miscProps) {\r\n\t\tvar isAmbigTimezone = t.getIsAmbigTimezone();\r\n\t\tvar undoFunctions = [];\r\n\r\n\t\t// normalize zero-length deltas to be null\r\n\t\tif (dateDelta && !dateDelta.valueOf()) { dateDelta = null; }\r\n\t\tif (durationDelta && !durationDelta.valueOf()) { durationDelta = null; }\r\n\r\n\t\t$.each(events, function(i, event) {\r\n\t\t\tvar oldProps;\r\n\t\t\tvar newProps;\r\n\r\n\t\t\t// build an object holding all the old values, both date-related and misc.\r\n\t\t\t// for the undo function.\r\n\t\t\toldProps = {\r\n\t\t\t\tstart: event.start.clone(),\r\n\t\t\t\tend: event.end ? event.end.clone() : null,\r\n\t\t\t\tallDay: event.allDay\r\n\t\t\t};\r\n\t\t\t$.each(miscProps, function(name) {\r\n\t\t\t\toldProps[name] = event[name];\r\n\t\t\t});\r\n\r\n\t\t\t// new date-related properties. work off the original date snapshot.\r\n\t\t\t// ok to use references because they will be thrown away when backupEventDates is called.\r\n\t\t\tnewProps = {\r\n\t\t\t\tstart: event._start,\r\n\t\t\t\tend: event._end,\r\n\t\t\t\tallDay: allDay // normalize the dates in the same regard as the new properties\r\n\t\t\t};\r\n\t\t\tnormalizeEventDates(newProps); // massages start/end/allDay\r\n\r\n\t\t\t// strip or ensure the end date\r\n\t\t\tif (clearEnd) {\r\n\t\t\t\tnewProps.end = null;\r\n\t\t\t}\r\n\t\t\telse if (durationDelta && !newProps.end) { // the duration translation requires an end date\r\n\t\t\t\tnewProps.end = t.getDefaultEventEnd(newProps.allDay, newProps.start);\r\n\t\t\t}\r\n\r\n\t\t\tif (dateDelta) {\r\n\t\t\t\tnewProps.start.add(dateDelta);\r\n\t\t\t\tif (newProps.end) {\r\n\t\t\t\t\tnewProps.end.add(dateDelta);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (durationDelta) {\r\n\t\t\t\tnewProps.end.add(durationDelta); // end already ensured above\r\n\t\t\t}\r\n\r\n\t\t\t// if the dates have changed, and we know it is impossible to recompute the\r\n\t\t\t// timezone offsets, strip the zone.\r\n\t\t\tif (\r\n\t\t\t\tisAmbigTimezone &&\r\n\t\t\t\t!newProps.allDay &&\r\n\t\t\t\t(dateDelta || durationDelta)\r\n\t\t\t) {\r\n\t\t\t\tnewProps.start.stripZone();\r\n\t\t\t\tif (newProps.end) {\r\n\t\t\t\t\tnewProps.end.stripZone();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$.extend(event, miscProps, newProps); // copy over misc props, then date-related props\r\n\t\t\tbackupEventDates(event); // regenerate internal _start/_end/_allDay\r\n\r\n\t\t\tundoFunctions.push(function() {\r\n\t\t\t\t$.extend(event, oldProps);\r\n\t\t\t\tbackupEventDates(event); // regenerate internal _start/_end/_allDay\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn function() {\r\n\t\t\tfor (var i = 0; i < undoFunctions.length; i++) {\r\n\t\t\t\tundoFunctions[i]();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tt.getEventCache = function() {\r\n\t\treturn cache;\r\n\t};\r\n\r\n}\r\n\r\n\r\n// hook for external libs to manipulate event properties upon creation.\r\n// should manipulate the event in-place.\r\nCalendar.prototype.normalizeEvent = function(event) {\r\n};\r\n\r\n\r\n// Does the given span (start, end, and other location information)\r\n// fully contain the other?\r\nCalendar.prototype.spanContainsSpan = function(outerSpan, innerSpan) {\r\n\tvar eventStart = outerSpan.start.clone().stripZone();\r\n\tvar eventEnd = this.getEventEnd(outerSpan).stripZone();\r\n\r\n\treturn innerSpan.start >= eventStart && innerSpan.end <= eventEnd;\r\n};\r\n\r\n\r\n// Returns a list of events that the given event should be compared against when being considered for a move to\r\n// the specified span. Attached to the Calendar's prototype because EventManager is a mixin for a Calendar.\r\nCalendar.prototype.getPeerEvents = function(span, event) {\r\n\tvar cache = this.getEventCache();\r\n\tvar peerEvents = [];\r\n\tvar i, otherEvent;\r\n\r\n\tfor (i = 0; i < cache.length; i++) {\r\n\t\totherEvent = cache[i];\r\n\t\tif (\r\n\t\t\t!event ||\r\n\t\t\tevent._id !== otherEvent._id // don't compare the event to itself or other related [repeating] events\r\n\t\t) {\r\n\t\t\tpeerEvents.push(otherEvent);\r\n\t\t}\r\n\t}\r\n\r\n\treturn peerEvents;\r\n};\r\n\r\n\r\n// updates the \"backup\" properties, which are preserved in order to compute diffs later on.\r\nfunction backupEventDates(event) {\r\n\tevent._allDay = event.allDay;\r\n\tevent._start = event.start.clone();\r\n\tevent._end = event.end ? event.end.clone() : null;\r\n}\r\n\r\n\r\n/* Overlapping / Constraining\r\n-----------------------------------------------------------------------------------------*/\r\n\r\n\r\n// Determines if the given event can be relocated to the given span (unzoned start/end with other misc data)\r\nCalendar.prototype.isEventSpanAllowed = function(span, event) {\r\n\tvar source = event.source || {};\r\n\r\n\tvar constraint = firstDefined(\r\n\t\tevent.constraint,\r\n\t\tsource.constraint,\r\n\t\tthis.options.eventConstraint\r\n\t);\r\n\r\n\tvar overlap = firstDefined(\r\n\t\tevent.overlap,\r\n\t\tsource.overlap,\r\n\t\tthis.options.eventOverlap\r\n\t);\r\n\r\n\treturn this.isSpanAllowed(span, constraint, overlap, event) &&\r\n\t\t(!this.options.eventAllow || this.options.eventAllow(span, event) !== false);\r\n};\r\n\r\n\r\n// Determines if an external event can be relocated to the given span (unzoned start/end with other misc data)\r\nCalendar.prototype.isExternalSpanAllowed = function(eventSpan, eventLocation, eventProps) {\r\n\tvar eventInput;\r\n\tvar event;\r\n\r\n\t// note: very similar logic is in View's reportExternalDrop\r\n\tif (eventProps) {\r\n\t\teventInput = $.extend({}, eventProps, eventLocation);\r\n\t\tevent = this.expandEvent(\r\n\t\t\tthis.buildEventFromInput(eventInput)\r\n\t\t)[0];\r\n\t}\r\n\r\n\tif (event) {\r\n\t\treturn this.isEventSpanAllowed(eventSpan, event);\r\n\t}\r\n\telse { // treat it as a selection\r\n\r\n\t\treturn this.isSelectionSpanAllowed(eventSpan);\r\n\t}\r\n};\r\n\r\n\r\n// Determines the given span (unzoned start/end with other misc data) can be selected.\r\nCalendar.prototype.isSelectionSpanAllowed = function(span) {\r\n\treturn this.isSpanAllowed(span, this.options.selectConstraint, this.options.selectOverlap) &&\r\n\t\t(!this.options.selectAllow || this.options.selectAllow(span) !== false);\r\n};\r\n\r\n\r\n// Returns true if the given span (caused by an event drop/resize or a selection) is allowed to exist\r\n// according to the constraint/overlap settings.\r\n// `event` is not required if checking a selection.\r\nCalendar.prototype.isSpanAllowed = function(span, constraint, overlap, event) {\r\n\tvar constraintEvents;\r\n\tvar anyContainment;\r\n\tvar peerEvents;\r\n\tvar i, peerEvent;\r\n\tvar peerOverlap;\r\n\r\n\t// the range must be fully contained by at least one of produced constraint events\r\n\tif (constraint != null) {\r\n\r\n\t\t// not treated as an event! intermediate data structure\r\n\t\t// TODO: use ranges in the future\r\n\t\tconstraintEvents = this.constraintToEvents(constraint);\r\n\t\tif (constraintEvents) { // not invalid\r\n\r\n\t\t\tanyContainment = false;\r\n\t\t\tfor (i = 0; i < constraintEvents.length; i++) {\r\n\t\t\t\tif (this.spanContainsSpan(constraintEvents[i], span)) {\r\n\t\t\t\t\tanyContainment = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!anyContainment) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpeerEvents = this.getPeerEvents(span, event);\r\n\r\n\tfor (i = 0; i < peerEvents.length; i++)  {\r\n\t\tpeerEvent = peerEvents[i];\r\n\r\n\t\t// there needs to be an actual intersection before disallowing anything\r\n\t\tif (this.eventIntersectsRange(peerEvent, span)) {\r\n\r\n\t\t\t// evaluate overlap for the given range and short-circuit if necessary\r\n\t\t\tif (overlap === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// if the event's overlap is a test function, pass the peer event in question as the first param\r\n\t\t\telse if (typeof overlap === 'function' && !overlap(peerEvent, event)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// if we are computing if the given range is allowable for an event, consider the other event's\r\n\t\t\t// EventObject-specific or Source-specific `overlap` property\r\n\t\t\tif (event) {\r\n\t\t\t\tpeerOverlap = firstDefined(\r\n\t\t\t\t\tpeerEvent.overlap,\r\n\t\t\t\t\t(peerEvent.source || {}).overlap\r\n\t\t\t\t\t// we already considered the global `eventOverlap`\r\n\t\t\t\t);\r\n\t\t\t\tif (peerOverlap === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t// if the peer event's overlap is a test function, pass the subject event as the first param\r\n\t\t\t\tif (typeof peerOverlap === 'function' && !peerOverlap(event, peerEvent)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\n\r\n// Given an event input from the API, produces an array of event objects. Possible event inputs:\r\n// 'businessHours'\r\n// An event ID (number or string)\r\n// An object with specific start/end dates or a recurring event (like what businessHours accepts)\r\nCalendar.prototype.constraintToEvents = function(constraintInput) {\r\n\r\n\tif (constraintInput === 'businessHours') {\r\n\t\treturn this.getCurrentBusinessHourEvents();\r\n\t}\r\n\r\n\tif (typeof constraintInput === 'object') {\r\n\t\tif (constraintInput.start != null) { // needs to be event-like input\r\n\t\t\treturn this.expandEvent(this.buildEventFromInput(constraintInput));\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn null; // invalid\r\n\t\t}\r\n\t}\r\n\r\n\treturn this.clientEvents(constraintInput); // probably an ID\r\n};\r\n\r\n\r\n// Does the event's date range intersect with the given range?\r\n// start/end already assumed to have stripped zones :(\r\nCalendar.prototype.eventIntersectsRange = function(event, range) {\r\n\tvar eventStart = event.start.clone().stripZone();\r\n\tvar eventEnd = this.getEventEnd(event).stripZone();\r\n\r\n\treturn range.start < eventEnd && range.end > eventStart;\r\n};\r\n\r\n\r\n/* Business Hours\r\n-----------------------------------------------------------------------------------------*/\r\n\r\nvar BUSINESS_HOUR_EVENT_DEFAULTS = {\r\n\tid: '_fcBusinessHours', // will relate events from different calls to expandEvent\r\n\tstart: '09:00',\r\n\tend: '17:00',\r\n\tdow: [ 1, 2, 3, 4, 5 ], // monday - friday\r\n\trendering: 'inverse-background'\r\n\t// classNames are defined in businessHoursSegClasses\r\n};\r\n\r\n// Return events objects for business hours within the current view.\r\n// Abuse of our event system :(\r\nCalendar.prototype.getCurrentBusinessHourEvents = function(wholeDay) {\r\n\treturn this.computeBusinessHourEvents(wholeDay, this.options.businessHours);\r\n};\r\n\r\n// Given a raw input value from options, return events objects for business hours within the current view.\r\nCalendar.prototype.computeBusinessHourEvents = function(wholeDay, input) {\r\n\tif (input === true) {\r\n\t\treturn this.expandBusinessHourEvents(wholeDay, [ {} ]);\r\n\t}\r\n\telse if ($.isPlainObject(input)) {\r\n\t\treturn this.expandBusinessHourEvents(wholeDay, [ input ]);\r\n\t}\r\n\telse if ($.isArray(input)) {\r\n\t\treturn this.expandBusinessHourEvents(wholeDay, input, true);\r\n\t}\r\n\telse {\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\n// inputs expected to be an array of objects.\r\n// if ignoreNoDow is true, will ignore entries that don't specify a day-of-week (dow) key.\r\nCalendar.prototype.expandBusinessHourEvents = function(wholeDay, inputs, ignoreNoDow) {\r\n\tvar view = this.getView();\r\n\tvar events = [];\r\n\tvar i, input;\r\n\r\n\tfor (i = 0; i < inputs.length; i++) {\r\n\t\tinput = inputs[i];\r\n\r\n\t\tif (ignoreNoDow && !input.dow) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\t// give defaults. will make a copy\r\n\t\tinput = $.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, input);\r\n\r\n\t\t// if a whole-day series is requested, clear the start/end times\r\n\t\tif (wholeDay) {\r\n\t\t\tinput.start = null;\r\n\t\t\tinput.end = null;\r\n\t\t}\r\n\r\n\t\tevents.push.apply(events, // append\r\n\t\t\tthis.expandEvent(\r\n\t\t\t\tthis.buildEventFromInput(input),\r\n\t\t\t\tview.start,\r\n\t\t\t\tview.end\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\treturn events;\r\n};\r\n\r\n;;\r\n\r\n/* An abstract class for the \"basic\" views, as well as month view. Renders one or more rows of day cells.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\r\n// It is responsible for managing width/height.\r\n\r\nvar BasicView = FC.BasicView = View.extend({\r\n\r\n\tscroller: null,\r\n\r\n\tdayGridClass: DayGrid, // class the dayGrid will be instantiated from (overridable by subclasses)\r\n\tdayGrid: null, // the main subcomponent that does most of the heavy lifting\r\n\r\n\tdayNumbersVisible: false, // display day numbers on each day cell?\r\n\tcolWeekNumbersVisible: false, // display week numbers along the side?\r\n\tcellWeekNumbersVisible: false, // display week numbers in day cell?\r\n\r\n\tweekNumberWidth: null, // width of all the week-number cells running down the side\r\n\r\n\theadContainerEl: null, // div that hold's the dayGrid's rendered date header\r\n\theadRowEl: null, // the fake row element of the day-of-week header\r\n\r\n\r\n\tinitialize: function() {\r\n\t\tthis.dayGrid = this.instantiateDayGrid();\r\n\r\n\t\tthis.scroller = new Scroller({\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto'\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Generates the DayGrid object this view needs. Draws from this.dayGridClass\r\n\tinstantiateDayGrid: function() {\r\n\t\t// generate a subclass on the fly with BasicView-specific behavior\r\n\t\t// TODO: cache this subclass\r\n\t\tvar subclass = this.dayGridClass.extend(basicDayGridMethods);\r\n\r\n\t\treturn new subclass(this);\r\n\t},\r\n\r\n\r\n\t// Sets the display range and computes all necessary dates\r\n\tsetRange: function(range) {\r\n\t\tView.prototype.setRange.call(this, range); // call the super-method\r\n\r\n\t\tthis.dayGrid.breakOnWeeks = /year|month|week/.test(this.intervalUnit); // do before setRange\r\n\t\tthis.dayGrid.setRange(range);\r\n\t},\r\n\r\n\r\n\t// Compute the value to feed into setRange. Overrides superclass.\r\n\tcomputeRange: function(date) {\r\n\t\tvar range = View.prototype.computeRange.call(this, date); // get value from the super-method\r\n\r\n\t\t// year and month views should be aligned with weeks. this is already done for week\r\n\t\tif (/year|month/.test(range.intervalUnit)) {\r\n\t\t\trange.start.startOf('week');\r\n\t\t\trange.start = this.skipHiddenDays(range.start);\r\n\r\n\t\t\t// make end-of-week if not already\r\n\t\t\tif (range.end.weekday()) {\r\n\t\t\t\trange.end.add(1, 'week').startOf('week');\r\n\t\t\t\trange.end = this.skipHiddenDays(range.end, -1, true); // exclusively move backwards\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn range;\r\n\t},\r\n\r\n\r\n\t// Renders the view into `this.el`, which should already be assigned\r\n\trenderDates: function() {\r\n\r\n\t\tthis.dayNumbersVisible = this.dayGrid.rowCnt > 1; // TODO: make grid responsible\r\n\t\tif (this.opt('weekNumbers')) {\r\n\t\t\tif (this.opt('weekNumbersWithinDays')) {\r\n\t\t\t\tthis.cellWeekNumbersVisible = true;\r\n\t\t\t\tthis.colWeekNumbersVisible = false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.cellWeekNumbersVisible = false;\r\n\t\t\t\tthis.colWeekNumbersVisible = true;\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis.dayGrid.numbersVisible = this.dayNumbersVisible ||\r\n\t\t\tthis.cellWeekNumbersVisible || this.colWeekNumbersVisible;\r\n\r\n\t\tthis.el.addClass('fc-basic-view').html(this.renderSkeletonHtml());\r\n\t\tthis.renderHead();\r\n\r\n\t\tthis.scroller.render();\r\n\t\tvar dayGridContainerEl = this.scroller.el.addClass('fc-day-grid-container');\r\n\t\tvar dayGridEl = $('<div class=\"fc-day-grid\" />').appendTo(dayGridContainerEl);\r\n\t\tthis.el.find('.fc-body > tr > td').append(dayGridContainerEl);\r\n\r\n\t\tthis.dayGrid.setElement(dayGridEl);\r\n\t\tthis.dayGrid.renderDates(this.hasRigidRows());\r\n\t},\r\n\r\n\r\n\t// render the day-of-week headers\r\n\trenderHead: function() {\r\n\t\tthis.headContainerEl =\r\n\t\t\tthis.el.find('.fc-head-container')\r\n\t\t\t\t.html(this.dayGrid.renderHeadHtml());\r\n\t\tthis.headRowEl = this.headContainerEl.find('.fc-row');\r\n\t},\r\n\r\n\r\n\t// Unrenders the content of the view. Since we haven't separated skeleton rendering from date rendering,\r\n\t// always completely kill the dayGrid's rendering.\r\n\tunrenderDates: function() {\r\n\t\tthis.dayGrid.unrenderDates();\r\n\t\tthis.dayGrid.removeElement();\r\n\t\tthis.scroller.destroy();\r\n\t},\r\n\r\n\r\n\trenderBusinessHours: function() {\r\n\t\tthis.dayGrid.renderBusinessHours();\r\n\t},\r\n\r\n\r\n\tunrenderBusinessHours: function() {\r\n\t\tthis.dayGrid.unrenderBusinessHours();\r\n\t},\r\n\r\n\r\n\t// Builds the HTML skeleton for the view.\r\n\t// The day-grid component will render inside of a container defined by this HTML.\r\n\trenderSkeletonHtml: function() {\r\n\t\treturn '' +\r\n\t\t\t'<table>' +\r\n\t\t\t\t'<thead class=\"fc-head\">' +\r\n\t\t\t\t\t'<tr>' +\r\n\t\t\t\t\t\t'<td class=\"fc-head-container ' + this.widgetHeaderClass + '\"></td>' +\r\n\t\t\t\t\t'</tr>' +\r\n\t\t\t\t'</thead>' +\r\n\t\t\t\t'<tbody class=\"fc-body\">' +\r\n\t\t\t\t\t'<tr>' +\r\n\t\t\t\t\t\t'<td class=\"' + this.widgetContentClass + '\"></td>' +\r\n\t\t\t\t\t'</tr>' +\r\n\t\t\t\t'</tbody>' +\r\n\t\t\t'</table>';\r\n\t},\r\n\r\n\r\n\t// Generates an HTML attribute string for setting the width of the week number column, if it is known\r\n\tweekNumberStyleAttr: function() {\r\n\t\tif (this.weekNumberWidth !== null) {\r\n\t\t\treturn 'style=\"width:' + this.weekNumberWidth + 'px\"';\r\n\t\t}\r\n\t\treturn '';\r\n\t},\r\n\r\n\r\n\t// Determines whether each row should have a constant height\r\n\thasRigidRows: function() {\r\n\t\tvar eventLimit = this.opt('eventLimit');\r\n\t\treturn eventLimit && typeof eventLimit !== 'number';\r\n\t},\r\n\r\n\r\n\t/* Dimensions\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Refreshes the horizontal dimensions of the view\r\n\tupdateWidth: function() {\r\n\t\tif (this.colWeekNumbersVisible) {\r\n\t\t\t// Make sure all week number cells running down the side have the same width.\r\n\t\t\t// Record the width for cells created later.\r\n\t\t\tthis.weekNumberWidth = matchCellWidths(\r\n\t\t\t\tthis.el.find('.fc-week-number')\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Adjusts the vertical dimensions of the view to the specified values\r\n\tsetHeight: function(totalHeight, isAuto) {\r\n\t\tvar eventLimit = this.opt('eventLimit');\r\n\t\tvar scrollerHeight;\r\n\t\tvar scrollbarWidths;\r\n\r\n\t\t// reset all heights to be natural\r\n\t\tthis.scroller.clear();\r\n\t\tuncompensateScroll(this.headRowEl);\r\n\r\n\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\r\n\r\n\t\t// is the event limit a constant level number?\r\n\t\tif (eventLimit && typeof eventLimit === 'number') {\r\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\r\n\t\t}\r\n\r\n\t\t// distribute the height to the rows\r\n\t\t// (totalHeight is a \"recommended\" value if isAuto)\r\n\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\r\n\t\tthis.setGridHeight(scrollerHeight, isAuto);\r\n\r\n\t\t// is the event limit dynamically calculated?\r\n\t\tif (eventLimit && typeof eventLimit !== 'number') {\r\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\r\n\t\t}\r\n\r\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\r\n\r\n\t\t\tthis.scroller.setHeight(scrollerHeight);\r\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\r\n\r\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\r\n\r\n\t\t\t\tcompensateScroll(this.headRowEl, scrollbarWidths);\r\n\r\n\t\t\t\t// doing the scrollbar compensation might have created text overflow which created more height. redo\r\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\r\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\r\n\t\t\t}\r\n\r\n\t\t\t// guarantees the same scrollbar widths\r\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// given a desired total height of the view, returns what the height of the scroller should be\r\n\tcomputeScrollerHeight: function(totalHeight) {\r\n\t\treturn totalHeight -\r\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\r\n\t},\r\n\r\n\r\n\t// Sets the height of just the DayGrid component in this view\r\n\tsetGridHeight: function(height, isAuto) {\r\n\t\tif (isAuto) {\r\n\t\t\tundistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdistributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Scroll\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tqueryScroll: function() {\r\n\t\treturn this.scroller.getScrollTop();\r\n\t},\r\n\r\n\r\n\tsetScroll: function(top) {\r\n\t\tthis.scroller.setScrollTop(top);\r\n\t},\r\n\r\n\r\n\t/* Hit Areas\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\t// forward all hit-related method calls to dayGrid\r\n\r\n\r\n\tprepareHits: function() {\r\n\t\tthis.dayGrid.prepareHits();\r\n\t},\r\n\r\n\r\n\treleaseHits: function() {\r\n\t\tthis.dayGrid.releaseHits();\r\n\t},\r\n\r\n\r\n\tqueryHit: function(left, top) {\r\n\t\treturn this.dayGrid.queryHit(left, top);\r\n\t},\r\n\r\n\r\n\tgetHitSpan: function(hit) {\r\n\t\treturn this.dayGrid.getHitSpan(hit);\r\n\t},\r\n\r\n\r\n\tgetHitEl: function(hit) {\r\n\t\treturn this.dayGrid.getHitEl(hit);\r\n\t},\r\n\r\n\r\n\t/* Events\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders the given events onto the view and populates the segments array\r\n\trenderEvents: function(events) {\r\n\t\tthis.dayGrid.renderEvents(events);\r\n\r\n\t\tthis.updateHeight(); // must compensate for events that overflow the row\r\n\t},\r\n\r\n\r\n\t// Retrieves all segment objects that are rendered in the view\r\n\tgetEventSegs: function() {\r\n\t\treturn this.dayGrid.getEventSegs();\r\n\t},\r\n\r\n\r\n\t// Unrenders all event elements and clears internal segment data\r\n\tunrenderEvents: function() {\r\n\t\tthis.dayGrid.unrenderEvents();\r\n\r\n\t\t// we DON'T need to call updateHeight() because\r\n\t\t// a renderEvents() call always happens after this, which will eventually call updateHeight()\r\n\t},\r\n\r\n\r\n\t/* Dragging (for both events and external elements)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\r\n\trenderDrag: function(dropLocation, seg) {\r\n\t\treturn this.dayGrid.renderDrag(dropLocation, seg);\r\n\t},\r\n\r\n\r\n\tunrenderDrag: function() {\r\n\t\tthis.dayGrid.unrenderDrag();\r\n\t},\r\n\r\n\r\n\t/* Selection\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of a selection\r\n\trenderSelection: function(span) {\r\n\t\tthis.dayGrid.renderSelection(span);\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indications of a selection\r\n\tunrenderSelection: function() {\r\n\t\tthis.dayGrid.unrenderSelection();\r\n\t}\r\n\r\n});\r\n\r\n\r\n// Methods that will customize the rendering behavior of the BasicView's dayGrid\r\nvar basicDayGridMethods = {\r\n\r\n\r\n\t// Generates the HTML that will go before the day-of week header cells\r\n\trenderHeadIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\tif (view.colWeekNumbersVisible) {\r\n\t\t\treturn '' +\r\n\t\t\t\t'<th class=\"fc-week-number ' + view.widgetHeaderClass + '\" ' + view.weekNumberStyleAttr() + '>' +\r\n\t\t\t\t\t'<span>' + // needed for matchCellWidths\r\n\t\t\t\t\t\thtmlEscape(view.opt('weekNumberTitle')) +\r\n\t\t\t\t\t'</span>' +\r\n\t\t\t\t'</th>';\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t},\r\n\r\n\r\n\t// Generates the HTML that will go before content-skeleton cells that display the day/week numbers\r\n\trenderNumberIntroHtml: function(row) {\r\n\t\tvar view = this.view;\r\n\t\tvar weekStart = this.getCellDate(row, 0);\r\n\r\n\t\tif (view.colWeekNumbersVisible) {\r\n\t\t\treturn '' +\r\n\t\t\t\t'<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '>' +\r\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\r\n\t\t\t\t\t\t{ date: weekStart, type: 'week', forceOff: this.colCnt === 1 },\r\n\t\t\t\t\t\tweekStart.format('w') // inner HTML\r\n\t\t\t\t\t) +\r\n\t\t\t\t'</td>';\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t},\r\n\r\n\r\n\t// Generates the HTML that goes before the day bg cells for each day-row\r\n\trenderBgIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\tif (view.colWeekNumbersVisible) {\r\n\t\t\treturn '<td class=\"fc-week-number ' + view.widgetContentClass + '\" ' +\r\n\t\t\t\tview.weekNumberStyleAttr() + '></td>';\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t},\r\n\r\n\r\n\t// Generates the HTML that goes before every other type of row generated by DayGrid.\r\n\t// Affects helper-skeleton and highlight-skeleton rows.\r\n\trenderIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\tif (view.colWeekNumbersVisible) {\r\n\t\t\treturn '<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '></td>';\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t}\r\n\r\n};\r\n\r\n;;\r\n\r\n/* A month view with day cells running in rows (one-per-week) and columns\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nvar MonthView = FC.MonthView = BasicView.extend({\r\n\r\n\t// Produces information about what range to display\r\n\tcomputeRange: function(date) {\r\n\t\tvar range = BasicView.prototype.computeRange.call(this, date); // get value from super-method\r\n\t\tvar rowCnt;\r\n\r\n\t\t// ensure 6 weeks\r\n\t\tif (this.isFixedWeeks()) {\r\n\t\t\trowCnt = Math.ceil(range.end.diff(range.start, 'weeks', true)); // could be partial weeks due to hiddenDays\r\n\t\t\trange.end.add(6 - rowCnt, 'weeks');\r\n\t\t}\r\n\r\n\t\treturn range;\r\n\t},\r\n\r\n\r\n\t// Overrides the default BasicView behavior to have special multi-week auto-height logic\r\n\tsetGridHeight: function(height, isAuto) {\r\n\r\n\t\t// if auto, make the height of each row the height that it would be if there were 6 weeks\r\n\t\tif (isAuto) {\r\n\t\t\theight *= this.rowCnt / 6;\r\n\t\t}\r\n\r\n\t\tdistributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\r\n\t},\r\n\r\n\r\n\tisFixedWeeks: function() {\r\n\t\treturn this.opt('fixedWeekCount');\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\nfcViews.basic = {\r\n\t'class': BasicView\r\n};\r\n\r\nfcViews.basicDay = {\r\n\ttype: 'basic',\r\n\tduration: { days: 1 }\r\n};\r\n\r\nfcViews.basicWeek = {\r\n\ttype: 'basic',\r\n\tduration: { weeks: 1 }\r\n};\r\n\r\nfcViews.month = {\r\n\t'class': MonthView,\r\n\tduration: { months: 1 }, // important for prev/next\r\n\tdefaults: {\r\n\t\tfixedWeekCount: true\r\n\t}\r\n};\r\n;;\r\n\r\n/* An abstract class for all agenda-related views. Displays one more columns with time slots running vertically.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\r\n// Responsible for managing width/height.\r\n\r\nvar AgendaView = FC.AgendaView = View.extend({\r\n\r\n\tscroller: null,\r\n\r\n\ttimeGridClass: TimeGrid, // class used to instantiate the timeGrid. subclasses can override\r\n\ttimeGrid: null, // the main time-grid subcomponent of this view\r\n\r\n\tdayGridClass: DayGrid, // class used to instantiate the dayGrid. subclasses can override\r\n\tdayGrid: null, // the \"all-day\" subcomponent. if all-day is turned off, this will be null\r\n\r\n\taxisWidth: null, // the width of the time axis running down the side\r\n\r\n\theadContainerEl: null, // div that hold's the timeGrid's rendered date header\r\n\tnoScrollRowEls: null, // set of fake row elements that must compensate when scroller has scrollbars\r\n\r\n\t// when the time-grid isn't tall enough to occupy the given height, we render an <hr> underneath\r\n\tbottomRuleEl: null,\r\n\r\n\r\n\tinitialize: function() {\r\n\t\tthis.timeGrid = this.instantiateTimeGrid();\r\n\r\n\t\tif (this.opt('allDaySlot')) { // should we display the \"all-day\" area?\r\n\t\t\tthis.dayGrid = this.instantiateDayGrid(); // the all-day subcomponent of this view\r\n\t\t}\r\n\r\n\t\tthis.scroller = new Scroller({\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto'\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t// Instantiates the TimeGrid object this view needs. Draws from this.timeGridClass\r\n\tinstantiateTimeGrid: function() {\r\n\t\tvar subclass = this.timeGridClass.extend(agendaTimeGridMethods);\r\n\r\n\t\treturn new subclass(this);\r\n\t},\r\n\r\n\r\n\t// Instantiates the DayGrid object this view might need. Draws from this.dayGridClass\r\n\tinstantiateDayGrid: function() {\r\n\t\tvar subclass = this.dayGridClass.extend(agendaDayGridMethods);\r\n\r\n\t\treturn new subclass(this);\r\n\t},\r\n\r\n\r\n\t/* Rendering\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Sets the display range and computes all necessary dates\r\n\tsetRange: function(range) {\r\n\t\tView.prototype.setRange.call(this, range); // call the super-method\r\n\r\n\t\tthis.timeGrid.setRange(range);\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.setRange(range);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Renders the view into `this.el`, which has already been assigned\r\n\trenderDates: function() {\r\n\r\n\t\tthis.el.addClass('fc-agenda-view').html(this.renderSkeletonHtml());\r\n\t\tthis.renderHead();\r\n\r\n\t\tthis.scroller.render();\r\n\t\tvar timeGridWrapEl = this.scroller.el.addClass('fc-time-grid-container');\r\n\t\tvar timeGridEl = $('<div class=\"fc-time-grid\" />').appendTo(timeGridWrapEl);\r\n\t\tthis.el.find('.fc-body > tr > td').append(timeGridWrapEl);\r\n\r\n\t\tthis.timeGrid.setElement(timeGridEl);\r\n\t\tthis.timeGrid.renderDates();\r\n\r\n\t\t// the <hr> that sometimes displays under the time-grid\r\n\t\tthis.bottomRuleEl = $('<hr class=\"fc-divider ' + this.widgetHeaderClass + '\"/>')\r\n\t\t\t.appendTo(this.timeGrid.el); // inject it into the time-grid\r\n\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.setElement(this.el.find('.fc-day-grid'));\r\n\t\t\tthis.dayGrid.renderDates();\r\n\r\n\t\t\t// have the day-grid extend it's coordinate area over the <hr> dividing the two grids\r\n\t\t\tthis.dayGrid.bottomCoordPadding = this.dayGrid.el.next('hr').outerHeight();\r\n\t\t}\r\n\r\n\t\tthis.noScrollRowEls = this.el.find('.fc-row:not(.fc-scroller *)'); // fake rows not within the scroller\r\n\t},\r\n\r\n\r\n\t// render the day-of-week headers\r\n\trenderHead: function() {\r\n\t\tthis.headContainerEl =\r\n\t\t\tthis.el.find('.fc-head-container')\r\n\t\t\t\t.html(this.timeGrid.renderHeadHtml());\r\n\t},\r\n\r\n\r\n\t// Unrenders the content of the view. Since we haven't separated skeleton rendering from date rendering,\r\n\t// always completely kill each grid's rendering.\r\n\tunrenderDates: function() {\r\n\t\tthis.timeGrid.unrenderDates();\r\n\t\tthis.timeGrid.removeElement();\r\n\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.unrenderDates();\r\n\t\t\tthis.dayGrid.removeElement();\r\n\t\t}\r\n\r\n\t\tthis.scroller.destroy();\r\n\t},\r\n\r\n\r\n\t// Builds the HTML skeleton for the view.\r\n\t// The day-grid and time-grid components will render inside containers defined by this HTML.\r\n\trenderSkeletonHtml: function() {\r\n\t\treturn '' +\r\n\t\t\t'<table>' +\r\n\t\t\t\t'<thead class=\"fc-head\">' +\r\n\t\t\t\t\t'<tr>' +\r\n\t\t\t\t\t\t'<td class=\"fc-head-container ' + this.widgetHeaderClass + '\"></td>' +\r\n\t\t\t\t\t'</tr>' +\r\n\t\t\t\t'</thead>' +\r\n\t\t\t\t'<tbody class=\"fc-body\">' +\r\n\t\t\t\t\t'<tr>' +\r\n\t\t\t\t\t\t'<td class=\"' + this.widgetContentClass + '\">' +\r\n\t\t\t\t\t\t\t(this.dayGrid ?\r\n\t\t\t\t\t\t\t\t'<div class=\"fc-day-grid\"/>' +\r\n\t\t\t\t\t\t\t\t'<hr class=\"fc-divider ' + this.widgetHeaderClass + '\"/>' :\r\n\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t'</td>' +\r\n\t\t\t\t\t'</tr>' +\r\n\t\t\t\t'</tbody>' +\r\n\t\t\t'</table>';\r\n\t},\r\n\r\n\r\n\t// Generates an HTML attribute string for setting the width of the axis, if it is known\r\n\taxisStyleAttr: function() {\r\n\t\tif (this.axisWidth !== null) {\r\n\t\t\t return 'style=\"width:' + this.axisWidth + 'px\"';\r\n\t\t}\r\n\t\treturn '';\r\n\t},\r\n\r\n\r\n\t/* Business Hours\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\trenderBusinessHours: function() {\r\n\t\tthis.timeGrid.renderBusinessHours();\r\n\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.renderBusinessHours();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tunrenderBusinessHours: function() {\r\n\t\tthis.timeGrid.unrenderBusinessHours();\r\n\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.unrenderBusinessHours();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Now Indicator\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tgetNowIndicatorUnit: function() {\r\n\t\treturn this.timeGrid.getNowIndicatorUnit();\r\n\t},\r\n\r\n\r\n\trenderNowIndicator: function(date) {\r\n\t\tthis.timeGrid.renderNowIndicator(date);\r\n\t},\r\n\r\n\r\n\tunrenderNowIndicator: function() {\r\n\t\tthis.timeGrid.unrenderNowIndicator();\r\n\t},\r\n\r\n\r\n\t/* Dimensions\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\tupdateSize: function(isResize) {\r\n\t\tthis.timeGrid.updateSize(isResize);\r\n\r\n\t\tView.prototype.updateSize.call(this, isResize); // call the super-method\r\n\t},\r\n\r\n\r\n\t// Refreshes the horizontal dimensions of the view\r\n\tupdateWidth: function() {\r\n\t\t// make all axis cells line up, and record the width so newly created axis cells will have it\r\n\t\tthis.axisWidth = matchCellWidths(this.el.find('.fc-axis'));\r\n\t},\r\n\r\n\r\n\t// Adjusts the vertical dimensions of the view to the specified values\r\n\tsetHeight: function(totalHeight, isAuto) {\r\n\t\tvar eventLimit;\r\n\t\tvar scrollerHeight;\r\n\t\tvar scrollbarWidths;\r\n\r\n\t\t// reset all dimensions back to the original state\r\n\t\tthis.bottomRuleEl.hide(); // .show() will be called later if this <hr> is necessary\r\n\t\tthis.scroller.clear(); // sets height to 'auto' and clears overflow\r\n\t\tuncompensateScroll(this.noScrollRowEls);\r\n\r\n\t\t// limit number of events in the all-day area\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\r\n\r\n\t\t\teventLimit = this.opt('eventLimit');\r\n\t\t\tif (eventLimit && typeof eventLimit !== 'number') {\r\n\t\t\t\teventLimit = AGENDA_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\r\n\t\t\t}\r\n\t\t\tif (eventLimit) {\r\n\t\t\t\tthis.dayGrid.limitRows(eventLimit);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\r\n\r\n\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\r\n\t\t\tthis.scroller.setHeight(scrollerHeight);\r\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\r\n\r\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\r\n\r\n\t\t\t\t// make the all-day and header rows lines up\r\n\t\t\t\tcompensateScroll(this.noScrollRowEls, scrollbarWidths);\r\n\r\n\t\t\t\t// the scrollbar compensation might have changed text flow, which might affect height, so recalculate\r\n\t\t\t\t// and reapply the desired height to the scroller.\r\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\r\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\r\n\t\t\t}\r\n\r\n\t\t\t// guarantees the same scrollbar widths\r\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\r\n\r\n\t\t\t// if there's any space below the slats, show the horizontal rule.\r\n\t\t\t// this won't cause any new overflow, because lockOverflow already called.\r\n\t\t\tif (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\r\n\t\t\t\tthis.bottomRuleEl.show();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// given a desired total height of the view, returns what the height of the scroller should be\r\n\tcomputeScrollerHeight: function(totalHeight) {\r\n\t\treturn totalHeight -\r\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\r\n\t},\r\n\r\n\r\n\t/* Scroll\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Computes the initial pre-configured scroll state prior to allowing the user to change it\r\n\tcomputeInitialScroll: function() {\r\n\t\tvar scrollTime = moment.duration(this.opt('scrollTime'));\r\n\t\tvar top = this.timeGrid.computeTimeTop(scrollTime);\r\n\r\n\t\t// zoom can give weird floating-point values. rather scroll a little bit further\r\n\t\ttop = Math.ceil(top);\r\n\r\n\t\tif (top) {\r\n\t\t\ttop++; // to overcome top border that slots beyond the first have. looks better\r\n\t\t}\r\n\r\n\t\treturn top;\r\n\t},\r\n\r\n\r\n\tqueryScroll: function() {\r\n\t\treturn this.scroller.getScrollTop();\r\n\t},\r\n\r\n\r\n\tsetScroll: function(top) {\r\n\t\tthis.scroller.setScrollTop(top);\r\n\t},\r\n\r\n\r\n\t/* Hit Areas\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\t// forward all hit-related method calls to the grids (dayGrid might not be defined)\r\n\r\n\r\n\tprepareHits: function() {\r\n\t\tthis.timeGrid.prepareHits();\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.prepareHits();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\treleaseHits: function() {\r\n\t\tthis.timeGrid.releaseHits();\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.releaseHits();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tqueryHit: function(left, top) {\r\n\t\tvar hit = this.timeGrid.queryHit(left, top);\r\n\r\n\t\tif (!hit && this.dayGrid) {\r\n\t\t\thit = this.dayGrid.queryHit(left, top);\r\n\t\t}\r\n\r\n\t\treturn hit;\r\n\t},\r\n\r\n\r\n\tgetHitSpan: function(hit) {\r\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\r\n\t\treturn hit.component.getHitSpan(hit);\r\n\t},\r\n\r\n\r\n\tgetHitEl: function(hit) {\r\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\r\n\t\treturn hit.component.getHitEl(hit);\r\n\t},\r\n\r\n\r\n\t/* Events\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders events onto the view and populates the View's segment array\r\n\trenderEvents: function(events) {\r\n\t\tvar dayEvents = [];\r\n\t\tvar timedEvents = [];\r\n\t\tvar daySegs = [];\r\n\t\tvar timedSegs;\r\n\t\tvar i;\r\n\r\n\t\t// separate the events into all-day and timed\r\n\t\tfor (i = 0; i < events.length; i++) {\r\n\t\t\tif (events[i].allDay) {\r\n\t\t\t\tdayEvents.push(events[i]);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttimedEvents.push(events[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// render the events in the subcomponents\r\n\t\ttimedSegs = this.timeGrid.renderEvents(timedEvents);\r\n\t\tif (this.dayGrid) {\r\n\t\t\tdaySegs = this.dayGrid.renderEvents(dayEvents);\r\n\t\t}\r\n\r\n\t\t// the all-day area is flexible and might have a lot of events, so shift the height\r\n\t\tthis.updateHeight();\r\n\t},\r\n\r\n\r\n\t// Retrieves all segment objects that are rendered in the view\r\n\tgetEventSegs: function() {\r\n\t\treturn this.timeGrid.getEventSegs().concat(\r\n\t\t\tthis.dayGrid ? this.dayGrid.getEventSegs() : []\r\n\t\t);\r\n\t},\r\n\r\n\r\n\t// Unrenders all event elements and clears internal segment data\r\n\tunrenderEvents: function() {\r\n\r\n\t\t// unrender the events in the subcomponents\r\n\t\tthis.timeGrid.unrenderEvents();\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.unrenderEvents();\r\n\t\t}\r\n\r\n\t\t// we DON'T need to call updateHeight() because\r\n\t\t// a renderEvents() call always happens after this, which will eventually call updateHeight()\r\n\t},\r\n\r\n\r\n\t/* Dragging (for events and external elements)\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\r\n\trenderDrag: function(dropLocation, seg) {\r\n\t\tif (dropLocation.start.hasTime()) {\r\n\t\t\treturn this.timeGrid.renderDrag(dropLocation, seg);\r\n\t\t}\r\n\t\telse if (this.dayGrid) {\r\n\t\t\treturn this.dayGrid.renderDrag(dropLocation, seg);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tunrenderDrag: function() {\r\n\t\tthis.timeGrid.unrenderDrag();\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.unrenderDrag();\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* Selection\r\n\t------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n\t// Renders a visual indication of a selection\r\n\trenderSelection: function(span) {\r\n\t\tif (span.start.hasTime() || span.end.hasTime()) {\r\n\t\t\tthis.timeGrid.renderSelection(span);\r\n\t\t}\r\n\t\telse if (this.dayGrid) {\r\n\t\t\tthis.dayGrid.renderSelection(span);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Unrenders a visual indications of a selection\r\n\tunrenderSelection: function() {\r\n\t\tthis.timeGrid.unrenderSelection();\r\n\t\tif (this.dayGrid) {\r\n\t\t\tthis.dayGrid.unrenderSelection();\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n\r\n// Methods that will customize the rendering behavior of the AgendaView's timeGrid\r\n// TODO: move into TimeGrid\r\nvar agendaTimeGridMethods = {\r\n\r\n\r\n\t// Generates the HTML that will go before the day-of week header cells\r\n\trenderHeadIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\t\tvar weekText;\r\n\r\n\t\tif (view.opt('weekNumbers')) {\r\n\t\t\tweekText = this.start.format(view.opt('smallWeekFormat'));\r\n\r\n\t\t\treturn '' +\r\n\t\t\t\t'<th class=\"fc-axis fc-week-number ' + view.widgetHeaderClass + '\" ' + view.axisStyleAttr() + '>' +\r\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\r\n\t\t\t\t\t\t{ date: this.start, type: 'week', forceOff: this.colCnt > 1 },\r\n\t\t\t\t\t\thtmlEscape(weekText) // inner HTML\r\n\t\t\t\t\t) +\r\n\t\t\t\t'</th>';\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn '<th class=\"fc-axis ' + view.widgetHeaderClass + '\" ' + view.axisStyleAttr() + '></th>';\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\r\n\trenderBgIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn '<td class=\"fc-axis ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '></td>';\r\n\t},\r\n\r\n\r\n\t// Generates the HTML that goes before all other types of cells.\r\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\r\n\trenderIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Methods that will customize the rendering behavior of the AgendaView's dayGrid\r\nvar agendaDayGridMethods = {\r\n\r\n\r\n\t// Generates the HTML that goes before the all-day cells\r\n\trenderBgIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn '' +\r\n\t\t\t'<td class=\"fc-axis ' + view.widgetContentClass + '\" ' + view.axisStyleAttr() + '>' +\r\n\t\t\t\t'<span>' + // needed for matchCellWidths\r\n\t\t\t\t\tview.getAllDayHtml() +\r\n\t\t\t\t'</span>' +\r\n\t\t\t'</td>';\r\n\t},\r\n\r\n\r\n\t// Generates the HTML that goes before all other types of cells.\r\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\r\n\trenderIntroHtml: function() {\r\n\t\tvar view = this.view;\r\n\r\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\r\n\t}\r\n\r\n};\r\n\r\n;;\r\n\r\nvar AGENDA_ALL_DAY_EVENT_LIMIT = 5;\r\n\r\n// potential nice values for the slot-duration and interval-duration\r\n// from largest to smallest\r\nvar AGENDA_STOCK_SUB_DURATIONS = [\r\n\t{ hours: 1 },\r\n\t{ minutes: 30 },\r\n\t{ minutes: 15 },\r\n\t{ seconds: 30 },\r\n\t{ seconds: 15 }\r\n];\r\n\r\nfcViews.agenda = {\r\n\t'class': AgendaView,\r\n\tdefaults: {\r\n\t\tallDaySlot: true,\r\n\t\tslotDuration: '00:30:00',\r\n\t\tminTime: '00:00:00',\r\n\t\tmaxTime: '24:00:00',\r\n\t\tslotEventOverlap: true // a bad name. confused with overlap/constraint system\r\n\t}\r\n};\r\n\r\nfcViews.agendaDay = {\r\n\ttype: 'agenda',\r\n\tduration: { days: 1 }\r\n};\r\n\r\nfcViews.agendaWeek = {\r\n\ttype: 'agenda',\r\n\tduration: { weeks: 1 }\r\n};\r\n;;\r\n\r\n/*\r\nResponsible for the scroller, and forwarding event-related actions into the \"grid\"\r\n*/\r\nvar ListView = View.extend({\r\n\r\n\tgrid: null,\r\n\tscroller: null,\r\n\r\n\tinitialize: function() {\r\n\t\tthis.grid = new ListViewGrid(this);\r\n\t\tthis.scroller = new Scroller({\r\n\t\t\toverflowX: 'hidden',\r\n\t\t\toverflowY: 'auto'\r\n\t\t});\r\n\t},\r\n\r\n\tsetRange: function(range) {\r\n\t\tView.prototype.setRange.call(this, range); // super\r\n\r\n\t\tthis.grid.setRange(range); // needs to process range-related options\r\n\t},\r\n\r\n\trenderSkeleton: function() {\r\n\t\tthis.el.addClass(\r\n\t\t\t'fc-list-view ' +\r\n\t\t\tthis.widgetContentClass\r\n\t\t);\r\n\r\n\t\tthis.scroller.render();\r\n\t\tthis.scroller.el.appendTo(this.el);\r\n\r\n\t\tthis.grid.setElement(this.scroller.scrollEl);\r\n\t},\r\n\r\n\tunrenderSkeleton: function() {\r\n\t\tthis.scroller.destroy(); // will remove the Grid too\r\n\t},\r\n\r\n\tsetHeight: function(totalHeight, isAuto) {\r\n\t\tthis.scroller.setHeight(this.computeScrollerHeight(totalHeight));\r\n\t},\r\n\r\n\tcomputeScrollerHeight: function(totalHeight) {\r\n\t\treturn totalHeight -\r\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\r\n\t},\r\n\r\n\trenderEvents: function(events) {\r\n\t\tthis.grid.renderEvents(events);\r\n\t},\r\n\r\n\tunrenderEvents: function() {\r\n\t\tthis.grid.unrenderEvents();\r\n\t},\r\n\r\n\tisEventResizable: function(event) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tisEventDraggable: function(event) {\r\n\t\treturn false;\r\n\t}\r\n\r\n});\r\n\r\n/*\r\nResponsible for event rendering and user-interaction.\r\nIts \"el\" is the inner-content of the above view's scroller.\r\n*/\r\nvar ListViewGrid = Grid.extend({\r\n\r\n\tsegSelector: '.fc-list-item', // which elements accept event actions\r\n\thasDayInteractions: false, // no day selection or day clicking\r\n\r\n\t// slices by day\r\n\tspanToSegs: function(span) {\r\n\t\tvar view = this.view;\r\n\t\tvar dayStart = view.start.clone().time(0); // timed, so segs get times!\r\n\t\tvar dayIndex = 0;\r\n\t\tvar seg;\r\n\t\tvar segs = [];\r\n\r\n\t\twhile (dayStart < view.end) {\r\n\r\n\t\t\tseg = intersectRanges(span, {\r\n\t\t\t\tstart: dayStart,\r\n\t\t\t\tend: dayStart.clone().add(1, 'day')\r\n\t\t\t});\r\n\r\n\t\t\tif (seg) {\r\n\t\t\t\tseg.dayIndex = dayIndex;\r\n\t\t\t\tsegs.push(seg);\r\n\t\t\t}\r\n\r\n\t\t\tdayStart.add(1, 'day');\r\n\t\t\tdayIndex++;\r\n\r\n\t\t\t// detect when span won't go fully into the next day,\r\n\t\t\t// and mutate the latest seg to the be the end.\r\n\t\t\tif (\r\n\t\t\t\tseg && !seg.isEnd && span.end.hasTime() &&\r\n\t\t\t\tspan.end < dayStart.clone().add(this.view.nextDayThreshold)\r\n\t\t\t) {\r\n\t\t\t\tseg.end = span.end.clone();\r\n\t\t\t\tseg.isEnd = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\t// like \"4:00am\"\r\n\tcomputeEventTimeFormat: function() {\r\n\t\treturn this.view.opt('mediumTimeFormat');\r\n\t},\r\n\r\n\t// for events with a url, the whole <tr> should be clickable,\r\n\t// but it's impossible to wrap with an <a> tag. simulate this.\r\n\thandleSegClick: function(seg, ev) {\r\n\t\tvar url;\r\n\r\n\t\tGrid.prototype.handleSegClick.apply(this, arguments); // super. might prevent the default action\r\n\r\n\t\t// not clicking on or within an <a> with an href\r\n\t\tif (!$(ev.target).closest('a[href]').length) {\r\n\t\t\turl = seg.event.url;\r\n\t\t\tif (url && !ev.isDefaultPrevented()) { // jsEvent not cancelled in handler\r\n\t\t\t\twindow.location.href = url; // simulate link click\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// returns list of foreground segs that were actually rendered\r\n\trenderFgSegs: function(segs) {\r\n\t\tsegs = this.renderFgSegEls(segs); // might filter away hidden events\r\n\r\n\t\tif (!segs.length) {\r\n\t\t\tthis.renderEmptyMessage();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.renderSegList(segs);\r\n\t\t}\r\n\r\n\t\treturn segs;\r\n\t},\r\n\r\n\trenderEmptyMessage: function() {\r\n\t\tthis.el.html(\r\n\t\t\t'<div class=\"fc-list-empty-wrap2\">' + // TODO: try less wraps\r\n\t\t\t'<div class=\"fc-list-empty-wrap1\">' +\r\n\t\t\t'<div class=\"fc-list-empty\">' +\r\n\t\t\t\thtmlEscape(this.view.opt('noEventsMessage')) +\r\n\t\t\t'</div>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'</div>'\r\n\t\t);\r\n\t},\r\n\r\n\t// render the event segments in the view\r\n\trenderSegList: function(allSegs) {\r\n\t\tvar segsByDay = this.groupSegsByDay(allSegs); // sparse array\r\n\t\tvar dayIndex;\r\n\t\tvar daySegs;\r\n\t\tvar i;\r\n\t\tvar tableEl = $('<table class=\"fc-list-table\"><tbody/></table>');\r\n\t\tvar tbodyEl = tableEl.find('tbody');\r\n\r\n\t\tfor (dayIndex = 0; dayIndex < segsByDay.length; dayIndex++) {\r\n\t\t\tdaySegs = segsByDay[dayIndex];\r\n\t\t\tif (daySegs) { // sparse array, so might be undefined\r\n\r\n\t\t\t\t// append a day header\r\n\t\t\t\ttbodyEl.append(this.dayHeaderHtml(\r\n\t\t\t\t\tthis.view.start.clone().add(dayIndex, 'days')\r\n\t\t\t\t));\r\n\r\n\t\t\t\tthis.sortEventSegs(daySegs);\r\n\r\n\t\t\t\tfor (i = 0; i < daySegs.length; i++) {\r\n\t\t\t\t\ttbodyEl.append(daySegs[i].el); // append event row\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.el.empty().append(tableEl);\r\n\t},\r\n\r\n\t// Returns a sparse array of arrays, segs grouped by their dayIndex\r\n\tgroupSegsByDay: function(segs) {\r\n\t\tvar segsByDay = []; // sparse array\r\n\t\tvar i, seg;\r\n\r\n\t\tfor (i = 0; i < segs.length; i++) {\r\n\t\t\tseg = segs[i];\r\n\t\t\t(segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\r\n\t\t\t\t.push(seg);\r\n\t\t}\r\n\r\n\t\treturn segsByDay;\r\n\t},\r\n\r\n\t// generates the HTML for the day headers that live amongst the event rows\r\n\tdayHeaderHtml: function(dayDate) {\r\n\t\tvar view = this.view;\r\n\t\tvar mainFormat = view.opt('listDayFormat');\r\n\t\tvar altFormat = view.opt('listDayAltFormat');\r\n\r\n\t\treturn '<tr class=\"fc-list-heading\" data-date=\"' + dayDate.format('YYYY-MM-DD') + '\">' +\r\n\t\t\t'<td class=\"' + view.widgetHeaderClass + '\" colspan=\"3\">' +\r\n\t\t\t\t(mainFormat ?\r\n\t\t\t\t\tview.buildGotoAnchorHtml(\r\n\t\t\t\t\t\tdayDate,\r\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-main' },\r\n\t\t\t\t\t\thtmlEscape(dayDate.format(mainFormat)) // inner HTML\r\n\t\t\t\t\t) :\r\n\t\t\t\t\t'') +\r\n\t\t\t\t(altFormat ?\r\n\t\t\t\t\tview.buildGotoAnchorHtml(\r\n\t\t\t\t\t\tdayDate,\r\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-alt' },\r\n\t\t\t\t\t\thtmlEscape(dayDate.format(altFormat)) // inner HTML\r\n\t\t\t\t\t) :\r\n\t\t\t\t\t'') +\r\n\t\t\t'</td>' +\r\n\t\t'</tr>';\r\n\t},\r\n\r\n\t// generates the HTML for a single event row\r\n\tfgSegHtml: function(seg) {\r\n\t\tvar view = this.view;\r\n\t\tvar classes = [ 'fc-list-item' ].concat(this.getSegCustomClasses(seg));\r\n\t\tvar bgColor = this.getSegBackgroundColor(seg);\r\n\t\tvar event = seg.event;\r\n\t\tvar url = event.url;\r\n\t\tvar timeHtml;\r\n\r\n\t\tif (event.allDay) {\r\n\t\t\ttimeHtml = view.getAllDayHtml();\r\n\t\t}\r\n\t\telse if (view.isMultiDayEvent(event)) { // if the event appears to span more than one day\r\n\t\t\tif (seg.isStart || seg.isEnd) { // outer segment that probably lasts part of the day\r\n\t\t\t\ttimeHtml = htmlEscape(this.getEventTimeText(seg));\r\n\t\t\t}\r\n\t\t\telse { // inner segment that lasts the whole day\r\n\t\t\t\ttimeHtml = view.getAllDayHtml();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Display the normal time text for the *event's* times\r\n\t\t\ttimeHtml = htmlEscape(this.getEventTimeText(event));\r\n\t\t}\r\n\r\n\t\tif (url) {\r\n\t\t\tclasses.push('fc-has-url');\r\n\t\t}\r\n\r\n\t\treturn '<tr class=\"' + classes.join(' ') + '\">' +\r\n\t\t\t(this.displayEventTime ?\r\n\t\t\t\t'<td class=\"fc-list-item-time ' + view.widgetContentClass + '\">' +\r\n\t\t\t\t\t(timeHtml || '') +\r\n\t\t\t\t'</td>' :\r\n\t\t\t\t'') +\r\n\t\t\t'<td class=\"fc-list-item-marker ' + view.widgetContentClass + '\">' +\r\n\t\t\t\t'<span class=\"fc-event-dot\"' +\r\n\t\t\t\t(bgColor ?\r\n\t\t\t\t\t' style=\"background-color:' + bgColor + '\"' :\r\n\t\t\t\t\t'') +\r\n\t\t\t\t'></span>' +\r\n\t\t\t'</td>' +\r\n\t\t\t'<td class=\"fc-list-item-title ' + view.widgetContentClass + '\">' +\r\n\t\t\t\t'<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\r\n\t\t\t\t\thtmlEscape(seg.event.title || '') +\r\n\t\t\t\t'</a>' +\r\n\t\t\t'</td>' +\r\n\t\t'</tr>';\r\n\t}\r\n\r\n});\r\n\r\n;;\r\n\r\nfcViews.list = {\r\n\t'class': ListView,\r\n\tbuttonTextKey: 'list', // what to lookup in locale files\r\n\tdefaults: {\r\n\t\tbuttonText: 'list', // text to display for English\r\n\t\tlistDayFormat: 'LL', // like \"January 1, 2016\"\r\n\t\tnoEventsMessage: 'No events to display'\r\n\t}\r\n};\r\n\r\nfcViews.listDay = {\r\n\ttype: 'list',\r\n\tduration: { days: 1 },\r\n\tdefaults: {\r\n\t\tlistDayFormat: 'dddd' // day-of-week is all we need. full date is probably in header\r\n\t}\r\n};\r\n\r\nfcViews.listWeek = {\r\n\ttype: 'list',\r\n\tduration: { weeks: 1 },\r\n\tdefaults: {\r\n\t\tlistDayFormat: 'dddd', // day-of-week is more important\r\n\t\tlistDayAltFormat: 'LL'\r\n\t}\r\n};\r\n\r\nfcViews.listMonth = {\r\n\ttype: 'list',\r\n\tduration: { month: 1 },\r\n\tdefaults: {\r\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\r\n\t}\r\n};\r\n\r\nfcViews.listYear = {\r\n\ttype: 'list',\r\n\tduration: { year: 1 },\r\n\tdefaults: {\r\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\r\n\t}\r\n};\r\n\r\n;;\r\n\r\nreturn FC; // export for Node/CommonJS\r\n});"]}